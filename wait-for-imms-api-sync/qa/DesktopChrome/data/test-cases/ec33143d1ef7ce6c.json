{"uid":"ec33143d1ef7ce6c","name":"test_create_edit_delete_injected_flu_vaccination_and_verify_imms_api","fullName":"tests.test_imms_api_flu#test_create_edit_delete_injected_flu_vaccination_and_verify_imms_api","historyId":"fcb8d2291937c8d402b3973f6e01e069","time":{"start":1761226605894,"stop":1761226683523,"duration":77629},"description":"\nTest: Create, edit, and delete an injected flu vaccination record and verify changes\nin the IMMS API and Mavis status.\nSteps:\n1. Setup: Schedule flu session, import class list, add vaccine batch, and\n   register child with verbal consent.\n2. Create: Record flu vaccination for the child (LEFT_ARM_UPPER).\n3. Verify: Check the vaccination record exists in the IMMS API.\n   Check Mavis shows \"Synced\".\n4. Edit: Change the delivery site to RIGHT_ARM_LOWER and save.\n5. Verify: Check the updated vaccination record in the IMMS API.\n   Check Mavis still shows \"Synced\".\n6. Edit: Change the outcome to \"They refused it\" and save.\n7. Verify: Check the vaccination record is removed from the IMMS API.\n   Check Mavis shows \"Not synced\".\n","descriptionHtml":"<p>Test: Create, edit, and delete an injected flu vaccination record and verify changes<br />\nin the IMMS API and Mavis status.<br />\nSteps:</p>\n<ol>\n<li>Setup: Schedule flu session, import class list, add vaccine batch, and<br />\nregister child with verbal consent.</li>\n<li>Create: Record flu vaccination for the child (LEFT_ARM_UPPER).</li>\n<li>Verify: Check the vaccination record exists in the IMMS API.<br />\nCheck Mavis shows &quot;Synced&quot;.</li>\n<li>Edit: Change the delivery site to RIGHT_ARM_LOWER and save.</li>\n<li>Verify: Check the updated vaccination record in the IMMS API.<br />\nCheck Mavis still shows &quot;Synced&quot;.</li>\n<li>Edit: Change the outcome to &quot;They refused it&quot; and save.</li>\n<li>Verify: Check the vaccination record is removed from the IMMS API.<br />\nCheck Mavis shows &quot;Not synced&quot;.</li>\n</ol>\n","status":"failed","statusMessage":"AssertionError: No immunization record found","statusTrace":"record_flu_with_consent_option = <function record_flu_with_consent_option.<locals>._factory at 0x7fba22e1b740>\nschools = {'HPV': [School(name='Ellen House Secondary', urn='150669', site=None), School(name='Rugby High School', urn='136595',...: [School(name='Idsall School', urn='140922', site=None), School(name=\"St Michael's School\", urn='116594', site=None)]}\nimms_api_helper = <mavis.test.imms_api.ImmsApiHelper object at 0x7fba236796a0>\nsessions_page = <mavis.test.pages.sessions.SessionsPage object at 0x7fba2367a120>\nprogrammes_page = <mavis.test.pages.programmes.ProgrammesPage object at 0x7fba23153d90>\nchildren_page = <mavis.test.pages.children.ChildrenPage object at 0x7fba22b52570>\n\n    def test_create_edit_delete_injected_flu_vaccination_and_verify_imms_api(\n        record_flu_with_consent_option,\n        schools,\n        imms_api_helper,\n        sessions_page,\n        programmes_page,\n        children_page,\n    ):\n        \"\"\"\n        Test: Create, edit, and delete an injected flu vaccination record and verify changes\n        in the IMMS API and Mavis status.\n        Steps:\n        1. Setup: Schedule flu session, import class list, add vaccine batch, and\n           register child with verbal consent.\n        2. Create: Record flu vaccination for the child (LEFT_ARM_UPPER).\n        3. Verify: Check the vaccination record exists in the IMMS API.\n           Check Mavis shows \"Synced\".\n        4. Edit: Change the delivery site to RIGHT_ARM_LOWER and save.\n        5. Verify: Check the updated vaccination record in the IMMS API.\n           Check Mavis still shows \"Synced\".\n        6. Edit: Change the outcome to \"They refused it\" and save.\n        7. Verify: Check the vaccination record is removed from the IMMS API.\n           Check Mavis shows \"Not synced\".\n        \"\"\"\n        child, vaccination_time = record_flu_with_consent_option(ConsentOption.INJECTION)\n        school = schools[Programme.FLU][0]\n    \n        # Step 3: Verify creation in IMMS API\n>       imms_api_helper.check_record_in_imms_api(\n            Vaccine.SEQUIRUS,\n            child,\n            school,\n            DeliverySite.LEFT_ARM_UPPER,\n            vaccination_time,\n        )\n\ntests/test_imms_api_flu.py:131: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmavis/test/imms_api.py:95: in check_record_in_imms_api\n    self.check_expected_and_actual_records_match(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mavis.test.imms_api.ImmsApiHelper object at 0x7fba236796a0>\nexpected_record = ImmsApiVaccinationRecord(patient_nhs_number='9158391568', vaccine_code='43207411000001105', delivery_site=<DeliverySit...', vaccination_time=datetime.datetime(2025, 10, 23, 14, 36, 54, 675115, tzinfo=zoneinfo.ZoneInfo(key='Europe/London')))\nactual_record = None\n\n    def check_expected_and_actual_records_match(\n        self,\n        expected_record: ImmsApiVaccinationRecord,\n        actual_record: ImmsApiVaccinationRecord | None,\n    ) -> None:\n        if actual_record is None:\n            msg = \"No immunization record found\"\n>           raise AssertionError(msg)\nE           AssertionError: No immunization record found\n\nmavis/test/imms_api.py:114: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"base_url","time":{"start":1761226058831,"stop":1761226058831,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_session_faker","time":{"start":1761226058831,"stop":1761226058833,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1761226058831,"stop":1761226058831,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"onboarding","time":{"start":1761226058834,"stop":1761226084765,"duration":25931},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"year_groups","time":{"start":1761226058834,"stop":1761226058834,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1761226058834,"stop":1761226058834,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"programmes_enabled","time":{"start":1761226058834,"stop":1761226058834,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1761226058834,"stop":1761226058834,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests","time":{"start":1761226084765,"stop":1761226084765,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"team","time":{"start":1761226084765,"stop":1761226084765,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"nurse","time":{"start":1761226084765,"stop":1761226084765,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1761226084765,"stop":1761226084765,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1761226084766,"stop":1761226085079,"duration":313},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1761226085079,"stop":1761226085079,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1761226085079,"stop":1761226085080,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1761226085080,"stop":1761226085080,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1761226085080,"stop":1761226085182,"duration":102},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1761226085080,"stop":1761226085080,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1761226085182,"stop":1761226085183,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1761226085183,"stop":1761226085184,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_credentials","time":{"start":1761226085185,"stop":1761226085185,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_token","time":{"start":1761226085185,"stop":1761226085185,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1761226085185,"stop":1761226085185,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clinics","time":{"start":1761226176519,"stop":1761226176519,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"schools","time":{"start":1761226176519,"stop":1761226176519,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"organisation","time":{"start":1761226176519,"stop":1761226176519,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"authenticate_api","time":{"start":1761226573514,"stop":1761226574418,"duration":904},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"imms_api_helper","time":{"start":1761226574418,"stop":1761226574418,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"reset_before_each_module","time":{"start":1761226574418,"stop":1761226575251,"duration":833},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1761226575251,"stop":1761226575251,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1761226575251,"stop":1761226575251,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1761226575252,"stop":1761226575257,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1761226575252,"stop":1761226575252,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1761226575257,"stop":1761226575281,"duration":24},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_feature_flags","time":{"start":1761226575281,"stop":1761226575281,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_page","time":{"start":1761226575281,"stop":1761226575281,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_as_nurse","time":{"start":1761226575281,"stop":1761226576843,"duration":1562},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1761226575281,"stop":1761226576115,"duration":834},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1761226575281,"stop":1761226576115,"duration":834},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Log in as User(username='sophiedavis@example.com', password='sophiedavis@example.com', role='nurse') and choose team Team(name='Smith, Holmes and Lloyd est. 1601', workgroup='Y591Q', careplus_venue_code='Y591Q', email='qforster@example.org', phone='07700 900285')","time":{"start":1761226576116,"stop":1761226576843,"duration":727},"status":"passed","steps":[{"name":"Log in as {1} and choose team {2}","time":{"start":1761226576116,"stop":1761226576843,"duration":727},"status":"passed","steps":[{"name":"Log in as User(username='sophiedavis@example.com', password='sophiedavis@example.com', role='nurse')","time":{"start":1761226576116,"stop":1761226576810,"duration":694},"status":"passed","steps":[{"name":"Log in as {1}","time":{"start":1761226576116,"stop":1761226576809,"duration":693},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='sophiedavis@example.com', password='sophiedavis@example.com', role='nurse'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='sophiedavis@example.com', password='sophiedavis@example.com', role='nurse'), Team(name='Smith, Holmes and Lloyd est. 1601', workgroup='Y591Q', careplus_venue_code='Y591Q', email='qforster@example.org', phone='07700 900285'))"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"flipper_page","time":{"start":1761226575281,"stop":1761226575281,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"add_batch_page","time":{"start":1761226576843,"stop":1761226576844,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"children","time":{"start":1761226576844,"stop":1761226576847,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"dashboard_page","time":{"start":1761226576844,"stop":1761226576844,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"vaccines_page","time":{"start":1761226576844,"stop":1761226576844,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"add_vaccine_batch","time":{"start":1761226576844,"stop":1761226576844,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_data","time":{"start":1761226576847,"stop":1761226576849,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"import_records_page","time":{"start":1761226576849,"stop":1761226576849,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_recording_flu","time":{"start":1761226576849,"stop":1761226605893,"duration":29044},"status":"passed","steps":[{"name":"Go to vaccines page","time":{"start":1761226576850,"stop":1761226577029,"duration":179},"status":"passed","steps":[{"name":"Go to vaccines page","time":{"start":1761226576850,"stop":1761226577029,"duration":179},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Add batch for 'Cell-based Trivalent Influenza Vaccine Seqirus'","time":{"start":1761226577029,"stop":1761226577234,"duration":205},"status":"passed","steps":[{"name":"Add batch for {1}","time":{"start":1761226577029,"stop":1761226577234,"duration":205},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Vaccine.SEQUIRUS: 'Cell-based Trivalent Influenza Vaccine Seqirus'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fill in name with 'ABC123'","time":{"start":1761226577234,"stop":1761226577255,"duration":21},"status":"passed","steps":[{"name":"Fill in name with {1}","time":{"start":1761226577234,"stop":1761226577255,"duration":21},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('ABC123',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fill in expiry date with datetime.date(2025, 10, 24)","time":{"start":1761226577255,"stop":1761226577280,"duration":25},"status":"passed","steps":[{"name":"Fill in expiry date with {1}","time":{"start":1761226577255,"stop":1761226577280,"duration":25},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(datetime.date(2025, 10, 24),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Confirm add batch","time":{"start":1761226577280,"stop":1761226577641,"duration":361},"status":"passed","steps":[{"name":"Confirm add batch","time":{"start":1761226577280,"stop":1761226577641,"duration":361},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Go to vaccines page","time":{"start":1761226577641,"stop":1761226577811,"duration":170},"status":"passed","steps":[{"name":"Go to vaccines page","time":{"start":1761226577641,"stop":1761226577811,"duration":170},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Add batch for 'Fluenz'","time":{"start":1761226577811,"stop":1761226578001,"duration":190},"status":"passed","steps":[{"name":"Add batch for {1}","time":{"start":1761226577811,"stop":1761226578001,"duration":190},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Vaccine.FLUENZ: 'Fluenz'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fill in name with 'ABC123'","time":{"start":1761226578001,"stop":1761226578021,"duration":20},"status":"passed","steps":[{"name":"Fill in name with {1}","time":{"start":1761226578001,"stop":1761226578021,"duration":20},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('ABC123',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fill in expiry date with datetime.date(2025, 10, 24)","time":{"start":1761226578021,"stop":1761226578043,"duration":22},"status":"passed","steps":[{"name":"Fill in expiry date with {1}","time":{"start":1761226578021,"stop":1761226578043,"duration":22},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(datetime.date(2025, 10, 24),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Confirm add batch","time":{"start":1761226578043,"stop":1761226578375,"duration":332},"status":"passed","steps":[{"name":"Confirm add batch","time":{"start":1761226578043,"stop":1761226578375,"duration":332},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761226578375,"stop":1761226578552,"duration":177},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761226578375,"stop":1761226578552,"duration":177},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761226578552,"stop":1761226578799,"duration":247},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761226578552,"stop":1761226578799,"duration":247},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'flu' session at School(name='Idsall School', urn='140922', site=None)","time":{"start":1761226578800,"stop":1761226579329,"duration":529},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1761226578800,"stop":1761226579329,"duration":529},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='Idsall School', urn='140922', site=None), <Programme.FLU: 'flu'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Go to Edit session page","time":{"start":1761226579335,"stop":1761226580614,"duration":1279},"status":"passed","steps":[{"name":"Go to Edit session page","time":{"start":1761226579335,"stop":1761226580614,"duration":1279},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Go to Change session dates page","time":{"start":1761226580614,"stop":1761226580814,"duration":200},"status":"passed","steps":[{"name":"Go to Change session dates page","time":{"start":1761226580614,"stop":1761226580814,"duration":200},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fill date fields with '20251023'","time":{"start":1761226580837,"stop":1761226580872,"duration":35},"status":"passed","steps":[{"name":"Fill date fields with {1}","time":{"start":1761226580837,"stop":1761226580872,"duration":35},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('20251023',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Continue","time":{"start":1761226580872,"stop":1761226581185,"duration":313},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1761226580872,"stop":1761226581185,"duration":313},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Save changes","time":{"start":1761226581209,"stop":1761226581744,"duration":535},"status":"passed","steps":[{"name":"Click Save changes","time":{"start":1761226581209,"stop":1761226581744,"duration":535},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Import class lists","time":{"start":1761226581744,"stop":1761226582035,"duration":291},"status":"passed","steps":[{"name":"Click on Import class lists","time":{"start":1761226581744,"stop":1761226582035,"duration":291},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761226582086,"stop":1761226582516,"duration":430},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761226582087,"stop":1761226582516,"duration":429},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Set input file to PosixPath('working/ClassFileMapping.FIXED_CHILD20251023143622.csv')","time":{"start":1761226582526,"stop":1761226582547,"duration":21},"status":"passed","steps":[{"name":"Set input file to {1}","time":{"start":1761226582526,"stop":1761226582547,"duration":21},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(PosixPath('working/ClassFileMapping.FIXED_CHILD20251023143622.csv'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761226583547,"stop":1761226583841,"duration":294},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761226583547,"stop":1761226583841,"duration":294},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"_coverage","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click link with uploaded datetime","time":{"start":1761226583871,"stop":1761226584025,"duration":154},"status":"passed","steps":[{"name":"Click link with uploaded datetime","time":{"start":1761226583871,"stop":1761226584025,"duration":154},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761226604741,"stop":1761226604902,"duration":161},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761226604741,"stop":1761226604902,"duration":161},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761226604902,"stop":1761226605105,"duration":203},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761226604902,"stop":1761226605105,"duration":203},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'flu' session at School(name='Idsall School', urn='140922', site=None)","time":{"start":1761226605105,"stop":1761226605669,"duration":564},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1761226605105,"stop":1761226605669,"duration":564},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='Idsall School', urn='140922', site=None), <Programme.FLU: 'flu'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Consent tab","time":{"start":1761226605669,"stop":1761226605893,"duration":224},"status":"passed","steps":[{"name":"Click on Consent tab","time":{"start":1761226605669,"stop":1761226605893,"duration":224},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":54,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"sessions_page","time":{"start":1761226576849,"stop":1761226576849,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"record_flu_with_consent_option","time":{"start":1761226605893,"stop":1761226605894,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"verbal_consent_page","time":{"start":1761226605893,"stop":1761226605893,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"children_page","time":{"start":1761226605893,"stop":1761226605893,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"programmes_page","time":{"start":1761226605894,"stop":1761226605894,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\nTest: Create, edit, and delete an injected flu vaccination record and verify changes\nin the IMMS API and Mavis status.\nSteps:\n1. Setup: Schedule flu session, import class list, add vaccine batch, and\n   register child with verbal consent.\n2. Create: Record flu vaccination for the child (LEFT_ARM_UPPER).\n3. Verify: Check the vaccination record exists in the IMMS API.\n   Check Mavis shows \"Synced\".\n4. Edit: Change the delivery site to RIGHT_ARM_LOWER and save.\n5. Verify: Check the updated vaccination record in the IMMS API.\n   Check Mavis still shows \"Synced\".\n6. Edit: Change the outcome to \"They refused it\" and save.\n7. Verify: Check the vaccination record is removed from the IMMS API.\n   Check Mavis shows \"Not synced\".\n","status":"failed","statusMessage":"AssertionError: No immunization record found","statusTrace":"record_flu_with_consent_option = <function record_flu_with_consent_option.<locals>._factory at 0x7fba22e1b740>\nschools = {'HPV': [School(name='Ellen House Secondary', urn='150669', site=None), School(name='Rugby High School', urn='136595',...: [School(name='Idsall School', urn='140922', site=None), School(name=\"St Michael's School\", urn='116594', site=None)]}\nimms_api_helper = <mavis.test.imms_api.ImmsApiHelper object at 0x7fba236796a0>\nsessions_page = <mavis.test.pages.sessions.SessionsPage object at 0x7fba2367a120>\nprogrammes_page = <mavis.test.pages.programmes.ProgrammesPage object at 0x7fba23153d90>\nchildren_page = <mavis.test.pages.children.ChildrenPage object at 0x7fba22b52570>\n\n    def test_create_edit_delete_injected_flu_vaccination_and_verify_imms_api(\n        record_flu_with_consent_option,\n        schools,\n        imms_api_helper,\n        sessions_page,\n        programmes_page,\n        children_page,\n    ):\n        \"\"\"\n        Test: Create, edit, and delete an injected flu vaccination record and verify changes\n        in the IMMS API and Mavis status.\n        Steps:\n        1. Setup: Schedule flu session, import class list, add vaccine batch, and\n           register child with verbal consent.\n        2. Create: Record flu vaccination for the child (LEFT_ARM_UPPER).\n        3. Verify: Check the vaccination record exists in the IMMS API.\n           Check Mavis shows \"Synced\".\n        4. Edit: Change the delivery site to RIGHT_ARM_LOWER and save.\n        5. Verify: Check the updated vaccination record in the IMMS API.\n           Check Mavis still shows \"Synced\".\n        6. Edit: Change the outcome to \"They refused it\" and save.\n        7. Verify: Check the vaccination record is removed from the IMMS API.\n           Check Mavis shows \"Not synced\".\n        \"\"\"\n        child, vaccination_time = record_flu_with_consent_option(ConsentOption.INJECTION)\n        school = schools[Programme.FLU][0]\n    \n        # Step 3: Verify creation in IMMS API\n>       imms_api_helper.check_record_in_imms_api(\n            Vaccine.SEQUIRUS,\n            child,\n            school,\n            DeliverySite.LEFT_ARM_UPPER,\n            vaccination_time,\n        )\n\ntests/test_imms_api_flu.py:131: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmavis/test/imms_api.py:95: in check_record_in_imms_api\n    self.check_expected_and_actual_records_match(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mavis.test.imms_api.ImmsApiHelper object at 0x7fba236796a0>\nexpected_record = ImmsApiVaccinationRecord(patient_nhs_number='9158391568', vaccine_code='43207411000001105', delivery_site=<DeliverySit...', vaccination_time=datetime.datetime(2025, 10, 23, 14, 36, 54, 675115, tzinfo=zoneinfo.ZoneInfo(key='Europe/London')))\nactual_record = None\n\n    def check_expected_and_actual_records_match(\n        self,\n        expected_record: ImmsApiVaccinationRecord,\n        actual_record: ImmsApiVaccinationRecord | None,\n    ) -> None:\n        if actual_record is None:\n            msg = \"No immunization record found\"\n>           raise AssertionError(msg)\nE           AssertionError: No immunization record found\n\nmavis/test/imms_api.py:114: AssertionError","steps":[{"name":"Click on child Child(first_name='Leanne', last_name='RICHARDS', nhs_number='9158391568', address=('Flat 5', 'Emily place', 'Port Connorview', 'TN16 2HF'), date_of_birth=datetime.date(2011, 7, 29), year_group=10, parents=(Parent(full_name='Frank Black', relationship='Dad', email_address='rwilson@example.com'), Parent(full_name='Alice Walsh', relationship='Mum', email_address='jenkinsvanessa@example.net')))","time":{"start":1761226606128,"stop":1761226606387,"duration":259},"status":"passed","steps":[{"name":"Click on child {1}","time":{"start":1761226606128,"stop":1761226606387,"duration":259},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(Child(first_name='Leanne', last_name='RICHARDS', nhs_number='9158391568', address=('Flat 5', 'Emily place', 'Port Connorview', 'TN16 2HF'), date_of_birth=datetime.date(2011, 7, 29), year_group=10, parents=(Parent(full_name='Frank Black', relationship='Dad', email_address='rwilson@example.com'), Parent(full_name='Alice Walsh', relationship='Mum', email_address='jenkinsvanessa@example.net'))),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'flu' tab","time":{"start":1761226606388,"stop":1761226606403,"duration":15},"status":"passed","steps":[{"name":"Click on {1} tab","time":{"start":1761226606388,"stop":1761226606403,"duration":15},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Programme.FLU: 'flu'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Record a new consent response","time":{"start":1761226606403,"stop":1761226607841,"duration":1438},"status":"passed","steps":[{"name":"Click on Record a new consent response","time":{"start":1761226606403,"stop":1761226607841,"duration":1438},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'Frank Black (Dad)' radio button","time":{"start":1761226607841,"stop":1761226607885,"duration":44},"status":"passed","steps":[{"name":"Click on {1} radio button","time":{"start":1761226607841,"stop":1761226607885,"duration":44},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('Frank Black (Dad)',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761226607886,"stop":1761226608244,"duration":358},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761226607886,"stop":1761226608244,"duration":358},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761226608244,"stop":1761226608578,"duration":334},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761226608244,"stop":1761226608578,"duration":334},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select consent method","time":{"start":1761226608579,"stop":1761226608635,"duration":56},"status":"passed","steps":[{"name":"Select consent method","time":{"start":1761226608579,"stop":1761226608635,"duration":56},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<ConsentMethod.IN_PERSON: 'In person'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761226608635,"stop":1761226608944,"duration":309},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761226608635,"stop":1761226608944,"duration":309},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Yes, for the injected vaccine only","time":{"start":1761226608944,"stop":1761226609002,"duration":58},"status":"passed","steps":[{"name":"Click on Yes, for the injected vaccine only","time":{"start":1761226608944,"stop":1761226609002,"duration":58},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761226609002,"stop":1761226609337,"duration":335},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761226609002,"stop":1761226609337,"duration":335},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Does your child have a bleeding disorder or are they taking anticoagulant therapy?'","time":{"start":1761226609337,"stop":1761226609385,"duration":48},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1761226609337,"stop":1761226609385,"duration":48},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.BLEEDING_DISORDER_FLU: 'Does your child have a bleeding disorder or are they taking anticoagulant therapy?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Has your child had a severe allergic reaction (anaphylaxis) to a previous dose of the injected flu vaccine, or any ingredient of the vaccine?'","time":{"start":1761226609385,"stop":1761226609418,"duration":33},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1761226609385,"stop":1761226609418,"duration":33},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.SEVERE_ALLERGIC_REACTION_INJECTED: 'Has your child had a severe allergic reaction (anaphylaxis) to a previous dose of the injected flu vaccine, or any ingredient of the vaccine?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Does your child have any other medical conditions the immunisation team should be aware of?'","time":{"start":1761226609418,"stop":1761226609454,"duration":36},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1761226609418,"stop":1761226609454,"duration":36},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.MEDICAL_CONDITIONS_FLU: 'Does your child have any other medical conditions the immunisation team should be aware of?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Has your child had a flu vaccination in the last 3 months?'","time":{"start":1761226609454,"stop":1761226609485,"duration":31},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1761226609454,"stop":1761226609485,"duration":31},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.FLU_PREVIOUSLY: 'Has your child had a flu vaccination in the last 3 months?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Does your child need extra support during vaccination sessions?'","time":{"start":1761226609485,"stop":1761226609519,"duration":34},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1761226609485,"stop":1761226609518,"duration":33},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.EXTRA_SUPPORT: 'Does your child need extra support during vaccination sessions?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761226609519,"stop":1761226609883,"duration":364},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761226609519,"stop":1761226609883,"duration":364},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Confirm","time":{"start":1761226609883,"stop":1761226610625,"duration":742},"status":"passed","steps":[{"name":"Click Confirm","time":{"start":1761226609883,"stop":1761226610625,"duration":742},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Register tab","time":{"start":1761226610625,"stop":1761226610902,"duration":277},"status":"passed","steps":[{"name":"Click on Register tab","time":{"start":1761226610625,"stop":1761226610902,"duration":277},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Search for 'RICHARDS, Leanne'","time":{"start":1761226610902,"stop":1761226611113,"duration":211},"status":"passed","steps":[{"name":"Search for {1}","time":{"start":1761226610902,"stop":1761226611113,"duration":211},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('RICHARDS, Leanne',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Attending","time":{"start":1761226611113,"stop":1761226611855,"duration":742},"status":"passed","steps":[{"name":"Click on Attending","time":{"start":1761226611113,"stop":1761226611855,"duration":742},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Record vaccinations","time":{"start":1761226611855,"stop":1761226612108,"duration":253},"status":"passed","steps":[{"name":"Click on Record vaccinations","time":{"start":1761226611855,"stop":1761226612108,"duration":253},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Search for 'RICHARDS, Leanne'","time":{"start":1761226612108,"stop":1761226612375,"duration":267},"status":"passed","steps":[{"name":"Search for {1}","time":{"start":1761226612109,"stop":1761226612375,"duration":266},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('RICHARDS, Leanne',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'flu' tab","time":{"start":1761226612622,"stop":1761226612641,"duration":19},"status":"passed","steps":[{"name":"Click on {1} tab","time":{"start":1761226612622,"stop":1761226612641,"duration":19},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Programme.FLU: 'flu'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Confirm pre-screening checks are true","time":{"start":1761226612641,"stop":1761226612685,"duration":44},"status":"passed","steps":[{"name":"Confirm pre-screening checks are true","time":{"start":1761226612641,"stop":1761226612685,"duration":44},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Programme.FLU: 'flu'>, <ConsentOption.INJECTION: 'Injection'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Yes","time":{"start":1761226612692,"stop":1761226612699,"duration":7},"status":"passed","steps":[{"name":"Click on Yes","time":{"start":1761226612692,"stop":1761226612699,"duration":7},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(Child(first_name='Leanne', last_name='RICHARDS', nhs_number='9158391568', address=('Flat 5', 'Emily place', 'Port Connorview', 'TN16 2HF'), date_of_birth=datetime.date(2011, 7, 29), year_group=10, parents=(Parent(full_name='Frank Black', relationship='Dad', email_address='rwilson@example.com'), Parent(full_name='Alice Walsh', relationship='Mum', email_address='jenkinsvanessa@example.net'))),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Yes","time":{"start":1761226612700,"stop":1761226612735,"duration":35},"status":"passed","steps":[{"name":"Click on Yes","time":{"start":1761226612700,"stop":1761226612735,"duration":35},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<ConsentOption.INJECTION: 'Injection'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select vaccination site 'Left arm (upper position)'","time":{"start":1761226612736,"stop":1761226612768,"duration":32},"status":"passed","steps":[{"name":"Select vaccination site {1}","time":{"start":1761226612736,"stop":1761226612768,"duration":32},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<DeliverySite.LEFT_ARM_UPPER: 'Left arm (upper position)'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Continue","time":{"start":1761226612768,"stop":1761226613168,"duration":400},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1761226612768,"stop":1761226613168,"duration":400},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Choose batch 'ABC123'","time":{"start":1761226613169,"stop":1761226613588,"duration":419},"status":"passed","steps":[{"name":"Choose batch {1}","time":{"start":1761226613169,"stop":1761226613588,"duration":419},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1761226613219,"stop":1761226613588,"duration":369},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1761226613219,"stop":1761226613588,"duration":369},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('ABC123',)"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Confirm","time":{"start":1761226613615,"stop":1761226614653,"duration":1038},"status":"passed","steps":[{"name":"Click on Confirm","time":{"start":1761226613615,"stop":1761226614653,"duration":1038},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":62,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"setup_recording_flu::0","time":{"start":1761226683529,"stop":1761226684586,"duration":1057},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1761226683529,"stop":1761226683841,"duration":312},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1761226683529,"stop":1761226683841,"duration":312},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761226683841,"stop":1761226684007,"duration":166},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761226683841,"stop":1761226684007,"duration":166},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761226684007,"stop":1761226684231,"duration":224},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761226684007,"stop":1761226684231,"duration":224},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"log_in_as_nurse::0","time":{"start":1761226684589,"stop":1761226685007,"duration":418},"status":"passed","steps":[{"name":"Log out","time":{"start":1761226684589,"stop":1761226685007,"duration":418},"status":"passed","steps":[{"name":"Log out","time":{"start":1761226684589,"stop":1761226685007,"duration":418},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"set_feature_flags::0","time":{"start":1761226685008,"stop":1761226685008,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context::0","time":{"start":1761226685008,"stop":1761226685018,"duration":10},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1761226685018,"stop":1761226685018,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1761226973497,"stop":1761226973497,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1761226973498,"stop":1761226973522,"duration":24},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1761226973523,"stop":1761226973533,"duration":10},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests::0","time":{"start":1761226973534,"stop":1761226974450,"duration":916},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_imms_api_flu"},{"name":"host","value":"runnervmwhb2z"},{"name":"thread","value":"2238-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_imms_api_flu"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":[]},"source":"ec33143d1ef7ce6c.json","parameterValues":[]}