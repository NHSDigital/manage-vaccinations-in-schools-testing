{"uid":"a0939eefd8061554","name":"test_editing_session_programmes","fullName":"tests.test_sessions#test_editing_session_programmes","historyId":"12685cf04bc7a6371c53a3e8e694486b","time":{"start":1761033151843,"stop":1761033158212,"duration":6369},"description":"\nTest: Edit the programmes of an existing session and verify changes.\nSteps:\n1. Open a session with a fixed child.\n2. Edit the session to change its programmes.\n3. Save changes and verify the updated programmes are reflected.\n4. Verify the Flu tab appears for a child in the session.\nVerification:\n- Session programmes are updated correctly without errors.\n","descriptionHtml":"<p>Test: Edit the programmes of an existing session and verify changes.<br />\nSteps:</p>\n<ol>\n<li>Open a session with a fixed child.</li>\n<li>Edit the session to change its programmes.</li>\n<li>Save changes and verify the updated programmes are reflected.</li>\n<li>Verify the Flu tab appears for a child in the session.<br />\nVerification:</li>\n</ol>\n<ul>\n<li>Session programmes are updated correctly without errors.</li>\n</ul>\n","status":"failed","statusMessage":"AssertionError: Locator expected to be visible\nActual value: <element(s) not found> \nCall log:\n  - Expect \"to_be_visible\" with timeout 5000ms\n  - waiting for get_by_role(\"heading\", name=\"flu\")","statusTrace":"setup_fixed_child = None\nsessions_page = <mavis.test.pages.sessions.SessionsPage object at 0x7fe9ef42cad0>\nchildren = {'HPV': [Child(first_name='Roger', last_name='JONES', nhs_number='9245117316', address=('Studio 93m', 'Owen plains', '...enrichards@example.org'), Parent(full_name='Brenda Begum', relationship='Mum', email_address='julia63@example.com')))]}\n\n    def test_editing_session_programmes(setup_fixed_child, sessions_page, children):\n        \"\"\"\n        Test: Edit the programmes of an existing session and verify changes.\n        Steps:\n        1. Open a session with a fixed child.\n        2. Edit the session to change its programmes.\n        3. Save changes and verify the updated programmes are reflected.\n        4. Verify the Flu tab appears for a child in the session.\n        Verification:\n        - Session programmes are updated correctly without errors.\n        \"\"\"\n        child = children[Programme.HPV][0]\n    \n        sessions_page.click_edit_session()\n        sessions_page.click_change_programmes()\n        sessions_page.add_programme(Programme.FLU)\n        sessions_page.click_continue_button()\n        sessions_page.expect_details(\"Programmes\", \"Flu HPV\")\n        sessions_page.click_save_changes()\n        sessions_page.page.pause()\n>       sessions_page.expect_session_to_have_programmes([Programme.FLU, Programme.HPV])\n\ntests/test_sessions.py:397: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mavis.test.pages.sessions.SessionsPage object at 0x7fe9ef42cad0>\nprogrammes = [<Programme.FLU: 'flu'>, <Programme.HPV: 'HPV'>]\n\n    def expect_session_to_have_programmes(self, programmes: list[Programme]) -> None:\n        for programme in programmes:\n>           expect(self.page.get_by_role(\"heading\", name=programme)).to_be_visible()\nE           AssertionError: Locator expected to be visible\nE           Actual value: <element(s) not found> \nE           Call log:\nE             - Expect \"to_be_visible\" with timeout 5000ms\nE             - waiting for get_by_role(\"heading\", name=\"flu\")\n\nmavis/test/pages/sessions.py:418: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1761032617631,"stop":1761032617633,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1761032617631,"stop":1761032617631,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1761032617631,"stop":1761032617631,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1761032617633,"stop":1761032617633,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"programmes_enabled","time":{"start":1761032617633,"stop":1761032617633,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"year_groups","time":{"start":1761032617633,"stop":1761032617633,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1761032617633,"stop":1761032617633,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"onboarding","time":{"start":1761032617633,"stop":1761032638435,"duration":20802},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"team","time":{"start":1761032638435,"stop":1761032638435,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1761032638436,"stop":1761032638821,"duration":385},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"nurse","time":{"start":1761032638436,"stop":1761032638436,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests","time":{"start":1761032638436,"stop":1761032638436,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1761032638436,"stop":1761032638436,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1761032638821,"stop":1761032638821,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1761032638821,"stop":1761032638821,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1761032638822,"stop":1761032638822,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1761032638822,"stop":1761032638822,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1761032638822,"stop":1761032638956,"duration":134},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1761032638956,"stop":1761032638957,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1761032638957,"stop":1761032638958,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_token","time":{"start":1761032638958,"stop":1761032638958,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1761032638958,"stop":1761032638958,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_credentials","time":{"start":1761032638958,"stop":1761032638958,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"reset_before_each_module","time":{"start":1761032726613,"stop":1761032727186,"duration":573},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clinics","time":{"start":1761032726613,"stop":1761032726613,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"schools","time":{"start":1761032726613,"stop":1761032726613,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"organisation","time":{"start":1761032726613,"stop":1761032726613,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1761033123832,"stop":1761033123832,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1761033123832,"stop":1761033123832,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1761033123832,"stop":1761033123832,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1761033123833,"stop":1761033123838,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1761033123838,"stop":1761033123867,"duration":29},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_as_nurse","time":{"start":1761033123867,"stop":1761033125834,"duration":1967},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1761033123867,"stop":1761033125145,"duration":1278},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1761033123867,"stop":1761033125145,"duration":1278},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Log in as User(username='carolynmoore@example.org', password='carolynmoore@example.org', role='nurse') and choose team Team(name='Matthews-West est. 1604', workgroup='G431J', careplus_venue_code='G431J', email='jonesdiane@example.org', phone='+447700900660')","time":{"start":1761033125145,"stop":1761033125834,"duration":689},"status":"passed","steps":[{"name":"Log in as {1} and choose team {2}","time":{"start":1761033125145,"stop":1761033125834,"duration":689},"status":"passed","steps":[{"name":"Log in as User(username='carolynmoore@example.org', password='carolynmoore@example.org', role='nurse')","time":{"start":1761033125145,"stop":1761033125806,"duration":661},"status":"passed","steps":[{"name":"Log in as {1}","time":{"start":1761033125145,"stop":1761033125806,"duration":661},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='carolynmoore@example.org', password='carolynmoore@example.org', role='nurse'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='carolynmoore@example.org', password='carolynmoore@example.org', role='nurse'), Team(name='Matthews-West est. 1604', workgroup='G431J', careplus_venue_code='G431J', email='jonesdiane@example.org', phone='+447700900660'))"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"set_feature_flags","time":{"start":1761033123867,"stop":1761033123867,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_page","time":{"start":1761033123867,"stop":1761033123867,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"flipper_page","time":{"start":1761033123867,"stop":1761033123867,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"dashboard_page","time":{"start":1761033125834,"stop":1761033125834,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_tests","time":{"start":1761033125834,"stop":1761033126117,"duration":283},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761033125834,"stop":1761033126117,"duration":283},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761033125834,"stop":1761033126117,"duration":283},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"children","time":{"start":1761033126117,"stop":1761033126123,"duration":6},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_data","time":{"start":1761033126123,"stop":1761033126125,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"sessions_page","time":{"start":1761033126125,"stop":1761033126126,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_fixed_child","time":{"start":1761033126126,"stop":1761033151842,"duration":25716},"status":"passed","steps":[{"name":"Click on 'HPV' session at School(name='Inscape House School', urn='134064', site=None)","time":{"start":1761033126126,"stop":1761033126676,"duration":550},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1761033126126,"stop":1761033126676,"duration":550},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='Inscape House School', urn='134064', site=None), <Programme.HPV: 'HPV'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Import class lists","time":{"start":1761033126681,"stop":1761033126971,"duration":290},"status":"passed","steps":[{"name":"Click on Import class lists","time":{"start":1761033126681,"stop":1761033126971,"duration":290},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761033127014,"stop":1761033127431,"duration":417},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761033127014,"stop":1761033127431,"duration":417},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Set input file to PosixPath('working/ClassFileMapping.FIXED_CHILD20251021085207.csv')","time":{"start":1761033127442,"stop":1761033127460,"duration":18},"status":"passed","steps":[{"name":"Set input file to {1}","time":{"start":1761033127442,"stop":1761033127460,"duration":18},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(PosixPath('working/ClassFileMapping.FIXED_CHILD20251021085207.csv'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761033128460,"stop":1761033128757,"duration":297},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761033128460,"stop":1761033128757,"duration":297},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"_coverage","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click link with uploaded datetime","time":{"start":1761033128795,"stop":1761033128971,"duration":176},"status":"passed","steps":[{"name":"Click link with uploaded datetime","time":{"start":1761033128795,"stop":1761033128971,"duration":176},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761033150960,"stop":1761033151133,"duration":173},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761033150960,"stop":1761033151133,"duration":173},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761033151133,"stop":1761033151334,"duration":201},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761033151133,"stop":1761033151334,"duration":201},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'HPV' session at School(name='Inscape House School', urn='134064', site=None)","time":{"start":1761033151334,"stop":1761033151842,"duration":508},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1761033151334,"stop":1761033151842,"duration":508},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='Inscape House School', urn='134064', site=None), <Programme.HPV: 'HPV'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":18,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"setup_session_with_file_upload","time":{"start":1761033126126,"stop":1761033126126,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"import_records_page","time":{"start":1761033126126,"stop":1761033126126,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\nTest: Edit the programmes of an existing session and verify changes.\nSteps:\n1. Open a session with a fixed child.\n2. Edit the session to change its programmes.\n3. Save changes and verify the updated programmes are reflected.\n4. Verify the Flu tab appears for a child in the session.\nVerification:\n- Session programmes are updated correctly without errors.\n","status":"failed","statusMessage":"AssertionError: Locator expected to be visible\nActual value: <element(s) not found> \nCall log:\n  - Expect \"to_be_visible\" with timeout 5000ms\n  - waiting for get_by_role(\"heading\", name=\"flu\")","statusTrace":"setup_fixed_child = None\nsessions_page = <mavis.test.pages.sessions.SessionsPage object at 0x7fe9ef42cad0>\nchildren = {'HPV': [Child(first_name='Roger', last_name='JONES', nhs_number='9245117316', address=('Studio 93m', 'Owen plains', '...enrichards@example.org'), Parent(full_name='Brenda Begum', relationship='Mum', email_address='julia63@example.com')))]}\n\n    def test_editing_session_programmes(setup_fixed_child, sessions_page, children):\n        \"\"\"\n        Test: Edit the programmes of an existing session and verify changes.\n        Steps:\n        1. Open a session with a fixed child.\n        2. Edit the session to change its programmes.\n        3. Save changes and verify the updated programmes are reflected.\n        4. Verify the Flu tab appears for a child in the session.\n        Verification:\n        - Session programmes are updated correctly without errors.\n        \"\"\"\n        child = children[Programme.HPV][0]\n    \n        sessions_page.click_edit_session()\n        sessions_page.click_change_programmes()\n        sessions_page.add_programme(Programme.FLU)\n        sessions_page.click_continue_button()\n        sessions_page.expect_details(\"Programmes\", \"Flu HPV\")\n        sessions_page.click_save_changes()\n        sessions_page.page.pause()\n>       sessions_page.expect_session_to_have_programmes([Programme.FLU, Programme.HPV])\n\ntests/test_sessions.py:397: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mavis.test.pages.sessions.SessionsPage object at 0x7fe9ef42cad0>\nprogrammes = [<Programme.FLU: 'flu'>, <Programme.HPV: 'HPV'>]\n\n    def expect_session_to_have_programmes(self, programmes: list[Programme]) -> None:\n        for programme in programmes:\n>           expect(self.page.get_by_role(\"heading\", name=programme)).to_be_visible()\nE           AssertionError: Locator expected to be visible\nE           Actual value: <element(s) not found> \nE           Call log:\nE             - Expect \"to_be_visible\" with timeout 5000ms\nE             - waiting for get_by_role(\"heading\", name=\"flu\")\n\nmavis/test/pages/sessions.py:418: AssertionError","steps":[{"name":"Click on Edit session","time":{"start":1761033151843,"stop":1761033152148,"duration":305},"status":"passed","steps":[{"name":"Click on Edit session","time":{"start":1761033151843,"stop":1761033152148,"duration":305},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Change programmes","time":{"start":1761033152149,"stop":1761033152338,"duration":189},"status":"passed","steps":[{"name":"Click on Change programmes","time":{"start":1761033152149,"stop":1761033152338,"duration":189},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Continue","time":{"start":1761033152379,"stop":1761033152696,"duration":317},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1761033152379,"stop":1761033152696,"duration":317},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Save changes","time":{"start":1761033152716,"stop":1761033153205,"duration":489},"status":"passed","steps":[{"name":"Click Save changes","time":{"start":1761033152716,"stop":1761033153205,"duration":489},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":8,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"setup_fixed_child::0","time":{"start":1761033158228,"stop":1761033159174,"duration":946},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1761033158228,"stop":1761033158370,"duration":142},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1761033158228,"stop":1761033158370,"duration":142},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761033158371,"stop":1761033158540,"duration":169},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761033158371,"stop":1761033158540,"duration":169},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761033158540,"stop":1761033158760,"duration":220},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761033158540,"stop":1761033158760,"duration":220},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"log_in_as_nurse::0","time":{"start":1761033159177,"stop":1761033159565,"duration":388},"status":"passed","steps":[{"name":"Log out","time":{"start":1761033159177,"stop":1761033159565,"duration":388},"status":"passed","steps":[{"name":"Log out","time":{"start":1761033159177,"stop":1761033159565,"duration":388},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"set_feature_flags::0","time":{"start":1761033159566,"stop":1761033159566,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context::0","time":{"start":1761033159566,"stop":1761033159575,"duration":9},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1761033159575,"stop":1761033159576,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1761033739576,"stop":1761033739576,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1761033739576,"stop":1761033739621,"duration":45},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1761033739624,"stop":1761033739635,"duration":11},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests::0","time":{"start":1761033739636,"stop":1761033740353,"duration":717},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"sessions"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_sessions"},{"name":"host","value":"runnervmwhb2z"},{"name":"thread","value":"2313-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_sessions"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["sessions"]},"source":"a0939eefd8061554.json","parameterValues":[]}