{"uid":"23d6ece718c36556","name":"test_create_edit_delete_injected_flu_vaccination_and_verify_imms_api","fullName":"tests.test_imms_api_flu#test_create_edit_delete_injected_flu_vaccination_and_verify_imms_api","historyId":"fcb8d2291937c8d402b3973f6e01e069","time":{"start":1761033251555,"stop":1761033332019,"duration":80464},"description":"\nTest: Create, edit, and delete an injected flu vaccination record and verify changes\nin the IMMS API and Mavis status.\nSteps:\n1. Setup: Schedule flu session, import class list, add vaccine batch, and\n   register child with verbal consent.\n2. Create: Record flu vaccination for the child (LEFT_ARM_UPPER).\n3. Verify: Check the vaccination record exists in the IMMS API.\n   Check Mavis shows \"Synced\".\n4. Edit: Change the delivery site to RIGHT_ARM_LOWER and save.\n5. Verify: Check the updated vaccination record in the IMMS API.\n   Check Mavis still shows \"Synced\".\n6. Edit: Change the outcome to \"They refused it\" and save.\n7. Verify: Check the vaccination record is removed from the IMMS API.\n   Check Mavis shows \"Not synced\".\n","descriptionHtml":"<p>Test: Create, edit, and delete an injected flu vaccination record and verify changes<br />\nin the IMMS API and Mavis status.<br />\nSteps:</p>\n<ol>\n<li>Setup: Schedule flu session, import class list, add vaccine batch, and<br />\nregister child with verbal consent.</li>\n<li>Create: Record flu vaccination for the child (LEFT_ARM_UPPER).</li>\n<li>Verify: Check the vaccination record exists in the IMMS API.<br />\nCheck Mavis shows &quot;Synced&quot;.</li>\n<li>Edit: Change the delivery site to RIGHT_ARM_LOWER and save.</li>\n<li>Verify: Check the updated vaccination record in the IMMS API.<br />\nCheck Mavis still shows &quot;Synced&quot;.</li>\n<li>Edit: Change the outcome to &quot;They refused it&quot; and save.</li>\n<li>Verify: Check the vaccination record is removed from the IMMS API.<br />\nCheck Mavis shows &quot;Not synced&quot;.</li>\n</ol>\n","status":"failed","statusMessage":"AssertionError: No immunization record found","statusTrace":"record_flu_with_consent_option = <function record_flu_with_consent_option.<locals>._factory at 0x7f756e3e8d50>\nschools = {'HPV': [School(name=\"St Benedict's School\", urn='101947', site=None), School(name='Hambleton/Richmondshire Pupil Refe...lvedere Academy', urn='135174', site=None), School(name='Gems Founders School, Dubai (Gfs)', urn='147338', site=None)]}\nimms_api_helper = <mavis.test.imms_api.ImmsApiHelper object at 0x7f75643712b0>\nsessions_page = <mavis.test.pages.sessions.SessionsPage object at 0x7f7564371d30>\nprogrammes_page = <mavis.test.pages.programmes.ProgrammesPage object at 0x7f755fb85150>\nchildren_page = <mavis.test.pages.children.ChildrenPage object at 0x7f755fbd5a30>\n\n    def test_create_edit_delete_injected_flu_vaccination_and_verify_imms_api(\n        record_flu_with_consent_option,\n        schools,\n        imms_api_helper,\n        sessions_page,\n        programmes_page,\n        children_page,\n    ):\n        \"\"\"\n        Test: Create, edit, and delete an injected flu vaccination record and verify changes\n        in the IMMS API and Mavis status.\n        Steps:\n        1. Setup: Schedule flu session, import class list, add vaccine batch, and\n           register child with verbal consent.\n        2. Create: Record flu vaccination for the child (LEFT_ARM_UPPER).\n        3. Verify: Check the vaccination record exists in the IMMS API.\n           Check Mavis shows \"Synced\".\n        4. Edit: Change the delivery site to RIGHT_ARM_LOWER and save.\n        5. Verify: Check the updated vaccination record in the IMMS API.\n           Check Mavis still shows \"Synced\".\n        6. Edit: Change the outcome to \"They refused it\" and save.\n        7. Verify: Check the vaccination record is removed from the IMMS API.\n           Check Mavis shows \"Not synced\".\n        \"\"\"\n        child, vaccination_time = record_flu_with_consent_option(ConsentOption.INJECTION)\n        school = schools[Programme.FLU][0]\n    \n        # Step 3: Verify creation in IMMS API\n>       imms_api_helper.check_record_in_imms_api(\n            Vaccine.SEQUIRUS,\n            child,\n            school,\n            DeliverySite.LEFT_ARM_UPPER,\n            vaccination_time,\n        )\n\ntests/test_imms_api_flu.py:131: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmavis/test/imms_api.py:95: in check_record_in_imms_api\n    self.check_expected_and_actual_records_match(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mavis.test.imms_api.ImmsApiHelper object at 0x7f75643712b0>\nexpected_record = ImmsApiVaccinationRecord(patient_nhs_number='9833244475', vaccine_code='43207411000001105', delivery_site=<DeliverySit...74', vaccination_time=datetime.datetime(2025, 10, 21, 8, 54, 20, 12785, tzinfo=zoneinfo.ZoneInfo(key='Europe/London')))\nactual_record = None\n\n    def check_expected_and_actual_records_match(\n        self,\n        expected_record: ImmsApiVaccinationRecord,\n        actual_record: ImmsApiVaccinationRecord | None,\n    ) -> None:\n        if actual_record is None:\n            msg = \"No immunization record found\"\n>           raise AssertionError(msg)\nE           AssertionError: No immunization record found\n\nmavis/test/imms_api.py:114: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_verify_url","time":{"start":1761032617631,"stop":1761032617631,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_session_faker","time":{"start":1761032617631,"stop":1761032617632,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1761032617631,"stop":1761032617631,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1761032617632,"stop":1761032617632,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1761032617632,"stop":1761032617632,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"programmes_enabled","time":{"start":1761032617633,"stop":1761032617633,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"onboarding","time":{"start":1761032617633,"stop":1761032632408,"duration":14775},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"year_groups","time":{"start":1761032617633,"stop":1761032617633,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"organisation","time":{"start":1761032632408,"stop":1761032632408,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1761032632408,"stop":1761032632408,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests","time":{"start":1761032632408,"stop":1761032632408,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"team","time":{"start":1761032632408,"stop":1761032632408,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"nurse","time":{"start":1761032632408,"stop":1761032632408,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1761032632408,"stop":1761032632711,"duration":303},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"schools","time":{"start":1761032632408,"stop":1761032632408,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clinics","time":{"start":1761032632408,"stop":1761032632408,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1761032632711,"stop":1761032632711,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1761032632711,"stop":1761032632712,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1761032632712,"stop":1761032632712,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1761032632712,"stop":1761032634132,"duration":1420},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1761032632712,"stop":1761032632712,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1761032634132,"stop":1761032634132,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1761032634132,"stop":1761032634134,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_credentials","time":{"start":1761032634134,"stop":1761032634134,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1761032634134,"stop":1761032634134,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_token","time":{"start":1761032634134,"stop":1761032634134,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"authenticate_api","time":{"start":1761033230692,"stop":1761033231681,"duration":989},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"imms_api_helper","time":{"start":1761033231681,"stop":1761033231681,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"reset_before_each_module","time":{"start":1761033231681,"stop":1761033232166,"duration":485},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1761033232167,"stop":1761033232167,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1761033232167,"stop":1761033232167,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1761033232167,"stop":1761033232167,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1761033232167,"stop":1761033232172,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1761033232172,"stop":1761033232196,"duration":24},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_page","time":{"start":1761033232196,"stop":1761033232196,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"flipper_page","time":{"start":1761033232196,"stop":1761033232196,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_feature_flags","time":{"start":1761033232196,"stop":1761033232196,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_as_nurse","time":{"start":1761033232196,"stop":1761033233773,"duration":1577},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1761033232196,"stop":1761033233089,"duration":893},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1761033232196,"stop":1761033233089,"duration":893},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Log in as User(username='geraldine43@example.net', password='geraldine43@example.net', role='nurse') and choose team Team(name='Clayton, Brennan and Phillips est. 1717', workgroup='A704M', careplus_venue_code='A704M', email='bruce90@example.com', phone='+44(0)7700 900604')","time":{"start":1761033233089,"stop":1761033233773,"duration":684},"status":"passed","steps":[{"name":"Log in as {1} and choose team {2}","time":{"start":1761033233089,"stop":1761033233773,"duration":684},"status":"passed","steps":[{"name":"Log in as User(username='geraldine43@example.net', password='geraldine43@example.net', role='nurse')","time":{"start":1761033233089,"stop":1761033233744,"duration":655},"status":"passed","steps":[{"name":"Log in as {1}","time":{"start":1761033233090,"stop":1761033233744,"duration":654},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='geraldine43@example.net', password='geraldine43@example.net', role='nurse'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='geraldine43@example.net', password='geraldine43@example.net', role='nurse'), Team(name='Clayton, Brennan and Phillips est. 1717', workgroup='A704M', careplus_venue_code='A704M', email='bruce90@example.com', phone='+44(0)7700 900604'))"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"vaccines_page","time":{"start":1761033233773,"stop":1761033233773,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"add_batch_page","time":{"start":1761033233773,"stop":1761033233773,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"dashboard_page","time":{"start":1761033233773,"stop":1761033233773,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"children","time":{"start":1761033233773,"stop":1761033233777,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"add_vaccine_batch","time":{"start":1761033233773,"stop":1761033233773,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_data","time":{"start":1761033233777,"stop":1761033233778,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_recording_flu","time":{"start":1761033233778,"stop":1761033251553,"duration":17775},"status":"passed","steps":[{"name":"Go to vaccines page","time":{"start":1761033233778,"stop":1761033233933,"duration":155},"status":"passed","steps":[{"name":"Go to vaccines page","time":{"start":1761033233778,"stop":1761033233933,"duration":155},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Add batch for 'Cell-based Trivalent Influenza Vaccine Seqirus'","time":{"start":1761033233934,"stop":1761033234103,"duration":169},"status":"passed","steps":[{"name":"Add batch for {1}","time":{"start":1761033233934,"stop":1761033234103,"duration":169},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Vaccine.SEQUIRUS: 'Cell-based Trivalent Influenza Vaccine Seqirus'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fill in name with 'ABC123'","time":{"start":1761033234103,"stop":1761033234126,"duration":23},"status":"passed","steps":[{"name":"Fill in name with {1}","time":{"start":1761033234103,"stop":1761033234126,"duration":23},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('ABC123',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fill in expiry date with datetime.date(2025, 10, 22)","time":{"start":1761033234126,"stop":1761033234149,"duration":23},"status":"passed","steps":[{"name":"Fill in expiry date with {1}","time":{"start":1761033234126,"stop":1761033234148,"duration":22},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(datetime.date(2025, 10, 22),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Confirm add batch","time":{"start":1761033234149,"stop":1761033234457,"duration":308},"status":"passed","steps":[{"name":"Confirm add batch","time":{"start":1761033234149,"stop":1761033234457,"duration":308},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Go to vaccines page","time":{"start":1761033234457,"stop":1761033234611,"duration":154},"status":"passed","steps":[{"name":"Go to vaccines page","time":{"start":1761033234457,"stop":1761033234611,"duration":154},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Add batch for 'Fluenz'","time":{"start":1761033234611,"stop":1761033234784,"duration":173},"status":"passed","steps":[{"name":"Add batch for {1}","time":{"start":1761033234611,"stop":1761033234784,"duration":173},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Vaccine.FLUENZ: 'Fluenz'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fill in name with 'ABC123'","time":{"start":1761033234784,"stop":1761033234806,"duration":22},"status":"passed","steps":[{"name":"Fill in name with {1}","time":{"start":1761033234784,"stop":1761033234806,"duration":22},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('ABC123',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fill in expiry date with datetime.date(2025, 10, 22)","time":{"start":1761033234806,"stop":1761033234830,"duration":24},"status":"passed","steps":[{"name":"Fill in expiry date with {1}","time":{"start":1761033234806,"stop":1761033234830,"duration":24},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(datetime.date(2025, 10, 22),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Confirm add batch","time":{"start":1761033234830,"stop":1761033235145,"duration":315},"status":"passed","steps":[{"name":"Confirm add batch","time":{"start":1761033234830,"stop":1761033235145,"duration":315},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761033235145,"stop":1761033235323,"duration":178},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761033235145,"stop":1761033235323,"duration":178},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761033235323,"stop":1761033235635,"duration":312},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761033235324,"stop":1761033235635,"duration":311},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'flu' session at School(name='The Belvedere Academy', urn='135174', site=None)","time":{"start":1761033235635,"stop":1761033236173,"duration":538},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1761033235635,"stop":1761033236173,"duration":538},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='The Belvedere Academy', urn='135174', site=None), <Programme.FLU: 'flu'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Go to Edit session page","time":{"start":1761033236178,"stop":1761033237471,"duration":1293},"status":"passed","steps":[{"name":"Go to Edit session page","time":{"start":1761033236178,"stop":1761033237471,"duration":1293},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Go to Change session dates page","time":{"start":1761033237471,"stop":1761033237670,"duration":199},"status":"passed","steps":[{"name":"Go to Change session dates page","time":{"start":1761033237471,"stop":1761033237670,"duration":199},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fill date fields with '20251021'","time":{"start":1761033237695,"stop":1761033237723,"duration":28},"status":"passed","steps":[{"name":"Fill date fields with {1}","time":{"start":1761033237695,"stop":1761033237723,"duration":28},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('20251021',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Continue","time":{"start":1761033237724,"stop":1761033238040,"duration":316},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1761033237724,"stop":1761033238040,"duration":316},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Save changes","time":{"start":1761033238065,"stop":1761033238521,"duration":456},"status":"passed","steps":[{"name":"Click Save changes","time":{"start":1761033238065,"stop":1761033238521,"duration":456},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Import class lists","time":{"start":1761033238521,"stop":1761033238834,"duration":313},"status":"passed","steps":[{"name":"Click on Import class lists","time":{"start":1761033238521,"stop":1761033238834,"duration":313},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761033238894,"stop":1761033239328,"duration":434},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761033238894,"stop":1761033239328,"duration":434},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Set input file to PosixPath('working/ClassFileMapping.FIXED_CHILD20251021085359.csv')","time":{"start":1761033239339,"stop":1761033239362,"duration":23},"status":"passed","steps":[{"name":"Set input file to {1}","time":{"start":1761033239339,"stop":1761033239362,"duration":23},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(PosixPath('working/ClassFileMapping.FIXED_CHILD20251021085359.csv'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761033240363,"stop":1761033240653,"duration":290},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761033240363,"stop":1761033240653,"duration":290},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"_coverage","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click link with uploaded datetime","time":{"start":1761033240679,"stop":1761033240857,"duration":178},"status":"passed","steps":[{"name":"Click link with uploaded datetime","time":{"start":1761033240679,"stop":1761033240857,"duration":178},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761033250413,"stop":1761033250588,"duration":175},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761033250413,"stop":1761033250588,"duration":175},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761033250588,"stop":1761033250798,"duration":210},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761033250588,"stop":1761033250798,"duration":210},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'flu' session at School(name='The Belvedere Academy', urn='135174', site=None)","time":{"start":1761033250799,"stop":1761033251328,"duration":529},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1761033250799,"stop":1761033251328,"duration":529},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='The Belvedere Academy', urn='135174', site=None), <Programme.FLU: 'flu'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Consent tab","time":{"start":1761033251328,"stop":1761033251553,"duration":225},"status":"passed","steps":[{"name":"Click on Consent tab","time":{"start":1761033251328,"stop":1761033251553,"duration":225},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":54,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"sessions_page","time":{"start":1761033233778,"stop":1761033233778,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"import_records_page","time":{"start":1761033233778,"stop":1761033233778,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"children_page","time":{"start":1761033251553,"stop":1761033251554,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"verbal_consent_page","time":{"start":1761033251554,"stop":1761033251554,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"programmes_page","time":{"start":1761033251554,"stop":1761033251554,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"record_flu_with_consent_option","time":{"start":1761033251554,"stop":1761033251554,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\nTest: Create, edit, and delete an injected flu vaccination record and verify changes\nin the IMMS API and Mavis status.\nSteps:\n1. Setup: Schedule flu session, import class list, add vaccine batch, and\n   register child with verbal consent.\n2. Create: Record flu vaccination for the child (LEFT_ARM_UPPER).\n3. Verify: Check the vaccination record exists in the IMMS API.\n   Check Mavis shows \"Synced\".\n4. Edit: Change the delivery site to RIGHT_ARM_LOWER and save.\n5. Verify: Check the updated vaccination record in the IMMS API.\n   Check Mavis still shows \"Synced\".\n6. Edit: Change the outcome to \"They refused it\" and save.\n7. Verify: Check the vaccination record is removed from the IMMS API.\n   Check Mavis shows \"Not synced\".\n","status":"failed","statusMessage":"AssertionError: No immunization record found","statusTrace":"record_flu_with_consent_option = <function record_flu_with_consent_option.<locals>._factory at 0x7f756e3e8d50>\nschools = {'HPV': [School(name=\"St Benedict's School\", urn='101947', site=None), School(name='Hambleton/Richmondshire Pupil Refe...lvedere Academy', urn='135174', site=None), School(name='Gems Founders School, Dubai (Gfs)', urn='147338', site=None)]}\nimms_api_helper = <mavis.test.imms_api.ImmsApiHelper object at 0x7f75643712b0>\nsessions_page = <mavis.test.pages.sessions.SessionsPage object at 0x7f7564371d30>\nprogrammes_page = <mavis.test.pages.programmes.ProgrammesPage object at 0x7f755fb85150>\nchildren_page = <mavis.test.pages.children.ChildrenPage object at 0x7f755fbd5a30>\n\n    def test_create_edit_delete_injected_flu_vaccination_and_verify_imms_api(\n        record_flu_with_consent_option,\n        schools,\n        imms_api_helper,\n        sessions_page,\n        programmes_page,\n        children_page,\n    ):\n        \"\"\"\n        Test: Create, edit, and delete an injected flu vaccination record and verify changes\n        in the IMMS API and Mavis status.\n        Steps:\n        1. Setup: Schedule flu session, import class list, add vaccine batch, and\n           register child with verbal consent.\n        2. Create: Record flu vaccination for the child (LEFT_ARM_UPPER).\n        3. Verify: Check the vaccination record exists in the IMMS API.\n           Check Mavis shows \"Synced\".\n        4. Edit: Change the delivery site to RIGHT_ARM_LOWER and save.\n        5. Verify: Check the updated vaccination record in the IMMS API.\n           Check Mavis still shows \"Synced\".\n        6. Edit: Change the outcome to \"They refused it\" and save.\n        7. Verify: Check the vaccination record is removed from the IMMS API.\n           Check Mavis shows \"Not synced\".\n        \"\"\"\n        child, vaccination_time = record_flu_with_consent_option(ConsentOption.INJECTION)\n        school = schools[Programme.FLU][0]\n    \n        # Step 3: Verify creation in IMMS API\n>       imms_api_helper.check_record_in_imms_api(\n            Vaccine.SEQUIRUS,\n            child,\n            school,\n            DeliverySite.LEFT_ARM_UPPER,\n            vaccination_time,\n        )\n\ntests/test_imms_api_flu.py:131: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmavis/test/imms_api.py:95: in check_record_in_imms_api\n    self.check_expected_and_actual_records_match(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mavis.test.imms_api.ImmsApiHelper object at 0x7f75643712b0>\nexpected_record = ImmsApiVaccinationRecord(patient_nhs_number='9833244475', vaccine_code='43207411000001105', delivery_site=<DeliverySit...74', vaccination_time=datetime.datetime(2025, 10, 21, 8, 54, 20, 12785, tzinfo=zoneinfo.ZoneInfo(key='Europe/London')))\nactual_record = None\n\n    def check_expected_and_actual_records_match(\n        self,\n        expected_record: ImmsApiVaccinationRecord,\n        actual_record: ImmsApiVaccinationRecord | None,\n    ) -> None:\n        if actual_record is None:\n            msg = \"No immunization record found\"\n>           raise AssertionError(msg)\nE           AssertionError: No immunization record found\n\nmavis/test/imms_api.py:114: AssertionError","steps":[{"name":"Click on child Child(first_name='Russell', last_name='SKINNER', nhs_number='9833244475', address=('Studio 1', 'Clifford motorway', 'Walshshire', 'SK5 6FG'), date_of_birth=datetime.date(2014, 6, 12), year_group=7, parents=(Parent(full_name='Peter Watson', relationship='Dad', email_address='lhenry@example.net'), Parent(full_name='Georgia Brookes-Price', relationship='Mum', email_address='martin31@example.org')))","time":{"start":1761033251782,"stop":1761033252028,"duration":246},"status":"passed","steps":[{"name":"Click on child {1}","time":{"start":1761033251782,"stop":1761033252028,"duration":246},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(Child(first_name='Russell', last_name='SKINNER', nhs_number='9833244475', address=('Studio 1', 'Clifford motorway', 'Walshshire', 'SK5 6FG'), date_of_birth=datetime.date(2014, 6, 12), year_group=7, parents=(Parent(full_name='Peter Watson', relationship='Dad', email_address='lhenry@example.net'), Parent(full_name='Georgia Brookes-Price', relationship='Mum', email_address='martin31@example.org'))),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'flu' tab","time":{"start":1761033252028,"stop":1761033252042,"duration":14},"status":"passed","steps":[{"name":"Click on {1} tab","time":{"start":1761033252028,"stop":1761033252042,"duration":14},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Programme.FLU: 'flu'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Record a new consent response","time":{"start":1761033252043,"stop":1761033253720,"duration":1677},"status":"passed","steps":[{"name":"Click on Record a new consent response","time":{"start":1761033252043,"stop":1761033253720,"duration":1677},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'Peter Watson (Dad)' radio button","time":{"start":1761033253720,"stop":1761033253776,"duration":56},"status":"passed","steps":[{"name":"Click on {1} radio button","time":{"start":1761033253721,"stop":1761033253776,"duration":55},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('Peter Watson (Dad)',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761033253776,"stop":1761033254103,"duration":327},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761033253776,"stop":1761033254103,"duration":327},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761033254103,"stop":1761033254445,"duration":342},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761033254103,"stop":1761033254445,"duration":342},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select consent method","time":{"start":1761033254445,"stop":1761033254492,"duration":47},"status":"passed","steps":[{"name":"Select consent method","time":{"start":1761033254445,"stop":1761033254492,"duration":47},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<ConsentMethod.IN_PERSON: 'In person'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761033254492,"stop":1761033254808,"duration":316},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761033254492,"stop":1761033254808,"duration":316},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Yes, for the injected vaccine only","time":{"start":1761033254808,"stop":1761033254865,"duration":57},"status":"passed","steps":[{"name":"Click on Yes, for the injected vaccine only","time":{"start":1761033254809,"stop":1761033254865,"duration":56},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761033254865,"stop":1761033255215,"duration":350},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761033254865,"stop":1761033255215,"duration":350},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Does your child have a bleeding disorder or are they taking anticoagulant therapy?'","time":{"start":1761033255215,"stop":1761033255276,"duration":61},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1761033255215,"stop":1761033255276,"duration":61},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.BLEEDING_DISORDER_FLU: 'Does your child have a bleeding disorder or are they taking anticoagulant therapy?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Has your child had a severe allergic reaction (anaphylaxis) to a previous dose of the injected flu vaccine, or any ingredient of the vaccine?'","time":{"start":1761033255276,"stop":1761033255311,"duration":35},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1761033255276,"stop":1761033255311,"duration":35},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.SEVERE_ALLERGIC_REACTION_INJECTED: 'Has your child had a severe allergic reaction (anaphylaxis) to a previous dose of the injected flu vaccine, or any ingredient of the vaccine?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Does your child have any other medical conditions the immunisation team should be aware of?'","time":{"start":1761033255311,"stop":1761033255342,"duration":31},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1761033255311,"stop":1761033255342,"duration":31},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.MEDICAL_CONDITIONS_FLU: 'Does your child have any other medical conditions the immunisation team should be aware of?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Has your child had a flu vaccination in the last 3 months?'","time":{"start":1761033255342,"stop":1761033255376,"duration":34},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1761033255342,"stop":1761033255376,"duration":34},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.FLU_PREVIOUSLY: 'Has your child had a flu vaccination in the last 3 months?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Does your child need extra support during vaccination sessions?'","time":{"start":1761033255376,"stop":1761033255409,"duration":33},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1761033255376,"stop":1761033255409,"duration":33},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.EXTRA_SUPPORT: 'Does your child need extra support during vaccination sessions?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761033255409,"stop":1761033255750,"duration":341},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761033255409,"stop":1761033255750,"duration":341},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Confirm","time":{"start":1761033255750,"stop":1761033256488,"duration":738},"status":"passed","steps":[{"name":"Click Confirm","time":{"start":1761033255750,"stop":1761033256488,"duration":738},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Register tab","time":{"start":1761033256488,"stop":1761033256748,"duration":260},"status":"passed","steps":[{"name":"Click on Register tab","time":{"start":1761033256488,"stop":1761033256748,"duration":260},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Search for 'SKINNER, Russell'","time":{"start":1761033256748,"stop":1761033256966,"duration":218},"status":"passed","steps":[{"name":"Search for {1}","time":{"start":1761033256748,"stop":1761033256966,"duration":218},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('SKINNER, Russell',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Attending","time":{"start":1761033256966,"stop":1761033257561,"duration":595},"status":"passed","steps":[{"name":"Click on Attending","time":{"start":1761033256966,"stop":1761033257561,"duration":595},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Record vaccinations","time":{"start":1761033257561,"stop":1761033257817,"duration":256},"status":"passed","steps":[{"name":"Click on Record vaccinations","time":{"start":1761033257561,"stop":1761033257817,"duration":256},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Search for 'SKINNER, Russell'","time":{"start":1761033257817,"stop":1761033258039,"duration":222},"status":"passed","steps":[{"name":"Search for {1}","time":{"start":1761033257817,"stop":1761033258039,"duration":222},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('SKINNER, Russell',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'flu' tab","time":{"start":1761033258277,"stop":1761033258301,"duration":24},"status":"passed","steps":[{"name":"Click on {1} tab","time":{"start":1761033258277,"stop":1761033258301,"duration":24},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Programme.FLU: 'flu'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Confirm pre-screening checks are true","time":{"start":1761033258301,"stop":1761033258343,"duration":42},"status":"passed","steps":[{"name":"Confirm pre-screening checks are true","time":{"start":1761033258301,"stop":1761033258343,"duration":42},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Programme.FLU: 'flu'>, <ConsentOption.INJECTION: 'Injection'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Yes","time":{"start":1761033258350,"stop":1761033258360,"duration":10},"status":"passed","steps":[{"name":"Click on Yes","time":{"start":1761033258350,"stop":1761033258360,"duration":10},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(Child(first_name='Russell', last_name='SKINNER', nhs_number='9833244475', address=('Studio 1', 'Clifford motorway', 'Walshshire', 'SK5 6FG'), date_of_birth=datetime.date(2014, 6, 12), year_group=7, parents=(Parent(full_name='Peter Watson', relationship='Dad', email_address='lhenry@example.net'), Parent(full_name='Georgia Brookes-Price', relationship='Mum', email_address='martin31@example.org'))),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Yes","time":{"start":1761033258360,"stop":1761033258393,"duration":33},"status":"passed","steps":[{"name":"Click on Yes","time":{"start":1761033258360,"stop":1761033258393,"duration":33},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<ConsentOption.INJECTION: 'Injection'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select vaccination site 'Left arm (upper position)'","time":{"start":1761033258393,"stop":1761033258426,"duration":33},"status":"passed","steps":[{"name":"Select vaccination site {1}","time":{"start":1761033258393,"stop":1761033258426,"duration":33},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<DeliverySite.LEFT_ARM_UPPER: 'Left arm (upper position)'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Continue","time":{"start":1761033258427,"stop":1761033258770,"duration":343},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1761033258427,"stop":1761033258770,"duration":343},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Choose batch 'ABC123'","time":{"start":1761033258770,"stop":1761033259174,"duration":404},"status":"passed","steps":[{"name":"Choose batch {1}","time":{"start":1761033258770,"stop":1761033259174,"duration":404},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1761033258826,"stop":1761033259174,"duration":348},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1761033258826,"stop":1761033259174,"duration":348},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('ABC123',)"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Confirm","time":{"start":1761033259202,"stop":1761033259991,"duration":789},"status":"passed","steps":[{"name":"Click on Confirm","time":{"start":1761033259202,"stop":1761033259991,"duration":789},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":62,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"setup_recording_flu::0","time":{"start":1761033332026,"stop":1761033333166,"duration":1140},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1761033332026,"stop":1761033332337,"duration":311},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1761033332026,"stop":1761033332337,"duration":311},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761033332337,"stop":1761033332530,"duration":193},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761033332337,"stop":1761033332530,"duration":193},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761033332530,"stop":1761033332741,"duration":211},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761033332530,"stop":1761033332741,"duration":211},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"log_in_as_nurse::0","time":{"start":1761033333168,"stop":1761033333549,"duration":381},"status":"passed","steps":[{"name":"Log out","time":{"start":1761033333168,"stop":1761033333549,"duration":381},"status":"passed","steps":[{"name":"Log out","time":{"start":1761033333168,"stop":1761033333549,"duration":381},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"set_feature_flags::0","time":{"start":1761033333550,"stop":1761033333550,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context::0","time":{"start":1761033333551,"stop":1761033333560,"duration":9},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1761033333560,"stop":1761033333561,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1761033761373,"stop":1761033761373,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1761033761374,"stop":1761033761405,"duration":31},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1761033761406,"stop":1761033761415,"duration":9},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests::0","time":{"start":1761033761417,"stop":1761033762093,"duration":676},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_imms_api_flu"},{"name":"host","value":"runnervmwhb2z"},{"name":"thread","value":"2316-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_imms_api_flu"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":[]},"source":"23d6ece718c36556.json","parameterValues":[]}