{"uid":"57a1e4d7bdb7efa6","name":"test_confirm_and_ignore","fullName":"tests.test_school_moves#test_confirm_and_ignore","historyId":"e43e18c3220af0606be0e6060d8620ac","time":{"start":1761761280142,"stop":1761761280142,"duration":0},"description":"\nTest: Confirm and ignore school moves for two children and\n   verify the correct alerts.\nSteps:\n1. Setup: Schedule sessions for two schools, upload class lists for both,\n   and trigger school moves.\n2. Go to the school moves page and locate rows for both children.\n3. For the first child, confirm the school move and verify the confirmation alert.\n4. For the second child, ignore the school move and verify the ignored alert.\nVerification:\n- The correct confirmation and ignored alerts are shown for each child.\n- The school moves table contains the expected text for both children.\n","descriptionHtml":"<p>Test: Confirm and ignore school moves for two children and<br />\nverify the correct alerts.<br />\nSteps:</p>\n<ol>\n<li>Setup: Schedule sessions for two schools, upload class lists for both,<br />\nand trigger school moves.</li>\n<li>Go to the school moves page and locate rows for both children.</li>\n<li>For the first child, confirm the school move and verify the confirmation alert.</li>\n<li>For the second child, ignore the school move and verify the ignored alert.<br />\nVerification:</li>\n</ol>\n<ul>\n<li>The correct confirmation and ignored alerts are shown for each child.</li>\n<li>The school moves table contains the expected text for both children.</li>\n</ul>\n","status":"failed","statusMessage":"AssertionError: Locator expected to be visible\nActual value: <element(s) not found> \nCall log:\n  - Expect \"to_be_visible\" with timeout 5000ms\n  - waiting for get_by_role(\"strong\").get_by_text(\"Completed\").or_(get_by_role(\"strong\").get_by_text(\"Invalid\"))","statusTrace":"log_in_as_nurse = None\ntest_data = <mavis.test.data.TestData object at 0x7fa79a4befd0>\nschools = [School(name='Oasis Academy Wintringham', urn='135209', site=None), School(name='Castle Hill High School', urn='106172', site=None)]\ndashboard_page = <mavis.test.pages.dashboard.DashboardPage object at 0x7fa79a412830>\nsessions_page = <mavis.test.pages.sessions.SessionsPage object at 0x7fa79a4d8050>\nimport_records_page = <mavis.test.pages.import_records.ImportRecordsPage object at 0x7fa79a6016d0>\nyear_groups = {'HPV': 9, 'MMR': 11, 'doubles': 10, 'flu': 7}\nchildren_page = <mavis.test.pages.children.ChildrenPage object at 0x7fa79a4ad490>\nchildren = [Child(first_name='Judith', last_name='SMITH', nhs_number='9049297250', address=('Flat 41', 'Harriet lakes', 'Hopeland...s@example.com'), Parent(full_name='Miss Joanne Taylor', relationship='Mum', email_address='christian72@example.net')))]\n\n    @pytest.fixture\n    def setup_confirm_and_ignore(\n        log_in_as_nurse,\n        test_data,\n        schools,\n        dashboard_page,\n        sessions_page,\n        import_records_page,\n        year_groups,\n        children_page,\n        children,\n    ):\n        schools = schools[Programme.HPV]\n        year_group = year_groups[Programme.HPV]\n        children = children[Programme.HPV]\n        # We need to make sure we're uploading the same class with the same NHS numbers.\n        input_file_path, output_file_path = test_data.get_file_paths(\n            ClassFileMapping.TWO_FIXED_CHILDREN,\n        )\n    \n        def upload_class_list():\n            sessions_page.click_import_class_lists()\n            import_records_page.select_year_groups(year_group)\n            sessions_page.choose_file_child_records(input_file_path)\n            sessions_page.click_continue_button()\n            import_records_page.record_upload_time()\n            import_records_page.click_uploaded_file_datetime()\n            import_records_page.wait_for_processed()\n            import_records_page.verify_upload_output(output_file_path)\n    \n        try:\n            dashboard_page.click_sessions()\n            sessions_page.ensure_session_scheduled_for_next_week(\n                schools[0], Programme.HPV.group\n            )\n            dashboard_page.click_mavis()\n            dashboard_page.click_sessions()\n            sessions_page.ensure_session_scheduled_for_next_week(\n                schools[1], Programme.HPV.group\n            )\n            dashboard_page.click_mavis()\n            dashboard_page.click_sessions()\n            sessions_page.click_session_for_programme_group(schools[0], Programme.HPV)\n>           upload_class_list()\n\ntests/test_school_moves.py:53: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \ntests/test_school_moves.py:37: in upload_class_list\n    import_records_page.wait_for_processed()\nmavis/test/pages/import_records.py:87: in wait_for_processed\n    reload_until_element_is_visible(self.page, tag, seconds=60)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\npage = <Page url='https://qa.mavistesting.com/sessions?q=&%5Bprogrammes%5D%5B%5D=&status=&type='>\ntag = <Locator frame=<Frame name= url='https://qa.mavistesting.com/sessions?q=&%5Bprogrammes%5D%5B%5D=&status=&type='> selec...ernal:role=strong >> internal:text=\"Completed\"i >> internal:or=\"internal:role=strong >> internal:text=\\\\\"Invalid\\\\\"i\"'>\nseconds = 60\n\n    def reload_until_element_is_visible(\n        page: Page, tag: Locator, seconds: int = DEFAULT_TIMEOUT_SECONDS\n    ) -> None:\n        for _ in range(seconds * 2):\n            if tag.is_visible():\n                break\n    \n            time.sleep(0.5)\n    \n            page.reload()\n        else:\n>           expect(tag).to_be_visible()\nE           AssertionError: Locator expected to be visible\nE           Actual value: <element(s) not found> \nE           Call log:\nE             - Expect \"to_be_visible\" with timeout 5000ms\nE             - waiting for get_by_role(\"strong\").get_by_text(\"Completed\").or_(get_by_role(\"strong\").get_by_text(\"Invalid\"))\n\nmavis/test/utils.py:171: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"base_url","time":{"start":1761759806474,"stop":1761759806474,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_session_faker","time":{"start":1761759806475,"stop":1761759806476,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1761759806475,"stop":1761759806475,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1761759806476,"stop":1761759806476,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"year_groups","time":{"start":1761759806476,"stop":1761759806477,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1761759806476,"stop":1761759806476,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"programmes_enabled","time":{"start":1761759806477,"stop":1761759806477,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"onboarding","time":{"start":1761759806477,"stop":1761759819360,"duration":12883},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"team","time":{"start":1761759819360,"stop":1761759819360,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clinics","time":{"start":1761759819360,"stop":1761759819360,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1761759819360,"stop":1761759819360,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests","time":{"start":1761759819360,"stop":1761759819360,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"schools","time":{"start":1761759819360,"stop":1761759819360,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1761759819360,"stop":1761759819668,"duration":308},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"nurse","time":{"start":1761759819360,"stop":1761759819360,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"organisation","time":{"start":1761759819360,"stop":1761759819360,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1761759819668,"stop":1761759819668,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1761759819668,"stop":1761759819669,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1761759819669,"stop":1761759819669,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1761759819669,"stop":1761759820488,"duration":819},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1761759819669,"stop":1761759819669,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1761759820488,"stop":1761759820488,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1761759820488,"stop":1761759820489,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_credentials","time":{"start":1761759820489,"stop":1761759820489,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1761759820489,"stop":1761759820489,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_token","time":{"start":1761759820489,"stop":1761759820489,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"reset_before_each_module","time":{"start":1761761280143,"stop":1761761281801,"duration":1658},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1761761281801,"stop":1761761281807,"duration":6},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1761761281801,"stop":1761761281801,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1761761281801,"stop":1761761281801,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1761761281801,"stop":1761761281801,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1761761281807,"stop":1761761281971,"duration":164},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"flipper_page","time":{"start":1761761281972,"stop":1761761281972,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_as_nurse","time":{"start":1761761281972,"stop":1761761283770,"duration":1798},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1761761281972,"stop":1761761282865,"duration":893},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1761761281972,"stop":1761761282865,"duration":893},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Log in as User(username='morriscameron@example.org', password='morriscameron@example.org', role='nurse') and choose team Team(name='Brown-Taylor est. 1875', workgroup='C290U', careplus_venue_code='C290U', email='frederick36@example.com', phone='07700 900 227')","time":{"start":1761761282866,"stop":1761761283770,"duration":904},"status":"passed","steps":[{"name":"Log in as {1} and choose team {2}","time":{"start":1761761282866,"stop":1761761283770,"duration":904},"status":"passed","steps":[{"name":"Log in as User(username='morriscameron@example.org', password='morriscameron@example.org', role='nurse')","time":{"start":1761761282866,"stop":1761761283728,"duration":862},"status":"passed","steps":[{"name":"Log in as {1}","time":{"start":1761761282866,"stop":1761761283728,"duration":862},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='morriscameron@example.org', password='morriscameron@example.org', role='nurse'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='morriscameron@example.org', password='morriscameron@example.org', role='nurse'), Team(name='Brown-Taylor est. 1875', workgroup='C290U', careplus_venue_code='C290U', email='frederick36@example.com', phone='07700 900 227'))"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"log_in_page","time":{"start":1761761281972,"stop":1761761281972,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_feature_flags","time":{"start":1761761281972,"stop":1761761281972,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"children","time":{"start":1761761283770,"stop":1761761283776,"duration":6},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_data","time":{"start":1761761283776,"stop":1761761283777,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"dashboard_page","time":{"start":1761761283777,"stop":1761761283778,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"import_records_page","time":{"start":1761761283778,"stop":1761761283778,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"sessions_page","time":{"start":1761761283778,"stop":1761761283778,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_confirm_and_ignore","time":{"start":1761761283779,"stop":1761761398183,"duration":114404},"status":"failed","statusMessage":"AssertionError: Locator expected to be visible\nActual value: <element(s) not found> \nCall log:\n  - Expect \"to_be_visible\" with timeout 5000ms\n  - waiting for get_by_role(\"strong\").get_by_text(\"Completed\").or_(get_by_role(\"strong\").get_by_text(\"Invalid\"))\n\n","statusTrace":"  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.14/site-packages/pluggy/_callers.py\", line 38, in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.14/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.14/site-packages/_pytest/setuponly.py\", line 36, in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.14/site-packages/pluggy/_callers.py\", line 121, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.14/site-packages/_pytest/fixtures.py\", line 1196, in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.14/site-packages/_pytest/fixtures.py\", line 923, in call_fixture_func\n    fixture_result = next(generator)\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/tests/test_school_moves.py\", line 53, in setup_confirm_and_ignore\n    upload_class_list()\n    ~~~~~~~~~~~~~~~~~^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/tests/test_school_moves.py\", line 37, in upload_class_list\n    import_records_page.wait_for_processed()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/mavis/test/pages/import_records.py\", line 87, in wait_for_processed\n    reload_until_element_is_visible(self.page, tag, seconds=60)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/mavis/test/utils.py\", line 171, in reload_until_element_is_visible\n    expect(tag).to_be_visible()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.14/site-packages/playwright/sync_api/_generated.py\", line 20424, in to_be_visible\n    self._sync(self._impl_obj.to_be_visible(visible=visible, timeout=timeout))\n    ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.14/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ~~~~~~~~~~~^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.14/site-packages/playwright/_impl/_assertions.py\", line 763, in to_be_visible\n    await self._expect_impl(\n    ...<5 lines>...\n    )\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.14/site-packages/playwright/_impl/_assertions.py\", line 83, in _expect_impl\n    raise AssertionError(\n        f\"{out_message}\\nActual value: {actual} {format_call_log(result.get('log'))}\"\n    )\n","steps":[{"name":"Click on Sessions","time":{"start":1761761283790,"stop":1761761284028,"duration":238},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761761283790,"stop":1761761284028,"duration":238},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'HPV' session at School(name='Oasis Academy Wintringham', urn='135209', site=None)","time":{"start":1761761284029,"stop":1761761284855,"duration":826},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1761761284029,"stop":1761761284855,"duration":826},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='Oasis Academy Wintringham', urn='135209', site=None), 'HPV')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Go to Edit session page","time":{"start":1761761284863,"stop":1761761286229,"duration":1366},"status":"passed","steps":[{"name":"Go to Edit session page","time":{"start":1761761284863,"stop":1761761286229,"duration":1366},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Go to Change session dates page","time":{"start":1761761286229,"stop":1761761286567,"duration":338},"status":"passed","steps":[{"name":"Go to Change session dates page","time":{"start":1761761286229,"stop":1761761286567,"duration":338},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fill date fields with '20251105'","time":{"start":1761761286648,"stop":1761761286758,"duration":110},"status":"passed","steps":[{"name":"Fill date fields with {1}","time":{"start":1761761286648,"stop":1761761286758,"duration":110},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('20251105',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Continue","time":{"start":1761761286758,"stop":1761761287315,"duration":557},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1761761286758,"stop":1761761287315,"duration":557},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Save changes","time":{"start":1761761287397,"stop":1761761288067,"duration":670},"status":"passed","steps":[{"name":"Click Save changes","time":{"start":1761761287397,"stop":1761761288067,"duration":670},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761761288067,"stop":1761761288414,"duration":347},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761761288067,"stop":1761761288414,"duration":347},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761761288415,"stop":1761761288764,"duration":349},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761761288415,"stop":1761761288764,"duration":349},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'HPV' session at School(name='Castle Hill High School', urn='106172', site=None)","time":{"start":1761761288764,"stop":1761761289552,"duration":788},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1761761288765,"stop":1761761289552,"duration":787},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='Castle Hill High School', urn='106172', site=None), 'HPV')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Go to Edit session page","time":{"start":1761761289561,"stop":1761761290907,"duration":1346},"status":"passed","steps":[{"name":"Go to Edit session page","time":{"start":1761761289561,"stop":1761761290907,"duration":1346},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Go to Change session dates page","time":{"start":1761761290907,"stop":1761761291263,"duration":356},"status":"passed","steps":[{"name":"Go to Change session dates page","time":{"start":1761761290907,"stop":1761761291263,"duration":356},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fill date fields with '20251105'","time":{"start":1761761291331,"stop":1761761291405,"duration":74},"status":"passed","steps":[{"name":"Fill date fields with {1}","time":{"start":1761761291331,"stop":1761761291405,"duration":74},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('20251105',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Continue","time":{"start":1761761291405,"stop":1761761291956,"duration":551},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1761761291406,"stop":1761761291956,"duration":550},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Save changes","time":{"start":1761761292010,"stop":1761761292704,"duration":694},"status":"passed","steps":[{"name":"Click Save changes","time":{"start":1761761292010,"stop":1761761292704,"duration":694},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761761292704,"stop":1761761293018,"duration":314},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761761292704,"stop":1761761293018,"duration":314},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761761293018,"stop":1761761293391,"duration":373},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761761293019,"stop":1761761293391,"duration":372},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'HPV' session at School(name='Oasis Academy Wintringham', urn='135209', site=None)","time":{"start":1761761293391,"stop":1761761294152,"duration":761},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1761761293391,"stop":1761761294152,"duration":761},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='Oasis Academy Wintringham', urn='135209', site=None), <Programme.HPV: 'HPV'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Import class lists","time":{"start":1761761294152,"stop":1761761294511,"duration":359},"status":"passed","steps":[{"name":"Click on Import class lists","time":{"start":1761761294152,"stop":1761761294511,"duration":359},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761761294624,"stop":1761761295252,"duration":628},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761761294624,"stop":1761761295252,"duration":628},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Upload file PosixPath('working/ClassFileMapping.TWO_FIXED_CHILDREN20251029180803.csv')","time":{"start":1761761295253,"stop":1761761295306,"duration":53},"status":"passed","steps":[{"name":"Upload file {1}","time":{"start":1761761295253,"stop":1761761295306,"duration":53},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(PosixPath('working/ClassFileMapping.TWO_FIXED_CHILDREN20251029180803.csv'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Continue","time":{"start":1761761295306,"stop":1761761295856,"duration":550},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1761761295306,"stop":1761761295855,"duration":549},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click link with uploaded datetime","time":{"start":1761761295856,"stop":1761761296215,"duration":359},"status":"passed","steps":[{"name":"Click link with uploaded datetime","time":{"start":1761761295856,"stop":1761761296215,"duration":359},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Go to dashboard","time":{"start":1761761395843,"stop":1761761396089,"duration":246},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1761761395843,"stop":1761761396089,"duration":246},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761761396089,"stop":1761761396307,"duration":218},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761761396089,"stop":1761761396307,"duration":218},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761761396307,"stop":1761761396590,"duration":283},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761761396307,"stop":1761761396590,"duration":283},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761761397119,"stop":1761761397330,"duration":211},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761761397119,"stop":1761761397330,"duration":211},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761761397330,"stop":1761761397622,"duration":292},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761761397330,"stop":1761761397622,"duration":292},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":56,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"children_page","time":{"start":1761761283779,"stop":1761761283779,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[{"name":"log_in_as_nurse::0","time":{"start":1761761398198,"stop":1761761398856,"duration":658},"status":"passed","steps":[{"name":"Log out","time":{"start":1761761398198,"stop":1761761398856,"duration":658},"status":"passed","steps":[{"name":"Log out","time":{"start":1761761398198,"stop":1761761398856,"duration":658},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"set_feature_flags::0","time":{"start":1761761398857,"stop":1761761398857,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context::0","time":{"start":1761761398858,"stop":1761761398869,"duration":11},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1761761398869,"stop":1761761398869,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1761762348081,"stop":1761762348082,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1761762348082,"stop":1761762348184,"duration":102},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1761762348186,"stop":1761762348197,"duration":11},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests::0","time":{"start":1761762348200,"stop":1761762351421,"duration":3221},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"school_moves"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_school_moves"},{"name":"host","value":"runnervmwhb2z"},{"name":"thread","value":"6014-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_school_moves"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["school_moves"]},"source":"57a1e4d7bdb7efa6.json","parameterValues":[]}