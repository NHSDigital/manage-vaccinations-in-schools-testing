{"uid":"63eaf7e84ea8ee31","name":"test_editing_session_programmes","fullName":"tests.test_sessions#test_editing_session_programmes","historyId":"12685cf04bc7a6371c53a3e8e694486b","time":{"start":1761761051098,"stop":1761761058190,"duration":7092},"description":"\nTest: Edit the programmes of an existing session and verify changes.\nSteps:\n1. Open a session with a fixed child.\n2. Edit the session to change its programmes.\n3. Save changes and verify the updated programmes are reflected.\n4. Verify the Flu tab appears for a child in the session.\nVerification:\n- Session programmes are updated correctly without errors.\n","descriptionHtml":"<p>Test: Edit the programmes of an existing session and verify changes.<br />\nSteps:</p>\n<ol>\n<li>Open a session with a fixed child.</li>\n<li>Edit the session to change its programmes.</li>\n<li>Save changes and verify the updated programmes are reflected.</li>\n<li>Verify the Flu tab appears for a child in the session.<br />\nVerification:</li>\n</ol>\n<ul>\n<li>Session programmes are updated correctly without errors.</li>\n</ul>\n","status":"failed","statusMessage":"AssertionError: Locator expected to be visible\nActual value: <element(s) not found> \nCall log:\n  - Expect \"to_be_visible\" with timeout 5000ms\n  - waiting for get_by_role(\"heading\", name=\"flu\")","statusTrace":"setup_fixed_child = None\nsessions_page = <mavis.test.pages.sessions.SessionsPage object at 0x7f8ecbf6f230>\nchildren = {'HPV': [Child(first_name='Amy', last_name='PALMER', nhs_number='9192949231', address=('Flat 0', 'Jones wall', 'New Ka...ylan@example.org'), Parent(full_name='Gail Peacock-Reed', relationship='Mum', email_address='antony84@example.com')))]}\n\n    def test_editing_session_programmes(setup_fixed_child, sessions_page, children):\n        \"\"\"\n        Test: Edit the programmes of an existing session and verify changes.\n        Steps:\n        1. Open a session with a fixed child.\n        2. Edit the session to change its programmes.\n        3. Save changes and verify the updated programmes are reflected.\n        4. Verify the Flu tab appears for a child in the session.\n        Verification:\n        - Session programmes are updated correctly without errors.\n        \"\"\"\n        child = children[Programme.HPV][0]\n    \n        sessions_page.click_edit_session()\n        sessions_page.click_change_programmes()\n        sessions_page.add_programme(Programme.FLU)\n        sessions_page.click_continue_button()\n        sessions_page.expect_details(\"Programmes\", \"Flu HPV\")\n        sessions_page.click_save_changes()\n        sessions_page.page.pause()\n>       sessions_page.expect_session_to_have_programmes([Programme.FLU, Programme.HPV])\n\ntests/test_sessions.py:397: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mavis.test.pages.sessions.SessionsPage object at 0x7f8ecbf6f230>\nprogrammes = [<Programme.FLU: 'flu'>, <Programme.HPV: 'HPV'>]\n\n    def expect_session_to_have_programmes(self, programmes: list[Programme]) -> None:\n        for programme in programmes:\n>           expect(self.page.get_by_role(\"heading\", name=programme)).to_be_visible()\nE           AssertionError: Locator expected to be visible\nE           Actual value: <element(s) not found> \nE           Call log:\nE             - Expect \"to_be_visible\" with timeout 5000ms\nE             - waiting for get_by_role(\"heading\", name=\"flu\")\n\nmavis/test/pages/sessions.py:421: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":2,"retriesStatusChange":false,"beforeStages":[{"name":"_verify_url","time":{"start":1761759806474,"stop":1761759806474,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1761759806474,"stop":1761759806474,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_session_faker","time":{"start":1761759806474,"stop":1761759806476,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"year_groups","time":{"start":1761759806476,"stop":1761759806476,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1761759806476,"stop":1761759806476,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1761759806476,"stop":1761759806476,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"programmes_enabled","time":{"start":1761759806476,"stop":1761759806476,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"onboarding","time":{"start":1761759806479,"stop":1761759824800,"duration":18321},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"nurse","time":{"start":1761759824800,"stop":1761759824800,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"team","time":{"start":1761759824800,"stop":1761759824800,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1761759824800,"stop":1761759824800,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1761759824800,"stop":1761759825126,"duration":326},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests","time":{"start":1761759824800,"stop":1761759824800,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1761759825126,"stop":1761759825126,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1761759825126,"stop":1761759825127,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1761759825127,"stop":1761759825127,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1761759825127,"stop":1761759825127,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1761759825127,"stop":1761759825261,"duration":134},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1761759825261,"stop":1761759825261,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1761759825261,"stop":1761759825262,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_credentials","time":{"start":1761759825262,"stop":1761759825262,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_token","time":{"start":1761759825262,"stop":1761759825262,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1761759825262,"stop":1761759825262,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"schools","time":{"start":1761759963381,"stop":1761759963381,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"reset_before_each_module","time":{"start":1761759963382,"stop":1761759965028,"duration":1646},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"organisation","time":{"start":1761759963382,"stop":1761759963382,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clinics","time":{"start":1761759963382,"stop":1761759963382,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1761761041922,"stop":1761761041922,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1761761041922,"stop":1761761041922,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1761761041922,"stop":1761761041934,"duration":12},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1761761041922,"stop":1761761041922,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1761761041934,"stop":1761761042137,"duration":203},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"flipper_page","time":{"start":1761761042137,"stop":1761761042137,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_page","time":{"start":1761761042137,"stop":1761761042137,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_feature_flags","time":{"start":1761761042137,"stop":1761761042137,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_as_nurse","time":{"start":1761761042137,"stop":1761761044054,"duration":1917},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1761761042137,"stop":1761761042990,"duration":853},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1761761042138,"stop":1761761042990,"duration":852},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Log in as User(username='benrogers@example.org', password='benrogers@example.org', role='nurse') and choose team Team(name='Robinson-Williams est. 1983', workgroup='T928F', careplus_venue_code='T928F', email='ocarter@example.com', phone='+44(0)7700900487')","time":{"start":1761761042990,"stop":1761761044054,"duration":1064},"status":"passed","steps":[{"name":"Log in as {1} and choose team {2}","time":{"start":1761761042990,"stop":1761761044054,"duration":1064},"status":"passed","steps":[{"name":"Log in as User(username='benrogers@example.org', password='benrogers@example.org', role='nurse')","time":{"start":1761761042990,"stop":1761761044013,"duration":1023},"status":"passed","steps":[{"name":"Log in as {1}","time":{"start":1761761042990,"stop":1761761044013,"duration":1023},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='benrogers@example.org', password='benrogers@example.org', role='nurse'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='benrogers@example.org', password='benrogers@example.org', role='nurse'), Team(name='Robinson-Williams est. 1983', workgroup='T928F', careplus_venue_code='T928F', email='ocarter@example.com', phone='+44(0)7700900487'))"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"setup_tests","time":{"start":1761761044054,"stop":1761761044306,"duration":252},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761761044054,"stop":1761761044306,"duration":252},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761761044054,"stop":1761761044306,"duration":252},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"dashboard_page","time":{"start":1761761044054,"stop":1761761044054,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"children","time":{"start":1761761044306,"stop":1761761044311,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_data","time":{"start":1761761044311,"stop":1761761044313,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"sessions_page","time":{"start":1761761044313,"stop":1761761044313,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"import_records_page","time":{"start":1761761044314,"stop":1761761044314,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_session_with_file_upload","time":{"start":1761761044314,"stop":1761761044314,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_fixed_child","time":{"start":1761761044314,"stop":1761761051098,"duration":6784},"status":"passed","steps":[{"name":"Click on 'HPV' session at School(name='Dyson Perrins CofE Academy', urn='137186', site=None)","time":{"start":1761761044314,"stop":1761761045142,"duration":828},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1761761044314,"stop":1761761045142,"duration":828},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='Dyson Perrins CofE Academy', urn='137186', site=None), <Programme.HPV: 'HPV'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Import class lists","time":{"start":1761761045151,"stop":1761761045501,"duration":350},"status":"passed","steps":[{"name":"Click on Import class lists","time":{"start":1761761045151,"stop":1761761045501,"duration":350},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761761045680,"stop":1761761046332,"duration":652},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761761045680,"stop":1761761046332,"duration":652},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Set input file to PosixPath('working/ClassFileMapping.FIXED_CHILD20251029180406.csv')","time":{"start":1761761046342,"stop":1761761046390,"duration":48},"status":"passed","steps":[{"name":"Set input file to {1}","time":{"start":1761761046342,"stop":1761761046390,"duration":48},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(PosixPath('working/ClassFileMapping.FIXED_CHILD20251029180406.csv'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761761047390,"stop":1761761047957,"duration":567},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761761047390,"stop":1761761047957,"duration":567},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"_coverage","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click link with uploaded datetime","time":{"start":1761761048093,"stop":1761761048321,"duration":228},"status":"passed","steps":[{"name":"Click link with uploaded datetime","time":{"start":1761761048093,"stop":1761761048321,"duration":228},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761761049705,"stop":1761761049903,"duration":198},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761761049705,"stop":1761761049903,"duration":198},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761761049903,"stop":1761761050258,"duration":355},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761761049903,"stop":1761761050258,"duration":355},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'HPV' session at School(name='Dyson Perrins CofE Academy', urn='137186', site=None)","time":{"start":1761761050258,"stop":1761761051097,"duration":839},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1761761050258,"stop":1761761051097,"duration":839},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='Dyson Perrins CofE Academy', urn='137186', site=None), <Programme.HPV: 'HPV'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":18,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"testStage":{"description":"\nTest: Edit the programmes of an existing session and verify changes.\nSteps:\n1. Open a session with a fixed child.\n2. Edit the session to change its programmes.\n3. Save changes and verify the updated programmes are reflected.\n4. Verify the Flu tab appears for a child in the session.\nVerification:\n- Session programmes are updated correctly without errors.\n","status":"failed","statusMessage":"AssertionError: Locator expected to be visible\nActual value: <element(s) not found> \nCall log:\n  - Expect \"to_be_visible\" with timeout 5000ms\n  - waiting for get_by_role(\"heading\", name=\"flu\")","statusTrace":"setup_fixed_child = None\nsessions_page = <mavis.test.pages.sessions.SessionsPage object at 0x7f8ecbf6f230>\nchildren = {'HPV': [Child(first_name='Amy', last_name='PALMER', nhs_number='9192949231', address=('Flat 0', 'Jones wall', 'New Ka...ylan@example.org'), Parent(full_name='Gail Peacock-Reed', relationship='Mum', email_address='antony84@example.com')))]}\n\n    def test_editing_session_programmes(setup_fixed_child, sessions_page, children):\n        \"\"\"\n        Test: Edit the programmes of an existing session and verify changes.\n        Steps:\n        1. Open a session with a fixed child.\n        2. Edit the session to change its programmes.\n        3. Save changes and verify the updated programmes are reflected.\n        4. Verify the Flu tab appears for a child in the session.\n        Verification:\n        - Session programmes are updated correctly without errors.\n        \"\"\"\n        child = children[Programme.HPV][0]\n    \n        sessions_page.click_edit_session()\n        sessions_page.click_change_programmes()\n        sessions_page.add_programme(Programme.FLU)\n        sessions_page.click_continue_button()\n        sessions_page.expect_details(\"Programmes\", \"Flu HPV\")\n        sessions_page.click_save_changes()\n        sessions_page.page.pause()\n>       sessions_page.expect_session_to_have_programmes([Programme.FLU, Programme.HPV])\n\ntests/test_sessions.py:397: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mavis.test.pages.sessions.SessionsPage object at 0x7f8ecbf6f230>\nprogrammes = [<Programme.FLU: 'flu'>, <Programme.HPV: 'HPV'>]\n\n    def expect_session_to_have_programmes(self, programmes: list[Programme]) -> None:\n        for programme in programmes:\n>           expect(self.page.get_by_role(\"heading\", name=programme)).to_be_visible()\nE           AssertionError: Locator expected to be visible\nE           Actual value: <element(s) not found> \nE           Call log:\nE             - Expect \"to_be_visible\" with timeout 5000ms\nE             - waiting for get_by_role(\"heading\", name=\"flu\")\n\nmavis/test/pages/sessions.py:421: AssertionError","steps":[{"name":"Click on Edit session","time":{"start":1761761051098,"stop":1761761051459,"duration":361},"status":"passed","steps":[{"name":"Click on Edit session","time":{"start":1761761051098,"stop":1761761051459,"duration":361},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Change programmes","time":{"start":1761761051459,"stop":1761761051701,"duration":242},"status":"passed","steps":[{"name":"Click on Change programmes","time":{"start":1761761051459,"stop":1761761051700,"duration":241},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Continue","time":{"start":1761761051800,"stop":1761761052373,"duration":573},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1761761051800,"stop":1761761052373,"duration":573},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Save changes","time":{"start":1761761052443,"stop":1761761053179,"duration":736},"status":"passed","steps":[{"name":"Click Save changes","time":{"start":1761761052443,"stop":1761761053179,"duration":736},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":8,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"setup_fixed_child::0","time":{"start":1761761058228,"stop":1761761059474,"duration":1246},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1761761058228,"stop":1761761058472,"duration":244},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1761761058228,"stop":1761761058472,"duration":244},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761761058472,"stop":1761761058695,"duration":223},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761761058473,"stop":1761761058695,"duration":222},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761761058695,"stop":1761761058954,"duration":259},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761761058695,"stop":1761761058954,"duration":259},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"log_in_as_nurse::0","time":{"start":1761761059476,"stop":1761761060126,"duration":650},"status":"passed","steps":[{"name":"Log out","time":{"start":1761761059476,"stop":1761761060126,"duration":650},"status":"passed","steps":[{"name":"Log out","time":{"start":1761761059476,"stop":1761761060126,"duration":650},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"set_feature_flags::0","time":{"start":1761761060127,"stop":1761761060127,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context::0","time":{"start":1761761060128,"stop":1761761060140,"duration":12},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1761761060140,"stop":1761761060140,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1761762265537,"stop":1761762265537,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1761762265538,"stop":1761762265661,"duration":123},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1761762265663,"stop":1761762265677,"duration":14},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests::0","time":{"start":1761762265679,"stop":1761762272290,"duration":6611},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"sessions"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_sessions"},{"name":"host","value":"runnervmwhb2z"},{"name":"thread","value":"6011-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_sessions"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"8f311015bd8cc2ee","status":"failed","statusDetails":"AssertionError: Locator expected to be visible\nActual value: <element(s) not found> \nCall log:\n  - Expect \"to_be_visible\" with timeout 5000ms\n  - waiting for get_by_role(\"heading\", name=\"flu\")","time":{"start":1761761032679,"stop":1761761039705,"duration":7026}},{"uid":"ae9969f36050dcb5","status":"failed","statusDetails":"AssertionError: Locator expected to be visible\nActual value: <element(s) not found> \nCall log:\n  - Expect \"to_be_visible\" with timeout 5000ms\n  - waiting for get_by_role(\"heading\", name=\"flu\")","time":{"start":1761761014420,"stop":1761761021617,"duration":7197}}],"categories":[{"name":"Product defects","matchedStatuses":[]}],"tags":["sessions"]},"source":"63eaf7e84ea8ee31.json","parameterValues":[]}