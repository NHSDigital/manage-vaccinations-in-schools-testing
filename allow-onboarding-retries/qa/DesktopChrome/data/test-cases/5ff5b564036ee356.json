{"uid":"5ff5b564036ee356","name":"test_patient_details_load_with_missing_vaccine_info","fullName":"tests.test_children#test_patient_details_load_with_missing_vaccine_info","historyId":"2516ffd867c5bd27ae6b3e6502852d2e","time":{"start":1757670278497,"stop":1757670278497,"duration":0},"description":"\nTest: Ensure patient details page loads for a child with missing vaccine info\n   (MAV-853).\nSteps:\n1. Setup: Import class list, schedule session, import cohort, and upload vaccination\n   records with missing vaccine info.\n2. Search for the child by name.\n3. Click to view the child's record.\n4. Open the activity log.\n5. View vaccination details for the child.\nVerification:\n- Activity log header shows \"Vaccinated with Gardasil 9\".\n- Vaccination details show \"Outcome\" as \"Vaccinated\".\n","descriptionHtml":"<p>Test: Ensure patient details page loads for a child with missing vaccine info<br />\n(MAV-853).<br />\nSteps:</p>\n<ol>\n<li>Setup: Import class list, schedule session, import cohort, and upload vaccination<br />\nrecords with missing vaccine info.</li>\n<li>Search for the child by name.</li>\n<li>Click to view the child's record.</li>\n<li>Open the activity log.</li>\n<li>View vaccination details for the child.<br />\nVerification:</li>\n</ol>\n<ul>\n<li>Activity log header shows &quot;Vaccinated with Gardasil 9&quot;.</li>\n<li>Vaccination details show &quot;Outcome&quot; as &quot;Vaccinated&quot;.</li>\n</ul>\n","status":"failed","statusMessage":"AssertionError: Locator expected to be visible\nActual value: <element(s) not found> \nCall log:\n  - Expect \"to_be_visible\" with timeout 5000ms\n  - waiting for get_by_role(\"strong\").get_by_text(\"Completed\").or_(get_by_role(\"strong\").get_by_text(\"Invalid\"))","statusTrace":"log_in_as_nurse = None\nschools = {'HPV': [School(name='Elysian, West Horsley', urn='150760', site=None), School(name='Canons High School', urn='137199'...eobley High School', urn='116952', site=None), School(name=\"William Hulme's Grammar School\", urn='135296', site=None)]}\ndashboard_page = <mavis.test.pages.dashboard.DashboardPage object at 0x7f5c19d78470>\nimport_records_page = <mavis.test.pages.import_records.ImportRecordsPage object at 0x7f5c19ac7d90>\nprogrammes_page = <mavis.test.pages.programmes.ProgrammesPage object at 0x7f5c1a051a90>\nsessions_page = <mavis.test.pages.sessions.SessionsPage object at 0x7f5c19c5a5d0>\nyear_groups = {'HPV': 9, 'doubles': 11, 'flu': 11}\n\n    @pytest.fixture\n    def setup_mav_853(\n        log_in_as_nurse,\n        schools,\n        dashboard_page,\n        import_records_page,\n        programmes_page,\n        sessions_page,\n        year_groups,\n    ):\n        school = schools[Programme.HPV][0]\n        year_group = year_groups[Programme.HPV]\n    \n        try:\n            dashboard_page.click_sessions()\n            sessions_page.ensure_session_scheduled_for_today(school, Programme.HPV)\n            sessions_page.click_import_class_lists()\n>           import_records_page.import_class_list(ClassFileMapping.RANDOM_CHILD, year_group)\n\ntests/test_children.py:68: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmavis/test/pages/import_records.py:183: in import_class_list\n    self.upload_and_verify_output(class_list_file, programme_group=programme_group)\nmavis/test/pages/import_records.py:132: in upload_and_verify_output\n    self.wait_for_processed()\nmavis/test/pages/import_records.py:86: in wait_for_processed\n    reload_until_element_is_visible(self.page, tag, seconds=30)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\npage = <Page url='https://qa.mavistesting.com/sessions'>\ntag = <Locator frame=<Frame name= url='https://qa.mavistesting.com/sessions'> selector='internal:role=strong >> internal:text=\"Completed\"i >> internal:or=\"internal:role=strong >> internal:text=\\\\\"Invalid\\\\\"i\"'>\nseconds = 30\n\n    def reload_until_element_is_visible(\n        page: Page, tag: Locator, seconds: int = DEFAULT_TIMEOUT_SECONDS\n    ) -> None:\n        for _ in range(seconds * 2):\n            if tag.is_visible():\n                break\n    \n            time.sleep(0.5)\n    \n            page.reload()\n        else:\n>           expect(tag).to_be_visible()\nE           AssertionError: Locator expected to be visible\nE           Actual value: <element(s) not found> \nE           Call log:\nE             - Expect \"to_be_visible\" with timeout 5000ms\nE             - waiting for get_by_role(\"strong\").get_by_text(\"Completed\").or_(get_by_role(\"strong\").get_by_text(\"Invalid\"))\n\nmavis/test/utils.py:122: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":2,"retriesStatusChange":false,"beforeStages":[{"name":"delete_output_dir","time":{"start":1757669072637,"stop":1757669072637,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1757669072637,"stop":1757669072637,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1757669072637,"stop":1757669072637,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1757669072637,"stop":1757669072638,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_session_faker","time":{"start":1757669072638,"stop":1757669072639,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"programmes_enabled","time":{"start":1757669072639,"stop":1757669072639,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"onboarding","time":{"start":1757669072639,"stop":1757669082116,"duration":9477},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"year_groups","time":{"start":1757669072639,"stop":1757669072639,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests","time":{"start":1757669082117,"stop":1757669082117,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1757669082117,"stop":1757669082117,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1757669082117,"stop":1757669082412,"duration":295},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"nurse","time":{"start":1757669082117,"stop":1757669082117,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"schools","time":{"start":1757669082117,"stop":1757669082117,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"team","time":{"start":1757669082117,"stop":1757669082117,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1757669082412,"stop":1757669082412,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1757669082412,"stop":1757669082413,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1757669082413,"stop":1757669084681,"duration":2268},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1757669082413,"stop":1757669082413,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1757669082413,"stop":1757669082413,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1757669084682,"stop":1757669084684,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1757669084682,"stop":1757669084682,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"organisation","time":{"start":1757669084684,"stop":1757669084684,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clinics","time":{"start":1757669084684,"stop":1757669084684,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1757669084684,"stop":1757669084684,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_token","time":{"start":1757669084684,"stop":1757669084684,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_credentials","time":{"start":1757669084684,"stop":1757669084684,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"reset_before_each_module","time":{"start":1757669938780,"stop":1757669942067,"duration":3287},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1757670278497,"stop":1757670278497,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1757670278497,"stop":1757670278502,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1757670278497,"stop":1757670278497,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1757670278497,"stop":1757670278497,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1757670278502,"stop":1757670278532,"duration":30},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_feature_flags","time":{"start":1757670278532,"stop":1757670278532,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_as_nurse","time":{"start":1757670278532,"stop":1757670280909,"duration":2377},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1757670278532,"stop":1757670279654,"duration":1122},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1757670278532,"stop":1757670279654,"duration":1122},"status":"passed","steps":[],"attachments":[{"uid":"538cc29110918559","name":"Screenshot","source":"538cc29110918559.png","type":"image/png","size":10884}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"Log in as User(username='elliott82@example.com', password='elliott82@example.com', role='nurse') and choose team Team(name='Williamson, West and Davies est. 1780', workgroup='W015O', careplus_venue_code='W015O', email='jake69@example.com', phone='+44(0)7700 900 612')","time":{"start":1757670279654,"stop":1757670280909,"duration":1255},"status":"passed","steps":[{"name":"Log in as {1} and choose team {2}","time":{"start":1757670279654,"stop":1757670280909,"duration":1255},"status":"passed","steps":[{"name":"Log in as User(username='elliott82@example.com', password='elliott82@example.com', role='nurse')","time":{"start":1757670279654,"stop":1757670280688,"duration":1034},"status":"passed","steps":[{"name":"Log in as {1}","time":{"start":1757670279654,"stop":1757670280688,"duration":1034},"status":"passed","steps":[],"attachments":[{"uid":"b585cb980ed77bdb","name":"Screenshot","source":"b585cb980ed77bdb.png","type":"image/png","size":33498}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='elliott82@example.com', password='elliott82@example.com', role='nurse'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"14d415c217846d18","name":"Screenshot","source":"14d415c217846d18.png","type":"image/png","size":33498}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='elliott82@example.com', password='elliott82@example.com', role='nurse'), Team(name='Williamson, West and Davies est. 1780', workgroup='W015O', careplus_venue_code='W015O', email='jake69@example.com', phone='+44(0)7700 900 612'))"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":3,"hasContent":true,"attachmentStep":false},{"name":"flipper_page","time":{"start":1757670278532,"stop":1757670278532,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_page","time":{"start":1757670278532,"stop":1757670278532,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"children","time":{"start":1757670280909,"stop":1757670280912,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"dashboard_page","time":{"start":1757670280909,"stop":1757670280909,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_data","time":{"start":1757670280912,"stop":1757670280912,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"programmes_page","time":{"start":1757670280913,"stop":1757670280913,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"sessions_page","time":{"start":1757670280913,"stop":1757670280913,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"import_records_page","time":{"start":1757670280913,"stop":1757670280913,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_mav_853","time":{"start":1757670280913,"stop":1757670348984,"duration":68071},"status":"failed","statusMessage":"AssertionError: Locator expected to be visible\nActual value: <element(s) not found> \nCall log:\n  - Expect \"to_be_visible\" with timeout 5000ms\n  - waiting for get_by_role(\"strong\").get_by_text(\"Completed\").or_(get_by_role(\"strong\").get_by_text(\"Invalid\"))\n\n","statusTrace":"  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/pluggy/_callers.py\", line 38, in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/_pytest/setuponly.py\", line 36, in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/pluggy/_callers.py\", line 121, in _multicall\n    res = hook_impl.function(*args)\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/_pytest/fixtures.py\", line 1195, in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/_pytest/fixtures.py\", line 922, in call_fixture_func\n    fixture_result = next(generator)\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/tests/test_children.py\", line 68, in setup_mav_853\n    import_records_page.import_class_list(ClassFileMapping.RANDOM_CHILD, year_group)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/mavis/test/pages/import_records.py\", line 183, in import_class_list\n    self.upload_and_verify_output(class_list_file, programme_group=programme_group)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/mavis/test/pages/import_records.py\", line 132, in upload_and_verify_output\n    self.wait_for_processed()\n    ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/mavis/test/pages/import_records.py\", line 86, in wait_for_processed\n    reload_until_element_is_visible(self.page, tag, seconds=30)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/mavis/test/utils.py\", line 122, in reload_until_element_is_visible\n    expect(tag).to_be_visible()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/sync_api/_generated.py\", line 20424, in to_be_visible\n    self._sync(self._impl_obj.to_be_visible(visible=visible, timeout=timeout))\n    ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ~~~~~~~~~~~^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/_impl/_assertions.py\", line 763, in to_be_visible\n    await self._expect_impl(\n    ...<5 lines>...\n    )\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/_impl/_assertions.py\", line 83, in _expect_impl\n    raise AssertionError(\n        f\"{out_message}\\nActual value: {actual} {format_call_log(result.get('log'))}\"\n    )\n","steps":[{"name":"Click on Sessions","time":{"start":1757670280913,"stop":1757670282397,"duration":1484},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1757670280913,"stop":1757670282397,"duration":1484},"status":"passed","steps":[],"attachments":[{"uid":"ea0e2076100a7c85","name":"Screenshot","source":"ea0e2076100a7c85.png","type":"image/png","size":169955}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"Click on 'HPV' session at School(name='Elysian, West Horsley', urn='150760', site=None)","time":{"start":1757670282397,"stop":1757670283359,"duration":962},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1757670282397,"stop":1757670283359,"duration":962},"status":"passed","steps":[],"attachments":[{"uid":"ff1f6f828ddeebed","name":"Screenshot","source":"ff1f6f828ddeebed.png","type":"image/png","size":38449}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='Elysian, West Horsley', urn='150760', site=None), <Programme.HPV: 'HPV'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"Click on Schedule sessions","time":{"start":1757670283369,"stop":1757670283916,"duration":547},"status":"passed","steps":[{"name":"Click on Schedule sessions","time":{"start":1757670283369,"stop":1757670283916,"duration":547},"status":"passed","steps":[],"attachments":[{"uid":"88459a33cddffead","name":"Screenshot","source":"88459a33cddffead.png","type":"image/png","size":20118}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"Click on Add session dates","time":{"start":1757670283916,"stop":1757670284385,"duration":469},"status":"passed","steps":[{"name":"Click on Add session dates","time":{"start":1757670283916,"stop":1757670284385,"duration":469},"status":"passed","steps":[],"attachments":[{"uid":"23d84aef448811b5","name":"Screenshot","source":"23d84aef448811b5.png","type":"image/png","size":18763}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"Fill date fields","time":{"start":1757670284385,"stop":1757670284588,"duration":203},"status":"passed","steps":[{"name":"Fill date fields","time":{"start":1757670284385,"stop":1757670284588,"duration":203},"status":"passed","steps":[],"attachments":[{"uid":"89ca7106160ec762","name":"Screenshot","source":"89ca7106160ec762.png","type":"image/png","size":19350}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('12', '09', '2025')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"Click on Continue","time":{"start":1757670284588,"stop":1757670285268,"duration":680},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1757670284588,"stop":1757670285268,"duration":680},"status":"passed","steps":[],"attachments":[{"uid":"4f092216ecd1f437","name":"Screenshot","source":"4f092216ecd1f437.png","type":"image/png","size":22912}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1757670285275,"stop":1757670285853,"duration":578},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1757670285275,"stop":1757670285853,"duration":578},"status":"passed","steps":[],"attachments":[{"uid":"3c6ced12512f2032","name":"Screenshot","source":"3c6ced12512f2032.png","type":"image/png","size":42028}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"Click on Import class lists","time":{"start":1757670285854,"stop":1757670286389,"duration":535},"status":"passed","steps":[{"name":"Click on Import class lists","time":{"start":1757670285854,"stop":1757670286389,"duration":535},"status":"passed","steps":[],"attachments":[{"uid":"59e0f8a8cd8d37e4","name":"Screenshot","source":"59e0f8a8cd8d37e4.png","type":"image/png","size":19800}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1757670286423,"stop":1757670287254,"duration":831},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1757670286423,"stop":1757670287254,"duration":831},"status":"passed","steps":[],"attachments":[{"uid":"557d22c6d3a3b9a","name":"Screenshot","source":"557d22c6d3a3b9a.png","type":"image/png","size":20310}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"Set input file to PosixPath('working/ClassFileMapping.RANDOM_CHILD20250912104447.csv')","time":{"start":1757670287265,"stop":1757670287426,"duration":161},"status":"passed","steps":[{"name":"Set input file to {1}","time":{"start":1757670287265,"stop":1757670287426,"duration":161},"status":"passed","steps":[],"attachments":[{"uid":"720b8b22905bdd7f","name":"Screenshot","source":"720b8b22905bdd7f.png","type":"image/png","size":20752}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(PosixPath('working/ClassFileMapping.RANDOM_CHILD20250912104447.csv'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1757670287426,"stop":1757670288201,"duration":775},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1757670287426,"stop":1757670288201,"duration":775},"status":"passed","steps":[],"attachments":[{"uid":"51251f385484a804","name":"Screenshot","source":"51251f385484a804.png","type":"image/png","size":43734}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"_coverage","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"Click link with uploaded datetime","time":{"start":1757670288208,"stop":1757670288740,"duration":532},"status":"passed","steps":[{"name":"Click link with uploaded datetime","time":{"start":1757670288208,"stop":1757670288740,"duration":532},"status":"passed","steps":[],"attachments":[{"uid":"a2816018c3655d6e","name":"Screenshot","source":"a2816018c3655d6e.png","type":"image/png","size":23339}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"Go to dashboard","time":{"start":1757670341716,"stop":1757670342325,"duration":609},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1757670341716,"stop":1757670342325,"duration":609},"status":"passed","steps":[],"attachments":[{"uid":"9a6138773c44a59f","name":"Screenshot","source":"9a6138773c44a59f.png","type":"image/png","size":33498}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1757670342325,"stop":1757670342855,"duration":530},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1757670342325,"stop":1757670342855,"duration":530},"status":"passed","steps":[],"attachments":[{"uid":"b2a4ba320dfdf989","name":"Screenshot","source":"b2a4ba320dfdf989.png","type":"image/png","size":33377}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1757670342855,"stop":1757670343478,"duration":623},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1757670342855,"stop":1757670343478,"duration":623},"status":"passed","steps":[],"attachments":[{"uid":"788252b10fa76f76","name":"Screenshot","source":"788252b10fa76f76.png","type":"image/png","size":35052}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"Click on Edit session","time":{"start":1757670344298,"stop":1757670344844,"duration":546},"status":"passed","steps":[{"name":"Click on Edit session","time":{"start":1757670344298,"stop":1757670344844,"duration":546},"status":"passed","steps":[],"attachments":[{"uid":"e8c9da6ff85ee68a","name":"Screenshot","source":"e8c9da6ff85ee68a.png","type":"image/png","size":22912}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"Click on Change session dates","time":{"start":1757670344844,"stop":1757670345352,"duration":508},"status":"passed","steps":[{"name":"Click on Change session dates","time":{"start":1757670344844,"stop":1757670345352,"duration":508},"status":"passed","steps":[],"attachments":[{"uid":"76af7062f14f6369","name":"Screenshot","source":"76af7062f14f6369.png","type":"image/png","size":19729}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"Click Back","time":{"start":1757670345955,"stop":1757670346445,"duration":490},"status":"passed","steps":[{"name":"Click Back","time":{"start":1757670345955,"stop":1757670346445,"duration":490},"status":"passed","steps":[],"attachments":[{"uid":"3e11dcd0290da6e0","name":"Screenshot","source":"3e11dcd0290da6e0.png","type":"image/png","size":20127}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1757670346445,"stop":1757670347291,"duration":846},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1757670346445,"stop":1757670347291,"duration":846},"status":"passed","steps":[],"attachments":[{"uid":"ff8d339053f47f8c","name":"Screenshot","source":"ff8d339053f47f8c.png","type":"image/png","size":38449}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"Click Sessions","time":{"start":1757670347291,"stop":1757670348984,"duration":1693},"status":"passed","steps":[{"name":"Click Sessions","time":{"start":1757670347291,"stop":1757670348984,"duration":1693},"status":"passed","steps":[],"attachments":[{"uid":"112508b143431d04","name":"Screenshot","source":"112508b143431d04.png","type":"image/png","size":170350}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":40,"attachmentsCount":20,"hasContent":true,"attachmentStep":false}],"afterStages":[{"name":"log_in_as_nurse::0","time":{"start":1757670348996,"stop":1757670349622,"duration":626},"status":"passed","steps":[{"name":"Log out","time":{"start":1757670348996,"stop":1757670349622,"duration":626},"status":"passed","steps":[{"name":"Log out","time":{"start":1757670348996,"stop":1757670349622,"duration":626},"status":"passed","steps":[],"attachments":[{"uid":"2f2b106fbd07249a","name":"Screenshot","source":"2f2b106fbd07249a.png","type":"image/png","size":18537}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"set_feature_flags::0","time":{"start":1757670349622,"stop":1757670349622,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context::0","time":{"start":1757670349623,"stop":1757670349637,"duration":14},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1757670349637,"stop":1757670349637,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1757670776226,"stop":1757670776226,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1757670776226,"stop":1757670776274,"duration":48},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1757670776275,"stop":1757670776285,"duration":10},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests::0","time":{"start":1757670776287,"stop":1757670779154,"duration":2867},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"bug"},{"name":"tag","value":"children"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_children"},{"name":"host","value":"runnervmf4ws1"},{"name":"thread","value":"2186-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_children"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[{"name":"MAV-853","url":"https://nhsd-jira.digital.nhs.uk/browse/MAV-853","type":"issue"}],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"e358c81d85ad8bcd","status":"failed","statusDetails":"AssertionError: Locator expected to be visible\nActual value: <element(s) not found> \nCall log:\n  - Expect \"to_be_visible\" with timeout 5000ms\n  - waiting for get_by_role(\"strong\").get_by_text(\"Completed\").or_(get_by_role(\"strong\").get_by_text(\"Invalid\"))","time":{"start":1757670208570,"stop":1757670208570,"duration":0}},{"uid":"ae9b2494894297f1","status":"failed","statusDetails":"AssertionError: Locator expected to be visible\nActual value: <element(s) not found> \nCall log:\n  - Expect \"to_be_visible\" with timeout 5000ms\n  - waiting for get_by_role(\"strong\").get_by_text(\"Completed\").or_(get_by_role(\"strong\").get_by_text(\"Invalid\"))","time":{"start":1757670139279,"stop":1757670139279,"duration":0}}],"categories":[{"name":"Product defects","matchedStatuses":[]}],"tags":["bug","children"]},"source":"5ff5b564036ee356.json","parameterValues":[]}