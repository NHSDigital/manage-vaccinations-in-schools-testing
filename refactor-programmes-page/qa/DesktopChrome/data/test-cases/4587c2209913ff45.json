{"uid":"4587c2209913ff45","name":"test_create_edit_delete_injected_flu_vaccination_and_verify_imms_api","fullName":"tests.test_imms_api_flu#test_create_edit_delete_injected_flu_vaccination_and_verify_imms_api","historyId":"fcb8d2291937c8d402b3973f6e01e069","time":{"start":1761221199870,"stop":1761221280129,"duration":80259},"description":"\nTest: Create, edit, and delete an injected flu vaccination record and verify changes\nin the IMMS API and Mavis status.\nSteps:\n1. Setup: Schedule flu session, import class list, add vaccine batch, and\n   register child with verbal consent.\n2. Create: Record flu vaccination for the child (LEFT_ARM_UPPER).\n3. Verify: Check the vaccination record exists in the IMMS API.\n   Check Mavis shows \"Synced\".\n4. Edit: Change the delivery site to RIGHT_ARM_LOWER and save.\n5. Verify: Check the updated vaccination record in the IMMS API.\n   Check Mavis still shows \"Synced\".\n6. Edit: Change the outcome to \"They refused it\" and save.\n7. Verify: Check the vaccination record is removed from the IMMS API.\n   Check Mavis shows \"Not synced\".\n","descriptionHtml":"<p>Test: Create, edit, and delete an injected flu vaccination record and verify changes<br />\nin the IMMS API and Mavis status.<br />\nSteps:</p>\n<ol>\n<li>Setup: Schedule flu session, import class list, add vaccine batch, and<br />\nregister child with verbal consent.</li>\n<li>Create: Record flu vaccination for the child (LEFT_ARM_UPPER).</li>\n<li>Verify: Check the vaccination record exists in the IMMS API.<br />\nCheck Mavis shows &quot;Synced&quot;.</li>\n<li>Edit: Change the delivery site to RIGHT_ARM_LOWER and save.</li>\n<li>Verify: Check the updated vaccination record in the IMMS API.<br />\nCheck Mavis still shows &quot;Synced&quot;.</li>\n<li>Edit: Change the outcome to &quot;They refused it&quot; and save.</li>\n<li>Verify: Check the vaccination record is removed from the IMMS API.<br />\nCheck Mavis shows &quot;Not synced&quot;.</li>\n</ol>\n","status":"failed","statusMessage":"AssertionError: No immunization record found","statusTrace":"record_flu_with_consent_option = <function record_flu_with_consent_option.<locals>._factory at 0x7ff29de081a0>\nschools = {'HPV': [School(name='Haven High Academy', urn='138754', site=None), School(name='Great Yarmouth Charter Academy', urn...ic Primary School', urn='141907', site=None), School(name='Fittleworth CofE Village School', urn='125984', site=None)]}\nimms_api_helper = <mavis.test.imms_api.ImmsApiHelper object at 0x7ff29778c2f0>\nsessions_page = <mavis.test.pages.sessions.SessionsPage object at 0x7ff29778eba0>\nvaccination_record_page = <mavis.test.pages.vaccination_record.VaccinationRecordPage object at 0x7ff295a1c2d0>\nedit_vaccination_record_page = <mavis.test.pages.vaccination_record.EditVaccinationRecordPage object at 0x7ff295a1c410>\nchildren_page = <mavis.test.pages.children.ChildrenPage object at 0x7ff295c09480>\n\n    def test_create_edit_delete_injected_flu_vaccination_and_verify_imms_api(\n        record_flu_with_consent_option,\n        schools,\n        imms_api_helper,\n        sessions_page,\n        vaccination_record_page,\n        edit_vaccination_record_page,\n        children_page,\n    ):\n        \"\"\"\n        Test: Create, edit, and delete an injected flu vaccination record and verify changes\n        in the IMMS API and Mavis status.\n        Steps:\n        1. Setup: Schedule flu session, import class list, add vaccine batch, and\n           register child with verbal consent.\n        2. Create: Record flu vaccination for the child (LEFT_ARM_UPPER).\n        3. Verify: Check the vaccination record exists in the IMMS API.\n           Check Mavis shows \"Synced\".\n        4. Edit: Change the delivery site to RIGHT_ARM_LOWER and save.\n        5. Verify: Check the updated vaccination record in the IMMS API.\n           Check Mavis still shows \"Synced\".\n        6. Edit: Change the outcome to \"They refused it\" and save.\n        7. Verify: Check the vaccination record is removed from the IMMS API.\n           Check Mavis shows \"Not synced\".\n        \"\"\"\n        child, vaccination_time = record_flu_with_consent_option(ConsentOption.INJECTION)\n        school = schools[Programme.FLU][0]\n    \n        # Step 3: Verify creation in IMMS API\n>       imms_api_helper.check_record_in_imms_api(\n            Vaccine.SEQUIRUS,\n            child,\n            school,\n            DeliverySite.LEFT_ARM_UPPER,\n            vaccination_time,\n        )\n\ntests/test_imms_api_flu.py:132: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmavis/test/imms_api.py:95: in check_record_in_imms_api\n    self.check_expected_and_actual_records_match(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mavis.test.imms_api.ImmsApiHelper object at 0x7ff29778c2f0>\nexpected_record = ImmsApiVaccinationRecord(patient_nhs_number='9152951790', vaccine_code='43207411000001105', delivery_site=<DeliverySit...7', vaccination_time=datetime.datetime(2025, 10, 23, 13, 6, 49, 990216, tzinfo=zoneinfo.ZoneInfo(key='Europe/London')))\nactual_record = None\n\n    def check_expected_and_actual_records_match(\n        self,\n        expected_record: ImmsApiVaccinationRecord,\n        actual_record: ImmsApiVaccinationRecord | None,\n    ) -> None:\n        if actual_record is None:\n            msg = \"No immunization record found\"\n>           raise AssertionError(msg)\nE           AssertionError: No immunization record found\n\nmavis/test/imms_api.py:114: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":2,"retriesStatusChange":false,"beforeStages":[{"name":"base_url","time":{"start":1761220000122,"stop":1761220000122,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_session_faker","time":{"start":1761220000122,"stop":1761220000124,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1761220000122,"stop":1761220000122,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1761220000124,"stop":1761220000124,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"year_groups","time":{"start":1761220000124,"stop":1761220000124,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1761220000124,"stop":1761220000124,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"onboarding","time":{"start":1761220000125,"stop":1761220027783,"duration":27658},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"programmes_enabled","time":{"start":1761220000125,"stop":1761220000125,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests","time":{"start":1761220027783,"stop":1761220027783,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1761220027783,"stop":1761220027783,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"team","time":{"start":1761220027783,"stop":1761220027783,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1761220027783,"stop":1761220028081,"duration":298},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"nurse","time":{"start":1761220027783,"stop":1761220027783,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1761220028082,"stop":1761220028082,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1761220028082,"stop":1761220028082,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1761220028083,"stop":1761220028083,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1761220028083,"stop":1761220028181,"duration":98},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1761220028083,"stop":1761220028083,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1761220028182,"stop":1761220028183,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1761220028182,"stop":1761220028182,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_credentials","time":{"start":1761220028183,"stop":1761220028183,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1761220028183,"stop":1761220028183,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_token","time":{"start":1761220028183,"stop":1761220028183,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"organisation","time":{"start":1761220132393,"stop":1761220132393,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"schools","time":{"start":1761220132393,"stop":1761220132393,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clinics","time":{"start":1761220132393,"stop":1761220132393,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"authenticate_api","time":{"start":1761220968165,"stop":1761220968955,"duration":790},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"imms_api_helper","time":{"start":1761220968955,"stop":1761220968955,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"reset_before_each_module","time":{"start":1761220968955,"stop":1761220969731,"duration":776},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1761221178661,"stop":1761221178661,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1761221178661,"stop":1761221178666,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1761221178661,"stop":1761221178661,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1761221178661,"stop":1761221178661,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1761221178666,"stop":1761221178694,"duration":28},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"flipper_page","time":{"start":1761221178694,"stop":1761221178694,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_feature_flags","time":{"start":1761221178694,"stop":1761221178694,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_page","time":{"start":1761221178695,"stop":1761221178695,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_as_nurse","time":{"start":1761221178695,"stop":1761221180559,"duration":1864},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1761221178695,"stop":1761221179745,"duration":1050},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1761221178695,"stop":1761221179745,"duration":1050},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Log in as User(username='teresasaunders@example.com', password='teresasaunders@example.com', role='nurse') and choose team Team(name='White-Burton est. 1952', workgroup='I326X', careplus_venue_code='I326X', email='huntdouglas@example.org', phone='+447700 900 390')","time":{"start":1761221179745,"stop":1761221180559,"duration":814},"status":"passed","steps":[{"name":"Log in as {1} and choose team {2}","time":{"start":1761221179745,"stop":1761221180559,"duration":814},"status":"passed","steps":[{"name":"Log in as User(username='teresasaunders@example.com', password='teresasaunders@example.com', role='nurse')","time":{"start":1761221179745,"stop":1761221180534,"duration":789},"status":"passed","steps":[{"name":"Log in as {1}","time":{"start":1761221179745,"stop":1761221180534,"duration":789},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='teresasaunders@example.com', password='teresasaunders@example.com', role='nurse'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='teresasaunders@example.com', password='teresasaunders@example.com', role='nurse'), Team(name='White-Burton est. 1952', workgroup='I326X', careplus_venue_code='I326X', email='huntdouglas@example.org', phone='+447700 900 390'))"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"vaccines_page","time":{"start":1761221180559,"stop":1761221180559,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"add_vaccine_batch","time":{"start":1761221180559,"stop":1761221180559,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"add_batch_page","time":{"start":1761221180559,"stop":1761221180559,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"children","time":{"start":1761221180559,"stop":1761221180563,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"dashboard_page","time":{"start":1761221180559,"stop":1761221180559,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_data","time":{"start":1761221180563,"stop":1761221180564,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"import_records_page","time":{"start":1761221180564,"stop":1761221180564,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"sessions_page","time":{"start":1761221180564,"stop":1761221180564,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_recording_flu","time":{"start":1761221180564,"stop":1761221199869,"duration":19305},"status":"passed","steps":[{"name":"Go to vaccines page","time":{"start":1761221180564,"stop":1761221180748,"duration":184},"status":"passed","steps":[{"name":"Go to vaccines page","time":{"start":1761221180564,"stop":1761221180748,"duration":184},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Add batch for 'Cell-based Trivalent Influenza Vaccine Seqirus'","time":{"start":1761221180748,"stop":1761221180944,"duration":196},"status":"passed","steps":[{"name":"Add batch for {1}","time":{"start":1761221180748,"stop":1761221180944,"duration":196},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Vaccine.SEQUIRUS: 'Cell-based Trivalent Influenza Vaccine Seqirus'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fill in name with 'ABC123'","time":{"start":1761221180944,"stop":1761221180964,"duration":20},"status":"passed","steps":[{"name":"Fill in name with {1}","time":{"start":1761221180944,"stop":1761221180964,"duration":20},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('ABC123',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fill in expiry date with datetime.date(2025, 10, 24)","time":{"start":1761221180965,"stop":1761221180986,"duration":21},"status":"passed","steps":[{"name":"Fill in expiry date with {1}","time":{"start":1761221180965,"stop":1761221180986,"duration":21},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(datetime.date(2025, 10, 24),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Confirm add batch","time":{"start":1761221180986,"stop":1761221181182,"duration":196},"status":"passed","steps":[{"name":"Confirm add batch","time":{"start":1761221180986,"stop":1761221181182,"duration":196},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Go to vaccines page","time":{"start":1761221181182,"stop":1761221181365,"duration":183},"status":"passed","steps":[{"name":"Go to vaccines page","time":{"start":1761221181182,"stop":1761221181365,"duration":183},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Add batch for 'Fluenz'","time":{"start":1761221181365,"stop":1761221181569,"duration":204},"status":"passed","steps":[{"name":"Add batch for {1}","time":{"start":1761221181365,"stop":1761221181569,"duration":204},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Vaccine.FLUENZ: 'Fluenz'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fill in name with 'ABC123'","time":{"start":1761221181569,"stop":1761221181590,"duration":21},"status":"passed","steps":[{"name":"Fill in name with {1}","time":{"start":1761221181569,"stop":1761221181590,"duration":21},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('ABC123',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fill in expiry date with datetime.date(2025, 10, 24)","time":{"start":1761221181591,"stop":1761221181612,"duration":21},"status":"passed","steps":[{"name":"Fill in expiry date with {1}","time":{"start":1761221181591,"stop":1761221181612,"duration":21},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(datetime.date(2025, 10, 24),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Confirm add batch","time":{"start":1761221181612,"stop":1761221181809,"duration":197},"status":"passed","steps":[{"name":"Confirm add batch","time":{"start":1761221181612,"stop":1761221181809,"duration":197},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761221181809,"stop":1761221182009,"duration":200},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761221181809,"stop":1761221182009,"duration":200},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761221182009,"stop":1761221182266,"duration":257},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761221182009,"stop":1761221182266,"duration":257},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'flu' session at School(name='Holy Innocents Catholic Primary School', urn='141907', site=None)","time":{"start":1761221182266,"stop":1761221182893,"duration":627},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1761221182266,"stop":1761221182893,"duration":627},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='Holy Innocents Catholic Primary School', urn='141907', site=None), <Programme.FLU: 'flu'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Import class lists","time":{"start":1761221182899,"stop":1761221183261,"duration":362},"status":"passed","steps":[{"name":"Click on Import class lists","time":{"start":1761221182899,"stop":1761221183261,"duration":362},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761221183314,"stop":1761221183784,"duration":470},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761221183314,"stop":1761221183784,"duration":470},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Set input file to PosixPath('working/ClassFileMapping.FIXED_CHILD20251023130623.csv')","time":{"start":1761221183794,"stop":1761221183813,"duration":19},"status":"passed","steps":[{"name":"Set input file to {1}","time":{"start":1761221183794,"stop":1761221183813,"duration":19},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(PosixPath('working/ClassFileMapping.FIXED_CHILD20251023130623.csv'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761221184813,"stop":1761221185160,"duration":347},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761221184813,"stop":1761221185160,"duration":347},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"_coverage","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click link with uploaded datetime","time":{"start":1761221185200,"stop":1761221185381,"duration":181},"status":"passed","steps":[{"name":"Click link with uploaded datetime","time":{"start":1761221185200,"stop":1761221185381,"duration":181},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761221198542,"stop":1761221198737,"duration":195},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761221198542,"stop":1761221198737,"duration":195},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761221198737,"stop":1761221198957,"duration":220},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761221198737,"stop":1761221198957,"duration":220},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'flu' session at School(name='Holy Innocents Catholic Primary School', urn='141907', site=None)","time":{"start":1761221198957,"stop":1761221199605,"duration":648},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1761221198957,"stop":1761221199605,"duration":648},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='Holy Innocents Catholic Primary School', urn='141907', site=None), <Programme.FLU: 'flu'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Consent tab","time":{"start":1761221199606,"stop":1761221199869,"duration":263},"status":"passed","steps":[{"name":"Click on Consent tab","time":{"start":1761221199606,"stop":1761221199869,"duration":263},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":44,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"verbal_consent_page","time":{"start":1761221199869,"stop":1761221199869,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"record_flu_with_consent_option","time":{"start":1761221199869,"stop":1761221199869,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"children_page","time":{"start":1761221199869,"stop":1761221199869,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"vaccination_record_page","time":{"start":1761221199870,"stop":1761221199870,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"edit_vaccination_record_page","time":{"start":1761221199870,"stop":1761221199870,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\nTest: Create, edit, and delete an injected flu vaccination record and verify changes\nin the IMMS API and Mavis status.\nSteps:\n1. Setup: Schedule flu session, import class list, add vaccine batch, and\n   register child with verbal consent.\n2. Create: Record flu vaccination for the child (LEFT_ARM_UPPER).\n3. Verify: Check the vaccination record exists in the IMMS API.\n   Check Mavis shows \"Synced\".\n4. Edit: Change the delivery site to RIGHT_ARM_LOWER and save.\n5. Verify: Check the updated vaccination record in the IMMS API.\n   Check Mavis still shows \"Synced\".\n6. Edit: Change the outcome to \"They refused it\" and save.\n7. Verify: Check the vaccination record is removed from the IMMS API.\n   Check Mavis shows \"Not synced\".\n","status":"failed","statusMessage":"AssertionError: No immunization record found","statusTrace":"record_flu_with_consent_option = <function record_flu_with_consent_option.<locals>._factory at 0x7ff29de081a0>\nschools = {'HPV': [School(name='Haven High Academy', urn='138754', site=None), School(name='Great Yarmouth Charter Academy', urn...ic Primary School', urn='141907', site=None), School(name='Fittleworth CofE Village School', urn='125984', site=None)]}\nimms_api_helper = <mavis.test.imms_api.ImmsApiHelper object at 0x7ff29778c2f0>\nsessions_page = <mavis.test.pages.sessions.SessionsPage object at 0x7ff29778eba0>\nvaccination_record_page = <mavis.test.pages.vaccination_record.VaccinationRecordPage object at 0x7ff295a1c2d0>\nedit_vaccination_record_page = <mavis.test.pages.vaccination_record.EditVaccinationRecordPage object at 0x7ff295a1c410>\nchildren_page = <mavis.test.pages.children.ChildrenPage object at 0x7ff295c09480>\n\n    def test_create_edit_delete_injected_flu_vaccination_and_verify_imms_api(\n        record_flu_with_consent_option,\n        schools,\n        imms_api_helper,\n        sessions_page,\n        vaccination_record_page,\n        edit_vaccination_record_page,\n        children_page,\n    ):\n        \"\"\"\n        Test: Create, edit, and delete an injected flu vaccination record and verify changes\n        in the IMMS API and Mavis status.\n        Steps:\n        1. Setup: Schedule flu session, import class list, add vaccine batch, and\n           register child with verbal consent.\n        2. Create: Record flu vaccination for the child (LEFT_ARM_UPPER).\n        3. Verify: Check the vaccination record exists in the IMMS API.\n           Check Mavis shows \"Synced\".\n        4. Edit: Change the delivery site to RIGHT_ARM_LOWER and save.\n        5. Verify: Check the updated vaccination record in the IMMS API.\n           Check Mavis still shows \"Synced\".\n        6. Edit: Change the outcome to \"They refused it\" and save.\n        7. Verify: Check the vaccination record is removed from the IMMS API.\n           Check Mavis shows \"Not synced\".\n        \"\"\"\n        child, vaccination_time = record_flu_with_consent_option(ConsentOption.INJECTION)\n        school = schools[Programme.FLU][0]\n    \n        # Step 3: Verify creation in IMMS API\n>       imms_api_helper.check_record_in_imms_api(\n            Vaccine.SEQUIRUS,\n            child,\n            school,\n            DeliverySite.LEFT_ARM_UPPER,\n            vaccination_time,\n        )\n\ntests/test_imms_api_flu.py:132: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmavis/test/imms_api.py:95: in check_record_in_imms_api\n    self.check_expected_and_actual_records_match(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mavis.test.imms_api.ImmsApiHelper object at 0x7ff29778c2f0>\nexpected_record = ImmsApiVaccinationRecord(patient_nhs_number='9152951790', vaccine_code='43207411000001105', delivery_site=<DeliverySit...7', vaccination_time=datetime.datetime(2025, 10, 23, 13, 6, 49, 990216, tzinfo=zoneinfo.ZoneInfo(key='Europe/London')))\nactual_record = None\n\n    def check_expected_and_actual_records_match(\n        self,\n        expected_record: ImmsApiVaccinationRecord,\n        actual_record: ImmsApiVaccinationRecord | None,\n    ) -> None:\n        if actual_record is None:\n            msg = \"No immunization record found\"\n>           raise AssertionError(msg)\nE           AssertionError: No immunization record found\n\nmavis/test/imms_api.py:114: AssertionError","steps":[{"name":"Click on child Child(first_name='Shirley', last_name='CLARK', nhs_number='9152951790', address=('Flat 49', 'Norman burg', 'New Edward', 'G1G 9SG'), date_of_birth=datetime.date(2021, 7, 2), year_group=0, parents=(Parent(full_name='Dean Edwards', relationship='Dad', email_address='hwalker@example.net'), Parent(full_name='Mandy Skinner', relationship='Mum', email_address='debrataylor@example.net')))","time":{"start":1761221200188,"stop":1761221200435,"duration":247},"status":"passed","steps":[{"name":"Click on child {1}","time":{"start":1761221200188,"stop":1761221200435,"duration":247},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(Child(first_name='Shirley', last_name='CLARK', nhs_number='9152951790', address=('Flat 49', 'Norman burg', 'New Edward', 'G1G 9SG'), date_of_birth=datetime.date(2021, 7, 2), year_group=0, parents=(Parent(full_name='Dean Edwards', relationship='Dad', email_address='hwalker@example.net'), Parent(full_name='Mandy Skinner', relationship='Mum', email_address='debrataylor@example.net'))),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'flu' tab","time":{"start":1761221200436,"stop":1761221200451,"duration":15},"status":"passed","steps":[{"name":"Click on {1} tab","time":{"start":1761221200436,"stop":1761221200451,"duration":15},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Programme.FLU: 'flu'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Record a new consent response","time":{"start":1761221200451,"stop":1761221201950,"duration":1499},"status":"passed","steps":[{"name":"Click on Record a new consent response","time":{"start":1761221200451,"stop":1761221201950,"duration":1499},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'Dean Edwards (Dad)' radio button","time":{"start":1761221201950,"stop":1761221201997,"duration":47},"status":"passed","steps":[{"name":"Click on {1} radio button","time":{"start":1761221201950,"stop":1761221201997,"duration":47},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('Dean Edwards (Dad)',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761221201997,"stop":1761221202626,"duration":629},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761221201997,"stop":1761221202626,"duration":629},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761221202626,"stop":1761221203030,"duration":404},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761221202626,"stop":1761221203030,"duration":404},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select consent method","time":{"start":1761221203030,"stop":1761221203080,"duration":50},"status":"passed","steps":[{"name":"Select consent method","time":{"start":1761221203030,"stop":1761221203080,"duration":50},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<ConsentMethod.IN_PERSON: 'In person'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761221203080,"stop":1761221203449,"duration":369},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761221203080,"stop":1761221203449,"duration":369},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Yes, for the injected vaccine only","time":{"start":1761221203449,"stop":1761221203514,"duration":65},"status":"passed","steps":[{"name":"Click on Yes, for the injected vaccine only","time":{"start":1761221203450,"stop":1761221203514,"duration":64},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761221203514,"stop":1761221203987,"duration":473},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761221203514,"stop":1761221203987,"duration":473},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Does your child have a bleeding disorder or are they taking anticoagulant therapy?'","time":{"start":1761221203987,"stop":1761221204046,"duration":59},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1761221203987,"stop":1761221204046,"duration":59},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.BLEEDING_DISORDER_FLU: 'Does your child have a bleeding disorder or are they taking anticoagulant therapy?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Has your child had a severe allergic reaction (anaphylaxis) to a previous dose of the injected flu vaccine, or any ingredient of the vaccine?'","time":{"start":1761221204047,"stop":1761221204080,"duration":33},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1761221204047,"stop":1761221204080,"duration":33},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.SEVERE_ALLERGIC_REACTION_INJECTED: 'Has your child had a severe allergic reaction (anaphylaxis) to a previous dose of the injected flu vaccine, or any ingredient of the vaccine?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Does your child have any other medical conditions the immunisation team should be aware of?'","time":{"start":1761221204080,"stop":1761221204113,"duration":33},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1761221204080,"stop":1761221204113,"duration":33},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.MEDICAL_CONDITIONS_FLU: 'Does your child have any other medical conditions the immunisation team should be aware of?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Has your child had a flu vaccination in the last 3 months?'","time":{"start":1761221204113,"stop":1761221204146,"duration":33},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1761221204113,"stop":1761221204146,"duration":33},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.FLU_PREVIOUSLY: 'Has your child had a flu vaccination in the last 3 months?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Does your child need extra support during vaccination sessions?'","time":{"start":1761221204146,"stop":1761221204179,"duration":33},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1761221204146,"stop":1761221204179,"duration":33},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.EXTRA_SUPPORT: 'Does your child need extra support during vaccination sessions?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761221204179,"stop":1761221204581,"duration":402},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761221204179,"stop":1761221204581,"duration":402},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Confirm","time":{"start":1761221204581,"stop":1761221205585,"duration":1004},"status":"passed","steps":[{"name":"Click Confirm","time":{"start":1761221204581,"stop":1761221205585,"duration":1004},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Register tab","time":{"start":1761221205585,"stop":1761221205955,"duration":370},"status":"passed","steps":[{"name":"Click on Register tab","time":{"start":1761221205585,"stop":1761221205955,"duration":370},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Search for 'CLARK, Shirley'","time":{"start":1761221205955,"stop":1761221206209,"duration":254},"status":"passed","steps":[{"name":"Search for {1}","time":{"start":1761221205955,"stop":1761221206209,"duration":254},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('CLARK, Shirley',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Attending","time":{"start":1761221206209,"stop":1761221207037,"duration":828},"status":"passed","steps":[{"name":"Click on Attending","time":{"start":1761221206209,"stop":1761221207037,"duration":828},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Record vaccinations","time":{"start":1761221207037,"stop":1761221207387,"duration":350},"status":"passed","steps":[{"name":"Click on Record vaccinations","time":{"start":1761221207037,"stop":1761221207387,"duration":350},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Search for 'CLARK, Shirley'","time":{"start":1761221207387,"stop":1761221207656,"duration":269},"status":"passed","steps":[{"name":"Search for {1}","time":{"start":1761221207387,"stop":1761221207656,"duration":269},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('CLARK, Shirley',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'flu' tab","time":{"start":1761221207928,"stop":1761221207946,"duration":18},"status":"passed","steps":[{"name":"Click on {1} tab","time":{"start":1761221207928,"stop":1761221207946,"duration":18},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Programme.FLU: 'flu'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Confirm pre-screening checks are true","time":{"start":1761221207946,"stop":1761221207979,"duration":33},"status":"passed","steps":[{"name":"Confirm pre-screening checks are true","time":{"start":1761221207947,"stop":1761221207979,"duration":32},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Programme.FLU: 'flu'>, <ConsentOption.INJECTION: 'Injection'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Yes","time":{"start":1761221207987,"stop":1761221207994,"duration":7},"status":"passed","steps":[{"name":"Click on Yes","time":{"start":1761221207987,"stop":1761221207994,"duration":7},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(Child(first_name='Shirley', last_name='CLARK', nhs_number='9152951790', address=('Flat 49', 'Norman burg', 'New Edward', 'G1G 9SG'), date_of_birth=datetime.date(2021, 7, 2), year_group=0, parents=(Parent(full_name='Dean Edwards', relationship='Dad', email_address='hwalker@example.net'), Parent(full_name='Mandy Skinner', relationship='Mum', email_address='debrataylor@example.net'))),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Yes","time":{"start":1761221207994,"stop":1761221208030,"duration":36},"status":"passed","steps":[{"name":"Click on Yes","time":{"start":1761221207994,"stop":1761221208030,"duration":36},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<ConsentOption.INJECTION: 'Injection'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select vaccination site 'Left arm (upper position)'","time":{"start":1761221208030,"stop":1761221208063,"duration":33},"status":"passed","steps":[{"name":"Select vaccination site {1}","time":{"start":1761221208030,"stop":1761221208063,"duration":33},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<DeliverySite.LEFT_ARM_UPPER: 'Left arm (upper position)'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Continue","time":{"start":1761221208063,"stop":1761221208447,"duration":384},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1761221208063,"stop":1761221208447,"duration":384},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Choose batch 'ABC123'","time":{"start":1761221208447,"stop":1761221208895,"duration":448},"status":"passed","steps":[{"name":"Choose batch {1}","time":{"start":1761221208447,"stop":1761221208895,"duration":448},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1761221208497,"stop":1761221208895,"duration":398},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1761221208497,"stop":1761221208895,"duration":398},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('ABC123',)"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Confirm","time":{"start":1761221208922,"stop":1761221209969,"duration":1047},"status":"passed","steps":[{"name":"Click on Confirm","time":{"start":1761221208922,"stop":1761221209969,"duration":1047},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":62,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"setup_recording_flu::0","time":{"start":1761221280135,"stop":1761221281336,"duration":1201},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1761221280135,"stop":1761221280509,"duration":374},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1761221280135,"stop":1761221280509,"duration":374},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761221280509,"stop":1761221280706,"duration":197},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761221280509,"stop":1761221280706,"duration":197},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761221280706,"stop":1761221280935,"duration":229},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761221280706,"stop":1761221280935,"duration":229},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"log_in_as_nurse::0","time":{"start":1761221281338,"stop":1761221281833,"duration":495},"status":"passed","steps":[{"name":"Log out","time":{"start":1761221281338,"stop":1761221281833,"duration":495},"status":"passed","steps":[{"name":"Log out","time":{"start":1761221281338,"stop":1761221281833,"duration":495},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"new_context::0","time":{"start":1761221281834,"stop":1761221281844,"duration":10},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_feature_flags::0","time":{"start":1761221281834,"stop":1761221281834,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1761221281845,"stop":1761221281845,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1761221454233,"stop":1761221454234,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1761221454234,"stop":1761221454264,"duration":30},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1761221454266,"stop":1761221454277,"duration":11},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests::0","time":{"start":1761221454278,"stop":1761221455290,"duration":1012},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_imms_api_flu"},{"name":"host","value":"runnervmwhb2z"},{"name":"thread","value":"2318-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_imms_api_flu"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"91555982003e0fbb","status":"failed","statusDetails":"AssertionError: No immunization record found","time":{"start":1761221095078,"stop":1761221177045,"duration":81967}},{"uid":"3cdf12b31b436900","status":"failed","statusDetails":"AssertionError: Locator expected to be visible\nActual value: <element(s) not found> \nCall log:\n  - Expect \"to_be_visible\" with timeout 5000ms\n  - waiting for get_by_role(\"strong\").get_by_text(\"Completed\").or_(get_by_role(\"strong\").get_by_text(\"Invalid\"))","time":{"start":1761220968164,"stop":1761220968164,"duration":0}}],"categories":[{"name":"Product defects","matchedStatuses":[]}],"tags":[]},"source":"4587c2209913ff45.json","parameterValues":[]}