{"uid":"56b0351316dbb1bb","name":"test_vaccination_file_upload_systmone_historic_invalid_data","fullName":"tests.test_import_vaccinations#test_vaccination_file_upload_systmone_historic_invalid_data","historyId":"9c134d2635a74e9c00214e6cce56058c","time":{"start":1761970691931,"stop":1761970723881,"duration":31950},"description":"\nTest: Upload a SystmOne historic vaccination records file with invalid data and\n   verify error handling.\nSteps:\n1. Navigate to vaccination records import page.\n2. Upload a SystmOne historic file with invalid data.\nVerification:\n- Output lists errors as expected for each record\nScenarios covered:\nEmptyDoB, InvalidDoB, LongerNHSNo, ShorterNHSNo, InvalidVaccsType, InvalidVaccsDose,\nInvalidVaccsType, EmptyFirstName, EmptyPostcode, InvalidPostcode, EmptySex,\nInvalidSex, EmptyLastName, EmptyEventDate, InvalidEventDate, FutureEventDate,\nPastEventDate, InvalidEventTime, InvalidSchoolURN\n","descriptionHtml":"<p>Test: Upload a SystmOne historic vaccination records file with invalid data and<br />\nverify error handling.<br />\nSteps:</p>\n<ol>\n<li>Navigate to vaccination records import page.</li>\n<li>Upload a SystmOne historic file with invalid data.<br />\nVerification:</li>\n</ol>\n<ul>\n<li>Output lists errors as expected for each record<br />\nScenarios covered:<br />\nEmptyDoB, InvalidDoB, LongerNHSNo, ShorterNHSNo, InvalidVaccsType, InvalidVaccsDose,<br />\nInvalidVaccsType, EmptyFirstName, EmptyPostcode, InvalidPostcode, EmptySex,<br />\nInvalidSex, EmptyLastName, EmptyEventDate, InvalidEventDate, FutureEventDate,<br />\nPastEventDate, InvalidEventTime, InvalidSchoolURN</li>\n</ul>\n","status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Locator.click: Timeout 30000ms exceeded.\nCall log:\n  - waiting for get_by_role(\"link\", name=\"1 November 2025 at 4:18am\").or_(get_by_role(\"link\", name=\"1 November 2025 at 4:19am\")).first\n    - locator resolved to <a href=\"/immunisation-imports/1078992\">1 November 2025 at 4:18am</a>\n  - attempting click action\n    - waiting for element to be visible, enabled and stable\n    - element is visible, enabled and stable\n    - scrolling into view if needed\n    - done scrolling\n    - <div class=\"nhsuk-notification-banner__content\">…</div> from <div role=\"alert\" tabindex=\"-1\" data-nhsuk-notification-banner-init=\"\" data-module=\"nhsuk-notification-banner\" aria-labelledby=\"govuk-notification-banner-title\" class=\"nhsuk-notification-banner nhsuk-notification-banner--success\">…</div> subtree intercepts pointer events\n  - retrying click action\n    - waiting for element to be visible, enabled and stable\n    - element is visible, enabled and stable\n    - scrolling into view if needed\n    - done scrolling\n    - <a href=\"/imports\" data-turbo=\"true\" aria-current=\"true\" data-turbo-action=\"replace\" class=\"app-secondary-navigation__link\">…</a> from <nav aria-label=\"Secondary menu\" class=\"app-secondary-navigation\">…</nav> subtree intercepts pointer events\n  - retrying click action\n    - waiting 20ms\n    - waiting for element to be visible, enabled and stable\n    - element is visible, enabled and stable\n    - scrolling into view if needed\n    - done scrolling\n    - <div class=\"nhsuk-notification-banner__content\">…</div> from <div role=\"alert\" tabindex=\"-1\" data-nhsuk-notification-banner-init=\"\" data-module=\"nhsuk-notification-banner\" aria-labelledby=\"govuk-notification-banner-title\" class=\"nhsuk-notification-banner nhsuk-notification-banner--success\">…</div> subtree intercepts pointer events\n  2 × retrying click action\n      - waiting 100ms\n      - waiting for element to be visible, enabled and stable\n      - element is visible, enabled and stable\n      - scrolling into view if needed\n      - done scrolling\n      - <svg width=\"16\" height=\"16\" focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" class=\"nhsuk-icon nhsuk-icon--user\">…</svg> from <header data-nhsuk-header-init=\"\" data-module=\"nhsuk-header\" class=\"nhsuk-header app-header\">…</header> subtree intercepts pointer events\n  14 × retrying click action\n       - waiting 500ms\n       - waiting for element to be visible, enabled and stable\n       - element is visible, enabled and stable\n       - scrolling into view if needed\n       - done scrolling\n       - <h3 class=\"nhsuk-table__heading-tab\">↵    22 imports↵  </h3> intercepts pointer events\n     - retrying click action\n       - waiting 500ms\n       - waiting for element to be visible, enabled and stable\n       - element is visible, enabled and stable\n       - scrolling into view if needed\n       - done scrolling\n       - <main role=\"main\" id=\"main-content\" class=\"nhsuk-main-wrapper\">…</main> intercepts pointer events\n     - retrying click action\n       - waiting 500ms\n       - waiting for element to be visible, enabled and stable\n       - element is visible, enabled and stable\n       - scrolling into view if needed\n       - done scrolling\n       - <svg width=\"16\" height=\"16\" focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" class=\"nhsuk-icon nhsuk-icon--user\">…</svg> from <header data-nhsuk-header-init=\"\" data-module=\"nhsuk-header\" class=\"nhsuk-header app-header\">…</header> subtree intercepts pointer events\n     - retrying click action\n       - waiting 500ms\n       - waiting for element to be visible, enabled and stable\n       - element is visible, enabled and stable\n       - scrolling into view if needed\n       - done scrolling\n       - <svg width=\"16\" height=\"16\" focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" class=\"nhsuk-icon nhsuk-icon--user\">…</svg> from <header data-nhsuk-header-init=\"\" data-module=\"nhsuk-header\" class=\"nhsuk-header app-header\">…</header> subtree intercepts pointer events\n  - retrying click action\n    - waiting 500ms\n    - waiting for element to be visible, enabled and stable\n    - element is visible, enabled and stable\n    - scrolling into view if needed\n    - done scrolling\n    - <h3 class=\"nhsuk-table__heading-tab\">↵    22 imports↵  </h3> intercepts pointer events\n  - retrying click action\n    - waiting 500ms","statusTrace":"setup_vaccs_systmone = None\nimport_records_page = <mavis.test.pages.import_records.ImportRecordsPage object at 0x7f25fe931b70>\n\n    @pytest.mark.vaccinations\n    def test_vaccination_file_upload_systmone_historic_invalid_data(\n        setup_vaccs_systmone,\n        import_records_page,\n    ):\n        \"\"\"\n        Test: Upload a SystmOne historic vaccination records file with invalid data and\n           verify error handling.\n        Steps:\n        1. Navigate to vaccination records import page.\n        2. Upload a SystmOne historic file with invalid data.\n        Verification:\n        - Output lists errors as expected for each record\n        Scenarios covered:\n        EmptyDoB, InvalidDoB, LongerNHSNo, ShorterNHSNo, InvalidVaccsType, InvalidVaccsDose,\n        InvalidVaccsType, EmptyFirstName, EmptyPostcode, InvalidPostcode, EmptySex,\n        InvalidSex, EmptyLastName, EmptyEventDate, InvalidEventDate, FutureEventDate,\n        PastEventDate, InvalidEventTime, InvalidSchoolURN\n        \"\"\"\n>       import_records_page.upload_and_verify_output(\n            VaccsFileMapping.SYSTMONE_HIST_NEGATIVE,\n        )\n\ntests/test_import_vaccinations.py:379: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmavis/test/pages/import_records.py:138: in upload_and_verify_output\n    self.click_uploaded_file_datetime()\nmavis/test/annotations.py:35: in wrapper\n    return_value = func(self, *args, **kwargs)\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^\nmavis/test/pages/import_records.py:162: in click_uploaded_file_datetime\n    first_link.or_(second_link).first.click()\n.venv/lib/python3.14/site-packages/playwright/sync_api/_generated.py:15543: in click\n    self._sync(\n.venv/lib/python3.14/site-packages/playwright/_impl/_locator.py:160: in click\n    return await self._frame.click(self._selector, strict=True, **params)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.14/site-packages/playwright/_impl/_frame.py:549: in click\n    await self._channel.send(\"click\", self._timeout, locals_to_params(locals()))\n.venv/lib/python3.14/site-packages/playwright/_impl/_connection.py:69: in send\n    return await self._connection.wrap_api_call(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <playwright._impl._connection.Connection object at 0x7f260e1adbe0>\ncb = <function Channel.send.<locals>.<lambda> at 0x7f25fdcd00f0>\nis_internal = False, title = None\n\n    async def wrap_api_call(\n        self, cb: Callable[[], Any], is_internal: bool = False, title: str = None\n    ) -> Any:\n        if self._api_zone.get():\n            return await cb()\n        task = asyncio.current_task(self._loop)\n        st: List[inspect.FrameInfo] = getattr(\n            task, \"__pw_stack__\", None\n        ) or inspect.stack(0)\n    \n        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal, title)\n        self._api_zone.set(parsed_st)\n        try:\n            return await cb()\n        except Exception as error:\n>           raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nE           playwright._impl._errors.TimeoutError: Locator.click: Timeout 30000ms exceeded.\nE           Call log:\nE             - waiting for get_by_role(\"link\", name=\"1 November 2025 at 4:18am\").or_(get_by_role(\"link\", name=\"1 November 2025 at 4:19am\")).first\nE               - locator resolved to <a href=\"/immunisation-imports/1078992\">1 November 2025 at 4:18am</a>\nE             - attempting click action\nE               - waiting for element to be visible, enabled and stable\nE               - element is visible, enabled and stable\nE               - scrolling into view if needed\nE               - done scrolling\nE               - <div class=\"nhsuk-notification-banner__content\">…</div> from <div role=\"alert\" tabindex=\"-1\" data-nhsuk-notification-banner-init=\"\" data-module=\"nhsuk-notification-banner\" aria-labelledby=\"govuk-notification-banner-title\" class=\"nhsuk-notification-banner nhsuk-notification-banner--success\">…</div> subtree intercepts pointer events\nE             - retrying click action\nE               - waiting for element to be visible, enabled and stable\nE               - element is visible, enabled and stable\nE               - scrolling into view if needed\nE               - done scrolling\nE               - <a href=\"/imports\" data-turbo=\"true\" aria-current=\"true\" data-turbo-action=\"replace\" class=\"app-secondary-navigation__link\">…</a> from <nav aria-label=\"Secondary menu\" class=\"app-secondary-navigation\">…</nav> subtree intercepts pointer events\nE             - retrying click action\nE               - waiting 20ms\nE               - waiting for element to be visible, enabled and stable\nE               - element is visible, enabled and stable\nE               - scrolling into view if needed\nE               - done scrolling\nE               - <div class=\"nhsuk-notification-banner__content\">…</div> from <div role=\"alert\" tabindex=\"-1\" data-nhsuk-notification-banner-init=\"\" data-module=\"nhsuk-notification-banner\" aria-labelledby=\"govuk-notification-banner-title\" class=\"nhsuk-notification-banner nhsuk-notification-banner--success\">…</div> subtree intercepts pointer events\nE             2 × retrying click action\nE                 - waiting 100ms\nE                 - waiting for element to be visible, enabled and stable\nE                 - element is visible, enabled and stable\nE                 - scrolling into view if needed\nE                 - done scrolling\nE                 - <svg width=\"16\" height=\"16\" focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" class=\"nhsuk-icon nhsuk-icon--user\">…</svg> from <header data-nhsuk-header-init=\"\" data-module=\"nhsuk-header\" class=\"nhsuk-header app-header\">…</header> subtree intercepts pointer events\nE             14 × retrying click action\nE                  - waiting 500ms\nE                  - waiting for element to be visible, enabled and stable\nE                  - element is visible, enabled and stable\nE                  - scrolling into view if needed\nE                  - done scrolling\nE                  - <h3 class=\"nhsuk-table__heading-tab\">↵    22 imports↵  </h3> intercepts pointer events\nE                - retrying click action\nE                  - waiting 500ms\nE                  - waiting for element to be visible, enabled and stable\nE                  - element is visible, enabled and stable\nE                  - scrolling into view if needed\nE                  - done scrolling\nE                  - <main role=\"main\" id=\"main-content\" class=\"nhsuk-main-wrapper\">…</main> intercepts pointer events\nE                - retrying click action\nE                  - waiting 500ms\nE                  - waiting for element to be visible, enabled and stable\nE                  - element is visible, enabled and stable\nE                  - scrolling into view if needed\nE                  - done scrolling\nE                  - <svg width=\"16\" height=\"16\" focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" class=\"nhsuk-icon nhsuk-icon--user\">…</svg> from <header data-nhsuk-header-init=\"\" data-module=\"nhsuk-header\" class=\"nhsuk-header app-header\">…</header> subtree intercepts pointer events\nE                - retrying click action\nE                  - waiting 500ms\nE                  - waiting for element to be visible, enabled and stable\nE                  - element is visible, enabled and stable\nE                  - scrolling into view if needed\nE                  - done scrolling\nE                  - <svg width=\"16\" height=\"16\" focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" class=\"nhsuk-icon nhsuk-icon--user\">…</svg> from <header data-nhsuk-header-init=\"\" data-module=\"nhsuk-header\" class=\"nhsuk-header app-header\">…</header> subtree intercepts pointer events\nE             - retrying click action\nE               - waiting 500ms\nE               - waiting for element to be visible, enabled and stable\nE               - element is visible, enabled and stable\nE               - scrolling into view if needed\nE               - done scrolling\nE               - <h3 class=\"nhsuk-table__heading-tab\">↵    22 imports↵  </h3> intercepts pointer events\nE             - retrying click action\nE               - waiting 500ms\n\n.venv/lib/python3.14/site-packages/playwright/_impl/_connection.py:558: TimeoutError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"base_url","time":{"start":1761970192256,"stop":1761970192256,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1761970192256,"stop":1761970192256,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_session_faker","time":{"start":1761970192257,"stop":1761970192258,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1761970192258,"stop":1761970192258,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"year_groups","time":{"start":1761970192258,"stop":1761970192258,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"programmes_enabled","time":{"start":1761970192258,"stop":1761970192258,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1761970192258,"stop":1761970192258,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"onboarding","time":{"start":1761970192258,"stop":1761970203576,"duration":11318},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"schools","time":{"start":1761970203576,"stop":1761970203576,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1761970203576,"stop":1761970203576,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clinics","time":{"start":1761970203576,"stop":1761970203576,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"nurse","time":{"start":1761970203576,"stop":1761970203576,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"team","time":{"start":1761970203576,"stop":1761970203576,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1761970203576,"stop":1761970203869,"duration":293},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests","time":{"start":1761970203576,"stop":1761970203576,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"organisation","time":{"start":1761970203576,"stop":1761970203576,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1761970203869,"stop":1761970203869,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1761970203869,"stop":1761970203870,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1761970203870,"stop":1761970203870,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1761970203870,"stop":1761970203870,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1761970203870,"stop":1761970205149,"duration":1279},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1761970205149,"stop":1761970205149,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1761970205149,"stop":1761970205151,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1761970205151,"stop":1761970205151,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_credentials","time":{"start":1761970205151,"stop":1761970205151,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_token","time":{"start":1761970205151,"stop":1761970205151,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"reset_before_each_module","time":{"start":1761970205151,"stop":1761970207268,"duration":2117},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1761970688261,"stop":1761970688261,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1761970688261,"stop":1761970688261,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1761970688261,"stop":1761970688267,"duration":6},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1761970688261,"stop":1761970688261,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1761970688267,"stop":1761970688291,"duration":24},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"flipper_page","time":{"start":1761970688291,"stop":1761970688291,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_page","time":{"start":1761970688292,"stop":1761970688292,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_feature_flags","time":{"start":1761970688292,"stop":1761970688292,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_as_nurse","time":{"start":1761970688292,"stop":1761970689949,"duration":1657},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1761970688292,"stop":1761970689142,"duration":850},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1761970688292,"stop":1761970689142,"duration":850},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Log in as User(username='wball@example.org', password='wball@example.org', role='nurse') and choose team Team(name='Dunn, Shaw and Riley est. 1906', workgroup='J979D', careplus_venue_code='J979D', email='julian27@example.com', phone='+44(0)7700 900 767')","time":{"start":1761970689143,"stop":1761970689949,"duration":806},"status":"passed","steps":[{"name":"Log in as {1} and choose team {2}","time":{"start":1761970689143,"stop":1761970689949,"duration":806},"status":"passed","steps":[{"name":"Log in as User(username='wball@example.org', password='wball@example.org', role='nurse')","time":{"start":1761970689143,"stop":1761970689924,"duration":781},"status":"passed","steps":[{"name":"Log in as {1}","time":{"start":1761970689143,"stop":1761970689924,"duration":781},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='wball@example.org', password='wball@example.org', role='nurse'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='wball@example.org', password='wball@example.org', role='nurse'), Team(name='Dunn, Shaw and Riley est. 1906', workgroup='J979D', careplus_venue_code='J979D', email='julian27@example.com', phone='+44(0)7700 900 767'))"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"dashboard_page","time":{"start":1761970689950,"stop":1761970689950,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"children","time":{"start":1761970689950,"stop":1761970689954,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"sessions_page","time":{"start":1761970689954,"stop":1761970689955,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_data","time":{"start":1761970689954,"stop":1761970689954,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_vaccs_systmone","time":{"start":1761970689955,"stop":1761970691931,"duration":1976},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761970689955,"stop":1761970690177,"duration":222},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761970689955,"stop":1761970690177,"duration":222},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'HPV' session at School(name='Langley Hall Arts Academy', urn='149466', site=None)","time":{"start":1761970690177,"stop":1761970690771,"duration":594},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1761970690177,"stop":1761970690770,"duration":593},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='Langley Hall Arts Academy', urn='149466', site=None), <Programme.HPV: 'HPV'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761970690776,"stop":1761970690925,"duration":149},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761970690776,"stop":1761970690925,"duration":149},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Import Records","time":{"start":1761970690925,"stop":1761970691110,"duration":185},"status":"passed","steps":[{"name":"Click on Import Records","time":{"start":1761970690925,"stop":1761970691110,"duration":185},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Import Records","time":{"start":1761970691110,"stop":1761970691495,"duration":385},"status":"passed","steps":[{"name":"Click on Import Records","time":{"start":1761970691110,"stop":1761970691495,"duration":385},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select Vaccination Records","time":{"start":1761970691495,"stop":1761970691557,"duration":62},"status":"passed","steps":[{"name":"Select Vaccination Records","time":{"start":1761970691495,"stop":1761970691557,"duration":62},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761970691557,"stop":1761970691931,"duration":374},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761970691557,"stop":1761970691931,"duration":374},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":14,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"import_records_page","time":{"start":1761970689955,"stop":1761970689955,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\nTest: Upload a SystmOne historic vaccination records file with invalid data and\n   verify error handling.\nSteps:\n1. Navigate to vaccination records import page.\n2. Upload a SystmOne historic file with invalid data.\nVerification:\n- Output lists errors as expected for each record\nScenarios covered:\nEmptyDoB, InvalidDoB, LongerNHSNo, ShorterNHSNo, InvalidVaccsType, InvalidVaccsDose,\nInvalidVaccsType, EmptyFirstName, EmptyPostcode, InvalidPostcode, EmptySex,\nInvalidSex, EmptyLastName, EmptyEventDate, InvalidEventDate, FutureEventDate,\nPastEventDate, InvalidEventTime, InvalidSchoolURN\n","status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Locator.click: Timeout 30000ms exceeded.\nCall log:\n  - waiting for get_by_role(\"link\", name=\"1 November 2025 at 4:18am\").or_(get_by_role(\"link\", name=\"1 November 2025 at 4:19am\")).first\n    - locator resolved to <a href=\"/immunisation-imports/1078992\">1 November 2025 at 4:18am</a>\n  - attempting click action\n    - waiting for element to be visible, enabled and stable\n    - element is visible, enabled and stable\n    - scrolling into view if needed\n    - done scrolling\n    - <div class=\"nhsuk-notification-banner__content\">…</div> from <div role=\"alert\" tabindex=\"-1\" data-nhsuk-notification-banner-init=\"\" data-module=\"nhsuk-notification-banner\" aria-labelledby=\"govuk-notification-banner-title\" class=\"nhsuk-notification-banner nhsuk-notification-banner--success\">…</div> subtree intercepts pointer events\n  - retrying click action\n    - waiting for element to be visible, enabled and stable\n    - element is visible, enabled and stable\n    - scrolling into view if needed\n    - done scrolling\n    - <a href=\"/imports\" data-turbo=\"true\" aria-current=\"true\" data-turbo-action=\"replace\" class=\"app-secondary-navigation__link\">…</a> from <nav aria-label=\"Secondary menu\" class=\"app-secondary-navigation\">…</nav> subtree intercepts pointer events\n  - retrying click action\n    - waiting 20ms\n    - waiting for element to be visible, enabled and stable\n    - element is visible, enabled and stable\n    - scrolling into view if needed\n    - done scrolling\n    - <div class=\"nhsuk-notification-banner__content\">…</div> from <div role=\"alert\" tabindex=\"-1\" data-nhsuk-notification-banner-init=\"\" data-module=\"nhsuk-notification-banner\" aria-labelledby=\"govuk-notification-banner-title\" class=\"nhsuk-notification-banner nhsuk-notification-banner--success\">…</div> subtree intercepts pointer events\n  2 × retrying click action\n      - waiting 100ms\n      - waiting for element to be visible, enabled and stable\n      - element is visible, enabled and stable\n      - scrolling into view if needed\n      - done scrolling\n      - <svg width=\"16\" height=\"16\" focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" class=\"nhsuk-icon nhsuk-icon--user\">…</svg> from <header data-nhsuk-header-init=\"\" data-module=\"nhsuk-header\" class=\"nhsuk-header app-header\">…</header> subtree intercepts pointer events\n  14 × retrying click action\n       - waiting 500ms\n       - waiting for element to be visible, enabled and stable\n       - element is visible, enabled and stable\n       - scrolling into view if needed\n       - done scrolling\n       - <h3 class=\"nhsuk-table__heading-tab\">↵    22 imports↵  </h3> intercepts pointer events\n     - retrying click action\n       - waiting 500ms\n       - waiting for element to be visible, enabled and stable\n       - element is visible, enabled and stable\n       - scrolling into view if needed\n       - done scrolling\n       - <main role=\"main\" id=\"main-content\" class=\"nhsuk-main-wrapper\">…</main> intercepts pointer events\n     - retrying click action\n       - waiting 500ms\n       - waiting for element to be visible, enabled and stable\n       - element is visible, enabled and stable\n       - scrolling into view if needed\n       - done scrolling\n       - <svg width=\"16\" height=\"16\" focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" class=\"nhsuk-icon nhsuk-icon--user\">…</svg> from <header data-nhsuk-header-init=\"\" data-module=\"nhsuk-header\" class=\"nhsuk-header app-header\">…</header> subtree intercepts pointer events\n     - retrying click action\n       - waiting 500ms\n       - waiting for element to be visible, enabled and stable\n       - element is visible, enabled and stable\n       - scrolling into view if needed\n       - done scrolling\n       - <svg width=\"16\" height=\"16\" focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" class=\"nhsuk-icon nhsuk-icon--user\">…</svg> from <header data-nhsuk-header-init=\"\" data-module=\"nhsuk-header\" class=\"nhsuk-header app-header\">…</header> subtree intercepts pointer events\n  - retrying click action\n    - waiting 500ms\n    - waiting for element to be visible, enabled and stable\n    - element is visible, enabled and stable\n    - scrolling into view if needed\n    - done scrolling\n    - <h3 class=\"nhsuk-table__heading-tab\">↵    22 imports↵  </h3> intercepts pointer events\n  - retrying click action\n    - waiting 500ms","statusTrace":"setup_vaccs_systmone = None\nimport_records_page = <mavis.test.pages.import_records.ImportRecordsPage object at 0x7f25fe931b70>\n\n    @pytest.mark.vaccinations\n    def test_vaccination_file_upload_systmone_historic_invalid_data(\n        setup_vaccs_systmone,\n        import_records_page,\n    ):\n        \"\"\"\n        Test: Upload a SystmOne historic vaccination records file with invalid data and\n           verify error handling.\n        Steps:\n        1. Navigate to vaccination records import page.\n        2. Upload a SystmOne historic file with invalid data.\n        Verification:\n        - Output lists errors as expected for each record\n        Scenarios covered:\n        EmptyDoB, InvalidDoB, LongerNHSNo, ShorterNHSNo, InvalidVaccsType, InvalidVaccsDose,\n        InvalidVaccsType, EmptyFirstName, EmptyPostcode, InvalidPostcode, EmptySex,\n        InvalidSex, EmptyLastName, EmptyEventDate, InvalidEventDate, FutureEventDate,\n        PastEventDate, InvalidEventTime, InvalidSchoolURN\n        \"\"\"\n>       import_records_page.upload_and_verify_output(\n            VaccsFileMapping.SYSTMONE_HIST_NEGATIVE,\n        )\n\ntests/test_import_vaccinations.py:379: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmavis/test/pages/import_records.py:138: in upload_and_verify_output\n    self.click_uploaded_file_datetime()\nmavis/test/annotations.py:35: in wrapper\n    return_value = func(self, *args, **kwargs)\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^\nmavis/test/pages/import_records.py:162: in click_uploaded_file_datetime\n    first_link.or_(second_link).first.click()\n.venv/lib/python3.14/site-packages/playwright/sync_api/_generated.py:15543: in click\n    self._sync(\n.venv/lib/python3.14/site-packages/playwright/_impl/_locator.py:160: in click\n    return await self._frame.click(self._selector, strict=True, **params)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.14/site-packages/playwright/_impl/_frame.py:549: in click\n    await self._channel.send(\"click\", self._timeout, locals_to_params(locals()))\n.venv/lib/python3.14/site-packages/playwright/_impl/_connection.py:69: in send\n    return await self._connection.wrap_api_call(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <playwright._impl._connection.Connection object at 0x7f260e1adbe0>\ncb = <function Channel.send.<locals>.<lambda> at 0x7f25fdcd00f0>\nis_internal = False, title = None\n\n    async def wrap_api_call(\n        self, cb: Callable[[], Any], is_internal: bool = False, title: str = None\n    ) -> Any:\n        if self._api_zone.get():\n            return await cb()\n        task = asyncio.current_task(self._loop)\n        st: List[inspect.FrameInfo] = getattr(\n            task, \"__pw_stack__\", None\n        ) or inspect.stack(0)\n    \n        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal, title)\n        self._api_zone.set(parsed_st)\n        try:\n            return await cb()\n        except Exception as error:\n>           raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nE           playwright._impl._errors.TimeoutError: Locator.click: Timeout 30000ms exceeded.\nE           Call log:\nE             - waiting for get_by_role(\"link\", name=\"1 November 2025 at 4:18am\").or_(get_by_role(\"link\", name=\"1 November 2025 at 4:19am\")).first\nE               - locator resolved to <a href=\"/immunisation-imports/1078992\">1 November 2025 at 4:18am</a>\nE             - attempting click action\nE               - waiting for element to be visible, enabled and stable\nE               - element is visible, enabled and stable\nE               - scrolling into view if needed\nE               - done scrolling\nE               - <div class=\"nhsuk-notification-banner__content\">…</div> from <div role=\"alert\" tabindex=\"-1\" data-nhsuk-notification-banner-init=\"\" data-module=\"nhsuk-notification-banner\" aria-labelledby=\"govuk-notification-banner-title\" class=\"nhsuk-notification-banner nhsuk-notification-banner--success\">…</div> subtree intercepts pointer events\nE             - retrying click action\nE               - waiting for element to be visible, enabled and stable\nE               - element is visible, enabled and stable\nE               - scrolling into view if needed\nE               - done scrolling\nE               - <a href=\"/imports\" data-turbo=\"true\" aria-current=\"true\" data-turbo-action=\"replace\" class=\"app-secondary-navigation__link\">…</a> from <nav aria-label=\"Secondary menu\" class=\"app-secondary-navigation\">…</nav> subtree intercepts pointer events\nE             - retrying click action\nE               - waiting 20ms\nE               - waiting for element to be visible, enabled and stable\nE               - element is visible, enabled and stable\nE               - scrolling into view if needed\nE               - done scrolling\nE               - <div class=\"nhsuk-notification-banner__content\">…</div> from <div role=\"alert\" tabindex=\"-1\" data-nhsuk-notification-banner-init=\"\" data-module=\"nhsuk-notification-banner\" aria-labelledby=\"govuk-notification-banner-title\" class=\"nhsuk-notification-banner nhsuk-notification-banner--success\">…</div> subtree intercepts pointer events\nE             2 × retrying click action\nE                 - waiting 100ms\nE                 - waiting for element to be visible, enabled and stable\nE                 - element is visible, enabled and stable\nE                 - scrolling into view if needed\nE                 - done scrolling\nE                 - <svg width=\"16\" height=\"16\" focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" class=\"nhsuk-icon nhsuk-icon--user\">…</svg> from <header data-nhsuk-header-init=\"\" data-module=\"nhsuk-header\" class=\"nhsuk-header app-header\">…</header> subtree intercepts pointer events\nE             14 × retrying click action\nE                  - waiting 500ms\nE                  - waiting for element to be visible, enabled and stable\nE                  - element is visible, enabled and stable\nE                  - scrolling into view if needed\nE                  - done scrolling\nE                  - <h3 class=\"nhsuk-table__heading-tab\">↵    22 imports↵  </h3> intercepts pointer events\nE                - retrying click action\nE                  - waiting 500ms\nE                  - waiting for element to be visible, enabled and stable\nE                  - element is visible, enabled and stable\nE                  - scrolling into view if needed\nE                  - done scrolling\nE                  - <main role=\"main\" id=\"main-content\" class=\"nhsuk-main-wrapper\">…</main> intercepts pointer events\nE                - retrying click action\nE                  - waiting 500ms\nE                  - waiting for element to be visible, enabled and stable\nE                  - element is visible, enabled and stable\nE                  - scrolling into view if needed\nE                  - done scrolling\nE                  - <svg width=\"16\" height=\"16\" focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" class=\"nhsuk-icon nhsuk-icon--user\">…</svg> from <header data-nhsuk-header-init=\"\" data-module=\"nhsuk-header\" class=\"nhsuk-header app-header\">…</header> subtree intercepts pointer events\nE                - retrying click action\nE                  - waiting 500ms\nE                  - waiting for element to be visible, enabled and stable\nE                  - element is visible, enabled and stable\nE                  - scrolling into view if needed\nE                  - done scrolling\nE                  - <svg width=\"16\" height=\"16\" focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" class=\"nhsuk-icon nhsuk-icon--user\">…</svg> from <header data-nhsuk-header-init=\"\" data-module=\"nhsuk-header\" class=\"nhsuk-header app-header\">…</header> subtree intercepts pointer events\nE             - retrying click action\nE               - waiting 500ms\nE               - waiting for element to be visible, enabled and stable\nE               - element is visible, enabled and stable\nE               - scrolling into view if needed\nE               - done scrolling\nE               - <h3 class=\"nhsuk-table__heading-tab\">↵    22 imports↵  </h3> intercepts pointer events\nE             - retrying click action\nE               - waiting 500ms\n\n.venv/lib/python3.14/site-packages/playwright/_impl/_connection.py:558: TimeoutError","steps":[{"name":"Set input file to PosixPath('working/VaccsFileMapping.SYSTMONE_HIST_NEGATIVE20251101041811.csv')","time":{"start":1761970691944,"stop":1761970691960,"duration":16},"status":"passed","steps":[{"name":"Set input file to {1}","time":{"start":1761970691944,"stop":1761970691960,"duration":16},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(PosixPath('working/VaccsFileMapping.SYSTMONE_HIST_NEGATIVE20251101041811.csv'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761970692960,"stop":1761970693252,"duration":292},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761970692960,"stop":1761970693251,"duration":291},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"_coverage","value":"'EmptyDoB, InvalidDoB, LongerNHSNo, ShorterNHSNo, InvalidVaccsType, InvalidVaccsDose, InvalidVaccsType, EmptyFirstName, EmptyPostcode, InvalidPostcode, EmptySex, InvalidSex, EmptyLastName, EmptyEventDate, InvalidEventDate, FutureEventDate, PastEventDate, InvalidEventTime, InvalidSchoolURN'"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click link with uploaded datetime","time":{"start":1761970693288,"stop":1761970723880,"duration":30592},"status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Locator.click: Timeout 30000ms exceeded.\nCall log:\n  - waiting for get_by_role(\"link\", name=\"1 November 2025 at 4:18am\").or_(get_by_role(\"link\", name=\"1 November 2025 at 4:19am\")).first\n    - locator resolved to <a href=\"/immunisation-imports/1078992\">1 November 2025 at 4:18am</a>\n  - attempting click action\n    - waiting for element to be visible, enabled and stable\n    - element is visible, enabled and stable\n    - scrolling into view if needed\n    - done scrolling\n    - <div class=\"nhsuk-notification-banner__content\">…</div> from <div role=\"alert\" tabindex=\"-1\" data-nhsuk-notification-banner-init=\"\" data-module=\"nhsuk-notification-banner\" aria-labelledby=\"govuk-notification-banner-title\" class=\"nhsuk-notification-banner nhsuk-notification-banner--success\">…</div> subtree intercepts pointer events\n  - retrying click action\n    - waiting for element to be visible, enabled and stable\n    - element is visible, enabled and stable\n    - scrolling into view if needed\n    - done scrolling\n    - <a href=\"/imports\" data-turbo=\"true\" aria-current=\"true\" data-turbo-action=\"replace\" class=\"app-secondary-navigation__link\">…</a> from <nav aria-label=\"Secondary menu\" class=\"app-secondary-navigation\">…</nav> subtree intercepts pointer events\n  - retrying click action\n    - waiting 20ms\n    - waiting for element to be visible, enabled and stable\n    - element is visible, enabled and stable\n    - scrolling into view if needed\n    - done scrolling\n    - <div class=\"nhsuk-notification-banner__content\">…</div> from <div role=\"alert\" tabindex=\"-1\" data-nhsuk-notification-banner-init=\"\" data-module=\"nhsuk-notification-banner\" aria-labelledby=\"govuk-notification-banner-title\" class=\"nhsuk-notification-banner nhsuk-notification-banner--success\">…</div> subtree intercepts pointer events\n  2 × retrying click action\n      - waiting 100ms\n      - waiting for element to be visible, enabled and stable\n      - element is visible, enabled and stable\n      - scrolling into view if needed\n      - done scrolling\n      - <svg width=\"16\" height=\"16\" focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" class=\"nhsuk-icon nhsuk-icon--user\">…</svg> from <header data-nhsuk-header-init=\"\" data-module=\"nhsuk-header\" class=\"nhsuk-header app-header\">…</header> subtree intercepts pointer events\n  14 × retrying click action\n       - waiting 500ms\n       - waiting for element to be visible, enabled and stable\n       - element is visible, enabled and stable\n       - scrolling into view if needed\n       - done scrolling\n       - <h3 class=\"nhsuk-table__heading-tab\">↵    22 imports↵  </h3> intercepts pointer events\n     - retrying click action\n       - waiting 500ms\n       - waiting for element to be visible, enabled and stable\n       - element is visible, enabled and stable\n       - scrolling into view if needed\n       - done scrolling\n       - <main role=\"main\" id=\"main-content\" class=\"nhsuk-main-wrapper\">…</main> intercepts pointer events\n     - retrying click action\n       - waiting 500ms\n       - waiting for element to be visible, enabled and stable\n       - element is visible, enabled and stable\n       - scrolling into view if needed\n       - done scrolling\n       - <svg width=\"16\" height=\"16\" focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" class=\"nhsuk-icon nhsuk-icon--user\">…</svg> from <header data-nhsuk-header-init=\"\" data-module=\"nhsuk-header\" class=\"nhsuk-header app-header\">…</header> subtree intercepts pointer events\n     - retrying click action\n       - waiting 500ms\n       - waiting for element to be visible, enabled and stable\n       - element is visible, enabled and stable\n       - scrolling into view if needed\n       - done scrolling\n       - <svg width=\"16\" height=\"16\" focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" class=\"nhsuk-icon nhsuk-icon--user\">…</svg> from <header data-nhsuk-header-init=\"\" data-module=\"nhsuk-header\" class=\"nhsuk-header app-header\">…</header> subtree intercepts pointer events\n  - retrying click action\n    - waiting 500ms\n    - waiting for element to be visible, enabled and stable\n    - element is visible, enabled and stable\n    - scrolling into view if needed\n    - done scrolling\n    - <h3 class=\"nhsuk-table__heading-tab\">↵    22 imports↵  </h3> intercepts pointer events\n  - retrying click action\n    - waiting 500ms\n\n","statusTrace":"  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.14/site-packages/allure_commons/_allure.py\", line 202, in impl\n    return func(*a, **kw)\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/mavis/test/annotations.py\", line 35, in wrapper\n    return_value = func(self, *args, **kwargs)\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/mavis/test/pages/import_records.py\", line 162, in click_uploaded_file_datetime\n    first_link.or_(second_link).first.click()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.14/site-packages/playwright/sync_api/_generated.py\", line 15543, in click\n    self._sync(\n    ~~~~~~~~~~^\n        self._impl_obj.click(\n        ^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n        )\n        ^\n    )\n    ^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.14/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ~~~~~~~~~~~^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.14/site-packages/playwright/_impl/_locator.py\", line 160, in click\n    return await self._frame.click(self._selector, strict=True, **params)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.14/site-packages/playwright/_impl/_frame.py\", line 549, in click\n    await self._channel.send(\"click\", self._timeout, locals_to_params(locals()))\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.14/site-packages/playwright/_impl/_connection.py\", line 69, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.14/site-packages/playwright/_impl/_connection.py\", line 558, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\n","steps":[{"name":"Click link with uploaded datetime","time":{"start":1761970693288,"stop":1761970723879,"duration":30591},"status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Locator.click: Timeout 30000ms exceeded.\nCall log:\n  - waiting for get_by_role(\"link\", name=\"1 November 2025 at 4:18am\").or_(get_by_role(\"link\", name=\"1 November 2025 at 4:19am\")).first\n    - locator resolved to <a href=\"/immunisation-imports/1078992\">1 November 2025 at 4:18am</a>\n  - attempting click action\n    - waiting for element to be visible, enabled and stable\n    - element is visible, enabled and stable\n    - scrolling into view if needed\n    - done scrolling\n    - <div class=\"nhsuk-notification-banner__content\">…</div> from <div role=\"alert\" tabindex=\"-1\" data-nhsuk-notification-banner-init=\"\" data-module=\"nhsuk-notification-banner\" aria-labelledby=\"govuk-notification-banner-title\" class=\"nhsuk-notification-banner nhsuk-notification-banner--success\">…</div> subtree intercepts pointer events\n  - retrying click action\n    - waiting for element to be visible, enabled and stable\n    - element is visible, enabled and stable\n    - scrolling into view if needed\n    - done scrolling\n    - <a href=\"/imports\" data-turbo=\"true\" aria-current=\"true\" data-turbo-action=\"replace\" class=\"app-secondary-navigation__link\">…</a> from <nav aria-label=\"Secondary menu\" class=\"app-secondary-navigation\">…</nav> subtree intercepts pointer events\n  - retrying click action\n    - waiting 20ms\n    - waiting for element to be visible, enabled and stable\n    - element is visible, enabled and stable\n    - scrolling into view if needed\n    - done scrolling\n    - <div class=\"nhsuk-notification-banner__content\">…</div> from <div role=\"alert\" tabindex=\"-1\" data-nhsuk-notification-banner-init=\"\" data-module=\"nhsuk-notification-banner\" aria-labelledby=\"govuk-notification-banner-title\" class=\"nhsuk-notification-banner nhsuk-notification-banner--success\">…</div> subtree intercepts pointer events\n  2 × retrying click action\n      - waiting 100ms\n      - waiting for element to be visible, enabled and stable\n      - element is visible, enabled and stable\n      - scrolling into view if needed\n      - done scrolling\n      - <svg width=\"16\" height=\"16\" focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" class=\"nhsuk-icon nhsuk-icon--user\">…</svg> from <header data-nhsuk-header-init=\"\" data-module=\"nhsuk-header\" class=\"nhsuk-header app-header\">…</header> subtree intercepts pointer events\n  14 × retrying click action\n       - waiting 500ms\n       - waiting for element to be visible, enabled and stable\n       - element is visible, enabled and stable\n       - scrolling into view if needed\n       - done scrolling\n       - <h3 class=\"nhsuk-table__heading-tab\">↵    22 imports↵  </h3> intercepts pointer events\n     - retrying click action\n       - waiting 500ms\n       - waiting for element to be visible, enabled and stable\n       - element is visible, enabled and stable\n       - scrolling into view if needed\n       - done scrolling\n       - <main role=\"main\" id=\"main-content\" class=\"nhsuk-main-wrapper\">…</main> intercepts pointer events\n     - retrying click action\n       - waiting 500ms\n       - waiting for element to be visible, enabled and stable\n       - element is visible, enabled and stable\n       - scrolling into view if needed\n       - done scrolling\n       - <svg width=\"16\" height=\"16\" focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" class=\"nhsuk-icon nhsuk-icon--user\">…</svg> from <header data-nhsuk-header-init=\"\" data-module=\"nhsuk-header\" class=\"nhsuk-header app-header\">…</header> subtree intercepts pointer events\n     - retrying click action\n       - waiting 500ms\n       - waiting for element to be visible, enabled and stable\n       - element is visible, enabled and stable\n       - scrolling into view if needed\n       - done scrolling\n       - <svg width=\"16\" height=\"16\" focusable=\"false\" aria-hidden=\"true\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" class=\"nhsuk-icon nhsuk-icon--user\">…</svg> from <header data-nhsuk-header-init=\"\" data-module=\"nhsuk-header\" class=\"nhsuk-header app-header\">…</header> subtree intercepts pointer events\n  - retrying click action\n    - waiting 500ms\n    - waiting for element to be visible, enabled and stable\n    - element is visible, enabled and stable\n    - scrolling into view if needed\n    - done scrolling\n    - <h3 class=\"nhsuk-table__heading-tab\">↵    22 imports↵  </h3> intercepts pointer events\n  - retrying click action\n    - waiting 500ms\n\n","statusTrace":"  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/mavis/test/annotations.py\", line 35, in wrapper\n    return_value = func(self, *args, **kwargs)\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/mavis/test/pages/import_records.py\", line 162, in click_uploaded_file_datetime\n    first_link.or_(second_link).first.click()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.14/site-packages/playwright/sync_api/_generated.py\", line 15543, in click\n    self._sync(\n    ~~~~~~~~~~^\n        self._impl_obj.click(\n        ^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n        )\n        ^\n    )\n    ^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.14/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ~~~~~~~~~~~^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.14/site-packages/playwright/_impl/_locator.py\", line 160, in click\n    return await self._frame.click(self._selector, strict=True, **params)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.14/site-packages/playwright/_impl/_frame.py\", line 549, in click\n    await self._channel.send(\"click\", self._timeout, locals_to_params(locals()))\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.14/site-packages/playwright/_impl/_connection.py\", line 69, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.14/site-packages/playwright/_impl/_connection.py\", line 558, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\n","steps":[],"attachments":[{"uid":"3b95066128c25547","name":"Screenshot on failure","source":"3b95066128c25547.png","type":"image/png","size":128466}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":6,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"setup_vaccs_systmone::0","time":{"start":1761970723976,"stop":1761970724793,"duration":817},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1761970723976,"stop":1761970724093,"duration":117},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1761970723976,"stop":1761970724093,"duration":117},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761970724093,"stop":1761970724250,"duration":157},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761970724093,"stop":1761970724250,"duration":157},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761970724250,"stop":1761970724446,"duration":196},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761970724250,"stop":1761970724446,"duration":196},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"log_in_as_nurse::0","time":{"start":1761970724795,"stop":1761970725168,"duration":373},"status":"passed","steps":[{"name":"Log out","time":{"start":1761970724795,"stop":1761970725168,"duration":373},"status":"passed","steps":[{"name":"Log out","time":{"start":1761970724795,"stop":1761970725168,"duration":373},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"set_feature_flags::0","time":{"start":1761970725169,"stop":1761970725169,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context::0","time":{"start":1761970725170,"stop":1761970725180,"duration":10},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1761970725181,"stop":1761970725181,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1761971624726,"stop":1761971624726,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1761971624726,"stop":1761971624747,"duration":21},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1761971624749,"stop":1761971624757,"duration":8},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests::0","time":{"start":1761971624759,"stop":1761971628937,"duration":4178},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"vaccinations"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_import_vaccinations"},{"name":"host","value":"runnervmf2e7y"},{"name":"thread","value":"3108-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_import_vaccinations"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["vaccinations"]},"source":"56b0351316dbb1bb.json","parameterValues":[]}