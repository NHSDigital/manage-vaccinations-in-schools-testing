{"uid":"7b81cd80d323413f","name":"test_gillick_competence_notes","fullName":"tests.test_verbal_consent#test_gillick_competence_notes","historyId":"27d1d369e43b87fe9fe428ac7b381a74","time":{"start":1761971043216,"stop":1761971074428,"duration":31212},"description":"\nTest: Validate Gillick competence assessment notes length and update.\nSteps:\n1. Open the session for the school and programme.\n2. Navigate to Gillick competence assessment for the child.\n3. Attempt to complete assessment with notes over 1000 characters (should error).\n4. Complete assessment with valid notes.\n5. Edit assessment and again try to update with notes over 1000\n   characters (should error).\nVerification:\n- Error is shown for notes over 1000 characters.\n- Assessment can be completed and updated with valid notes.\n","descriptionHtml":"<p>Test: Validate Gillick competence assessment notes length and update.<br />\nSteps:</p>\n<ol>\n<li>Open the session for the school and programme.</li>\n<li>Navigate to Gillick competence assessment for the child.</li>\n<li>Attempt to complete assessment with notes over 1000 characters (should error).</li>\n<li>Complete assessment with valid notes.</li>\n<li>Edit assessment and again try to update with notes over 1000<br />\ncharacters (should error).<br />\nVerification:</li>\n</ol>\n<ul>\n<li>Error is shown for notes over 1000 characters.</li>\n<li>Assessment can be completed and updated with valid notes.</li>\n</ul>\n","status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Locator.check: Timeout 30000ms exceeded.\nCall log:\n  - waiting for get_by_role(\"group\", name=\"The child knows how the injection will be given\").get_by_label(\"Yes\")","statusTrace":"setup_fixed_child = None\nschools = {'HPV': [School(name='The Cedars Academy', urn='138652', site=None), School(name='Titan Aston Academy', urn='146731', ...'Trimley St Martin Primary School', urn='124614', site=None), School(name='Victoria School', urn='103601', site=None)]}\nsessions_page = <mavis.test.pages.sessions.SessionsPage object at 0x7f64833542f0>\nverbal_consent_page = <mavis.test.pages.verbal_consent.VerbalConsentPage object at 0x7f6482413230>\nchildren = {'HPV': [Child(first_name='Russell', last_name='WILLIAMS', nhs_number='9064083282', address=('Studio 36p', 'Teresa sho...clive30@example.com'), Parent(full_name='Marie Payne', relationship='Mum', email_address='mariewright@example.net')))]}\n\n    @issue(\"MAV-955\")\n    def test_gillick_competence_notes(\n        setup_fixed_child, schools, sessions_page, verbal_consent_page, children\n    ):\n        \"\"\"\n        Test: Validate Gillick competence assessment notes length and update.\n        Steps:\n        1. Open the session for the school and programme.\n        2. Navigate to Gillick competence assessment for the child.\n        3. Attempt to complete assessment with notes over 1000 characters (should error).\n        4. Complete assessment with valid notes.\n        5. Edit assessment and again try to update with notes over 1000\n           characters (should error).\n        Verification:\n        - Error is shown for notes over 1000 characters.\n        - Assessment can be completed and updated with valid notes.\n        \"\"\"\n        child = children[Programme.HPV][0]\n        school = schools[Programme.HPV][0]\n    \n        sessions_page.click_session_for_programme_group(school, Programme.HPV)\n        sessions_page.navigate_to_gillick_competence(child, Programme.HPV)\n    \n>       verbal_consent_page.answer_gillick_competence_questions(is_competent=True)\n\ntests/test_verbal_consent.py:96: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmavis/test/pages/verbal_consent.py:351: in answer_gillick_competence_questions\n    self.page.get_by_role(\"group\", name=question).get_by_label(response).check()\n.venv/lib/python3.14/site-packages/playwright/sync_api/_generated.py:15451: in check\n    self._sync(\n.venv/lib/python3.14/site-packages/playwright/_impl/_locator.py:145: in check\n    return await self._frame.check(self._selector, strict=True, **params)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.14/site-packages/playwright/_impl/_frame.py:829: in check\n    await self._channel.send(\"check\", self._timeout, locals_to_params(locals()))\n.venv/lib/python3.14/site-packages/playwright/_impl/_connection.py:69: in send\n    return await self._connection.wrap_api_call(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <playwright._impl._connection.Connection object at 0x7f64969b9be0>\ncb = <function Channel.send.<locals>.<lambda> at 0x7f648193bed0>\nis_internal = False, title = None\n\n    async def wrap_api_call(\n        self, cb: Callable[[], Any], is_internal: bool = False, title: str = None\n    ) -> Any:\n        if self._api_zone.get():\n            return await cb()\n        task = asyncio.current_task(self._loop)\n        st: List[inspect.FrameInfo] = getattr(\n            task, \"__pw_stack__\", None\n        ) or inspect.stack(0)\n    \n        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal, title)\n        self._api_zone.set(parsed_st)\n        try:\n            return await cb()\n        except Exception as error:\n>           raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nE           playwright._impl._errors.TimeoutError: Locator.check: Timeout 30000ms exceeded.\nE           Call log:\nE             - waiting for get_by_role(\"group\", name=\"The child knows how the injection will be given\").get_by_label(\"Yes\")\n\n.venv/lib/python3.14/site-packages/playwright/_impl/_connection.py:558: TimeoutError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":2,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1761970192256,"stop":1761970192257,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1761970192256,"stop":1761970192256,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1761970192256,"stop":1761970192256,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1761970192258,"stop":1761970192258,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1761970192258,"stop":1761970192258,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"programmes_enabled","time":{"start":1761970192258,"stop":1761970192258,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"year_groups","time":{"start":1761970192258,"stop":1761970192258,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"onboarding","time":{"start":1761970192258,"stop":1761970207291,"duration":15033},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"team","time":{"start":1761970207291,"stop":1761970207291,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests","time":{"start":1761970207291,"stop":1761970207291,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"nurse","time":{"start":1761970207292,"stop":1761970207292,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1761970207292,"stop":1761970207292,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"schools","time":{"start":1761970207292,"stop":1761970207292,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1761970207292,"stop":1761970207606,"duration":314},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1761970207606,"stop":1761970207606,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1761970207606,"stop":1761970207607,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1761970207607,"stop":1761970207607,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1761970207607,"stop":1761970207707,"duration":100},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1761970207607,"stop":1761970207607,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1761970207707,"stop":1761970207708,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1761970207708,"stop":1761970207709,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"organisation","time":{"start":1761970207709,"stop":1761970207709,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_credentials","time":{"start":1761970207709,"stop":1761970207709,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clinics","time":{"start":1761970207709,"stop":1761970207709,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1761970207709,"stop":1761970207709,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_token","time":{"start":1761970207709,"stop":1761970207709,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"reset_before_each_module","time":{"start":1761970741031,"stop":1761970742878,"duration":1847},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1761971023169,"stop":1761971023169,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1761971023169,"stop":1761971023169,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1761971023169,"stop":1761971023169,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1761971023169,"stop":1761971023174,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1761971023174,"stop":1761971023198,"duration":24},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_feature_flags","time":{"start":1761971023198,"stop":1761971023198,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"flipper_page","time":{"start":1761971023198,"stop":1761971023198,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_as_nurse","time":{"start":1761971023198,"stop":1761971024763,"duration":1565},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1761971023199,"stop":1761971024047,"duration":848},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1761971023199,"stop":1761971024047,"duration":848},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Log in as User(username='award@example.com', password='award@example.com', role='nurse') and choose team Team(name='Reid PLC est. 1812', workgroup='I780N', careplus_venue_code='I780N', email='hillross@example.net', phone='+44(0)7700 900960')","time":{"start":1761971024047,"stop":1761971024763,"duration":716},"status":"passed","steps":[{"name":"Log in as {1} and choose team {2}","time":{"start":1761971024047,"stop":1761971024763,"duration":716},"status":"passed","steps":[{"name":"Log in as User(username='award@example.com', password='award@example.com', role='nurse')","time":{"start":1761971024047,"stop":1761971024735,"duration":688},"status":"passed","steps":[{"name":"Log in as {1}","time":{"start":1761971024047,"stop":1761971024735,"duration":688},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='award@example.com', password='award@example.com', role='nurse'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='award@example.com', password='award@example.com', role='nurse'), Team(name='Reid PLC est. 1812', workgroup='I780N', careplus_venue_code='I780N', email='hillross@example.net', phone='+44(0)7700 900960'))"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"log_in_page","time":{"start":1761971023198,"stop":1761971023198,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"dashboard_page","time":{"start":1761971024763,"stop":1761971024763,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"children","time":{"start":1761971024763,"stop":1761971024768,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_data","time":{"start":1761971024768,"stop":1761971024770,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"sessions_page","time":{"start":1761971024770,"stop":1761971024771,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"import_records_page","time":{"start":1761971024771,"stop":1761971024771,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_fixed_child","time":{"start":1761971024771,"stop":1761971043215,"duration":18444},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761971024771,"stop":1761971024943,"duration":172},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761971024771,"stop":1761971024943,"duration":172},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'HPV' session at School(name='The Cedars Academy', urn='138652', site=None)","time":{"start":1761971024944,"stop":1761971025483,"duration":539},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1761971024944,"stop":1761971025483,"duration":539},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='The Cedars Academy', urn='138652', site=None), <Programme.HPV: 'HPV'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761971025488,"stop":1761971025643,"duration":155},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761971025488,"stop":1761971025643,"duration":155},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761971025643,"stop":1761971025829,"duration":186},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761971025643,"stop":1761971025829,"duration":186},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'HPV' session at School(name='The Cedars Academy', urn='138652', site=None)","time":{"start":1761971025829,"stop":1761971026358,"duration":529},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1761971025829,"stop":1761971026358,"duration":529},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='The Cedars Academy', urn='138652', site=None), <Programme.HPV: 'HPV'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Import class lists","time":{"start":1761971026358,"stop":1761971026615,"duration":257},"status":"passed","steps":[{"name":"Click on Import class lists","time":{"start":1761971026358,"stop":1761971026615,"duration":257},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761971026659,"stop":1761971027042,"duration":383},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761971026659,"stop":1761971027042,"duration":383},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Set input file to PosixPath('working/CohortsFileMapping.FIXED_CHILD20251101042347.csv')","time":{"start":1761971027055,"stop":1761971027074,"duration":19},"status":"passed","steps":[{"name":"Set input file to {1}","time":{"start":1761971027055,"stop":1761971027074,"duration":19},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(PosixPath('working/CohortsFileMapping.FIXED_CHILD20251101042347.csv'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761971028074,"stop":1761971028338,"duration":264},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761971028074,"stop":1761971028338,"duration":264},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"_coverage","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click link with uploaded datetime","time":{"start":1761971028366,"stop":1761971029351,"duration":985},"status":"passed","steps":[{"name":"Click link with uploaded datetime","time":{"start":1761971028366,"stop":1761971029351,"duration":985},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761971042894,"stop":1761971043042,"duration":148},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761971042894,"stop":1761971043042,"duration":148},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761971043042,"stop":1761971043215,"duration":173},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761971043042,"stop":1761971043215,"duration":173},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":24,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"setup_session_with_file_upload","time":{"start":1761971024771,"stop":1761971024771,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"verbal_consent_page","time":{"start":1761971043215,"stop":1761971043216,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\nTest: Validate Gillick competence assessment notes length and update.\nSteps:\n1. Open the session for the school and programme.\n2. Navigate to Gillick competence assessment for the child.\n3. Attempt to complete assessment with notes over 1000 characters (should error).\n4. Complete assessment with valid notes.\n5. Edit assessment and again try to update with notes over 1000\n   characters (should error).\nVerification:\n- Error is shown for notes over 1000 characters.\n- Assessment can be completed and updated with valid notes.\n","status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Locator.check: Timeout 30000ms exceeded.\nCall log:\n  - waiting for get_by_role(\"group\", name=\"The child knows how the injection will be given\").get_by_label(\"Yes\")","statusTrace":"setup_fixed_child = None\nschools = {'HPV': [School(name='The Cedars Academy', urn='138652', site=None), School(name='Titan Aston Academy', urn='146731', ...'Trimley St Martin Primary School', urn='124614', site=None), School(name='Victoria School', urn='103601', site=None)]}\nsessions_page = <mavis.test.pages.sessions.SessionsPage object at 0x7f64833542f0>\nverbal_consent_page = <mavis.test.pages.verbal_consent.VerbalConsentPage object at 0x7f6482413230>\nchildren = {'HPV': [Child(first_name='Russell', last_name='WILLIAMS', nhs_number='9064083282', address=('Studio 36p', 'Teresa sho...clive30@example.com'), Parent(full_name='Marie Payne', relationship='Mum', email_address='mariewright@example.net')))]}\n\n    @issue(\"MAV-955\")\n    def test_gillick_competence_notes(\n        setup_fixed_child, schools, sessions_page, verbal_consent_page, children\n    ):\n        \"\"\"\n        Test: Validate Gillick competence assessment notes length and update.\n        Steps:\n        1. Open the session for the school and programme.\n        2. Navigate to Gillick competence assessment for the child.\n        3. Attempt to complete assessment with notes over 1000 characters (should error).\n        4. Complete assessment with valid notes.\n        5. Edit assessment and again try to update with notes over 1000\n           characters (should error).\n        Verification:\n        - Error is shown for notes over 1000 characters.\n        - Assessment can be completed and updated with valid notes.\n        \"\"\"\n        child = children[Programme.HPV][0]\n        school = schools[Programme.HPV][0]\n    \n        sessions_page.click_session_for_programme_group(school, Programme.HPV)\n        sessions_page.navigate_to_gillick_competence(child, Programme.HPV)\n    \n>       verbal_consent_page.answer_gillick_competence_questions(is_competent=True)\n\ntests/test_verbal_consent.py:96: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmavis/test/pages/verbal_consent.py:351: in answer_gillick_competence_questions\n    self.page.get_by_role(\"group\", name=question).get_by_label(response).check()\n.venv/lib/python3.14/site-packages/playwright/sync_api/_generated.py:15451: in check\n    self._sync(\n.venv/lib/python3.14/site-packages/playwright/_impl/_locator.py:145: in check\n    return await self._frame.check(self._selector, strict=True, **params)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.14/site-packages/playwright/_impl/_frame.py:829: in check\n    await self._channel.send(\"check\", self._timeout, locals_to_params(locals()))\n.venv/lib/python3.14/site-packages/playwright/_impl/_connection.py:69: in send\n    return await self._connection.wrap_api_call(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <playwright._impl._connection.Connection object at 0x7f64969b9be0>\ncb = <function Channel.send.<locals>.<lambda> at 0x7f648193bed0>\nis_internal = False, title = None\n\n    async def wrap_api_call(\n        self, cb: Callable[[], Any], is_internal: bool = False, title: str = None\n    ) -> Any:\n        if self._api_zone.get():\n            return await cb()\n        task = asyncio.current_task(self._loop)\n        st: List[inspect.FrameInfo] = getattr(\n            task, \"__pw_stack__\", None\n        ) or inspect.stack(0)\n    \n        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal, title)\n        self._api_zone.set(parsed_st)\n        try:\n            return await cb()\n        except Exception as error:\n>           raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nE           playwright._impl._errors.TimeoutError: Locator.check: Timeout 30000ms exceeded.\nE           Call log:\nE             - waiting for get_by_role(\"group\", name=\"The child knows how the injection will be given\").get_by_label(\"Yes\")\n\n.venv/lib/python3.14/site-packages/playwright/_impl/_connection.py:558: TimeoutError","steps":[{"name":"Click on 'HPV' session at School(name='The Cedars Academy', urn='138652', site=None)","time":{"start":1761971043216,"stop":1761971043668,"duration":452},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1761971043216,"stop":1761971043668,"duration":452},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='The Cedars Academy', urn='138652', site=None), <Programme.HPV: 'HPV'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Consent tab","time":{"start":1761971043668,"stop":1761971043904,"duration":236},"status":"passed","steps":[{"name":"Click on Consent tab","time":{"start":1761971043668,"stop":1761971043904,"duration":236},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on child Child(first_name='Russell', last_name='WILLIAMS', nhs_number='9064083282', address=('Studio 36p', 'Teresa shores', 'East Barry', 'PE06 7RU'), date_of_birth=datetime.date(2011, 5, 31), year_group=10, parents=(Parent(full_name='Patrick Hardy', relationship='Dad', email_address='carolcox@example.net'), Parent(full_name='Ms Marian Bennett', relationship='Mum', email_address='sharris@example.org')))","time":{"start":1761971043904,"stop":1761971044097,"duration":193},"status":"passed","steps":[{"name":"Click on child {1}","time":{"start":1761971043904,"stop":1761971044097,"duration":193},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(Child(first_name='Russell', last_name='WILLIAMS', nhs_number='9064083282', address=('Studio 36p', 'Teresa shores', 'East Barry', 'PE06 7RU'), date_of_birth=datetime.date(2011, 5, 31), year_group=10, parents=(Parent(full_name='Patrick Hardy', relationship='Dad', email_address='carolcox@example.net'), Parent(full_name='Ms Marian Bennett', relationship='Mum', email_address='sharris@example.org'))),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'HPV' tab","time":{"start":1761971044098,"stop":1761971044111,"duration":13},"status":"passed","steps":[{"name":"Click on {1} tab","time":{"start":1761971044098,"stop":1761971044111,"duration":13},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Programme.HPV: 'HPV'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Assess Gillick competence","time":{"start":1761971044111,"stop":1761971044312,"duration":201},"status":"passed","steps":[{"name":"Click on Assess Gillick competence","time":{"start":1761971044111,"stop":1761971044312,"duration":201},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":10,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"setup_fixed_child::0","time":{"start":1761971074545,"stop":1761971075401,"duration":856},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1761971074545,"stop":1761971074680,"duration":135},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1761971074545,"stop":1761971074680,"duration":135},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761971074680,"stop":1761971074835,"duration":155},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761971074680,"stop":1761971074835,"duration":155},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761971074835,"stop":1761971074997,"duration":162},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761971074835,"stop":1761971074997,"duration":162},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"log_in_as_nurse::0","time":{"start":1761971075403,"stop":1761971075754,"duration":351},"status":"passed","steps":[{"name":"Log out","time":{"start":1761971075403,"stop":1761971075754,"duration":351},"status":"passed","steps":[{"name":"Log out","time":{"start":1761971075403,"stop":1761971075754,"duration":351},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"set_feature_flags::0","time":{"start":1761971075755,"stop":1761971075755,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context::0","time":{"start":1761971075756,"stop":1761971075764,"duration":8},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1761971075765,"stop":1761971075765,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1761971448686,"stop":1761971448686,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1761971448686,"stop":1761971448712,"duration":26},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1761971448714,"stop":1761971448723,"duration":9},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests::0","time":{"start":1761971448725,"stop":1761971452149,"duration":3424},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"consent"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_verbal_consent"},{"name":"host","value":"runnervmf2e7y"},{"name":"thread","value":"3114-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_verbal_consent"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[{"name":"MAV-955","url":"https://nhsd-jira.digital.nhs.uk/browse/MAV-955","type":"issue"}],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"1bf7733880be3d4d","status":"broken","statusDetails":"playwright._impl._errors.TimeoutError: Locator.check: Timeout 30000ms exceeded.\nCall log:\n  - waiting for get_by_role(\"group\", name=\"The child knows how the injection will be given\").get_by_label(\"Yes\")","time":{"start":1761970990467,"stop":1761971021764,"duration":31297}},{"uid":"b69693ab9b11ef6b","status":"broken","statusDetails":"playwright._impl._errors.TimeoutError: Locator.check: Timeout 30000ms exceeded.\nCall log:\n  - waiting for get_by_role(\"group\", name=\"The child knows how the injection will be given\").get_by_label(\"Yes\")","time":{"start":1761970944978,"stop":1761970976232,"duration":31254}}],"categories":[{"name":"Test defects","matchedStatuses":[]}],"tags":["consent"]},"source":"7b81cd80d323413f.json","parameterValues":[]}