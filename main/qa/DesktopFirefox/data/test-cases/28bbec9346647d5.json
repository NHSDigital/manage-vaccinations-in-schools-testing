{"uid":"28bbec9346647d5","name":"test_gillick_competence_notes","fullName":"tests.test_verbal_consent#test_gillick_competence_notes","historyId":"27d1d369e43b87fe9fe428ac7b381a74","time":{"start":1761969367092,"stop":1761969399254,"duration":32162},"description":"\nTest: Validate Gillick competence assessment notes length and update.\nSteps:\n1. Open the session for the school and programme.\n2. Navigate to Gillick competence assessment for the child.\n3. Attempt to complete assessment with notes over 1000 characters (should error).\n4. Complete assessment with valid notes.\n5. Edit assessment and again try to update with notes over 1000\n   characters (should error).\nVerification:\n- Error is shown for notes over 1000 characters.\n- Assessment can be completed and updated with valid notes.\n","descriptionHtml":"<p>Test: Validate Gillick competence assessment notes length and update.<br />\nSteps:</p>\n<ol>\n<li>Open the session for the school and programme.</li>\n<li>Navigate to Gillick competence assessment for the child.</li>\n<li>Attempt to complete assessment with notes over 1000 characters (should error).</li>\n<li>Complete assessment with valid notes.</li>\n<li>Edit assessment and again try to update with notes over 1000<br />\ncharacters (should error).<br />\nVerification:</li>\n</ol>\n<ul>\n<li>Error is shown for notes over 1000 characters.</li>\n<li>Assessment can be completed and updated with valid notes.</li>\n</ul>\n","status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Locator.check: Timeout 30000ms exceeded.\nCall log:\n  - waiting for get_by_role(\"group\", name=\"The child knows how the injection will be given\").get_by_label(\"Yes\")","statusTrace":"setup_fixed_child = None\nschools = {'HPV': [School(name='The Eaves Learning Centre', urn='148176', site=None), School(name='The Cardinal Wiseman Catholic...me='Northern Junior School', urn='115935', site=None), School(name='Leigh Academy Bearsted', urn='147866', site=None)]}\nsessions_page = <mavis.test.pages.sessions.SessionsPage object at 0x7f33d39d9a90>\nverbal_consent_page = <mavis.test.pages.verbal_consent.VerbalConsentPage object at 0x7f33d2d104d0>\nchildren = {'HPV': [Child(first_name='Antony', last_name='HUNTER', nhs_number='9316901901', address=('Studio 2', 'Edward ridge', ...eslie@example.net'), Parent(full_name='Miss Amber Edwards', relationship='Mum', email_address='yellis@example.net')))]}\n\n    @issue(\"MAV-955\")\n    def test_gillick_competence_notes(\n        setup_fixed_child, schools, sessions_page, verbal_consent_page, children\n    ):\n        \"\"\"\n        Test: Validate Gillick competence assessment notes length and update.\n        Steps:\n        1. Open the session for the school and programme.\n        2. Navigate to Gillick competence assessment for the child.\n        3. Attempt to complete assessment with notes over 1000 characters (should error).\n        4. Complete assessment with valid notes.\n        5. Edit assessment and again try to update with notes over 1000\n           characters (should error).\n        Verification:\n        - Error is shown for notes over 1000 characters.\n        - Assessment can be completed and updated with valid notes.\n        \"\"\"\n        child = children[Programme.HPV][0]\n        school = schools[Programme.HPV][0]\n    \n        sessions_page.click_session_for_programme_group(school, Programme.HPV)\n        sessions_page.navigate_to_gillick_competence(child, Programme.HPV)\n    \n>       verbal_consent_page.answer_gillick_competence_questions(is_competent=True)\n\ntests/test_verbal_consent.py:96: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmavis/test/pages/verbal_consent.py:351: in answer_gillick_competence_questions\n    self.page.get_by_role(\"group\", name=question).get_by_label(response).check()\n.venv/lib/python3.14/site-packages/playwright/sync_api/_generated.py:15451: in check\n    self._sync(\n.venv/lib/python3.14/site-packages/playwright/_impl/_locator.py:145: in check\n    return await self._frame.check(self._selector, strict=True, **params)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.14/site-packages/playwright/_impl/_frame.py:829: in check\n    await self._channel.send(\"check\", self._timeout, locals_to_params(locals()))\n.venv/lib/python3.14/site-packages/playwright/_impl/_connection.py:69: in send\n    return await self._connection.wrap_api_call(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <playwright._impl._connection.Connection object at 0x7f33e63cdbe0>\ncb = <function Channel.send.<locals>.<lambda> at 0x7f33e204ada0>\nis_internal = False, title = None\n\n    async def wrap_api_call(\n        self, cb: Callable[[], Any], is_internal: bool = False, title: str = None\n    ) -> Any:\n        if self._api_zone.get():\n            return await cb()\n        task = asyncio.current_task(self._loop)\n        st: List[inspect.FrameInfo] = getattr(\n            task, \"__pw_stack__\", None\n        ) or inspect.stack(0)\n    \n        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal, title)\n        self._api_zone.set(parsed_st)\n        try:\n            return await cb()\n        except Exception as error:\n>           raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nE           playwright._impl._errors.TimeoutError: Locator.check: Timeout 30000ms exceeded.\nE           Call log:\nE             - waiting for get_by_role(\"group\", name=\"The child knows how the injection will be given\").get_by_label(\"Yes\")\n\n.venv/lib/python3.14/site-packages/playwright/_impl/_connection.py:558: TimeoutError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":2,"retriesStatusChange":false,"beforeStages":[{"name":"base_url","time":{"start":1761968563191,"stop":1761968563192,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1761968563192,"stop":1761968563192,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_session_faker","time":{"start":1761968563192,"stop":1761968563193,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"year_groups","time":{"start":1761968563193,"stop":1761968563193,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"onboarding","time":{"start":1761968563193,"stop":1761968578220,"duration":15027},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1761968563193,"stop":1761968563193,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"programmes_enabled","time":{"start":1761968563193,"stop":1761968563193,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1761968563193,"stop":1761968563193,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"nurse","time":{"start":1761968578220,"stop":1761968578220,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1761968578220,"stop":1761968578220,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"schools","time":{"start":1761968578220,"stop":1761968578220,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests","time":{"start":1761968578220,"stop":1761968578220,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"team","time":{"start":1761968578220,"stop":1761968578220,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1761968578220,"stop":1761968578613,"duration":393},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1761968578613,"stop":1761968578614,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1761968578613,"stop":1761968578613,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1761968578614,"stop":1761968578614,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1761968578614,"stop":1761968578614,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1761968578614,"stop":1761968579009,"duration":395},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1761968579009,"stop":1761968579009,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1761968579009,"stop":1761968579010,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_credentials","time":{"start":1761968579010,"stop":1761968579010,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clinics","time":{"start":1761968579010,"stop":1761968579011,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1761968579010,"stop":1761968579010,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"organisation","time":{"start":1761968579010,"stop":1761968579010,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_token","time":{"start":1761968579010,"stop":1761968579010,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"reset_before_each_module","time":{"start":1761969074825,"stop":1761969079427,"duration":4602},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1761969351966,"stop":1761969351966,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1761969351966,"stop":1761969351966,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1761969351966,"stop":1761969351966,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1761969351966,"stop":1761969351980,"duration":14},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1761969351980,"stop":1761969352134,"duration":154},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_as_nurse","time":{"start":1761969352135,"stop":1761969353809,"duration":1674},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1761969352135,"stop":1761969352984,"duration":849},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1761969352135,"stop":1761969352984,"duration":849},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Log in as User(username='samantha85@example.com', password='samantha85@example.com', role='nurse') and choose team Team(name='White-Davies est. 1672', workgroup='K156H', careplus_venue_code='K156H', email='jodierobinson@example.com', phone='(07700) 900 232')","time":{"start":1761969352985,"stop":1761969353809,"duration":824},"status":"passed","steps":[{"name":"Log in as {1} and choose team {2}","time":{"start":1761969352985,"stop":1761969353809,"duration":824},"status":"passed","steps":[{"name":"Log in as User(username='samantha85@example.com', password='samantha85@example.com', role='nurse')","time":{"start":1761969352985,"stop":1761969353744,"duration":759},"status":"passed","steps":[{"name":"Log in as {1}","time":{"start":1761969352985,"stop":1761969353744,"duration":759},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='samantha85@example.com', password='samantha85@example.com', role='nurse'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='samantha85@example.com', password='samantha85@example.com', role='nurse'), Team(name='White-Davies est. 1672', workgroup='K156H', careplus_venue_code='K156H', email='jodierobinson@example.com', phone='(07700) 900 232'))"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"flipper_page","time":{"start":1761969352135,"stop":1761969352135,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_feature_flags","time":{"start":1761969352135,"stop":1761969352135,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_page","time":{"start":1761969352135,"stop":1761969352135,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"dashboard_page","time":{"start":1761969353809,"stop":1761969353809,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"children","time":{"start":1761969353809,"stop":1761969353815,"duration":6},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_data","time":{"start":1761969353815,"stop":1761969353818,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"sessions_page","time":{"start":1761969353818,"stop":1761969353820,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"import_records_page","time":{"start":1761969353820,"stop":1761969353820,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_fixed_child","time":{"start":1761969353820,"stop":1761969367091,"duration":13271},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761969353821,"stop":1761969354092,"duration":271},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761969353821,"stop":1761969354092,"duration":271},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'HPV' session at School(name='The Eaves Learning Centre', urn='148176', site=None)","time":{"start":1761969354093,"stop":1761969355031,"duration":938},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1761969354093,"stop":1761969355030,"duration":937},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='The Eaves Learning Centre', urn='148176', site=None), <Programme.HPV: 'HPV'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761969355048,"stop":1761969355294,"duration":246},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761969355048,"stop":1761969355294,"duration":246},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761969355294,"stop":1761969355578,"duration":284},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761969355294,"stop":1761969355578,"duration":284},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'HPV' session at School(name='The Eaves Learning Centre', urn='148176', site=None)","time":{"start":1761969355578,"stop":1761969356381,"duration":803},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1761969355578,"stop":1761969356381,"duration":803},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='The Eaves Learning Centre', urn='148176', site=None), <Programme.HPV: 'HPV'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Import class lists","time":{"start":1761969356381,"stop":1761969356765,"duration":384},"status":"passed","steps":[{"name":"Click on Import class lists","time":{"start":1761969356381,"stop":1761969356765,"duration":384},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761969356976,"stop":1761969357412,"duration":436},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761969356976,"stop":1761969357412,"duration":436},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Set input file to PosixPath('working/CohortsFileMapping.FIXED_CHILD20251101035557.csv')","time":{"start":1761969357429,"stop":1761969357491,"duration":62},"status":"passed","steps":[{"name":"Set input file to {1}","time":{"start":1761969357429,"stop":1761969357491,"duration":62},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(PosixPath('working/CohortsFileMapping.FIXED_CHILD20251101035557.csv'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761969358491,"stop":1761969358802,"duration":311},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761969358491,"stop":1761969358802,"duration":311},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"_coverage","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click link with uploaded datetime","time":{"start":1761969358892,"stop":1761969359110,"duration":218},"status":"passed","steps":[{"name":"Click link with uploaded datetime","time":{"start":1761969358892,"stop":1761969359110,"duration":218},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761969366614,"stop":1761969366798,"duration":184},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761969366614,"stop":1761969366798,"duration":184},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761969366798,"stop":1761969367091,"duration":293},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761969366798,"stop":1761969367091,"duration":293},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":24,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"setup_session_with_file_upload","time":{"start":1761969353820,"stop":1761969353820,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"verbal_consent_page","time":{"start":1761969367091,"stop":1761969367091,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\nTest: Validate Gillick competence assessment notes length and update.\nSteps:\n1. Open the session for the school and programme.\n2. Navigate to Gillick competence assessment for the child.\n3. Attempt to complete assessment with notes over 1000 characters (should error).\n4. Complete assessment with valid notes.\n5. Edit assessment and again try to update with notes over 1000\n   characters (should error).\nVerification:\n- Error is shown for notes over 1000 characters.\n- Assessment can be completed and updated with valid notes.\n","status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Locator.check: Timeout 30000ms exceeded.\nCall log:\n  - waiting for get_by_role(\"group\", name=\"The child knows how the injection will be given\").get_by_label(\"Yes\")","statusTrace":"setup_fixed_child = None\nschools = {'HPV': [School(name='The Eaves Learning Centre', urn='148176', site=None), School(name='The Cardinal Wiseman Catholic...me='Northern Junior School', urn='115935', site=None), School(name='Leigh Academy Bearsted', urn='147866', site=None)]}\nsessions_page = <mavis.test.pages.sessions.SessionsPage object at 0x7f33d39d9a90>\nverbal_consent_page = <mavis.test.pages.verbal_consent.VerbalConsentPage object at 0x7f33d2d104d0>\nchildren = {'HPV': [Child(first_name='Antony', last_name='HUNTER', nhs_number='9316901901', address=('Studio 2', 'Edward ridge', ...eslie@example.net'), Parent(full_name='Miss Amber Edwards', relationship='Mum', email_address='yellis@example.net')))]}\n\n    @issue(\"MAV-955\")\n    def test_gillick_competence_notes(\n        setup_fixed_child, schools, sessions_page, verbal_consent_page, children\n    ):\n        \"\"\"\n        Test: Validate Gillick competence assessment notes length and update.\n        Steps:\n        1. Open the session for the school and programme.\n        2. Navigate to Gillick competence assessment for the child.\n        3. Attempt to complete assessment with notes over 1000 characters (should error).\n        4. Complete assessment with valid notes.\n        5. Edit assessment and again try to update with notes over 1000\n           characters (should error).\n        Verification:\n        - Error is shown for notes over 1000 characters.\n        - Assessment can be completed and updated with valid notes.\n        \"\"\"\n        child = children[Programme.HPV][0]\n        school = schools[Programme.HPV][0]\n    \n        sessions_page.click_session_for_programme_group(school, Programme.HPV)\n        sessions_page.navigate_to_gillick_competence(child, Programme.HPV)\n    \n>       verbal_consent_page.answer_gillick_competence_questions(is_competent=True)\n\ntests/test_verbal_consent.py:96: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmavis/test/pages/verbal_consent.py:351: in answer_gillick_competence_questions\n    self.page.get_by_role(\"group\", name=question).get_by_label(response).check()\n.venv/lib/python3.14/site-packages/playwright/sync_api/_generated.py:15451: in check\n    self._sync(\n.venv/lib/python3.14/site-packages/playwright/_impl/_locator.py:145: in check\n    return await self._frame.check(self._selector, strict=True, **params)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.14/site-packages/playwright/_impl/_frame.py:829: in check\n    await self._channel.send(\"check\", self._timeout, locals_to_params(locals()))\n.venv/lib/python3.14/site-packages/playwright/_impl/_connection.py:69: in send\n    return await self._connection.wrap_api_call(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <playwright._impl._connection.Connection object at 0x7f33e63cdbe0>\ncb = <function Channel.send.<locals>.<lambda> at 0x7f33e204ada0>\nis_internal = False, title = None\n\n    async def wrap_api_call(\n        self, cb: Callable[[], Any], is_internal: bool = False, title: str = None\n    ) -> Any:\n        if self._api_zone.get():\n            return await cb()\n        task = asyncio.current_task(self._loop)\n        st: List[inspect.FrameInfo] = getattr(\n            task, \"__pw_stack__\", None\n        ) or inspect.stack(0)\n    \n        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal, title)\n        self._api_zone.set(parsed_st)\n        try:\n            return await cb()\n        except Exception as error:\n>           raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nE           playwright._impl._errors.TimeoutError: Locator.check: Timeout 30000ms exceeded.\nE           Call log:\nE             - waiting for get_by_role(\"group\", name=\"The child knows how the injection will be given\").get_by_label(\"Yes\")\n\n.venv/lib/python3.14/site-packages/playwright/_impl/_connection.py:558: TimeoutError","steps":[{"name":"Click on 'HPV' session at School(name='The Eaves Learning Centre', urn='148176', site=None)","time":{"start":1761969367092,"stop":1761969368055,"duration":963},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1761969367092,"stop":1761969368055,"duration":963},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='The Eaves Learning Centre', urn='148176', site=None), <Programme.HPV: 'HPV'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Consent tab","time":{"start":1761969368055,"stop":1761969368356,"duration":301},"status":"passed","steps":[{"name":"Click on Consent tab","time":{"start":1761969368055,"stop":1761969368356,"duration":301},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on child Child(first_name='Antony', last_name='HUNTER', nhs_number='9316901901', address=('Studio 2', 'Edward ridge', 'North Ronald', 'G4J 9GF'), date_of_birth=datetime.date(2010, 8, 18), year_group=11, parents=(Parent(full_name='Simon Stokes', relationship='Dad', email_address='kenneth65@example.org'), Parent(full_name='Pauline Lewis', relationship='Mum', email_address='fwhite@example.net')))","time":{"start":1761969368356,"stop":1761969368674,"duration":318},"status":"passed","steps":[{"name":"Click on child {1}","time":{"start":1761969368357,"stop":1761969368674,"duration":317},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(Child(first_name='Antony', last_name='HUNTER', nhs_number='9316901901', address=('Studio 2', 'Edward ridge', 'North Ronald', 'G4J 9GF'), date_of_birth=datetime.date(2010, 8, 18), year_group=11, parents=(Parent(full_name='Simon Stokes', relationship='Dad', email_address='kenneth65@example.org'), Parent(full_name='Pauline Lewis', relationship='Mum', email_address='fwhite@example.net'))),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'HPV' tab","time":{"start":1761969368674,"stop":1761969368731,"duration":57},"status":"passed","steps":[{"name":"Click on {1} tab","time":{"start":1761969368674,"stop":1761969368731,"duration":57},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Programme.HPV: 'HPV'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Assess Gillick competence","time":{"start":1761969368731,"stop":1761969368972,"duration":241},"status":"passed","steps":[{"name":"Click on Assess Gillick competence","time":{"start":1761969368731,"stop":1761969368972,"duration":241},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":10,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"setup_fixed_child::0","time":{"start":1761969399356,"stop":1761969400526,"duration":1170},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1761969399356,"stop":1761969399501,"duration":145},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1761969399356,"stop":1761969399501,"duration":145},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761969399501,"stop":1761969399723,"duration":222},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761969399501,"stop":1761969399723,"duration":222},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761969399723,"stop":1761969399986,"duration":263},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761969399723,"stop":1761969399986,"duration":263},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"log_in_as_nurse::0","time":{"start":1761969400531,"stop":1761969401084,"duration":553},"status":"passed","steps":[{"name":"Log out","time":{"start":1761969400532,"stop":1761969401084,"duration":552},"status":"passed","steps":[{"name":"Log out","time":{"start":1761969400532,"stop":1761969401084,"duration":552},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"set_feature_flags::0","time":{"start":1761969401085,"stop":1761969401085,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context::0","time":{"start":1761969401086,"stop":1761969401104,"duration":18},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1761969401105,"stop":1761969401105,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1761970087565,"stop":1761970087565,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1761970087566,"stop":1761970087713,"duration":147},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1761970087715,"stop":1761970087725,"duration":10},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests::0","time":{"start":1761970087727,"stop":1761970091796,"duration":4069},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"consent"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_verbal_consent"},{"name":"host","value":"runnervmf2e7y"},{"name":"thread","value":"3127-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_verbal_consent"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[{"name":"MAV-955","url":"https://nhsd-jira.digital.nhs.uk/browse/MAV-955","type":"issue"}],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"4d05643ea49a3e03","status":"broken","statusDetails":"playwright._impl._errors.TimeoutError: Locator.check: Timeout 30000ms exceeded.\nCall log:\n  - waiting for get_by_role(\"group\", name=\"The child knows how the injection will be given\").get_by_label(\"Yes\")","time":{"start":1761969318138,"stop":1761969349926,"duration":31788}},{"uid":"19cc61fede0d616c","status":"broken","statusDetails":"playwright._impl._errors.TimeoutError: Locator.check: Timeout 30000ms exceeded.\nCall log:\n  - waiting for get_by_role(\"group\", name=\"The child knows how the injection will be given\").get_by_label(\"Yes\")","time":{"start":1761969264599,"stop":1761969296737,"duration":32138}}],"categories":[{"name":"Test defects","matchedStatuses":[]}],"tags":["consent"]},"source":"28bbec9346647d5.json","parameterValues":[]}