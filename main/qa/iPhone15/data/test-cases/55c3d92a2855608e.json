{"uid":"55c3d92a2855608e","name":"test_gillick_competence_notes","fullName":"tests.test_verbal_consent#test_gillick_competence_notes","historyId":"27d1d369e43b87fe9fe428ac7b381a74","time":{"start":1761973111600,"stop":1761973143956,"duration":32356},"description":"\nTest: Validate Gillick competence assessment notes length and update.\nSteps:\n1. Open the session for the school and programme.\n2. Navigate to Gillick competence assessment for the child.\n3. Attempt to complete assessment with notes over 1000 characters (should error).\n4. Complete assessment with valid notes.\n5. Edit assessment and again try to update with notes over 1000\n   characters (should error).\nVerification:\n- Error is shown for notes over 1000 characters.\n- Assessment can be completed and updated with valid notes.\n","descriptionHtml":"<p>Test: Validate Gillick competence assessment notes length and update.<br />\nSteps:</p>\n<ol>\n<li>Open the session for the school and programme.</li>\n<li>Navigate to Gillick competence assessment for the child.</li>\n<li>Attempt to complete assessment with notes over 1000 characters (should error).</li>\n<li>Complete assessment with valid notes.</li>\n<li>Edit assessment and again try to update with notes over 1000<br />\ncharacters (should error).<br />\nVerification:</li>\n</ol>\n<ul>\n<li>Error is shown for notes over 1000 characters.</li>\n<li>Assessment can be completed and updated with valid notes.</li>\n</ul>\n","status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Locator.check: Timeout 30000ms exceeded.\nCall log:\n  - waiting for get_by_role(\"group\", name=\"The child knows how the injection will be given\").get_by_label(\"Yes\")","statusTrace":"setup_fixed_child = None\nschools = {'HPV': [School(name='Ampleforth College', urn='121735', site=None), School(name='The Commonweal School', urn='137190'...uel Laycock School', urn='148936', site=None), School(name='Kuwait National English School', urn='141434', site=None)]}\nsessions_page = <mavis.test.pages.sessions.SessionsPage object at 0x7fa07a444ad0>\nverbal_consent_page = <mavis.test.pages.verbal_consent.VerbalConsentPage object at 0x7fa088b969e0>\nchildren = {'HPV': [Child(first_name='Sian', last_name='TAYLOR', nhs_number='9129763916', address=('Studio 90t', 'Allen avenue', ...xample.org'), Parent(full_name='Amy Smith-Williams', relationship='Mum', email_address='jadedickinson@example.com')))]}\n\n    @issue(\"MAV-955\")\n    def test_gillick_competence_notes(\n        setup_fixed_child, schools, sessions_page, verbal_consent_page, children\n    ):\n        \"\"\"\n        Test: Validate Gillick competence assessment notes length and update.\n        Steps:\n        1. Open the session for the school and programme.\n        2. Navigate to Gillick competence assessment for the child.\n        3. Attempt to complete assessment with notes over 1000 characters (should error).\n        4. Complete assessment with valid notes.\n        5. Edit assessment and again try to update with notes over 1000\n           characters (should error).\n        Verification:\n        - Error is shown for notes over 1000 characters.\n        - Assessment can be completed and updated with valid notes.\n        \"\"\"\n        child = children[Programme.HPV][0]\n        school = schools[Programme.HPV][0]\n    \n        sessions_page.click_session_for_programme_group(school, Programme.HPV)\n        sessions_page.navigate_to_gillick_competence(child, Programme.HPV)\n    \n>       verbal_consent_page.answer_gillick_competence_questions(is_competent=True)\n\ntests/test_verbal_consent.py:96: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmavis/test/pages/verbal_consent.py:351: in answer_gillick_competence_questions\n    self.page.get_by_role(\"group\", name=question).get_by_label(response).check()\n.venv/lib/python3.14/site-packages/playwright/sync_api/_generated.py:15451: in check\n    self._sync(\n.venv/lib/python3.14/site-packages/playwright/_impl/_locator.py:145: in check\n    return await self._frame.check(self._selector, strict=True, **params)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.14/site-packages/playwright/_impl/_frame.py:829: in check\n    await self._channel.send(\"check\", self._timeout, locals_to_params(locals()))\n.venv/lib/python3.14/site-packages/playwright/_impl/_connection.py:69: in send\n    return await self._connection.wrap_api_call(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <playwright._impl._connection.Connection object at 0x7fa08d3bdbe0>\ncb = <function Channel.send.<locals>.<lambda> at 0x7fa0804ee1f0>\nis_internal = False, title = None\n\n    async def wrap_api_call(\n        self, cb: Callable[[], Any], is_internal: bool = False, title: str = None\n    ) -> Any:\n        if self._api_zone.get():\n            return await cb()\n        task = asyncio.current_task(self._loop)\n        st: List[inspect.FrameInfo] = getattr(\n            task, \"__pw_stack__\", None\n        ) or inspect.stack(0)\n    \n        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal, title)\n        self._api_zone.set(parsed_st)\n        try:\n            return await cb()\n        except Exception as error:\n>           raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nE           playwright._impl._errors.TimeoutError: Locator.check: Timeout 30000ms exceeded.\nE           Call log:\nE             - waiting for get_by_role(\"group\", name=\"The child knows how the injection will be given\").get_by_label(\"Yes\")\n\n.venv/lib/python3.14/site-packages/playwright/_impl/_connection.py:558: TimeoutError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"base_url","time":{"start":1761972296889,"stop":1761972296889,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1761972296890,"stop":1761972296890,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_session_faker","time":{"start":1761972296890,"stop":1761972296893,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1761972296893,"stop":1761972296893,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1761972296893,"stop":1761972296893,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"year_groups","time":{"start":1761972296893,"stop":1761972296894,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"onboarding","time":{"start":1761972296894,"stop":1761972311657,"duration":14763},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"programmes_enabled","time":{"start":1761972296894,"stop":1761972296894,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"schools","time":{"start":1761972311657,"stop":1761972311657,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1761972311657,"stop":1761972311954,"duration":297},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"team","time":{"start":1761972311657,"stop":1761972311657,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests","time":{"start":1761972311657,"stop":1761972311657,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"nurse","time":{"start":1761972311657,"stop":1761972311657,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1761972311657,"stop":1761972311657,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1761972311954,"stop":1761972311955,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1761972311954,"stop":1761972311954,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1761972311955,"stop":1761972311955,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1761972311955,"stop":1761972311955,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1761972311955,"stop":1761972313524,"duration":1569},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1761972313524,"stop":1761972313525,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"organisation","time":{"start":1761972313525,"stop":1761972313525,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_token","time":{"start":1761972313525,"stop":1761972313525,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clinics","time":{"start":1761972313525,"stop":1761972313525,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1761972313525,"stop":1761972313525,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_credentials","time":{"start":1761972313525,"stop":1761972313525,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1761972313525,"stop":1761972313525,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"reset_before_each_module","time":{"start":1761972935624,"stop":1761972940306,"duration":4682},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1761973095466,"stop":1761973095466,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1761973095466,"stop":1761973095473,"duration":7},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1761973095466,"stop":1761973095466,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1761973095466,"stop":1761973095466,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1761973095473,"stop":1761973095689,"duration":216},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_as_nurse","time":{"start":1761973095689,"stop":1761973097765,"duration":2076},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1761973095690,"stop":1761973096746,"duration":1056},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1761973095690,"stop":1761973096746,"duration":1056},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Log in as User(username='hross@example.com', password='hross@example.com', role='nurse') and choose team Team(name='Phillips Group est. 1676', workgroup='U062E', careplus_venue_code='U062E', email='josh98@example.com', phone='+44(0)7700900934')","time":{"start":1761973096746,"stop":1761973097765,"duration":1019},"status":"passed","steps":[{"name":"Log in as {1} and choose team {2}","time":{"start":1761973096746,"stop":1761973097765,"duration":1019},"status":"passed","steps":[{"name":"Log in as User(username='hross@example.com', password='hross@example.com', role='nurse')","time":{"start":1761973096746,"stop":1761973097710,"duration":964},"status":"passed","steps":[{"name":"Log in as {1}","time":{"start":1761973096746,"stop":1761973097710,"duration":964},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='hross@example.com', password='hross@example.com', role='nurse'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='hross@example.com', password='hross@example.com', role='nurse'), Team(name='Phillips Group est. 1676', workgroup='U062E', careplus_venue_code='U062E', email='josh98@example.com', phone='+44(0)7700900934'))"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"set_feature_flags","time":{"start":1761973095689,"stop":1761973095689,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"flipper_page","time":{"start":1761973095689,"stop":1761973095689,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_page","time":{"start":1761973095689,"stop":1761973095689,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"children","time":{"start":1761973097766,"stop":1761973097772,"duration":6},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"dashboard_page","time":{"start":1761973097766,"stop":1761973097766,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_data","time":{"start":1761973097772,"stop":1761973097773,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"sessions_page","time":{"start":1761973097773,"stop":1761973097774,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"import_records_page","time":{"start":1761973097774,"stop":1761973097774,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_fixed_child","time":{"start":1761973097775,"stop":1761973111599,"duration":13824},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761973097775,"stop":1761973098004,"duration":229},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761973097775,"stop":1761973098004,"duration":229},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'HPV' session at School(name='Ampleforth College', urn='121735', site=None)","time":{"start":1761973098004,"stop":1761973098684,"duration":680},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1761973098004,"stop":1761973098684,"duration":680},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='Ampleforth College', urn='121735', site=None), <Programme.HPV: 'HPV'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761973098696,"stop":1761973098909,"duration":213},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761973098696,"stop":1761973098909,"duration":213},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761973098909,"stop":1761973099140,"duration":231},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761973098909,"stop":1761973099140,"duration":231},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'HPV' session at School(name='Ampleforth College', urn='121735', site=None)","time":{"start":1761973099141,"stop":1761973099923,"duration":782},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1761973099141,"stop":1761973099923,"duration":782},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='Ampleforth College', urn='121735', site=None), <Programme.HPV: 'HPV'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Import class lists","time":{"start":1761973099923,"stop":1761973100205,"duration":282},"status":"passed","steps":[{"name":"Click on Import class lists","time":{"start":1761973099923,"stop":1761973100205,"duration":282},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761973100280,"stop":1761973100912,"duration":632},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761973100280,"stop":1761973100912,"duration":632},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Set input file to PosixPath('working/CohortsFileMapping.FIXED_CHILD20251101045820.csv')","time":{"start":1761973100926,"stop":1761973100956,"duration":30},"status":"passed","steps":[{"name":"Set input file to {1}","time":{"start":1761973100926,"stop":1761973100956,"duration":30},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(PosixPath('working/CohortsFileMapping.FIXED_CHILD20251101045820.csv'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761973101957,"stop":1761973102553,"duration":596},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761973101957,"stop":1761973102553,"duration":596},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"_coverage","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click link with uploaded datetime","time":{"start":1761973102703,"stop":1761973102899,"duration":196},"status":"passed","steps":[{"name":"Click link with uploaded datetime","time":{"start":1761973102704,"stop":1761973102899,"duration":195},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761973111157,"stop":1761973111341,"duration":184},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761973111157,"stop":1761973111341,"duration":184},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761973111341,"stop":1761973111599,"duration":258},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761973111341,"stop":1761973111599,"duration":258},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":24,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"setup_session_with_file_upload","time":{"start":1761973097775,"stop":1761973097775,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"verbal_consent_page","time":{"start":1761973111599,"stop":1761973111600,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\nTest: Validate Gillick competence assessment notes length and update.\nSteps:\n1. Open the session for the school and programme.\n2. Navigate to Gillick competence assessment for the child.\n3. Attempt to complete assessment with notes over 1000 characters (should error).\n4. Complete assessment with valid notes.\n5. Edit assessment and again try to update with notes over 1000\n   characters (should error).\nVerification:\n- Error is shown for notes over 1000 characters.\n- Assessment can be completed and updated with valid notes.\n","status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Locator.check: Timeout 30000ms exceeded.\nCall log:\n  - waiting for get_by_role(\"group\", name=\"The child knows how the injection will be given\").get_by_label(\"Yes\")","statusTrace":"setup_fixed_child = None\nschools = {'HPV': [School(name='Ampleforth College', urn='121735', site=None), School(name='The Commonweal School', urn='137190'...uel Laycock School', urn='148936', site=None), School(name='Kuwait National English School', urn='141434', site=None)]}\nsessions_page = <mavis.test.pages.sessions.SessionsPage object at 0x7fa07a444ad0>\nverbal_consent_page = <mavis.test.pages.verbal_consent.VerbalConsentPage object at 0x7fa088b969e0>\nchildren = {'HPV': [Child(first_name='Sian', last_name='TAYLOR', nhs_number='9129763916', address=('Studio 90t', 'Allen avenue', ...xample.org'), Parent(full_name='Amy Smith-Williams', relationship='Mum', email_address='jadedickinson@example.com')))]}\n\n    @issue(\"MAV-955\")\n    def test_gillick_competence_notes(\n        setup_fixed_child, schools, sessions_page, verbal_consent_page, children\n    ):\n        \"\"\"\n        Test: Validate Gillick competence assessment notes length and update.\n        Steps:\n        1. Open the session for the school and programme.\n        2. Navigate to Gillick competence assessment for the child.\n        3. Attempt to complete assessment with notes over 1000 characters (should error).\n        4. Complete assessment with valid notes.\n        5. Edit assessment and again try to update with notes over 1000\n           characters (should error).\n        Verification:\n        - Error is shown for notes over 1000 characters.\n        - Assessment can be completed and updated with valid notes.\n        \"\"\"\n        child = children[Programme.HPV][0]\n        school = schools[Programme.HPV][0]\n    \n        sessions_page.click_session_for_programme_group(school, Programme.HPV)\n        sessions_page.navigate_to_gillick_competence(child, Programme.HPV)\n    \n>       verbal_consent_page.answer_gillick_competence_questions(is_competent=True)\n\ntests/test_verbal_consent.py:96: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmavis/test/pages/verbal_consent.py:351: in answer_gillick_competence_questions\n    self.page.get_by_role(\"group\", name=question).get_by_label(response).check()\n.venv/lib/python3.14/site-packages/playwright/sync_api/_generated.py:15451: in check\n    self._sync(\n.venv/lib/python3.14/site-packages/playwright/_impl/_locator.py:145: in check\n    return await self._frame.check(self._selector, strict=True, **params)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.14/site-packages/playwright/_impl/_frame.py:829: in check\n    await self._channel.send(\"check\", self._timeout, locals_to_params(locals()))\n.venv/lib/python3.14/site-packages/playwright/_impl/_connection.py:69: in send\n    return await self._connection.wrap_api_call(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <playwright._impl._connection.Connection object at 0x7fa08d3bdbe0>\ncb = <function Channel.send.<locals>.<lambda> at 0x7fa0804ee1f0>\nis_internal = False, title = None\n\n    async def wrap_api_call(\n        self, cb: Callable[[], Any], is_internal: bool = False, title: str = None\n    ) -> Any:\n        if self._api_zone.get():\n            return await cb()\n        task = asyncio.current_task(self._loop)\n        st: List[inspect.FrameInfo] = getattr(\n            task, \"__pw_stack__\", None\n        ) or inspect.stack(0)\n    \n        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal, title)\n        self._api_zone.set(parsed_st)\n        try:\n            return await cb()\n        except Exception as error:\n>           raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nE           playwright._impl._errors.TimeoutError: Locator.check: Timeout 30000ms exceeded.\nE           Call log:\nE             - waiting for get_by_role(\"group\", name=\"The child knows how the injection will be given\").get_by_label(\"Yes\")\n\n.venv/lib/python3.14/site-packages/playwright/_impl/_connection.py:558: TimeoutError","steps":[{"name":"Click on 'HPV' session at School(name='Ampleforth College', urn='121735', site=None)","time":{"start":1761973111600,"stop":1761973112253,"duration":653},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1761973111600,"stop":1761973112253,"duration":653},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='Ampleforth College', urn='121735', site=None), <Programme.HPV: 'HPV'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Consent tab","time":{"start":1761973112254,"stop":1761973112525,"duration":271},"status":"passed","steps":[{"name":"Click on Consent tab","time":{"start":1761973112254,"stop":1761973112525,"duration":271},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on child Child(first_name='Sian', last_name='TAYLOR', nhs_number='9129763916', address=('Studio 90t', 'Allen avenue', 'Port Rosiehaven', 'HU1 5HF'), date_of_birth=datetime.date(2013, 3, 11), year_group=8, parents=(Parent(full_name='Owen Holland-Cox', relationship='Dad', email_address='twebb@example.com'), Parent(full_name='Beth Hancock', relationship='Mum', email_address='mitchell34@example.net')))","time":{"start":1761973112526,"stop":1761973113513,"duration":987},"status":"passed","steps":[{"name":"Click on child {1}","time":{"start":1761973112526,"stop":1761973113513,"duration":987},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(Child(first_name='Sian', last_name='TAYLOR', nhs_number='9129763916', address=('Studio 90t', 'Allen avenue', 'Port Rosiehaven', 'HU1 5HF'), date_of_birth=datetime.date(2013, 3, 11), year_group=8, parents=(Parent(full_name='Owen Holland-Cox', relationship='Dad', email_address='twebb@example.com'), Parent(full_name='Beth Hancock', relationship='Mum', email_address='mitchell34@example.net'))),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'HPV' tab","time":{"start":1761973113513,"stop":1761973113535,"duration":22},"status":"passed","steps":[{"name":"Click on {1} tab","time":{"start":1761973113513,"stop":1761973113535,"duration":22},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Programme.HPV: 'HPV'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Assess Gillick competence","time":{"start":1761973113535,"stop":1761973113710,"duration":175},"status":"passed","steps":[{"name":"Click on Assess Gillick competence","time":{"start":1761973113535,"stop":1761973113710,"duration":175},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":10,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"setup_fixed_child::0","time":{"start":1761973144058,"stop":1761973145345,"duration":1287},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1761973144058,"stop":1761973144368,"duration":310},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1761973144058,"stop":1761973144368,"duration":310},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761973144368,"stop":1761973144570,"duration":202},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761973144368,"stop":1761973144570,"duration":202},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761973144570,"stop":1761973144841,"duration":271},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761973144570,"stop":1761973144841,"duration":271},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"log_in_as_nurse::0","time":{"start":1761973145347,"stop":1761973146017,"duration":670},"status":"passed","steps":[{"name":"Log out","time":{"start":1761973145347,"stop":1761973146017,"duration":670},"status":"passed","steps":[{"name":"Log out","time":{"start":1761973145347,"stop":1761973146017,"duration":670},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"set_feature_flags::0","time":{"start":1761973146018,"stop":1761973146018,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context::0","time":{"start":1761973146019,"stop":1761973146029,"duration":10},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1761973146029,"stop":1761973146029,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1761974006799,"stop":1761974006799,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1761974006800,"stop":1761974006889,"duration":89},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1761974006891,"stop":1761974006900,"duration":9},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests::0","time":{"start":1761974006902,"stop":1761974011090,"duration":4188},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"consent"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_verbal_consent"},{"name":"host","value":"runnervmf2e7y"},{"name":"thread","value":"5947-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_verbal_consent"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[{"name":"MAV-955","url":"https://nhsd-jira.digital.nhs.uk/browse/MAV-955","type":"issue"}],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["consent"]},"source":"55c3d92a2855608e.json","parameterValues":[]}