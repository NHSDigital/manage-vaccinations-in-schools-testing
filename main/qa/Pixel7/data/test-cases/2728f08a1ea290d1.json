{"uid":"2728f08a1ea290d1","name":"test_gillick_competence_notes","fullName":"tests.test_verbal_consent#test_gillick_competence_notes","historyId":"27d1d369e43b87fe9fe428ac7b381a74","time":{"start":1761971328415,"stop":1761971359979,"duration":31564},"description":"\nTest: Validate Gillick competence assessment notes length and update.\nSteps:\n1. Open the session for the school and programme.\n2. Navigate to Gillick competence assessment for the child.\n3. Attempt to complete assessment with notes over 1000 characters (should error).\n4. Complete assessment with valid notes.\n5. Edit assessment and again try to update with notes over 1000\n   characters (should error).\nVerification:\n- Error is shown for notes over 1000 characters.\n- Assessment can be completed and updated with valid notes.\n","descriptionHtml":"<p>Test: Validate Gillick competence assessment notes length and update.<br />\nSteps:</p>\n<ol>\n<li>Open the session for the school and programme.</li>\n<li>Navigate to Gillick competence assessment for the child.</li>\n<li>Attempt to complete assessment with notes over 1000 characters (should error).</li>\n<li>Complete assessment with valid notes.</li>\n<li>Edit assessment and again try to update with notes over 1000<br />\ncharacters (should error).<br />\nVerification:</li>\n</ol>\n<ul>\n<li>Error is shown for notes over 1000 characters.</li>\n<li>Assessment can be completed and updated with valid notes.</li>\n</ul>\n","status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Locator.check: Timeout 30000ms exceeded.\nCall log:\n  - waiting for get_by_role(\"group\", name=\"The child knows how the injection will be given\").get_by_label(\"Yes\")","statusTrace":"setup_fixed_child = None\nschools = {'HPV': [School(name=\"The Queen Elizabeth's High School, Gainsborough\", urn='120655', site=None), School(name=\"Bancrof... Edward's School\", urn='103584', site=None), School(name='The Llewellyn School and Nursery', urn='142859', site=None)]}\nsessions_page = <mavis.test.pages.sessions.SessionsPage object at 0x7f6052f38050>\nverbal_consent_page = <mavis.test.pages.verbal_consent.VerbalConsentPage object at 0x7f6042081d90>\nchildren = {'HPV': [Child(first_name='Michael', last_name='BARTLETT', nhs_number='9376025377', address=('Flat 97', 'Brown estates...gan71@example.org'), Parent(full_name='Dr Jane Wilson', relationship='Mum', email_address='burtonjune@example.net')))]}\n\n    @issue(\"MAV-955\")\n    def test_gillick_competence_notes(\n        setup_fixed_child, schools, sessions_page, verbal_consent_page, children\n    ):\n        \"\"\"\n        Test: Validate Gillick competence assessment notes length and update.\n        Steps:\n        1. Open the session for the school and programme.\n        2. Navigate to Gillick competence assessment for the child.\n        3. Attempt to complete assessment with notes over 1000 characters (should error).\n        4. Complete assessment with valid notes.\n        5. Edit assessment and again try to update with notes over 1000\n           characters (should error).\n        Verification:\n        - Error is shown for notes over 1000 characters.\n        - Assessment can be completed and updated with valid notes.\n        \"\"\"\n        child = children[Programme.HPV][0]\n        school = schools[Programme.HPV][0]\n    \n        sessions_page.click_session_for_programme_group(school, Programme.HPV)\n        sessions_page.navigate_to_gillick_competence(child, Programme.HPV)\n    \n>       verbal_consent_page.answer_gillick_competence_questions(is_competent=True)\n\ntests/test_verbal_consent.py:96: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmavis/test/pages/verbal_consent.py:351: in answer_gillick_competence_questions\n    self.page.get_by_role(\"group\", name=question).get_by_label(response).check()\n.venv/lib/python3.14/site-packages/playwright/sync_api/_generated.py:15451: in check\n    self._sync(\n.venv/lib/python3.14/site-packages/playwright/_impl/_locator.py:145: in check\n    return await self._frame.check(self._selector, strict=True, **params)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.14/site-packages/playwright/_impl/_frame.py:829: in check\n    await self._channel.send(\"check\", self._timeout, locals_to_params(locals()))\n.venv/lib/python3.14/site-packages/playwright/_impl/_connection.py:69: in send\n    return await self._connection.wrap_api_call(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <playwright._impl._connection.Connection object at 0x7f6053dcdbe0>\ncb = <function Channel.send.<locals>.<lambda> at 0x7f6051beb7f0>\nis_internal = False, title = None\n\n    async def wrap_api_call(\n        self, cb: Callable[[], Any], is_internal: bool = False, title: str = None\n    ) -> Any:\n        if self._api_zone.get():\n            return await cb()\n        task = asyncio.current_task(self._loop)\n        st: List[inspect.FrameInfo] = getattr(\n            task, \"__pw_stack__\", None\n        ) or inspect.stack(0)\n    \n        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal, title)\n        self._api_zone.set(parsed_st)\n        try:\n            return await cb()\n        except Exception as error:\n>           raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nE           playwright._impl._errors.TimeoutError: Locator.check: Timeout 30000ms exceeded.\nE           Call log:\nE             - waiting for get_by_role(\"group\", name=\"The child knows how the injection will be given\").get_by_label(\"Yes\")\n\n.venv/lib/python3.14/site-packages/playwright/_impl/_connection.py:558: TimeoutError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":2,"retriesStatusChange":false,"beforeStages":[{"name":"base_url","time":{"start":1761970393611,"stop":1761970393611,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1761970393611,"stop":1761970393611,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_session_faker","time":{"start":1761970393612,"stop":1761970393613,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"programmes_enabled","time":{"start":1761970393613,"stop":1761970393613,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1761970393613,"stop":1761970393613,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"year_groups","time":{"start":1761970393613,"stop":1761970393613,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1761970393613,"stop":1761970393613,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"onboarding","time":{"start":1761970393613,"stop":1761970409053,"duration":15440},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"team","time":{"start":1761970409053,"stop":1761970409053,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests","time":{"start":1761970409053,"stop":1761970409053,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1761970409054,"stop":1761970409054,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clinics","time":{"start":1761970409054,"stop":1761970409054,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1761970409054,"stop":1761970409391,"duration":337},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"schools","time":{"start":1761970409054,"stop":1761970409054,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"nurse","time":{"start":1761970409054,"stop":1761970409054,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"organisation","time":{"start":1761970409054,"stop":1761970409054,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1761970409392,"stop":1761970409393,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1761970409392,"stop":1761970409392,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1761970409392,"stop":1761970409392,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1761970409392,"stop":1761970409392,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1761970409393,"stop":1761970409492,"duration":99},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1761970409492,"stop":1761970409492,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1761970409493,"stop":1761970409493,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_credentials","time":{"start":1761970409493,"stop":1761970409493,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_token","time":{"start":1761970409494,"stop":1761970409494,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1761970409494,"stop":1761970409494,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"reset_before_each_module","time":{"start":1761971049343,"stop":1761971051294,"duration":1951},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1761971308557,"stop":1761971308557,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1761971308557,"stop":1761971308563,"duration":6},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1761971308557,"stop":1761971308557,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1761971308557,"stop":1761971308557,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1761971308563,"stop":1761971308588,"duration":25},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_page","time":{"start":1761971308588,"stop":1761971308589,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_feature_flags","time":{"start":1761971308588,"stop":1761971308588,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"flipper_page","time":{"start":1761971308588,"stop":1761971308588,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_as_nurse","time":{"start":1761971308589,"stop":1761971311034,"duration":2445},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1761971308589,"stop":1761971309969,"duration":1380},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1761971308589,"stop":1761971309969,"duration":1380},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Log in as User(username='parryaaron@example.org', password='parryaaron@example.org', role='nurse') and choose team Team(name='Hamilton-Dawson est. 1875', workgroup='K579Y', careplus_venue_code='K579Y', email='patelmaria@example.net', phone='+447700 900709')","time":{"start":1761971309969,"stop":1761971311034,"duration":1065},"status":"passed","steps":[{"name":"Log in as {1} and choose team {2}","time":{"start":1761971309969,"stop":1761971311034,"duration":1065},"status":"passed","steps":[{"name":"Log in as User(username='parryaaron@example.org', password='parryaaron@example.org', role='nurse')","time":{"start":1761971309969,"stop":1761971311004,"duration":1035},"status":"passed","steps":[{"name":"Log in as {1}","time":{"start":1761971309969,"stop":1761971311004,"duration":1035},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='parryaaron@example.org', password='parryaaron@example.org', role='nurse'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='parryaaron@example.org', password='parryaaron@example.org', role='nurse'), Team(name='Hamilton-Dawson est. 1875', workgroup='K579Y', careplus_venue_code='K579Y', email='patelmaria@example.net', phone='+447700 900709'))"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"dashboard_page","time":{"start":1761971311034,"stop":1761971311034,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"children","time":{"start":1761971311034,"stop":1761971311037,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_data","time":{"start":1761971311037,"stop":1761971311038,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"sessions_page","time":{"start":1761971311038,"stop":1761971311039,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_fixed_child","time":{"start":1761971311039,"stop":1761971328414,"duration":17375},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761971311039,"stop":1761971311301,"duration":262},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761971311039,"stop":1761971311301,"duration":262},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'HPV' session at School(name=\"The Queen Elizabeth's High School, Gainsborough\", urn='120655', site=None)","time":{"start":1761971311301,"stop":1761971311991,"duration":690},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1761971311301,"stop":1761971311991,"duration":690},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name=\"The Queen Elizabeth's High School, Gainsborough\", urn='120655', site=None), <Programme.HPV: 'HPV'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761971311996,"stop":1761971312193,"duration":197},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761971311996,"stop":1761971312193,"duration":197},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761971312193,"stop":1761971312436,"duration":243},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761971312193,"stop":1761971312436,"duration":243},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'HPV' session at School(name=\"The Queen Elizabeth's High School, Gainsborough\", urn='120655', site=None)","time":{"start":1761971312436,"stop":1761971313025,"duration":589},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1761971312436,"stop":1761971313025,"duration":589},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name=\"The Queen Elizabeth's High School, Gainsborough\", urn='120655', site=None), <Programme.HPV: 'HPV'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Import class lists","time":{"start":1761971313025,"stop":1761971313390,"duration":365},"status":"passed","steps":[{"name":"Click on Import class lists","time":{"start":1761971313025,"stop":1761971313390,"duration":365},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761971313444,"stop":1761971313970,"duration":526},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761971313444,"stop":1761971313970,"duration":526},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Set input file to PosixPath('working/CohortsFileMapping.FIXED_CHILD20251101042833.csv')","time":{"start":1761971313981,"stop":1761971313998,"duration":17},"status":"passed","steps":[{"name":"Set input file to {1}","time":{"start":1761971313981,"stop":1761971313998,"duration":17},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(PosixPath('working/CohortsFileMapping.FIXED_CHILD20251101042833.csv'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761971314998,"stop":1761971315414,"duration":416},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761971314998,"stop":1761971315414,"duration":416},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"_coverage","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click link with uploaded datetime","time":{"start":1761971315445,"stop":1761971315687,"duration":242},"status":"passed","steps":[{"name":"Click link with uploaded datetime","time":{"start":1761971315445,"stop":1761971315687,"duration":242},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761971327952,"stop":1761971328163,"duration":211},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761971327952,"stop":1761971328163,"duration":211},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761971328163,"stop":1761971328414,"duration":251},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761971328163,"stop":1761971328414,"duration":251},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":24,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"import_records_page","time":{"start":1761971311039,"stop":1761971311039,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_session_with_file_upload","time":{"start":1761971311039,"stop":1761971311039,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"verbal_consent_page","time":{"start":1761971328414,"stop":1761971328415,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\nTest: Validate Gillick competence assessment notes length and update.\nSteps:\n1. Open the session for the school and programme.\n2. Navigate to Gillick competence assessment for the child.\n3. Attempt to complete assessment with notes over 1000 characters (should error).\n4. Complete assessment with valid notes.\n5. Edit assessment and again try to update with notes over 1000\n   characters (should error).\nVerification:\n- Error is shown for notes over 1000 characters.\n- Assessment can be completed and updated with valid notes.\n","status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Locator.check: Timeout 30000ms exceeded.\nCall log:\n  - waiting for get_by_role(\"group\", name=\"The child knows how the injection will be given\").get_by_label(\"Yes\")","statusTrace":"setup_fixed_child = None\nschools = {'HPV': [School(name=\"The Queen Elizabeth's High School, Gainsborough\", urn='120655', site=None), School(name=\"Bancrof... Edward's School\", urn='103584', site=None), School(name='The Llewellyn School and Nursery', urn='142859', site=None)]}\nsessions_page = <mavis.test.pages.sessions.SessionsPage object at 0x7f6052f38050>\nverbal_consent_page = <mavis.test.pages.verbal_consent.VerbalConsentPage object at 0x7f6042081d90>\nchildren = {'HPV': [Child(first_name='Michael', last_name='BARTLETT', nhs_number='9376025377', address=('Flat 97', 'Brown estates...gan71@example.org'), Parent(full_name='Dr Jane Wilson', relationship='Mum', email_address='burtonjune@example.net')))]}\n\n    @issue(\"MAV-955\")\n    def test_gillick_competence_notes(\n        setup_fixed_child, schools, sessions_page, verbal_consent_page, children\n    ):\n        \"\"\"\n        Test: Validate Gillick competence assessment notes length and update.\n        Steps:\n        1. Open the session for the school and programme.\n        2. Navigate to Gillick competence assessment for the child.\n        3. Attempt to complete assessment with notes over 1000 characters (should error).\n        4. Complete assessment with valid notes.\n        5. Edit assessment and again try to update with notes over 1000\n           characters (should error).\n        Verification:\n        - Error is shown for notes over 1000 characters.\n        - Assessment can be completed and updated with valid notes.\n        \"\"\"\n        child = children[Programme.HPV][0]\n        school = schools[Programme.HPV][0]\n    \n        sessions_page.click_session_for_programme_group(school, Programme.HPV)\n        sessions_page.navigate_to_gillick_competence(child, Programme.HPV)\n    \n>       verbal_consent_page.answer_gillick_competence_questions(is_competent=True)\n\ntests/test_verbal_consent.py:96: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmavis/test/pages/verbal_consent.py:351: in answer_gillick_competence_questions\n    self.page.get_by_role(\"group\", name=question).get_by_label(response).check()\n.venv/lib/python3.14/site-packages/playwright/sync_api/_generated.py:15451: in check\n    self._sync(\n.venv/lib/python3.14/site-packages/playwright/_impl/_locator.py:145: in check\n    return await self._frame.check(self._selector, strict=True, **params)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.14/site-packages/playwright/_impl/_frame.py:829: in check\n    await self._channel.send(\"check\", self._timeout, locals_to_params(locals()))\n.venv/lib/python3.14/site-packages/playwright/_impl/_connection.py:69: in send\n    return await self._connection.wrap_api_call(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <playwright._impl._connection.Connection object at 0x7f6053dcdbe0>\ncb = <function Channel.send.<locals>.<lambda> at 0x7f6051beb7f0>\nis_internal = False, title = None\n\n    async def wrap_api_call(\n        self, cb: Callable[[], Any], is_internal: bool = False, title: str = None\n    ) -> Any:\n        if self._api_zone.get():\n            return await cb()\n        task = asyncio.current_task(self._loop)\n        st: List[inspect.FrameInfo] = getattr(\n            task, \"__pw_stack__\", None\n        ) or inspect.stack(0)\n    \n        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal, title)\n        self._api_zone.set(parsed_st)\n        try:\n            return await cb()\n        except Exception as error:\n>           raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nE           playwright._impl._errors.TimeoutError: Locator.check: Timeout 30000ms exceeded.\nE           Call log:\nE             - waiting for get_by_role(\"group\", name=\"The child knows how the injection will be given\").get_by_label(\"Yes\")\n\n.venv/lib/python3.14/site-packages/playwright/_impl/_connection.py:558: TimeoutError","steps":[{"name":"Click on 'HPV' session at School(name=\"The Queen Elizabeth's High School, Gainsborough\", urn='120655', site=None)","time":{"start":1761971328415,"stop":1761971329007,"duration":592},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1761971328415,"stop":1761971329007,"duration":592},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name=\"The Queen Elizabeth's High School, Gainsborough\", urn='120655', site=None), <Programme.HPV: 'HPV'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Consent tab","time":{"start":1761971329007,"stop":1761971329332,"duration":325},"status":"passed","steps":[{"name":"Click on Consent tab","time":{"start":1761971329007,"stop":1761971329332,"duration":325},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on child Child(first_name='Michael', last_name='BARTLETT', nhs_number='9376025377', address=('Flat 97', 'Brown estates', 'Jordanburgh', 'CB1M 0WP'), date_of_birth=datetime.date(2010, 8, 26), year_group=11, parents=(Parent(full_name='Luke Edwards', relationship='Dad', email_address='jsmith@example.com'), Parent(full_name='Ruth Sykes', relationship='Mum', email_address='leonardbuckley@example.org')))","time":{"start":1761971329332,"stop":1761971329575,"duration":243},"status":"passed","steps":[{"name":"Click on child {1}","time":{"start":1761971329332,"stop":1761971329575,"duration":243},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(Child(first_name='Michael', last_name='BARTLETT', nhs_number='9376025377', address=('Flat 97', 'Brown estates', 'Jordanburgh', 'CB1M 0WP'), date_of_birth=datetime.date(2010, 8, 26), year_group=11, parents=(Parent(full_name='Luke Edwards', relationship='Dad', email_address='jsmith@example.com'), Parent(full_name='Ruth Sykes', relationship='Mum', email_address='leonardbuckley@example.org'))),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'HPV' tab","time":{"start":1761971329575,"stop":1761971329588,"duration":13},"status":"passed","steps":[{"name":"Click on {1} tab","time":{"start":1761971329575,"stop":1761971329588,"duration":13},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Programme.HPV: 'HPV'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Assess Gillick competence","time":{"start":1761971329588,"stop":1761971329862,"duration":274},"status":"passed","steps":[{"name":"Click on Assess Gillick competence","time":{"start":1761971329588,"stop":1761971329862,"duration":274},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":10,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"setup_fixed_child::0","time":{"start":1761971360089,"stop":1761971361071,"duration":982},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1761971360089,"stop":1761971360259,"duration":170},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1761971360089,"stop":1761971360259,"duration":170},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761971360259,"stop":1761971360461,"duration":202},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761971360259,"stop":1761971360461,"duration":202},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761971360461,"stop":1761971360722,"duration":261},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761971360461,"stop":1761971360722,"duration":261},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"log_in_as_nurse::0","time":{"start":1761971361073,"stop":1761971361614,"duration":541},"status":"passed","steps":[{"name":"Log out","time":{"start":1761971361073,"stop":1761971361614,"duration":541},"status":"passed","steps":[{"name":"Log out","time":{"start":1761971361073,"stop":1761971361614,"duration":541},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"set_feature_flags::0","time":{"start":1761971361615,"stop":1761971361615,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context::0","time":{"start":1761971361616,"stop":1761971361624,"duration":8},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1761971361624,"stop":1761971361624,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1761972138341,"stop":1761972138341,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1761972138341,"stop":1761972138383,"duration":42},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1761972138384,"stop":1761972138395,"duration":11},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests::0","time":{"start":1761972138398,"stop":1761972141644,"duration":3246},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"consent"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_verbal_consent"},{"name":"host","value":"runnervmf2e7y"},{"name":"thread","value":"3112-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_verbal_consent"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[{"name":"MAV-955","url":"https://nhsd-jira.digital.nhs.uk/browse/MAV-955","type":"issue"}],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"e55af455ed828c1d","status":"broken","statusDetails":"playwright._impl._errors.TimeoutError: Locator.check: Timeout 30000ms exceeded.\nCall log:\n  - waiting for get_by_role(\"group\", name=\"The child knows how the injection will be given\").get_by_label(\"Yes\")","time":{"start":1761971275123,"stop":1761971306781,"duration":31658}},{"uid":"733183039c284f44","status":"broken","statusDetails":"playwright._impl._errors.TimeoutError: Locator.check: Timeout 30000ms exceeded.\nCall log:\n  - waiting for get_by_role(\"group\", name=\"The child knows how the injection will be given\").get_by_label(\"Yes\")","time":{"start":1761971224476,"stop":1761971256516,"duration":32040}}],"categories":[{"name":"Test defects","matchedStatuses":[]}],"tags":["consent"]},"source":"2728f08a1ea290d1.json","parameterValues":[]}