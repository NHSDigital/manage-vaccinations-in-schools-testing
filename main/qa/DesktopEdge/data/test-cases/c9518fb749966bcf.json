{"uid":"c9518fb749966bcf","name":"test_report_view","fullName":"tests.test_reporting_values#test_report_view","historyId":"6bb6b4b22331dc5e0cecdee6058c6a31","time":{"start":1761881685875,"stop":1761881719606,"duration":33731},"description":"\nTest: Verify reporting values update correctly after vaccination and edit.\nSteps:\n1. Record a flu vaccination for a child and verify initial reporting values.\n2. Refresh reports and check that the cohort and vaccination percentages update.\n3. Edit the child's vaccination record to mark the outcome as refused.\n4. Refresh reports and verify that the reporting values reflect the refusal.\nVerification:\n- After vaccination, report shows 1 more vaccinated and 0 more not vaccinated.\n- After marking as refused, report shows 0 more vaccinated and\n  1 more not vaccinated.\n","descriptionHtml":"<p>Test: Verify reporting values update correctly after vaccination and edit.<br />\nSteps:</p>\n<ol>\n<li>Record a flu vaccination for a child and verify initial reporting values.</li>\n<li>Refresh reports and check that the cohort and vaccination percentages update.</li>\n<li>Edit the child's vaccination record to mark the outcome as refused.</li>\n<li>Refresh reports and verify that the reporting values reflect the refusal.<br />\nVerification:</li>\n</ol>\n<ul>\n<li>After vaccination, report shows 1 more vaccinated and 0 more not vaccinated.</li>\n<li>After marking as refused, report shows 0 more vaccinated and<br />\n1 more not vaccinated.</li>\n</ul>\n","status":"failed","statusMessage":"AssertionError: Locator expected to contain text '1children'\nActual value: 2children \nCall log:\n  - Expect \"to_contain_text\" with timeout 5000ms\n  - waiting for get_by_role(\"heading\", name=\"Cohort\", exact=True).locator(\"xpath=following-sibling::*[1]\")\n    3 × locator resolved to <p class=\"nhsuk-card__description\">…</p>\n      - unexpected value \"0children\"\n    6 × locator resolved to <p class=\"nhsuk-card__description\">…</p>\n      - unexpected value \"2children\"","statusTrace":"record_injected_flu = (Child(first_name='Paul', last_name='HUSSAIN', nhs_number='9695369057', address=('Flat 87B', 'Trevor ridges', 'East Ma...ins@example.net'))), datetime.datetime(2025, 10, 31, 3, 34, 45, 873788, tzinfo=zoneinfo.ZoneInfo(key='Europe/London')))\nschools = {'HPV': [School(name='Cambian Bletchley Park School', urn='142322', site=None), School(name='The Stable School', urn='...verley\", urn='118030', site=None), School(name=\"St John's Church of England Primary School\", urn='104920', site=None)]}\nreports_vaccinations_page = <mavis.test.pages.reports.ReportsVaccinationsPage object at 0x7f83d13c87d0>\ndashboard_page = <mavis.test.pages.dashboard.DashboardPage object at 0x7f83d21b4c00>\nchildren_page = <mavis.test.pages.children.ChildrenPage object at 0x7f83d1439fd0>\nvaccination_record_page = <mavis.test.pages.vaccination_record.VaccinationRecordPage object at 0x7f83d115ca70>\nedit_vaccination_record_page = <mavis.test.pages.vaccination_record.EditVaccinationRecordPage object at 0x7f83d12e8b00>\n\n    def test_report_view(\n        record_injected_flu,\n        schools,\n        reports_vaccinations_page,\n        dashboard_page,\n        children_page,\n        vaccination_record_page,\n        edit_vaccination_record_page,\n    ):\n        \"\"\"\n        Test: Verify reporting values update correctly after vaccination and edit.\n        Steps:\n        1. Record a flu vaccination for a child and verify initial reporting values.\n        2. Refresh reports and check that the cohort and vaccination percentages update.\n        3. Edit the child's vaccination record to mark the outcome as refused.\n        4. Refresh reports and verify that the reporting values reflect the refusal.\n        Verification:\n        - After vaccination, report shows 1 more vaccinated and 0 more not vaccinated.\n        - After marking as refused, report shows 0 more vaccinated and\n          1 more not vaccinated.\n        \"\"\"\n    \n        child, _ = record_injected_flu\n        school = schools[Programme.FLU][0]\n    \n        reports_vaccinations_page.navigate()\n        reports_vaccinations_page.check_filter_for_programme(Programme.FLU)\n    \n        vaccinated_count = reports_vaccinations_page.get_children_count(\"Vaccinated\")\n        unvaccinated_count = reports_vaccinations_page.get_children_count(\"Not vaccinated\")\n    \n        (\n            expected_cohort_count,\n            expected_unvaccinated_percentage,\n            expected_vaccinated_percentage,\n        ) = reports_vaccinations_page.get_expected_cohort_and_percentage_strings(\n            unvaccinated_count, vaccinated_count\n        )\n    \n        reports_vaccinations_page.check_cohort_has_n_children(expected_cohort_count)\n        reports_vaccinations_page.check_category_percentage(\n            \"Not vaccinated\", expected_unvaccinated_percentage\n        )\n        reports_vaccinations_page.check_category_percentage(\n            \"Vaccinated\", expected_vaccinated_percentage\n        )\n    \n        reports_vaccinations_page.navigate_and_refresh_reports()\n        reports_vaccinations_page.check_filter_for_programme(Programme.FLU)\n    \n        (\n            expected_cohort_count,\n            expected_unvaccinated_percentage,\n            expected_vaccinated_percentage,\n        ) = reports_vaccinations_page.get_expected_cohort_and_percentage_strings(\n            unvaccinated_count, vaccinated_count + 1\n        )\n    \n>       reports_vaccinations_page.check_cohort_has_n_children(expected_cohort_count)\n\ntests/test_reporting_values.py:141: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mavis.test.pages.reports.ReportsVaccinationsPage object at 0x7f83d13c87d0>\nexpected_value = '1'\n\n    def check_cohort_has_n_children(self, expected_value: int) -> None:\n        cohort_heading = self.page.get_by_role(\"heading\", name=\"Cohort\", exact=True)\n        cohort_value = cohort_heading.locator(\"xpath=following-sibling::*[1]\")\n>       expect(cohort_value).to_contain_text(f\"{expected_value}children\")\nE       AssertionError: Locator expected to contain text '1children'\nE       Actual value: 2children \nE       Call log:\nE         - Expect \"to_contain_text\" with timeout 5000ms\nE         - waiting for get_by_role(\"heading\", name=\"Cohort\", exact=True).locator(\"xpath=following-sibling::*[1]\")\nE           3 × locator resolved to <p class=\"nhsuk-card__description\">…</p>\nE             - unexpected value \"0children\"\nE           6 × locator resolved to <p class=\"nhsuk-card__description\">…</p>\nE             - unexpected value \"2children\"\n\nmavis/test/pages/reports.py:53: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_verify_url","time":{"start":1761880835936,"stop":1761880835936,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1761880835936,"stop":1761880835936,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_session_faker","time":{"start":1761880835936,"stop":1761880835937,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"year_groups","time":{"start":1761880835937,"stop":1761880835937,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1761880835937,"stop":1761880835937,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1761880835937,"stop":1761880835937,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"onboarding","time":{"start":1761880835938,"stop":1761880878576,"duration":42638},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"programmes_enabled","time":{"start":1761880835938,"stop":1761880835938,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"team","time":{"start":1761880878576,"stop":1761880878576,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"nurse","time":{"start":1761880878576,"stop":1761880878576,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests","time":{"start":1761880878576,"stop":1761880878576,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"organisation","time":{"start":1761880878576,"stop":1761880878576,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"schools","time":{"start":1761880878577,"stop":1761880878577,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1761880878577,"stop":1761880878577,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clinics","time":{"start":1761880878577,"stop":1761880878577,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1761880878577,"stop":1761880878878,"duration":301},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1761880878878,"stop":1761880878879,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1761880878878,"stop":1761880878878,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1761880878879,"stop":1761880878879,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1761880878879,"stop":1761880878977,"duration":98},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1761880878879,"stop":1761880878879,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1761880878977,"stop":1761880878977,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1761880878977,"stop":1761880878978,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_credentials","time":{"start":1761880878978,"stop":1761880878978,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_token","time":{"start":1761880878979,"stop":1761880878979,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1761880878979,"stop":1761880878979,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"reset_before_each_module","time":{"start":1761881601487,"stop":1761881604780,"duration":3293},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1761881664087,"stop":1761881664087,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1761881664087,"stop":1761881664087,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1761881664087,"stop":1761881664087,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1761881664088,"stop":1761881664092,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1761881664092,"stop":1761881664120,"duration":28},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_feature_flags","time":{"start":1761881664120,"stop":1761881664120,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"flipper_page","time":{"start":1761881664120,"stop":1761881664120,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_as_nurse","time":{"start":1761881664120,"stop":1761881666119,"duration":1999},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1761881664121,"stop":1761881665361,"duration":1240},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1761881664121,"stop":1761881665361,"duration":1240},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Log in as User(username='mellorellie@example.org', password='mellorellie@example.org', role='nurse') and choose team Team(name='Freeman-Morrison est. 1790', workgroup='L233V', careplus_venue_code='L233V', email='mgraham@example.com', phone='+447700900683')","time":{"start":1761881665362,"stop":1761881666119,"duration":757},"status":"passed","steps":[{"name":"Log in as {1} and choose team {2}","time":{"start":1761881665362,"stop":1761881666119,"duration":757},"status":"passed","steps":[{"name":"Log in as User(username='mellorellie@example.org', password='mellorellie@example.org', role='nurse')","time":{"start":1761881665362,"stop":1761881666093,"duration":731},"status":"passed","steps":[{"name":"Log in as {1}","time":{"start":1761881665362,"stop":1761881666092,"duration":730},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='mellorellie@example.org', password='mellorellie@example.org', role='nurse'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='mellorellie@example.org', password='mellorellie@example.org', role='nurse'), Team(name='Freeman-Morrison est. 1790', workgroup='L233V', careplus_venue_code='L233V', email='mgraham@example.com', phone='+447700900683'))"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"log_in_page","time":{"start":1761881664120,"stop":1761881664120,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"vaccines_page","time":{"start":1761881666120,"stop":1761881666120,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"dashboard_page","time":{"start":1761881666120,"stop":1761881666120,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"children","time":{"start":1761881666120,"stop":1761881666123,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"add_vaccine_batch","time":{"start":1761881666120,"stop":1761881666120,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"add_batch_page","time":{"start":1761881666120,"stop":1761881666120,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_data","time":{"start":1761881666123,"stop":1761881666124,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"import_records_page","time":{"start":1761881666124,"stop":1761881666124,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_recording_injected_flu","time":{"start":1761881666125,"stop":1761881672329,"duration":6204},"status":"passed","steps":[{"name":"Go to vaccines page","time":{"start":1761881666125,"stop":1761881666347,"duration":222},"status":"passed","steps":[{"name":"Go to vaccines page","time":{"start":1761881666125,"stop":1761881666347,"duration":222},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Add batch for 'Cell-based Trivalent Influenza Vaccine Seqirus'","time":{"start":1761881666347,"stop":1761881666569,"duration":222},"status":"passed","steps":[{"name":"Add batch for {1}","time":{"start":1761881666347,"stop":1761881666569,"duration":222},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Vaccine.SEQUIRUS: 'Cell-based Trivalent Influenza Vaccine Seqirus'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fill in name with 'ABC123'","time":{"start":1761881666569,"stop":1761881666588,"duration":19},"status":"passed","steps":[{"name":"Fill in name with {1}","time":{"start":1761881666569,"stop":1761881666588,"duration":19},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('ABC123',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fill in expiry date with datetime.date(2025, 11, 1)","time":{"start":1761881666588,"stop":1761881666609,"duration":21},"status":"passed","steps":[{"name":"Fill in expiry date with {1}","time":{"start":1761881666588,"stop":1761881666609,"duration":21},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(datetime.date(2025, 11, 1),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Confirm add batch","time":{"start":1761881666609,"stop":1761881666825,"duration":216},"status":"passed","steps":[{"name":"Confirm add batch","time":{"start":1761881666609,"stop":1761881666825,"duration":216},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761881666825,"stop":1761881667032,"duration":207},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761881666825,"stop":1761881667032,"duration":207},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761881667032,"stop":1761881667303,"duration":271},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761881667032,"stop":1761881667303,"duration":271},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'flu' session at School(name=\"St Mary's Church of England Voluntary Controlled Primary School, Beverley\", urn='118030', site=None)","time":{"start":1761881667303,"stop":1761881668002,"duration":699},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1761881667303,"stop":1761881668002,"duration":699},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name=\"St Mary's Church of England Voluntary Controlled Primary School, Beverley\", urn='118030', site=None), <Programme.FLU: 'flu'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Import class lists","time":{"start":1761881668007,"stop":1761881668848,"duration":841},"status":"passed","steps":[{"name":"Click on Import class lists","time":{"start":1761881668007,"stop":1761881668848,"duration":841},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761881668902,"stop":1761881669450,"duration":548},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761881668902,"stop":1761881669450,"duration":548},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Set input file to PosixPath('working/ClassFileMapping.FIXED_CHILD20251031033429.csv')","time":{"start":1761881669460,"stop":1761881669479,"duration":19},"status":"passed","steps":[{"name":"Set input file to {1}","time":{"start":1761881669460,"stop":1761881669479,"duration":19},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(PosixPath('working/ClassFileMapping.FIXED_CHILD20251031033429.csv'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761881670479,"stop":1761881670870,"duration":391},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761881670479,"stop":1761881670870,"duration":391},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"_coverage","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click link with uploaded datetime","time":{"start":1761881670901,"stop":1761881671125,"duration":224},"status":"passed","steps":[{"name":"Click link with uploaded datetime","time":{"start":1761881670901,"stop":1761881671125,"duration":224},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":26,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"sessions_page","time":{"start":1761881666125,"stop":1761881666125,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"record_injected_flu","time":{"start":1761881672329,"stop":1761881685874,"duration":13545},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761881672329,"stop":1761881672541,"duration":212},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761881672329,"stop":1761881672541,"duration":212},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761881672541,"stop":1761881672776,"duration":235},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761881672541,"stop":1761881672776,"duration":235},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'flu' session at School(name=\"St Mary's Church of England Voluntary Controlled Primary School, Beverley\", urn='118030', site=None)","time":{"start":1761881672777,"stop":1761881673394,"duration":617},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1761881672777,"stop":1761881673394,"duration":617},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name=\"St Mary's Church of England Voluntary Controlled Primary School, Beverley\", urn='118030', site=None), <Programme.FLU: 'flu'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Consent tab","time":{"start":1761881673394,"stop":1761881673729,"duration":335},"status":"passed","steps":[{"name":"Click on Consent tab","time":{"start":1761881673395,"stop":1761881673729,"duration":334},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on child Child(first_name='Paul', last_name='HUSSAIN', nhs_number='9695369057', address=('Flat 87B', 'Trevor ridges', 'East Maria', 'YO77 9PY'), date_of_birth=datetime.date(2015, 2, 24), year_group=6, parents=(Parent(full_name='Mr Ian Bartlett', relationship='Dad', email_address='ricky81@example.com'), Parent(full_name='Diana Richards-Rhodes', relationship='Mum', email_address='rcollins@example.net')))","time":{"start":1761881674038,"stop":1761881674327,"duration":289},"status":"passed","steps":[{"name":"Click on child {1}","time":{"start":1761881674038,"stop":1761881674327,"duration":289},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(Child(first_name='Paul', last_name='HUSSAIN', nhs_number='9695369057', address=('Flat 87B', 'Trevor ridges', 'East Maria', 'YO77 9PY'), date_of_birth=datetime.date(2015, 2, 24), year_group=6, parents=(Parent(full_name='Mr Ian Bartlett', relationship='Dad', email_address='ricky81@example.com'), Parent(full_name='Diana Richards-Rhodes', relationship='Mum', email_address='rcollins@example.net'))),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'flu' tab","time":{"start":1761881674327,"stop":1761881674341,"duration":14},"status":"passed","steps":[{"name":"Click on {1} tab","time":{"start":1761881674327,"stop":1761881674341,"duration":14},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Programme.FLU: 'flu'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Record a new consent response","time":{"start":1761881674341,"stop":1761881675909,"duration":1568},"status":"passed","steps":[{"name":"Click on Record a new consent response","time":{"start":1761881674341,"stop":1761881675909,"duration":1568},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'Mr Ian Bartlett (Dad)' radio button","time":{"start":1761881675909,"stop":1761881675952,"duration":43},"status":"passed","steps":[{"name":"Click on {1} radio button","time":{"start":1761881675909,"stop":1761881675952,"duration":43},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('Mr Ian Bartlett (Dad)',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761881675952,"stop":1761881676371,"duration":419},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761881675952,"stop":1761881676371,"duration":419},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761881676371,"stop":1761881677076,"duration":705},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761881676372,"stop":1761881677076,"duration":704},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select consent method","time":{"start":1761881677076,"stop":1761881677135,"duration":59},"status":"passed","steps":[{"name":"Select consent method","time":{"start":1761881677076,"stop":1761881677135,"duration":59},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<ConsentMethod.IN_PERSON: 'In person'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761881677135,"stop":1761881677533,"duration":398},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761881677135,"stop":1761881677533,"duration":398},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Yes, for the injected vaccine only","time":{"start":1761881677534,"stop":1761881677586,"duration":52},"status":"passed","steps":[{"name":"Click on Yes, for the injected vaccine only","time":{"start":1761881677534,"stop":1761881677586,"duration":52},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761881677586,"stop":1761881678002,"duration":416},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761881677586,"stop":1761881678002,"duration":416},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Does your child have a bleeding disorder or are they taking anticoagulant therapy?'","time":{"start":1761881678002,"stop":1761881678053,"duration":51},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1761881678002,"stop":1761881678053,"duration":51},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.BLEEDING_DISORDER_FLU: 'Does your child have a bleeding disorder or are they taking anticoagulant therapy?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Has your child had a severe allergic reaction (anaphylaxis) to a previous dose of the injected flu vaccine, or any ingredient of the vaccine?'","time":{"start":1761881678053,"stop":1761881678085,"duration":32},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1761881678053,"stop":1761881678085,"duration":32},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.SEVERE_ALLERGIC_REACTION_INJECTED: 'Has your child had a severe allergic reaction (anaphylaxis) to a previous dose of the injected flu vaccine, or any ingredient of the vaccine?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Does your child have any other medical conditions the immunisation team should be aware of?'","time":{"start":1761881678085,"stop":1761881678118,"duration":33},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1761881678085,"stop":1761881678118,"duration":33},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.MEDICAL_CONDITIONS_FLU: 'Does your child have any other medical conditions the immunisation team should be aware of?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Has your child had a flu vaccination in the last 3 months?'","time":{"start":1761881678118,"stop":1761881678152,"duration":34},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1761881678118,"stop":1761881678152,"duration":34},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.FLU_PREVIOUSLY: 'Has your child had a flu vaccination in the last 3 months?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Does your child need extra support during vaccination sessions?'","time":{"start":1761881678152,"stop":1761881678186,"duration":34},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1761881678152,"stop":1761881678186,"duration":34},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.EXTRA_SUPPORT: 'Does your child need extra support during vaccination sessions?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761881678186,"stop":1761881678612,"duration":426},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761881678186,"stop":1761881678612,"duration":426},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Confirm","time":{"start":1761881678612,"stop":1761881680236,"duration":1624},"status":"passed","steps":[{"name":"Click Confirm","time":{"start":1761881678612,"stop":1761881680236,"duration":1624},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Register tab","time":{"start":1761881680236,"stop":1761881680595,"duration":359},"status":"passed","steps":[{"name":"Click on Register tab","time":{"start":1761881680237,"stop":1761881680595,"duration":358},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Search for 'HUSSAIN, Paul'","time":{"start":1761881680595,"stop":1761881680903,"duration":308},"status":"passed","steps":[{"name":"Search for {1}","time":{"start":1761881680596,"stop":1761881680903,"duration":307},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('HUSSAIN, Paul',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Attending","time":{"start":1761881680903,"stop":1761881682303,"duration":1400},"status":"passed","steps":[{"name":"Click on Attending","time":{"start":1761881680903,"stop":1761881682303,"duration":1400},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Record vaccinations","time":{"start":1761881682303,"stop":1761881682662,"duration":359},"status":"passed","steps":[{"name":"Click on Record vaccinations","time":{"start":1761881682303,"stop":1761881682662,"duration":359},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Search for 'HUSSAIN, Paul'","time":{"start":1761881682662,"stop":1761881682949,"duration":287},"status":"passed","steps":[{"name":"Search for {1}","time":{"start":1761881682662,"stop":1761881682949,"duration":287},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('HUSSAIN, Paul',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'flu' tab","time":{"start":1761881683215,"stop":1761881683232,"duration":17},"status":"passed","steps":[{"name":"Click on {1} tab","time":{"start":1761881683215,"stop":1761881683232,"duration":17},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Programme.FLU: 'flu'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Confirm pre-screening checks are true","time":{"start":1761881683232,"stop":1761881683269,"duration":37},"status":"passed","steps":[{"name":"Confirm pre-screening checks are true","time":{"start":1761881683232,"stop":1761881683269,"duration":37},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Programme.FLU: 'flu'>, <ConsentOption.INJECTION: 'Injection'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Yes","time":{"start":1761881683276,"stop":1761881683284,"duration":8},"status":"passed","steps":[{"name":"Click on Yes","time":{"start":1761881683276,"stop":1761881683284,"duration":8},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(Child(first_name='Paul', last_name='HUSSAIN', nhs_number='9695369057', address=('Flat 87B', 'Trevor ridges', 'East Maria', 'YO77 9PY'), date_of_birth=datetime.date(2015, 2, 24), year_group=6, parents=(Parent(full_name='Mr Ian Bartlett', relationship='Dad', email_address='ricky81@example.com'), Parent(full_name='Diana Richards-Rhodes', relationship='Mum', email_address='rcollins@example.net'))),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Yes","time":{"start":1761881683284,"stop":1761881683322,"duration":38},"status":"passed","steps":[{"name":"Click on Yes","time":{"start":1761881683284,"stop":1761881683322,"duration":38},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<ConsentOption.INJECTION: 'Injection'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select vaccination site 'Left arm (upper position)'","time":{"start":1761881683322,"stop":1761881683370,"duration":48},"status":"passed","steps":[{"name":"Select vaccination site {1}","time":{"start":1761881683322,"stop":1761881683370,"duration":48},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<DeliverySite.LEFT_ARM_UPPER: 'Left arm (upper position)'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Continue","time":{"start":1761881683370,"stop":1761881683804,"duration":434},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1761881683370,"stop":1761881683804,"duration":434},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Choose batch 'ABC123'","time":{"start":1761881683804,"stop":1761881684295,"duration":491},"status":"passed","steps":[{"name":"Choose batch {1}","time":{"start":1761881683804,"stop":1761881684295,"duration":491},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1761881683852,"stop":1761881684294,"duration":442},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1761881683852,"stop":1761881684294,"duration":442},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('ABC123',)"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Confirm","time":{"start":1761881684322,"stop":1761881685853,"duration":1531},"status":"passed","steps":[{"name":"Click on Confirm","time":{"start":1761881684322,"stop":1761881685853,"duration":1531},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":70,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"children_page","time":{"start":1761881672329,"stop":1761881672329,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"verbal_consent_page","time":{"start":1761881672329,"stop":1761881672329,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"reports_vaccinations_page","time":{"start":1761881685874,"stop":1761881685874,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"vaccination_record_page","time":{"start":1761881685874,"stop":1761881685874,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"edit_vaccination_record_page","time":{"start":1761881685874,"stop":1761881685874,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\nTest: Verify reporting values update correctly after vaccination and edit.\nSteps:\n1. Record a flu vaccination for a child and verify initial reporting values.\n2. Refresh reports and check that the cohort and vaccination percentages update.\n3. Edit the child's vaccination record to mark the outcome as refused.\n4. Refresh reports and verify that the reporting values reflect the refusal.\nVerification:\n- After vaccination, report shows 1 more vaccinated and 0 more not vaccinated.\n- After marking as refused, report shows 0 more vaccinated and\n  1 more not vaccinated.\n","status":"failed","statusMessage":"AssertionError: Locator expected to contain text '1children'\nActual value: 2children \nCall log:\n  - Expect \"to_contain_text\" with timeout 5000ms\n  - waiting for get_by_role(\"heading\", name=\"Cohort\", exact=True).locator(\"xpath=following-sibling::*[1]\")\n    3 × locator resolved to <p class=\"nhsuk-card__description\">…</p>\n      - unexpected value \"0children\"\n    6 × locator resolved to <p class=\"nhsuk-card__description\">…</p>\n      - unexpected value \"2children\"","statusTrace":"record_injected_flu = (Child(first_name='Paul', last_name='HUSSAIN', nhs_number='9695369057', address=('Flat 87B', 'Trevor ridges', 'East Ma...ins@example.net'))), datetime.datetime(2025, 10, 31, 3, 34, 45, 873788, tzinfo=zoneinfo.ZoneInfo(key='Europe/London')))\nschools = {'HPV': [School(name='Cambian Bletchley Park School', urn='142322', site=None), School(name='The Stable School', urn='...verley\", urn='118030', site=None), School(name=\"St John's Church of England Primary School\", urn='104920', site=None)]}\nreports_vaccinations_page = <mavis.test.pages.reports.ReportsVaccinationsPage object at 0x7f83d13c87d0>\ndashboard_page = <mavis.test.pages.dashboard.DashboardPage object at 0x7f83d21b4c00>\nchildren_page = <mavis.test.pages.children.ChildrenPage object at 0x7f83d1439fd0>\nvaccination_record_page = <mavis.test.pages.vaccination_record.VaccinationRecordPage object at 0x7f83d115ca70>\nedit_vaccination_record_page = <mavis.test.pages.vaccination_record.EditVaccinationRecordPage object at 0x7f83d12e8b00>\n\n    def test_report_view(\n        record_injected_flu,\n        schools,\n        reports_vaccinations_page,\n        dashboard_page,\n        children_page,\n        vaccination_record_page,\n        edit_vaccination_record_page,\n    ):\n        \"\"\"\n        Test: Verify reporting values update correctly after vaccination and edit.\n        Steps:\n        1. Record a flu vaccination for a child and verify initial reporting values.\n        2. Refresh reports and check that the cohort and vaccination percentages update.\n        3. Edit the child's vaccination record to mark the outcome as refused.\n        4. Refresh reports and verify that the reporting values reflect the refusal.\n        Verification:\n        - After vaccination, report shows 1 more vaccinated and 0 more not vaccinated.\n        - After marking as refused, report shows 0 more vaccinated and\n          1 more not vaccinated.\n        \"\"\"\n    \n        child, _ = record_injected_flu\n        school = schools[Programme.FLU][0]\n    \n        reports_vaccinations_page.navigate()\n        reports_vaccinations_page.check_filter_for_programme(Programme.FLU)\n    \n        vaccinated_count = reports_vaccinations_page.get_children_count(\"Vaccinated\")\n        unvaccinated_count = reports_vaccinations_page.get_children_count(\"Not vaccinated\")\n    \n        (\n            expected_cohort_count,\n            expected_unvaccinated_percentage,\n            expected_vaccinated_percentage,\n        ) = reports_vaccinations_page.get_expected_cohort_and_percentage_strings(\n            unvaccinated_count, vaccinated_count\n        )\n    \n        reports_vaccinations_page.check_cohort_has_n_children(expected_cohort_count)\n        reports_vaccinations_page.check_category_percentage(\n            \"Not vaccinated\", expected_unvaccinated_percentage\n        )\n        reports_vaccinations_page.check_category_percentage(\n            \"Vaccinated\", expected_vaccinated_percentage\n        )\n    \n        reports_vaccinations_page.navigate_and_refresh_reports()\n        reports_vaccinations_page.check_filter_for_programme(Programme.FLU)\n    \n        (\n            expected_cohort_count,\n            expected_unvaccinated_percentage,\n            expected_vaccinated_percentage,\n        ) = reports_vaccinations_page.get_expected_cohort_and_percentage_strings(\n            unvaccinated_count, vaccinated_count + 1\n        )\n    \n>       reports_vaccinations_page.check_cohort_has_n_children(expected_cohort_count)\n\ntests/test_reporting_values.py:141: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mavis.test.pages.reports.ReportsVaccinationsPage object at 0x7f83d13c87d0>\nexpected_value = '1'\n\n    def check_cohort_has_n_children(self, expected_value: int) -> None:\n        cohort_heading = self.page.get_by_role(\"heading\", name=\"Cohort\", exact=True)\n        cohort_value = cohort_heading.locator(\"xpath=following-sibling::*[1]\")\n>       expect(cohort_value).to_contain_text(f\"{expected_value}children\")\nE       AssertionError: Locator expected to contain text '1children'\nE       Actual value: 2children \nE       Call log:\nE         - Expect \"to_contain_text\" with timeout 5000ms\nE         - waiting for get_by_role(\"heading\", name=\"Cohort\", exact=True).locator(\"xpath=following-sibling::*[1]\")\nE           3 × locator resolved to <p class=\"nhsuk-card__description\">…</p>\nE             - unexpected value \"0children\"\nE           6 × locator resolved to <p class=\"nhsuk-card__description\">…</p>\nE             - unexpected value \"2children\"\n\nmavis/test/pages/reports.py:53: AssertionError","steps":[{"name":"Go to Reports page","time":{"start":1761881685875,"stop":1761881687074,"duration":1199},"status":"passed","steps":[{"name":"Go to Reports page","time":{"start":1761881685875,"stop":1761881687074,"duration":1199},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click 'flu'","time":{"start":1761881687074,"stop":1761881687122,"duration":48},"status":"passed","steps":[{"name":"Click {1}","time":{"start":1761881687074,"stop":1761881687122,"duration":48},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Programme.FLU: 'flu'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Navigate to and refresh Reports","time":{"start":1761881687140,"stop":1761881714548,"duration":27408},"status":"passed","steps":[{"name":"Navigate to and refresh Reports","time":{"start":1761881687141,"stop":1761881714548,"duration":27407},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click 'flu'","time":{"start":1761881714549,"stop":1761881714603,"duration":54},"status":"passed","steps":[{"name":"Click {1}","time":{"start":1761881714549,"stop":1761881714603,"duration":54},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Programme.FLU: 'flu'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":8,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"setup_recording_injected_flu::0","time":{"start":1761881719612,"stop":1761881720606,"duration":994},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1761881719612,"stop":1761881719802,"duration":190},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1761881719612,"stop":1761881719802,"duration":190},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761881719802,"stop":1761881720010,"duration":208},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761881719802,"stop":1761881720010,"duration":208},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761881720010,"stop":1761881720258,"duration":248},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761881720011,"stop":1761881720258,"duration":247},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"log_in_as_nurse::0","time":{"start":1761881720608,"stop":1761881721106,"duration":498},"status":"passed","steps":[{"name":"Log out","time":{"start":1761881720608,"stop":1761881721106,"duration":498},"status":"passed","steps":[{"name":"Log out","time":{"start":1761881720608,"stop":1761881721106,"duration":498},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"set_feature_flags::0","time":{"start":1761881721107,"stop":1761881721107,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context::0","time":{"start":1761881721108,"stop":1761881721117,"duration":9},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1761881721117,"stop":1761881721117,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1761881777490,"stop":1761881777490,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1761881777490,"stop":1761881777517,"duration":27},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1761881777518,"stop":1761881777528,"duration":10},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests::0","time":{"start":1761881777530,"stop":1761881781393,"duration":3863},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_reporting_values"},{"name":"host","value":"runnervmwhb2z"},{"name":"thread","value":"3116-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_reporting_values"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":[]},"source":"c9518fb749966bcf.json","parameterValues":[]}