{"uid":"643db5317e4b8451","name":"test_report_view","fullName":"tests.test_reporting_values#test_report_view","historyId":"6bb6b4b22331dc5e0cecdee6058c6a31","time":{"start":1761881628330,"stop":1761881662390,"duration":34060},"description":"\nTest: Verify reporting values update correctly after vaccination and edit.\nSteps:\n1. Record a flu vaccination for a child and verify initial reporting values.\n2. Refresh reports and check that the cohort and vaccination percentages update.\n3. Edit the child's vaccination record to mark the outcome as refused.\n4. Refresh reports and verify that the reporting values reflect the refusal.\nVerification:\n- After vaccination, report shows 1 more vaccinated and 0 more not vaccinated.\n- After marking as refused, report shows 0 more vaccinated and\n  1 more not vaccinated.\n","descriptionHtml":"<p>Test: Verify reporting values update correctly after vaccination and edit.<br />\nSteps:</p>\n<ol>\n<li>Record a flu vaccination for a child and verify initial reporting values.</li>\n<li>Refresh reports and check that the cohort and vaccination percentages update.</li>\n<li>Edit the child's vaccination record to mark the outcome as refused.</li>\n<li>Refresh reports and verify that the reporting values reflect the refusal.<br />\nVerification:</li>\n</ol>\n<ul>\n<li>After vaccination, report shows 1 more vaccinated and 0 more not vaccinated.</li>\n<li>After marking as refused, report shows 0 more vaccinated and<br />\n1 more not vaccinated.</li>\n</ul>\n","status":"failed","statusMessage":"AssertionError: Locator expected to contain text '1.0%'\nActual value: 100.0%1 children \nCall log:\n  - Expect \"to_contain_text\" with timeout 5000ms\n  - waiting for get_by_role(\"heading\", name=\"Vaccinated\", exact=True).locator(\"xpath=following-sibling::*[1]\")\n    9 × locator resolved to <p class=\"nhsuk-card__description\">…</p>\n      - unexpected value \"100.0%1 children\"","statusTrace":"record_injected_flu = (Child(first_name='Gemma', last_name='YOUNG', nhs_number='9674918744', address=('Flat 29d', 'King dale', 'Lake Beth', ...nic@example.com'))), datetime.datetime(2025, 10, 31, 3, 33, 48, 328894, tzinfo=zoneinfo.ZoneInfo(key='Europe/London')))\nschools = {'HPV': [School(name='Cambian Bletchley Park School', urn='142322', site=None), School(name='The Stable School', urn='...verley\", urn='118030', site=None), School(name=\"St John's Church of England Primary School\", urn='104920', site=None)]}\nreports_vaccinations_page = <mavis.test.pages.reports.ReportsVaccinationsPage object at 0x7f83d2c13230>\ndashboard_page = <mavis.test.pages.dashboard.DashboardPage object at 0x7f83d2169b20>\nchildren_page = <mavis.test.pages.children.ChildrenPage object at 0x7f83d1bf4830>\nvaccination_record_page = <mavis.test.pages.vaccination_record.VaccinationRecordPage object at 0x7f83d1a52650>\nedit_vaccination_record_page = <mavis.test.pages.vaccination_record.EditVaccinationRecordPage object at 0x7f83d1a52780>\n\n    def test_report_view(\n        record_injected_flu,\n        schools,\n        reports_vaccinations_page,\n        dashboard_page,\n        children_page,\n        vaccination_record_page,\n        edit_vaccination_record_page,\n    ):\n        \"\"\"\n        Test: Verify reporting values update correctly after vaccination and edit.\n        Steps:\n        1. Record a flu vaccination for a child and verify initial reporting values.\n        2. Refresh reports and check that the cohort and vaccination percentages update.\n        3. Edit the child's vaccination record to mark the outcome as refused.\n        4. Refresh reports and verify that the reporting values reflect the refusal.\n        Verification:\n        - After vaccination, report shows 1 more vaccinated and 0 more not vaccinated.\n        - After marking as refused, report shows 0 more vaccinated and\n          1 more not vaccinated.\n        \"\"\"\n    \n        child, _ = record_injected_flu\n        school = schools[Programme.FLU][0]\n    \n        reports_vaccinations_page.navigate()\n        reports_vaccinations_page.check_filter_for_programme(Programme.FLU)\n    \n        vaccinated_count = reports_vaccinations_page.get_children_count(\"Vaccinated\")\n        unvaccinated_count = reports_vaccinations_page.get_children_count(\"Not vaccinated\")\n    \n        (\n            expected_cohort_count,\n            expected_unvaccinated_percentage,\n            expected_vaccinated_percentage,\n        ) = reports_vaccinations_page.get_expected_cohort_and_percentage_strings(\n            unvaccinated_count, vaccinated_count\n        )\n    \n        reports_vaccinations_page.check_cohort_has_n_children(expected_cohort_count)\n        reports_vaccinations_page.check_category_percentage(\n            \"Not vaccinated\", expected_unvaccinated_percentage\n        )\n        reports_vaccinations_page.check_category_percentage(\n            \"Vaccinated\", expected_vaccinated_percentage\n        )\n    \n        reports_vaccinations_page.navigate_and_refresh_reports()\n        reports_vaccinations_page.check_filter_for_programme(Programme.FLU)\n    \n        (\n            expected_cohort_count,\n            expected_unvaccinated_percentage,\n            expected_vaccinated_percentage,\n        ) = reports_vaccinations_page.get_expected_cohort_and_percentage_strings(\n            unvaccinated_count, vaccinated_count + 1\n        )\n    \n        reports_vaccinations_page.check_cohort_has_n_children(expected_cohort_count)\n        reports_vaccinations_page.check_category_percentage(\n            \"Not vaccinated\", expected_unvaccinated_percentage\n        )\n>       reports_vaccinations_page.check_category_percentage(\n            \"Vaccinated\", expected_vaccinated_percentage\n        )\n\ntests/test_reporting_values.py:145: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mavis.test.pages.reports.ReportsVaccinationsPage object at 0x7f83d2c13230>\ncategory = 'Vaccinated', expected_percentage = '1.0'\n\n    def check_category_percentage(\n        self, category: str, expected_percentage: str\n    ) -> None:\n        category_heading = self.page.get_by_role(\"heading\", name=category, exact=True)\n        category_value = category_heading.locator(\"xpath=following-sibling::*[1]\")\n>       expect(category_value).to_contain_text(f\"{expected_percentage}%\")\nE       AssertionError: Locator expected to contain text '1.0%'\nE       Actual value: 100.0%1 children \nE       Call log:\nE         - Expect \"to_contain_text\" with timeout 5000ms\nE         - waiting for get_by_role(\"heading\", name=\"Vaccinated\", exact=True).locator(\"xpath=following-sibling::*[1]\")\nE           9 × locator resolved to <p class=\"nhsuk-card__description\">…</p>\nE             - unexpected value \"100.0%1 children\"\n\nmavis/test/pages/reports.py:60: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_verify_url","time":{"start":1761880835936,"stop":1761880835936,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1761880835936,"stop":1761880835936,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_session_faker","time":{"start":1761880835936,"stop":1761880835937,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"year_groups","time":{"start":1761880835937,"stop":1761880835937,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1761880835937,"stop":1761880835937,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1761880835937,"stop":1761880835937,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"onboarding","time":{"start":1761880835938,"stop":1761880878576,"duration":42638},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"programmes_enabled","time":{"start":1761880835938,"stop":1761880835938,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"team","time":{"start":1761880878576,"stop":1761880878576,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"nurse","time":{"start":1761880878576,"stop":1761880878576,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests","time":{"start":1761880878576,"stop":1761880878576,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"organisation","time":{"start":1761880878576,"stop":1761880878576,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"schools","time":{"start":1761880878577,"stop":1761880878577,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1761880878577,"stop":1761880878577,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clinics","time":{"start":1761880878577,"stop":1761880878577,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1761880878577,"stop":1761880878878,"duration":301},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1761880878878,"stop":1761880878879,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1761880878878,"stop":1761880878878,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1761880878879,"stop":1761880878879,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1761880878879,"stop":1761880878977,"duration":98},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1761880878879,"stop":1761880878879,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1761880878977,"stop":1761880878977,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1761880878977,"stop":1761880878978,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_credentials","time":{"start":1761880878978,"stop":1761880878978,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_token","time":{"start":1761880878979,"stop":1761880878979,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1761880878979,"stop":1761880878979,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"reset_before_each_module","time":{"start":1761881601487,"stop":1761881604780,"duration":3293},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1761881604780,"stop":1761881604781,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1761881604781,"stop":1761881604786,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1761881604781,"stop":1761881604781,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1761881604781,"stop":1761881604781,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1761881604786,"stop":1761881604810,"duration":24},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_page","time":{"start":1761881604810,"stop":1761881604810,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_as_nurse","time":{"start":1761881604810,"stop":1761881606866,"duration":2056},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1761881604810,"stop":1761881606027,"duration":1217},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1761881604810,"stop":1761881606027,"duration":1217},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Log in as User(username='mellorellie@example.org', password='mellorellie@example.org', role='nurse') and choose team Team(name='Freeman-Morrison est. 1790', workgroup='L233V', careplus_venue_code='L233V', email='mgraham@example.com', phone='+447700900683')","time":{"start":1761881606028,"stop":1761881606866,"duration":838},"status":"passed","steps":[{"name":"Log in as {1} and choose team {2}","time":{"start":1761881606028,"stop":1761881606866,"duration":838},"status":"passed","steps":[{"name":"Log in as User(username='mellorellie@example.org', password='mellorellie@example.org', role='nurse')","time":{"start":1761881606028,"stop":1761881606839,"duration":811},"status":"passed","steps":[{"name":"Log in as {1}","time":{"start":1761881606028,"stop":1761881606839,"duration":811},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='mellorellie@example.org', password='mellorellie@example.org', role='nurse'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='mellorellie@example.org', password='mellorellie@example.org', role='nurse'), Team(name='Freeman-Morrison est. 1790', workgroup='L233V', careplus_venue_code='L233V', email='mgraham@example.com', phone='+447700900683'))"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"set_feature_flags","time":{"start":1761881604810,"stop":1761881604810,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"flipper_page","time":{"start":1761881604810,"stop":1761881604810,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"add_batch_page","time":{"start":1761881606866,"stop":1761881606867,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"dashboard_page","time":{"start":1761881606867,"stop":1761881606867,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"vaccines_page","time":{"start":1761881606867,"stop":1761881606867,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"add_vaccine_batch","time":{"start":1761881606867,"stop":1761881606867,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"children","time":{"start":1761881606867,"stop":1761881606870,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_data","time":{"start":1761881606870,"stop":1761881606871,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"import_records_page","time":{"start":1761881606871,"stop":1761881606871,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"sessions_page","time":{"start":1761881606871,"stop":1761881606872,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_recording_injected_flu","time":{"start":1761881606872,"stop":1761881615367,"duration":8495},"status":"passed","steps":[{"name":"Go to vaccines page","time":{"start":1761881606872,"stop":1761881607081,"duration":209},"status":"passed","steps":[{"name":"Go to vaccines page","time":{"start":1761881606872,"stop":1761881607081,"duration":209},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Add batch for 'Cell-based Trivalent Influenza Vaccine Seqirus'","time":{"start":1761881607081,"stop":1761881607298,"duration":217},"status":"passed","steps":[{"name":"Add batch for {1}","time":{"start":1761881607081,"stop":1761881607298,"duration":217},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Vaccine.SEQUIRUS: 'Cell-based Trivalent Influenza Vaccine Seqirus'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fill in name with 'ABC123'","time":{"start":1761881607298,"stop":1761881607318,"duration":20},"status":"passed","steps":[{"name":"Fill in name with {1}","time":{"start":1761881607298,"stop":1761881607318,"duration":20},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('ABC123',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fill in expiry date with datetime.date(2025, 11, 1)","time":{"start":1761881607318,"stop":1761881607338,"duration":20},"status":"passed","steps":[{"name":"Fill in expiry date with {1}","time":{"start":1761881607318,"stop":1761881607338,"duration":20},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(datetime.date(2025, 11, 1),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Confirm add batch","time":{"start":1761881607338,"stop":1761881607739,"duration":401},"status":"passed","steps":[{"name":"Confirm add batch","time":{"start":1761881607338,"stop":1761881607739,"duration":401},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761881607739,"stop":1761881607966,"duration":227},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761881607739,"stop":1761881607966,"duration":227},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761881607966,"stop":1761881608244,"duration":278},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761881607966,"stop":1761881608244,"duration":278},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'flu' session at School(name=\"St Mary's Church of England Voluntary Controlled Primary School, Beverley\", urn='118030', site=None)","time":{"start":1761881608244,"stop":1761881608860,"duration":616},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1761881608244,"stop":1761881608860,"duration":616},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name=\"St Mary's Church of England Voluntary Controlled Primary School, Beverley\", urn='118030', site=None), <Programme.FLU: 'flu'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Go to Edit session page","time":{"start":1761881608865,"stop":1761881610250,"duration":1385},"status":"passed","steps":[{"name":"Go to Edit session page","time":{"start":1761881608865,"stop":1761881610250,"duration":1385},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Go to Change session dates page","time":{"start":1761881610251,"stop":1761881610473,"duration":222},"status":"passed","steps":[{"name":"Go to Change session dates page","time":{"start":1761881610251,"stop":1761881610473,"duration":222},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fill date fields with '20251031'","time":{"start":1761881610493,"stop":1761881610518,"duration":25},"status":"passed","steps":[{"name":"Fill date fields with {1}","time":{"start":1761881610493,"stop":1761881610518,"duration":25},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('20251031',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Continue","time":{"start":1761881610518,"stop":1761881610958,"duration":440},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1761881610518,"stop":1761881610958,"duration":440},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Save changes","time":{"start":1761881610986,"stop":1761881611607,"duration":621},"status":"passed","steps":[{"name":"Click Save changes","time":{"start":1761881610986,"stop":1761881611607,"duration":621},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Import class lists","time":{"start":1761881611607,"stop":1761881612008,"duration":401},"status":"passed","steps":[{"name":"Click on Import class lists","time":{"start":1761881611607,"stop":1761881612008,"duration":401},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761881612057,"stop":1761881612607,"duration":550},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761881612057,"stop":1761881612607,"duration":550},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Set input file to PosixPath('working/ClassFileMapping.FIXED_CHILD20251031033332.csv')","time":{"start":1761881612621,"stop":1761881612640,"duration":19},"status":"passed","steps":[{"name":"Set input file to {1}","time":{"start":1761881612621,"stop":1761881612640,"duration":19},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(PosixPath('working/ClassFileMapping.FIXED_CHILD20251031033332.csv'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761881613640,"stop":1761881614010,"duration":370},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761881613640,"stop":1761881614010,"duration":370},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"_coverage","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click link with uploaded datetime","time":{"start":1761881614037,"stop":1761881614259,"duration":222},"status":"passed","steps":[{"name":"Click link with uploaded datetime","time":{"start":1761881614037,"stop":1761881614259,"duration":222},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":36,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"verbal_consent_page","time":{"start":1761881615367,"stop":1761881615367,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"children_page","time":{"start":1761881615367,"stop":1761881615367,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"record_injected_flu","time":{"start":1761881615367,"stop":1761881628329,"duration":12962},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761881615368,"stop":1761881615570,"duration":202},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761881615368,"stop":1761881615570,"duration":202},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761881615570,"stop":1761881615817,"duration":247},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761881615570,"stop":1761881615817,"duration":247},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'flu' session at School(name=\"St Mary's Church of England Voluntary Controlled Primary School, Beverley\", urn='118030', site=None)","time":{"start":1761881615817,"stop":1761881616375,"duration":558},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1761881615817,"stop":1761881616375,"duration":558},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name=\"St Mary's Church of England Voluntary Controlled Primary School, Beverley\", urn='118030', site=None), <Programme.FLU: 'flu'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Consent tab","time":{"start":1761881616375,"stop":1761881616710,"duration":335},"status":"passed","steps":[{"name":"Click on Consent tab","time":{"start":1761881616375,"stop":1761881616710,"duration":335},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on child Child(first_name='Gemma', last_name='YOUNG', nhs_number='9674918744', address=('Flat 29d', 'King dale', 'Lake Beth', 'N7 7DB'), date_of_birth=datetime.date(2014, 10, 7), year_group=6, parents=(Parent(full_name='Charlie Smith', relationship='Dad', email_address='nicola15@example.org'), Parent(full_name='Molly Bates-Brown', relationship='Mum', email_address='curtisdominic@example.com')))","time":{"start":1761881617015,"stop":1761881617308,"duration":293},"status":"passed","steps":[{"name":"Click on child {1}","time":{"start":1761881617015,"stop":1761881617308,"duration":293},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(Child(first_name='Gemma', last_name='YOUNG', nhs_number='9674918744', address=('Flat 29d', 'King dale', 'Lake Beth', 'N7 7DB'), date_of_birth=datetime.date(2014, 10, 7), year_group=6, parents=(Parent(full_name='Charlie Smith', relationship='Dad', email_address='nicola15@example.org'), Parent(full_name='Molly Bates-Brown', relationship='Mum', email_address='curtisdominic@example.com'))),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'flu' tab","time":{"start":1761881617308,"stop":1761881617321,"duration":13},"status":"passed","steps":[{"name":"Click on {1} tab","time":{"start":1761881617308,"stop":1761881617321,"duration":13},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Programme.FLU: 'flu'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Record a new consent response","time":{"start":1761881617321,"stop":1761881618925,"duration":1604},"status":"passed","steps":[{"name":"Click on Record a new consent response","time":{"start":1761881617321,"stop":1761881618925,"duration":1604},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'Charlie Smith (Dad)' radio button","time":{"start":1761881618925,"stop":1761881618971,"duration":46},"status":"passed","steps":[{"name":"Click on {1} radio button","time":{"start":1761881618925,"stop":1761881618971,"duration":46},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('Charlie Smith (Dad)',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761881618971,"stop":1761881619417,"duration":446},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761881618971,"stop":1761881619417,"duration":446},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761881619417,"stop":1761881619846,"duration":429},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761881619417,"stop":1761881619846,"duration":429},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select consent method","time":{"start":1761881619846,"stop":1761881619888,"duration":42},"status":"passed","steps":[{"name":"Select consent method","time":{"start":1761881619846,"stop":1761881619888,"duration":42},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<ConsentMethod.IN_PERSON: 'In person'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761881619888,"stop":1761881620316,"duration":428},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761881619888,"stop":1761881620316,"duration":428},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Yes, for the injected vaccine only","time":{"start":1761881620317,"stop":1761881620373,"duration":56},"status":"passed","steps":[{"name":"Click on Yes, for the injected vaccine only","time":{"start":1761881620317,"stop":1761881620373,"duration":56},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761881620373,"stop":1761881620809,"duration":436},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761881620373,"stop":1761881620809,"duration":436},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Does your child have a bleeding disorder or are they taking anticoagulant therapy?'","time":{"start":1761881620809,"stop":1761881620854,"duration":45},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1761881620809,"stop":1761881620854,"duration":45},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.BLEEDING_DISORDER_FLU: 'Does your child have a bleeding disorder or are they taking anticoagulant therapy?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Has your child had a severe allergic reaction (anaphylaxis) to a previous dose of the injected flu vaccine, or any ingredient of the vaccine?'","time":{"start":1761881620854,"stop":1761881620887,"duration":33},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1761881620854,"stop":1761881620887,"duration":33},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.SEVERE_ALLERGIC_REACTION_INJECTED: 'Has your child had a severe allergic reaction (anaphylaxis) to a previous dose of the injected flu vaccine, or any ingredient of the vaccine?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Does your child have any other medical conditions the immunisation team should be aware of?'","time":{"start":1761881620888,"stop":1761881620920,"duration":32},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1761881620888,"stop":1761881620920,"duration":32},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.MEDICAL_CONDITIONS_FLU: 'Does your child have any other medical conditions the immunisation team should be aware of?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Has your child had a flu vaccination in the last 3 months?'","time":{"start":1761881620920,"stop":1761881620954,"duration":34},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1761881620920,"stop":1761881620954,"duration":34},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.FLU_PREVIOUSLY: 'Has your child had a flu vaccination in the last 3 months?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Does your child need extra support during vaccination sessions?'","time":{"start":1761881620954,"stop":1761881620988,"duration":34},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1761881620954,"stop":1761881620988,"duration":34},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.EXTRA_SUPPORT: 'Does your child need extra support during vaccination sessions?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761881620988,"stop":1761881621434,"duration":446},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761881620988,"stop":1761881621434,"duration":446},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Confirm","time":{"start":1761881621434,"stop":1761881622895,"duration":1461},"status":"passed","steps":[{"name":"Click Confirm","time":{"start":1761881621435,"stop":1761881622895,"duration":1460},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Register tab","time":{"start":1761881622895,"stop":1761881623243,"duration":348},"status":"passed","steps":[{"name":"Click on Register tab","time":{"start":1761881622895,"stop":1761881623243,"duration":348},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Search for 'YOUNG, Gemma'","time":{"start":1761881623243,"stop":1761881623501,"duration":258},"status":"passed","steps":[{"name":"Search for {1}","time":{"start":1761881623243,"stop":1761881623501,"duration":258},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('YOUNG, Gemma',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Attending","time":{"start":1761881623501,"stop":1761881624699,"duration":1198},"status":"passed","steps":[{"name":"Click on Attending","time":{"start":1761881623501,"stop":1761881624699,"duration":1198},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Record vaccinations","time":{"start":1761881624699,"stop":1761881625045,"duration":346},"status":"passed","steps":[{"name":"Click on Record vaccinations","time":{"start":1761881624699,"stop":1761881625045,"duration":346},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Search for 'YOUNG, Gemma'","time":{"start":1761881625045,"stop":1761881625309,"duration":264},"status":"passed","steps":[{"name":"Search for {1}","time":{"start":1761881625045,"stop":1761881625309,"duration":264},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('YOUNG, Gemma',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'flu' tab","time":{"start":1761881625587,"stop":1761881625609,"duration":22},"status":"passed","steps":[{"name":"Click on {1} tab","time":{"start":1761881625587,"stop":1761881625609,"duration":22},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Programme.FLU: 'flu'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Confirm pre-screening checks are true","time":{"start":1761881625609,"stop":1761881625671,"duration":62},"status":"passed","steps":[{"name":"Confirm pre-screening checks are true","time":{"start":1761881625609,"stop":1761881625671,"duration":62},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Programme.FLU: 'flu'>, <ConsentOption.INJECTION: 'Injection'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Yes","time":{"start":1761881625678,"stop":1761881625686,"duration":8},"status":"passed","steps":[{"name":"Click on Yes","time":{"start":1761881625678,"stop":1761881625686,"duration":8},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(Child(first_name='Gemma', last_name='YOUNG', nhs_number='9674918744', address=('Flat 29d', 'King dale', 'Lake Beth', 'N7 7DB'), date_of_birth=datetime.date(2014, 10, 7), year_group=6, parents=(Parent(full_name='Charlie Smith', relationship='Dad', email_address='nicola15@example.org'), Parent(full_name='Molly Bates-Brown', relationship='Mum', email_address='curtisdominic@example.com'))),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Yes","time":{"start":1761881625686,"stop":1761881625722,"duration":36},"status":"passed","steps":[{"name":"Click on Yes","time":{"start":1761881625686,"stop":1761881625722,"duration":36},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<ConsentOption.INJECTION: 'Injection'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select vaccination site 'Left arm (upper position)'","time":{"start":1761881625722,"stop":1761881625754,"duration":32},"status":"passed","steps":[{"name":"Select vaccination site {1}","time":{"start":1761881625722,"stop":1761881625754,"duration":32},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<DeliverySite.LEFT_ARM_UPPER: 'Left arm (upper position)'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Continue","time":{"start":1761881625754,"stop":1761881626214,"duration":460},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1761881625754,"stop":1761881626214,"duration":460},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Choose batch 'ABC123'","time":{"start":1761881626214,"stop":1761881626724,"duration":510},"status":"passed","steps":[{"name":"Choose batch {1}","time":{"start":1761881626214,"stop":1761881626724,"duration":510},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1761881626271,"stop":1761881626724,"duration":453},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1761881626271,"stop":1761881626724,"duration":453},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('ABC123',)"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Confirm","time":{"start":1761881626751,"stop":1761881628307,"duration":1556},"status":"passed","steps":[{"name":"Click on Confirm","time":{"start":1761881626751,"stop":1761881628307,"duration":1556},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":70,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"reports_vaccinations_page","time":{"start":1761881628329,"stop":1761881628329,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"vaccination_record_page","time":{"start":1761881628329,"stop":1761881628329,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"edit_vaccination_record_page","time":{"start":1761881628329,"stop":1761881628329,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\nTest: Verify reporting values update correctly after vaccination and edit.\nSteps:\n1. Record a flu vaccination for a child and verify initial reporting values.\n2. Refresh reports and check that the cohort and vaccination percentages update.\n3. Edit the child's vaccination record to mark the outcome as refused.\n4. Refresh reports and verify that the reporting values reflect the refusal.\nVerification:\n- After vaccination, report shows 1 more vaccinated and 0 more not vaccinated.\n- After marking as refused, report shows 0 more vaccinated and\n  1 more not vaccinated.\n","status":"failed","statusMessage":"AssertionError: Locator expected to contain text '1.0%'\nActual value: 100.0%1 children \nCall log:\n  - Expect \"to_contain_text\" with timeout 5000ms\n  - waiting for get_by_role(\"heading\", name=\"Vaccinated\", exact=True).locator(\"xpath=following-sibling::*[1]\")\n    9 × locator resolved to <p class=\"nhsuk-card__description\">…</p>\n      - unexpected value \"100.0%1 children\"","statusTrace":"record_injected_flu = (Child(first_name='Gemma', last_name='YOUNG', nhs_number='9674918744', address=('Flat 29d', 'King dale', 'Lake Beth', ...nic@example.com'))), datetime.datetime(2025, 10, 31, 3, 33, 48, 328894, tzinfo=zoneinfo.ZoneInfo(key='Europe/London')))\nschools = {'HPV': [School(name='Cambian Bletchley Park School', urn='142322', site=None), School(name='The Stable School', urn='...verley\", urn='118030', site=None), School(name=\"St John's Church of England Primary School\", urn='104920', site=None)]}\nreports_vaccinations_page = <mavis.test.pages.reports.ReportsVaccinationsPage object at 0x7f83d2c13230>\ndashboard_page = <mavis.test.pages.dashboard.DashboardPage object at 0x7f83d2169b20>\nchildren_page = <mavis.test.pages.children.ChildrenPage object at 0x7f83d1bf4830>\nvaccination_record_page = <mavis.test.pages.vaccination_record.VaccinationRecordPage object at 0x7f83d1a52650>\nedit_vaccination_record_page = <mavis.test.pages.vaccination_record.EditVaccinationRecordPage object at 0x7f83d1a52780>\n\n    def test_report_view(\n        record_injected_flu,\n        schools,\n        reports_vaccinations_page,\n        dashboard_page,\n        children_page,\n        vaccination_record_page,\n        edit_vaccination_record_page,\n    ):\n        \"\"\"\n        Test: Verify reporting values update correctly after vaccination and edit.\n        Steps:\n        1. Record a flu vaccination for a child and verify initial reporting values.\n        2. Refresh reports and check that the cohort and vaccination percentages update.\n        3. Edit the child's vaccination record to mark the outcome as refused.\n        4. Refresh reports and verify that the reporting values reflect the refusal.\n        Verification:\n        - After vaccination, report shows 1 more vaccinated and 0 more not vaccinated.\n        - After marking as refused, report shows 0 more vaccinated and\n          1 more not vaccinated.\n        \"\"\"\n    \n        child, _ = record_injected_flu\n        school = schools[Programme.FLU][0]\n    \n        reports_vaccinations_page.navigate()\n        reports_vaccinations_page.check_filter_for_programme(Programme.FLU)\n    \n        vaccinated_count = reports_vaccinations_page.get_children_count(\"Vaccinated\")\n        unvaccinated_count = reports_vaccinations_page.get_children_count(\"Not vaccinated\")\n    \n        (\n            expected_cohort_count,\n            expected_unvaccinated_percentage,\n            expected_vaccinated_percentage,\n        ) = reports_vaccinations_page.get_expected_cohort_and_percentage_strings(\n            unvaccinated_count, vaccinated_count\n        )\n    \n        reports_vaccinations_page.check_cohort_has_n_children(expected_cohort_count)\n        reports_vaccinations_page.check_category_percentage(\n            \"Not vaccinated\", expected_unvaccinated_percentage\n        )\n        reports_vaccinations_page.check_category_percentage(\n            \"Vaccinated\", expected_vaccinated_percentage\n        )\n    \n        reports_vaccinations_page.navigate_and_refresh_reports()\n        reports_vaccinations_page.check_filter_for_programme(Programme.FLU)\n    \n        (\n            expected_cohort_count,\n            expected_unvaccinated_percentage,\n            expected_vaccinated_percentage,\n        ) = reports_vaccinations_page.get_expected_cohort_and_percentage_strings(\n            unvaccinated_count, vaccinated_count + 1\n        )\n    \n        reports_vaccinations_page.check_cohort_has_n_children(expected_cohort_count)\n        reports_vaccinations_page.check_category_percentage(\n            \"Not vaccinated\", expected_unvaccinated_percentage\n        )\n>       reports_vaccinations_page.check_category_percentage(\n            \"Vaccinated\", expected_vaccinated_percentage\n        )\n\ntests/test_reporting_values.py:145: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mavis.test.pages.reports.ReportsVaccinationsPage object at 0x7f83d2c13230>\ncategory = 'Vaccinated', expected_percentage = '1.0'\n\n    def check_category_percentage(\n        self, category: str, expected_percentage: str\n    ) -> None:\n        category_heading = self.page.get_by_role(\"heading\", name=category, exact=True)\n        category_value = category_heading.locator(\"xpath=following-sibling::*[1]\")\n>       expect(category_value).to_contain_text(f\"{expected_percentage}%\")\nE       AssertionError: Locator expected to contain text '1.0%'\nE       Actual value: 100.0%1 children \nE       Call log:\nE         - Expect \"to_contain_text\" with timeout 5000ms\nE         - waiting for get_by_role(\"heading\", name=\"Vaccinated\", exact=True).locator(\"xpath=following-sibling::*[1]\")\nE           9 × locator resolved to <p class=\"nhsuk-card__description\">…</p>\nE             - unexpected value \"100.0%1 children\"\n\nmavis/test/pages/reports.py:60: AssertionError","steps":[{"name":"Go to Reports page","time":{"start":1761881628330,"stop":1761881629668,"duration":1338},"status":"passed","steps":[{"name":"Go to Reports page","time":{"start":1761881628330,"stop":1761881629668,"duration":1338},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click 'flu'","time":{"start":1761881629668,"stop":1761881629725,"duration":57},"status":"passed","steps":[{"name":"Click {1}","time":{"start":1761881629668,"stop":1761881629725,"duration":57},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Programme.FLU: 'flu'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Navigate to and refresh Reports","time":{"start":1761881629746,"stop":1761881656964,"duration":27218},"status":"passed","steps":[{"name":"Navigate to and refresh Reports","time":{"start":1761881629746,"stop":1761881656964,"duration":27218},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click 'flu'","time":{"start":1761881656964,"stop":1761881657021,"duration":57},"status":"passed","steps":[{"name":"Click {1}","time":{"start":1761881656964,"stop":1761881657021,"duration":57},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Programme.FLU: 'flu'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":8,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"setup_recording_injected_flu::0","time":{"start":1761881662396,"stop":1761881663557,"duration":1161},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1761881662397,"stop":1761881662689,"duration":292},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1761881662397,"stop":1761881662689,"duration":292},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761881662689,"stop":1761881662906,"duration":217},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761881662689,"stop":1761881662906,"duration":217},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761881662906,"stop":1761881663159,"duration":253},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761881662906,"stop":1761881663159,"duration":253},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"log_in_as_nurse::0","time":{"start":1761881663559,"stop":1761881664073,"duration":514},"status":"passed","steps":[{"name":"Log out","time":{"start":1761881663559,"stop":1761881664073,"duration":514},"status":"passed","steps":[{"name":"Log out","time":{"start":1761881663559,"stop":1761881664073,"duration":514},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"set_feature_flags::0","time":{"start":1761881664074,"stop":1761881664074,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context::0","time":{"start":1761881664075,"stop":1761881664084,"duration":9},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1761881664084,"stop":1761881664084,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1761881777490,"stop":1761881777490,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1761881777490,"stop":1761881777517,"duration":27},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1761881777518,"stop":1761881777528,"duration":10},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests::0","time":{"start":1761881777530,"stop":1761881781393,"duration":3863},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_reporting_values"},{"name":"host","value":"runnervmwhb2z"},{"name":"thread","value":"3116-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_reporting_values"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":[]},"source":"643db5317e4b8451.json","parameterValues":[]}