{"uid":"9bcc3739c077a954","name":"test_editing_session_programmes","fullName":"tests.test_sessions#test_editing_session_programmes","historyId":"12685cf04bc7a6371c53a3e8e694486b","time":{"start":1761755954403,"stop":1761755962276,"duration":7873},"description":"\nTest: Edit the programmes of an existing session and verify changes.\nSteps:\n1. Open a session with a fixed child.\n2. Edit the session to change its programmes.\n3. Save changes and verify the updated programmes are reflected.\n4. Verify the Flu tab appears for a child in the session.\nVerification:\n- Session programmes are updated correctly without errors.\n","descriptionHtml":"<p>Test: Edit the programmes of an existing session and verify changes.<br />\nSteps:</p>\n<ol>\n<li>Open a session with a fixed child.</li>\n<li>Edit the session to change its programmes.</li>\n<li>Save changes and verify the updated programmes are reflected.</li>\n<li>Verify the Flu tab appears for a child in the session.<br />\nVerification:</li>\n</ol>\n<ul>\n<li>Session programmes are updated correctly without errors.</li>\n</ul>\n","status":"failed","statusMessage":"AssertionError: Locator expected to be visible\nActual value: <element(s) not found> \nCall log:\n  - Expect \"to_be_visible\" with timeout 5000ms\n  - waiting for get_by_role(\"heading\", name=\"flu\")","statusTrace":"setup_fixed_child = None\nsessions_page = <mavis.test.pages.sessions.SessionsPage object at 0x7f2549e69be0>\nchildren = {'HPV': [Child(first_name='Natasha', last_name='ABBOTT', nhs_number='9036659183', address=('Studio 16o', 'Richards hav...bie54@example.org'), Parent(full_name='Molly Wells', relationship='Mum', email_address='vanessamurphy@example.net')))]}\n\n    def test_editing_session_programmes(setup_fixed_child, sessions_page, children):\n        \"\"\"\n        Test: Edit the programmes of an existing session and verify changes.\n        Steps:\n        1. Open a session with a fixed child.\n        2. Edit the session to change its programmes.\n        3. Save changes and verify the updated programmes are reflected.\n        4. Verify the Flu tab appears for a child in the session.\n        Verification:\n        - Session programmes are updated correctly without errors.\n        \"\"\"\n        child = children[Programme.HPV][0]\n    \n        sessions_page.click_edit_session()\n        sessions_page.click_change_programmes()\n        sessions_page.add_programme(Programme.FLU)\n        sessions_page.click_continue_button()\n        sessions_page.expect_details(\"Programmes\", \"Flu HPV\")\n        sessions_page.click_save_changes()\n        sessions_page.page.pause()\n>       sessions_page.expect_session_to_have_programmes([Programme.FLU, Programme.HPV])\n\ntests/test_sessions.py:397: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mavis.test.pages.sessions.SessionsPage object at 0x7f2549e69be0>\nprogrammes = [<Programme.FLU: 'flu'>, <Programme.HPV: 'HPV'>]\n\n    def expect_session_to_have_programmes(self, programmes: list[Programme]) -> None:\n        for programme in programmes:\n>           expect(self.page.get_by_role(\"heading\", name=programme)).to_be_visible()\nE           AssertionError: Locator expected to be visible\nE           Actual value: <element(s) not found> \nE           Call log:\nE             - Expect \"to_be_visible\" with timeout 5000ms\nE             - waiting for get_by_role(\"heading\", name=\"flu\")\n\nmavis/test/pages/sessions.py:421: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"base_url","time":{"start":1761755379957,"stop":1761755379957,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1761755379958,"stop":1761755379958,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_session_faker","time":{"start":1761755379958,"stop":1761755379959,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1761755379959,"stop":1761755379959,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"programmes_enabled","time":{"start":1761755379959,"stop":1761755379959,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1761755379959,"stop":1761755379959,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"year_groups","time":{"start":1761755379959,"stop":1761755379959,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"onboarding","time":{"start":1761755379959,"stop":1761755394099,"duration":14140},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"team","time":{"start":1761755394099,"stop":1761755394099,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests","time":{"start":1761755394099,"stop":1761755394099,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1761755394100,"stop":1761755394100,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"nurse","time":{"start":1761755394100,"stop":1761755394100,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1761755394100,"stop":1761755394398,"duration":298},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1761755394398,"stop":1761755394398,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1761755394398,"stop":1761755394398,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1761755394399,"stop":1761755395700,"duration":1301},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1761755394399,"stop":1761755394399,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1761755394399,"stop":1761755394399,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1761755395700,"stop":1761755395700,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_token","time":{"start":1761755395701,"stop":1761755395701,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1761755395701,"stop":1761755395701,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_credentials","time":{"start":1761755395701,"stop":1761755395701,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1761755395701,"stop":1761755395701,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clinics","time":{"start":1761755575276,"stop":1761755575276,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"schools","time":{"start":1761755575276,"stop":1761755575276,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"organisation","time":{"start":1761755575276,"stop":1761755575276,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"reset_before_each_module","time":{"start":1761755575276,"stop":1761755576562,"duration":1286},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1761755942778,"stop":1761755942778,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1761755942778,"stop":1761755942779,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1761755942778,"stop":1761755942778,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1761755942779,"stop":1761755942803,"duration":24},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1761755942803,"stop":1761755943074,"duration":271},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_feature_flags","time":{"start":1761755943075,"stop":1761755943075,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_page","time":{"start":1761755943075,"stop":1761755943075,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_as_nurse","time":{"start":1761755943075,"stop":1761755946241,"duration":3166},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1761755943075,"stop":1761755944741,"duration":1666},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1761755943075,"stop":1761755944741,"duration":1666},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Log in as User(username='powellkenneth@example.com', password='powellkenneth@example.com', role='nurse') and choose team Team(name='Murray, Todd and Lloyd est. 1684', workgroup='X816O', careplus_venue_code='X816O', email='warnerlee@example.com', phone='+44(0)7700 900 724')","time":{"start":1761755944742,"stop":1761755946241,"duration":1499},"status":"passed","steps":[{"name":"Log in as {1} and choose team {2}","time":{"start":1761755944742,"stop":1761755946241,"duration":1499},"status":"passed","steps":[{"name":"Log in as User(username='powellkenneth@example.com', password='powellkenneth@example.com', role='nurse')","time":{"start":1761755944742,"stop":1761755946193,"duration":1451},"status":"passed","steps":[{"name":"Log in as {1}","time":{"start":1761755944742,"stop":1761755946193,"duration":1451},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='powellkenneth@example.com', password='powellkenneth@example.com', role='nurse'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='powellkenneth@example.com', password='powellkenneth@example.com', role='nurse'), Team(name='Murray, Todd and Lloyd est. 1684', workgroup='X816O', careplus_venue_code='X816O', email='warnerlee@example.com', phone='+44(0)7700 900 724'))"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"flipper_page","time":{"start":1761755943075,"stop":1761755943075,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_tests","time":{"start":1761755946241,"stop":1761755946676,"duration":435},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761755946241,"stop":1761755946676,"duration":435},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761755946241,"stop":1761755946676,"duration":435},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"dashboard_page","time":{"start":1761755946241,"stop":1761755946241,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"children","time":{"start":1761755946676,"stop":1761755946682,"duration":6},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_data","time":{"start":1761755946682,"stop":1761755946684,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"import_records_page","time":{"start":1761755946684,"stop":1761755946685,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"sessions_page","time":{"start":1761755946684,"stop":1761755946684,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_session_with_file_upload","time":{"start":1761755946685,"stop":1761755946685,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_fixed_child","time":{"start":1761755946685,"stop":1761755954402,"duration":7717},"status":"passed","steps":[{"name":"Click on 'HPV' session at School(name='The Magna Carta School', urn='137116', site=None)","time":{"start":1761755946685,"stop":1761755947889,"duration":1204},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1761755946685,"stop":1761755947889,"duration":1204},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='The Magna Carta School', urn='137116', site=None), <Programme.HPV: 'HPV'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Import class lists","time":{"start":1761755947899,"stop":1761755948325,"duration":426},"status":"passed","steps":[{"name":"Click on Import class lists","time":{"start":1761755947899,"stop":1761755948325,"duration":426},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761755948479,"stop":1761755949375,"duration":896},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761755948479,"stop":1761755949375,"duration":896},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Set input file to PosixPath('working/ClassFileMapping.FIXED_CHILD20251029163909.csv')","time":{"start":1761755949387,"stop":1761755949450,"duration":63},"status":"passed","steps":[{"name":"Set input file to {1}","time":{"start":1761755949387,"stop":1761755949450,"duration":63},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(PosixPath('working/ClassFileMapping.FIXED_CHILD20251029163909.csv'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761755950450,"stop":1761755951220,"duration":770},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761755950450,"stop":1761755951220,"duration":770},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"_coverage","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click link with uploaded datetime","time":{"start":1761755951418,"stop":1761755951686,"duration":268},"status":"passed","steps":[{"name":"Click link with uploaded datetime","time":{"start":1761755951418,"stop":1761755951685,"duration":267},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761755952865,"stop":1761755953126,"duration":261},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761755952865,"stop":1761755953126,"duration":261},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761755953126,"stop":1761755953426,"duration":300},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761755953126,"stop":1761755953426,"duration":300},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'HPV' session at School(name='The Magna Carta School', urn='137116', site=None)","time":{"start":1761755953426,"stop":1761755954402,"duration":976},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1761755953426,"stop":1761755954402,"duration":976},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='The Magna Carta School', urn='137116', site=None), <Programme.HPV: 'HPV'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":18,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"testStage":{"description":"\nTest: Edit the programmes of an existing session and verify changes.\nSteps:\n1. Open a session with a fixed child.\n2. Edit the session to change its programmes.\n3. Save changes and verify the updated programmes are reflected.\n4. Verify the Flu tab appears for a child in the session.\nVerification:\n- Session programmes are updated correctly without errors.\n","status":"failed","statusMessage":"AssertionError: Locator expected to be visible\nActual value: <element(s) not found> \nCall log:\n  - Expect \"to_be_visible\" with timeout 5000ms\n  - waiting for get_by_role(\"heading\", name=\"flu\")","statusTrace":"setup_fixed_child = None\nsessions_page = <mavis.test.pages.sessions.SessionsPage object at 0x7f2549e69be0>\nchildren = {'HPV': [Child(first_name='Natasha', last_name='ABBOTT', nhs_number='9036659183', address=('Studio 16o', 'Richards hav...bie54@example.org'), Parent(full_name='Molly Wells', relationship='Mum', email_address='vanessamurphy@example.net')))]}\n\n    def test_editing_session_programmes(setup_fixed_child, sessions_page, children):\n        \"\"\"\n        Test: Edit the programmes of an existing session and verify changes.\n        Steps:\n        1. Open a session with a fixed child.\n        2. Edit the session to change its programmes.\n        3. Save changes and verify the updated programmes are reflected.\n        4. Verify the Flu tab appears for a child in the session.\n        Verification:\n        - Session programmes are updated correctly without errors.\n        \"\"\"\n        child = children[Programme.HPV][0]\n    \n        sessions_page.click_edit_session()\n        sessions_page.click_change_programmes()\n        sessions_page.add_programme(Programme.FLU)\n        sessions_page.click_continue_button()\n        sessions_page.expect_details(\"Programmes\", \"Flu HPV\")\n        sessions_page.click_save_changes()\n        sessions_page.page.pause()\n>       sessions_page.expect_session_to_have_programmes([Programme.FLU, Programme.HPV])\n\ntests/test_sessions.py:397: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mavis.test.pages.sessions.SessionsPage object at 0x7f2549e69be0>\nprogrammes = [<Programme.FLU: 'flu'>, <Programme.HPV: 'HPV'>]\n\n    def expect_session_to_have_programmes(self, programmes: list[Programme]) -> None:\n        for programme in programmes:\n>           expect(self.page.get_by_role(\"heading\", name=programme)).to_be_visible()\nE           AssertionError: Locator expected to be visible\nE           Actual value: <element(s) not found> \nE           Call log:\nE             - Expect \"to_be_visible\" with timeout 5000ms\nE             - waiting for get_by_role(\"heading\", name=\"flu\")\n\nmavis/test/pages/sessions.py:421: AssertionError","steps":[{"name":"Click on Edit session","time":{"start":1761755954403,"stop":1761755954965,"duration":562},"status":"passed","steps":[{"name":"Click on Edit session","time":{"start":1761755954403,"stop":1761755954965,"duration":562},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Change programmes","time":{"start":1761755954965,"stop":1761755955257,"duration":292},"status":"passed","steps":[{"name":"Click on Change programmes","time":{"start":1761755954965,"stop":1761755955257,"duration":292},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Continue","time":{"start":1761755955362,"stop":1761755956102,"duration":740},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1761755955362,"stop":1761755956102,"duration":740},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Save changes","time":{"start":1761755956172,"stop":1761755957267,"duration":1095},"status":"passed","steps":[{"name":"Click Save changes","time":{"start":1761755956172,"stop":1761755957267,"duration":1095},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":8,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"setup_fixed_child::0","time":{"start":1761755962305,"stop":1761755963825,"duration":1520},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1761755962305,"stop":1761755962642,"duration":337},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1761755962305,"stop":1761755962642,"duration":337},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761755962642,"stop":1761755962866,"duration":224},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761755962643,"stop":1761755962866,"duration":223},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761755962866,"stop":1761755963191,"duration":325},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761755962866,"stop":1761755963191,"duration":325},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"log_in_as_nurse::0","time":{"start":1761755963828,"stop":1761755964856,"duration":1028},"status":"passed","steps":[{"name":"Log out","time":{"start":1761755963828,"stop":1761755964856,"duration":1028},"status":"passed","steps":[{"name":"Log out","time":{"start":1761755963828,"stop":1761755964856,"duration":1028},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"set_feature_flags::0","time":{"start":1761755964857,"stop":1761755964857,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context::0","time":{"start":1761755964859,"stop":1761755964876,"duration":17},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1761755964876,"stop":1761755964876,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1761756286316,"stop":1761756286316,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1761756286317,"stop":1761756286425,"duration":108},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1761756286427,"stop":1761756286437,"duration":10},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests::0","time":{"start":1761756286438,"stop":1761756288185,"duration":1747},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"sessions"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_sessions"},{"name":"host","value":"runnervmwhb2z"},{"name":"thread","value":"5987-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_sessions"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["sessions"]},"source":"9bcc3739c077a954.json","parameterValues":[]}