{"uid":"2ae4ad2767c65bc","name":"test_editing_session_programmes","fullName":"tests.test_sessions#test_editing_session_programmes","historyId":"12685cf04bc7a6371c53a3e8e694486b","time":{"start":1761751919741,"stop":1761751927432,"duration":7691},"description":"\nTest: Edit the programmes of an existing session and verify changes.\nSteps:\n1. Open a session with a fixed child.\n2. Edit the session to change its programmes.\n3. Save changes and verify the updated programmes are reflected.\n4. Verify the Flu tab appears for a child in the session.\nVerification:\n- Session programmes are updated correctly without errors.\n","descriptionHtml":"<p>Test: Edit the programmes of an existing session and verify changes.<br />\nSteps:</p>\n<ol>\n<li>Open a session with a fixed child.</li>\n<li>Edit the session to change its programmes.</li>\n<li>Save changes and verify the updated programmes are reflected.</li>\n<li>Verify the Flu tab appears for a child in the session.<br />\nVerification:</li>\n</ol>\n<ul>\n<li>Session programmes are updated correctly without errors.</li>\n</ul>\n","status":"failed","statusMessage":"AssertionError: Locator expected to be visible\nActual value: <element(s) not found> \nCall log:\n  - Expect \"to_be_visible\" with timeout 5000ms\n  - waiting for get_by_role(\"heading\", name=\"flu\")","statusTrace":"setup_fixed_child = None\nsessions_page = <mavis.test.pages.sessions.SessionsPage object at 0x7f8b8e690830>\nchildren = {'HPV': [Child(first_name='Teresa', last_name='POWELL', nhs_number='9491370235', address=('Flat 0', 'Hunt fall', 'Osbo...rt@example.org'), Parent(full_name='Caroline Smith', relationship='Mum', email_address='claytonangela@example.com')))]}\n\n    def test_editing_session_programmes(setup_fixed_child, sessions_page, children):\n        \"\"\"\n        Test: Edit the programmes of an existing session and verify changes.\n        Steps:\n        1. Open a session with a fixed child.\n        2. Edit the session to change its programmes.\n        3. Save changes and verify the updated programmes are reflected.\n        4. Verify the Flu tab appears for a child in the session.\n        Verification:\n        - Session programmes are updated correctly without errors.\n        \"\"\"\n        child = children[Programme.HPV][0]\n    \n        sessions_page.click_edit_session()\n        sessions_page.click_change_programmes()\n        sessions_page.add_programme(Programme.FLU)\n        sessions_page.click_continue_button()\n        sessions_page.expect_details(\"Programmes\", \"Flu HPV\")\n        sessions_page.click_save_changes()\n        sessions_page.page.pause()\n>       sessions_page.expect_session_to_have_programmes([Programme.FLU, Programme.HPV])\n\ntests/test_sessions.py:398: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mavis.test.pages.sessions.SessionsPage object at 0x7f8b8e690830>\nprogrammes = [<Programme.FLU: 'flu'>, <Programme.HPV: 'HPV'>]\n\n    def expect_session_to_have_programmes(self, programmes: list[Programme]) -> None:\n        for programme in programmes:\n>           expect(self.page.get_by_role(\"heading\", name=programme)).to_be_visible()\nE           AssertionError: Locator expected to be visible\nE           Actual value: <element(s) not found> \nE           Call log:\nE             - Expect \"to_be_visible\" with timeout 5000ms\nE             - waiting for get_by_role(\"heading\", name=\"flu\")\n\nmavis/test/pages/sessions.py:421: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":2,"retriesStatusChange":false,"beforeStages":[{"name":"_verify_url","time":{"start":1761750341119,"stop":1761750341119,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1761750341119,"stop":1761750341119,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_session_faker","time":{"start":1761750341120,"stop":1761750341121,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"year_groups","time":{"start":1761750341121,"stop":1761750341121,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1761750341121,"stop":1761750341121,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"programmes_enabled","time":{"start":1761750341121,"stop":1761750341121,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1761750341121,"stop":1761750341121,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"onboarding","time":{"start":1761750341121,"stop":1761750356884,"duration":15763},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"team","time":{"start":1761750356884,"stop":1761750356884,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests","time":{"start":1761750356884,"stop":1761750356884,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1761750356885,"stop":1761750356885,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"nurse","time":{"start":1761750356885,"stop":1761750356885,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1761750356885,"stop":1761750357182,"duration":297},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1761750357183,"stop":1761750357183,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1761750357183,"stop":1761750357183,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1761750357183,"stop":1761750357278,"duration":95},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1761750357183,"stop":1761750357183,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1761750357183,"stop":1761750357183,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1761750357278,"stop":1761750357279,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1761750357279,"stop":1761750357280,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_credentials","time":{"start":1761750357280,"stop":1761750357280,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_token","time":{"start":1761750357280,"stop":1761750357280,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1761750357280,"stop":1761750357280,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"reset_before_each_module","time":{"start":1761750491184,"stop":1761750493177,"duration":1993},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"schools","time":{"start":1761750491184,"stop":1761750491184,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"organisation","time":{"start":1761750491184,"stop":1761750491184,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clinics","time":{"start":1761750491184,"stop":1761750491184,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1761751910675,"stop":1761751910676,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1761751910676,"stop":1761751910682,"duration":6},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1761751910676,"stop":1761751910676,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1761751910676,"stop":1761751910676,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1761751910682,"stop":1761751910709,"duration":27},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_as_nurse","time":{"start":1761751910709,"stop":1761751913128,"duration":2419},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1761751910710,"stop":1761751912227,"duration":1517},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1761751910710,"stop":1761751912227,"duration":1517},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Log in as User(username='ejohnson@example.com', password='ejohnson@example.com', role='nurse') and choose team Team(name='Payne Inc est. 1983', workgroup='E907A', careplus_venue_code='E907A', email='william96@example.org', phone='+44(0)7700 900559')","time":{"start":1761751912227,"stop":1761751913128,"duration":901},"status":"passed","steps":[{"name":"Log in as {1} and choose team {2}","time":{"start":1761751912227,"stop":1761751913128,"duration":901},"status":"passed","steps":[{"name":"Log in as User(username='ejohnson@example.com', password='ejohnson@example.com', role='nurse')","time":{"start":1761751912227,"stop":1761751913101,"duration":874},"status":"passed","steps":[{"name":"Log in as {1}","time":{"start":1761751912227,"stop":1761751913101,"duration":874},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='ejohnson@example.com', password='ejohnson@example.com', role='nurse'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='ejohnson@example.com', password='ejohnson@example.com', role='nurse'), Team(name='Payne Inc est. 1983', workgroup='E907A', careplus_venue_code='E907A', email='william96@example.org', phone='+44(0)7700 900559'))"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"log_in_page","time":{"start":1761751910709,"stop":1761751910709,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_feature_flags","time":{"start":1761751910709,"stop":1761751910709,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"flipper_page","time":{"start":1761751910709,"stop":1761751910709,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_tests","time":{"start":1761751913128,"stop":1761751913413,"duration":285},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761751913128,"stop":1761751913413,"duration":285},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761751913128,"stop":1761751913413,"duration":285},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"dashboard_page","time":{"start":1761751913128,"stop":1761751913128,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"children","time":{"start":1761751913413,"stop":1761751913418,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_data","time":{"start":1761751913418,"stop":1761751913419,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"sessions_page","time":{"start":1761751913419,"stop":1761751913419,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"import_records_page","time":{"start":1761751913419,"stop":1761751913420,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_fixed_child","time":{"start":1761751913420,"stop":1761751919740,"duration":6320},"status":"passed","steps":[{"name":"Click on 'HPV' session at School(name='Gillingham School', urn='113882', site=None)","time":{"start":1761751913420,"stop":1761751914201,"duration":781},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1761751913420,"stop":1761751914201,"duration":781},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='Gillingham School', urn='113882', site=None), <Programme.HPV: 'HPV'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Import class lists","time":{"start":1761751914206,"stop":1761751914683,"duration":477},"status":"passed","steps":[{"name":"Click on Import class lists","time":{"start":1761751914206,"stop":1761751914683,"duration":477},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761751914738,"stop":1761751915417,"duration":679},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761751914738,"stop":1761751915417,"duration":679},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Set input file to PosixPath('working/ClassFileMapping.FIXED_CHILD20251029153155.csv')","time":{"start":1761751915427,"stop":1761751915446,"duration":19},"status":"passed","steps":[{"name":"Set input file to {1}","time":{"start":1761751915427,"stop":1761751915446,"duration":19},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(PosixPath('working/ClassFileMapping.FIXED_CHILD20251029153155.csv'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761751916447,"stop":1761751916957,"duration":510},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761751916447,"stop":1761751916957,"duration":510},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"_coverage","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click link with uploaded datetime","time":{"start":1761751917005,"stop":1761751917308,"duration":303},"status":"passed","steps":[{"name":"Click link with uploaded datetime","time":{"start":1761751917005,"stop":1761751917308,"duration":303},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761751918498,"stop":1761751918752,"duration":254},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761751918498,"stop":1761751918752,"duration":254},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761751918752,"stop":1761751919028,"duration":276},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761751918752,"stop":1761751919028,"duration":276},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'HPV' session at School(name='Gillingham School', urn='113882', site=None)","time":{"start":1761751919028,"stop":1761751919740,"duration":712},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1761751919028,"stop":1761751919740,"duration":712},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='Gillingham School', urn='113882', site=None), <Programme.HPV: 'HPV'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":18,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"setup_session_with_file_upload","time":{"start":1761751913420,"stop":1761751913420,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\nTest: Edit the programmes of an existing session and verify changes.\nSteps:\n1. Open a session with a fixed child.\n2. Edit the session to change its programmes.\n3. Save changes and verify the updated programmes are reflected.\n4. Verify the Flu tab appears for a child in the session.\nVerification:\n- Session programmes are updated correctly without errors.\n","status":"failed","statusMessage":"AssertionError: Locator expected to be visible\nActual value: <element(s) not found> \nCall log:\n  - Expect \"to_be_visible\" with timeout 5000ms\n  - waiting for get_by_role(\"heading\", name=\"flu\")","statusTrace":"setup_fixed_child = None\nsessions_page = <mavis.test.pages.sessions.SessionsPage object at 0x7f8b8e690830>\nchildren = {'HPV': [Child(first_name='Teresa', last_name='POWELL', nhs_number='9491370235', address=('Flat 0', 'Hunt fall', 'Osbo...rt@example.org'), Parent(full_name='Caroline Smith', relationship='Mum', email_address='claytonangela@example.com')))]}\n\n    def test_editing_session_programmes(setup_fixed_child, sessions_page, children):\n        \"\"\"\n        Test: Edit the programmes of an existing session and verify changes.\n        Steps:\n        1. Open a session with a fixed child.\n        2. Edit the session to change its programmes.\n        3. Save changes and verify the updated programmes are reflected.\n        4. Verify the Flu tab appears for a child in the session.\n        Verification:\n        - Session programmes are updated correctly without errors.\n        \"\"\"\n        child = children[Programme.HPV][0]\n    \n        sessions_page.click_edit_session()\n        sessions_page.click_change_programmes()\n        sessions_page.add_programme(Programme.FLU)\n        sessions_page.click_continue_button()\n        sessions_page.expect_details(\"Programmes\", \"Flu HPV\")\n        sessions_page.click_save_changes()\n        sessions_page.page.pause()\n>       sessions_page.expect_session_to_have_programmes([Programme.FLU, Programme.HPV])\n\ntests/test_sessions.py:398: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mavis.test.pages.sessions.SessionsPage object at 0x7f8b8e690830>\nprogrammes = [<Programme.FLU: 'flu'>, <Programme.HPV: 'HPV'>]\n\n    def expect_session_to_have_programmes(self, programmes: list[Programme]) -> None:\n        for programme in programmes:\n>           expect(self.page.get_by_role(\"heading\", name=programme)).to_be_visible()\nE           AssertionError: Locator expected to be visible\nE           Actual value: <element(s) not found> \nE           Call log:\nE             - Expect \"to_be_visible\" with timeout 5000ms\nE             - waiting for get_by_role(\"heading\", name=\"flu\")\n\nmavis/test/pages/sessions.py:421: AssertionError","steps":[{"name":"Click on Edit session","time":{"start":1761751919741,"stop":1761751920201,"duration":460},"status":"passed","steps":[{"name":"Click on Edit session","time":{"start":1761751919741,"stop":1761751920201,"duration":460},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Change programmes","time":{"start":1761751920201,"stop":1761751920595,"duration":394},"status":"passed","steps":[{"name":"Click on Change programmes","time":{"start":1761751920201,"stop":1761751920595,"duration":394},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Continue","time":{"start":1761751920614,"stop":1761751921192,"duration":578},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1761751920614,"stop":1761751921192,"duration":578},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Save changes","time":{"start":1761751921214,"stop":1761751922424,"duration":1210},"status":"passed","steps":[{"name":"Click Save changes","time":{"start":1761751921214,"stop":1761751922424,"duration":1210},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":8,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"setup_fixed_child::0","time":{"start":1761751927447,"stop":1761751928641,"duration":1194},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1761751927447,"stop":1761751927672,"duration":225},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1761751927447,"stop":1761751927671,"duration":224},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761751927672,"stop":1761751927916,"duration":244},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761751927672,"stop":1761751927916,"duration":244},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761751927916,"stop":1761751928225,"duration":309},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761751927916,"stop":1761751928225,"duration":309},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"log_in_as_nurse::0","time":{"start":1761751928644,"stop":1761751929293,"duration":649},"status":"passed","steps":[{"name":"Log out","time":{"start":1761751928644,"stop":1761751929293,"duration":649},"status":"passed","steps":[{"name":"Log out","time":{"start":1761751928644,"stop":1761751929293,"duration":649},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"set_feature_flags::0","time":{"start":1761751929294,"stop":1761751929294,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context::0","time":{"start":1761751929295,"stop":1761751929303,"duration":8},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1761751929304,"stop":1761751929304,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1761752276158,"stop":1761752276158,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1761752276159,"stop":1761752276229,"duration":70},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1761752276231,"stop":1761752276239,"duration":8},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests::0","time":{"start":1761752276240,"stop":1761752280152,"duration":3912},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"sessions"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_sessions"},{"name":"host","value":"runnervmwhb2z"},{"name":"thread","value":"3102-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_sessions"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"ecdb0e9401189d01","status":"failed","statusDetails":"AssertionError: Locator expected to be visible\nActual value: <element(s) not found> \nCall log:\n  - Expect \"to_be_visible\" with timeout 5000ms\n  - waiting for get_by_role(\"heading\", name=\"flu\")","time":{"start":1761751901648,"stop":1761751908754,"duration":7106}},{"uid":"ac280888c518972f","status":"failed","statusDetails":"AssertionError: Locator expected to be visible\nActual value: <element(s) not found> \nCall log:\n  - Expect \"to_be_visible\" with timeout 5000ms\n  - waiting for get_by_role(\"heading\", name=\"flu\")","time":{"start":1761751882901,"stop":1761751890069,"duration":7168}}],"categories":[{"name":"Product defects","matchedStatuses":[]}],"tags":["sessions"]},"source":"2ae4ad2767c65bc.json","parameterValues":[]}