{"uid":"66bcdb9048447fd0","name":"test_verify_excel_export_and_clinic_invitation","fullName":"tests.test_sessions#test_verify_excel_export_and_clinic_invitation","historyId":"d1cc67070ebd1ecc136e54c9b1745f1c","time":{"start":1759216604232,"stop":1759216651667,"duration":47435},"description":"\nTest: Export session data to Excel and send clinic invitations,\n   then verify vaccination record.\nSteps:\n1. Schedule session, import class list, and send clinic invitations.\n2. Record verbal consent and register child as attending.\n3. Record vaccination for the child at the clinic.\n4. Verify vaccination outcome and Excel export.\nVerification:\n- Vaccination outcome is recorded and session Excel export is available.\n","descriptionHtml":"<p>Test: Export session data to Excel and send clinic invitations,<br />\nthen verify vaccination record.<br />\nSteps:</p>\n<ol>\n<li>Schedule session, import class list, and send clinic invitations.</li>\n<li>Record verbal consent and register child as attending.</li>\n<li>Record vaccination for the child at the clinic.</li>\n<li>Verify vaccination outcome and Excel export.<br />\nVerification:</li>\n</ol>\n<ul>\n<li>Vaccination outcome is recorded and session Excel export is available.</li>\n</ul>\n","status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Locator.check: Timeout 30000ms exceeded.\nCall log:\n  - waiting for get_by_role(\"radio\", name=\"Yes, it’s safe to vaccinate\", exact=True)","statusTrace":"setup_fixed_child = None\nadd_vaccine_batch = <function add_vaccine_batch.<locals>.wrapper at 0x7f177ec249a0>\nschools = {'HPV': [School(name='Kettlebrook Short Stay School', urn='133583', site=None), School(name='Highlands School', urn='1...hool(name='Tavistock College', urn='145336', site=None), School(name='Gilbert Ward Academy', urn='149842', site=None)]}\nclinics = [Clinic(name='Bell, Spencer and Bailey')]\nchildren_page = <mavis.test.pages.children.ChildrenPage object at 0x7f178421a060>\nsessions_page = <mavis.test.pages.sessions.SessionsPage object at 0x7f177fef9d10>\ndashboard_page = <mavis.test.pages.dashboard.DashboardPage object at 0x7f177fd88d60>\nverbal_consent_page = <mavis.test.pages.verbal_consent.VerbalConsentPage object at 0x7f177ff90c30>\nchildren = {'HPV': [Child(first_name='Bethany', last_name='DIXON', nhs_number='9022310965', address=('Flat 27Y', 'Fiona squares',...e.com'), Parent(full_name='Lorraine Chambers-Hussain', relationship='Mum', email_address='crichardson@example.org')))]}\n\n    @pytest.mark.rav\n    @pytest.mark.bug\n    def test_verify_excel_export_and_clinic_invitation(\n        setup_fixed_child,\n        add_vaccine_batch,\n        schools,\n        clinics,\n        children_page,\n        sessions_page,\n        dashboard_page,\n        verbal_consent_page,\n        children,\n    ):\n        \"\"\"\n        Test: Export session data to Excel and send clinic invitations,\n           then verify vaccination record.\n        Steps:\n        1. Schedule session, import class list, and send clinic invitations.\n        2. Record verbal consent and register child as attending.\n        3. Record vaccination for the child at the clinic.\n        4. Verify vaccination outcome and Excel export.\n        Verification:\n        - Vaccination outcome is recorded and session Excel export is available.\n        \"\"\"\n        child = children[Programme.HPV][0]\n        school = schools[Programme.HPV][0]\n        batch_name = add_vaccine_batch(Vaccine.GARDASIL_9)\n    \n        dashboard_page.click_mavis()\n        dashboard_page.click_sessions()\n        sessions_page.ensure_session_scheduled_for_today(\n            \"Community clinic\",\n            Programme.HPV,\n        )\n    \n        dashboard_page.click_mavis()\n        dashboard_page.click_children()\n        children_page.search_for_a_child_name(str(child))\n        children_page.click_record_for_child(child)\n        children_page.click_invite_to_community_clinic()\n        children_page.click_session_for_programme(\n            \"Community clinic\",\n            Programme.HPV,\n            check_date=True,\n        )\n        sessions_page.click_record_a_new_consent_response()\n>       verbal_consent_page.parent_verbal_positive(\n            parent=child.parents[0],\n        )\n\ntests/test_sessions.py:322: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmavis/test/pages/verbal_consent.py:217: in parent_verbal_positive\n    self._process_consent_confirmation(\nmavis/test/pages/verbal_consent.py:344: in _process_consent_confirmation\n    self.click_safe_to_vaccinate(\nmavis/test/annotations.py:35: in wrapper\n    return_value = func(self, *args, **kwargs)\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^\nmavis/test/pages/verbal_consent.py:165: in click_safe_to_vaccinate\n    self.yes_safe_to_vaccinate_radio.check()\n.venv/lib/python3.13/site-packages/playwright/sync_api/_generated.py:15451: in check\n    self._sync(\n.venv/lib/python3.13/site-packages/playwright/_impl/_locator.py:145: in check\n    return await self._frame.check(self._selector, strict=True, **params)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/playwright/_impl/_frame.py:829: in check\n    await self._channel.send(\"check\", self._timeout, locals_to_params(locals()))\n.venv/lib/python3.13/site-packages/playwright/_impl/_connection.py:69: in send\n    return await self._connection.wrap_api_call(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <playwright._impl._connection.Connection object at 0x7f1786d36f90>\ncb = <function Channel.send.<locals>.<lambda> at 0x7f177f1e3ba0>\nis_internal = False, title = None\n\n    async def wrap_api_call(\n        self, cb: Callable[[], Any], is_internal: bool = False, title: str = None\n    ) -> Any:\n        if self._api_zone.get():\n            return await cb()\n        task = asyncio.current_task(self._loop)\n        st: List[inspect.FrameInfo] = getattr(\n            task, \"__pw_stack__\", None\n        ) or inspect.stack(0)\n    \n        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal, title)\n        self._api_zone.set(parsed_st)\n        try:\n            return await cb()\n        except Exception as error:\n>           raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nE           playwright._impl._errors.TimeoutError: Locator.check: Timeout 30000ms exceeded.\nE           Call log:\nE             - waiting for get_by_role(\"radio\", name=\"Yes, it’s safe to vaccinate\", exact=True)\n\n.venv/lib/python3.13/site-packages/playwright/_impl/_connection.py:558: TimeoutError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1759215909241,"stop":1759215909242,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1759215909241,"stop":1759215909241,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1759215909241,"stop":1759215909241,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"year_groups","time":{"start":1759215909242,"stop":1759215909242,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1759215909242,"stop":1759215909242,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1759215909242,"stop":1759215909242,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"programmes_enabled","time":{"start":1759215909243,"stop":1759215909243,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"onboarding","time":{"start":1759215909243,"stop":1759215918021,"duration":8778},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"organisation","time":{"start":1759215918021,"stop":1759215918021,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"nurse","time":{"start":1759215918021,"stop":1759215918021,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"team","time":{"start":1759215918021,"stop":1759215918021,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"schools","time":{"start":1759215918021,"stop":1759215918021,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clinics","time":{"start":1759215918021,"stop":1759215918021,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests","time":{"start":1759215918021,"stop":1759215918021,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1759215918022,"stop":1759215918341,"duration":319},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1759215918022,"stop":1759215918022,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1759215918341,"stop":1759215918341,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1759215918342,"stop":1759215918342,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1759215918342,"stop":1759215919793,"duration":1451},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1759215918342,"stop":1759215918342,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1759215918342,"stop":1759215918342,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1759215919794,"stop":1759215919798,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1759215919798,"stop":1759215919799,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_credentials","time":{"start":1759215919799,"stop":1759215919799,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1759215919800,"stop":1759215919800,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_token","time":{"start":1759215919800,"stop":1759215919800,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"reset_before_each_module","time":{"start":1759216297190,"stop":1759216299361,"duration":2171},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1759216596311,"stop":1759216596318,"duration":7},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1759216596311,"stop":1759216596311,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1759216596311,"stop":1759216596311,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1759216596311,"stop":1759216596311,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1759216596318,"stop":1759216596347,"duration":29},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"flipper_page","time":{"start":1759216596347,"stop":1759216596347,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_as_nurse","time":{"start":1759216596348,"stop":1759216598897,"duration":2549},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1759216596348,"stop":1759216597835,"duration":1487},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1759216596348,"stop":1759216597835,"duration":1487},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Log in as User(username='greenrosie@example.org', password='greenrosie@example.org', role='nurse') and choose team Team(name='Greenwood PLC est. 1675', workgroup='M404J', careplus_venue_code='M404J', email='kingelliott@example.org', phone='+44(0)7700 900799')","time":{"start":1759216597835,"stop":1759216598897,"duration":1062},"status":"passed","steps":[{"name":"Log in as {1} and choose team {2}","time":{"start":1759216597835,"stop":1759216598897,"duration":1062},"status":"passed","steps":[{"name":"Log in as User(username='greenrosie@example.org', password='greenrosie@example.org', role='nurse')","time":{"start":1759216597835,"stop":1759216598870,"duration":1035},"status":"passed","steps":[{"name":"Log in as {1}","time":{"start":1759216597835,"stop":1759216598870,"duration":1035},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='greenrosie@example.org', password='greenrosie@example.org', role='nurse'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='greenrosie@example.org', password='greenrosie@example.org', role='nurse'), Team(name='Greenwood PLC est. 1675', workgroup='M404J', careplus_venue_code='M404J', email='kingelliott@example.org', phone='+44(0)7700 900799'))"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"log_in_page","time":{"start":1759216596348,"stop":1759216596348,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_feature_flags","time":{"start":1759216596348,"stop":1759216596348,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_tests","time":{"start":1759216598897,"stop":1759216599238,"duration":341},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1759216598897,"stop":1759216599238,"duration":341},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1759216598897,"stop":1759216599238,"duration":341},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"dashboard_page","time":{"start":1759216598897,"stop":1759216598897,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"children","time":{"start":1759216599238,"stop":1759216599241,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_data","time":{"start":1759216599241,"stop":1759216599243,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"sessions_page","time":{"start":1759216599243,"stop":1759216599243,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_session_with_file_upload","time":{"start":1759216599243,"stop":1759216599243,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_fixed_child","time":{"start":1759216599243,"stop":1759216604231,"duration":4988},"status":"passed","steps":[{"name":"Click on 'HPV' session at School(name='Kettlebrook Short Stay School', urn='133583', site=None)","time":{"start":1759216599243,"stop":1759216599931,"duration":688},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1759216599243,"stop":1759216599931,"duration":688},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='Kettlebrook Short Stay School', urn='133583', site=None), <Programme.HPV: 'HPV'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Import class lists","time":{"start":1759216599936,"stop":1759216600336,"duration":400},"status":"passed","steps":[{"name":"Click on Import class lists","time":{"start":1759216599936,"stop":1759216600336,"duration":400},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1759216600389,"stop":1759216601336,"duration":947},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1759216600390,"stop":1759216601336,"duration":946},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Set input file to PosixPath('working/ClassFileMapping.FIXED_CHILD20250930081641.csv')","time":{"start":1759216601349,"stop":1759216601371,"duration":22},"status":"passed","steps":[{"name":"Set input file to {1}","time":{"start":1759216601349,"stop":1759216601371,"duration":22},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(PosixPath('working/ClassFileMapping.FIXED_CHILD20250930081641.csv'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1759216601371,"stop":1759216601795,"duration":424},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1759216601371,"stop":1759216601795,"duration":424},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"_coverage","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click link with uploaded datetime","time":{"start":1759216601831,"stop":1759216602089,"duration":258},"status":"passed","steps":[{"name":"Click link with uploaded datetime","time":{"start":1759216601831,"stop":1759216602089,"duration":258},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1759216603016,"stop":1759216603274,"duration":258},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1759216603016,"stop":1759216603274,"duration":258},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1759216603274,"stop":1759216603586,"duration":312},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1759216603274,"stop":1759216603586,"duration":312},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'HPV' session at School(name='Kettlebrook Short Stay School', urn='133583', site=None)","time":{"start":1759216603586,"stop":1759216604231,"duration":645},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1759216603586,"stop":1759216604231,"duration":645},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='Kettlebrook Short Stay School', urn='133583', site=None), <Programme.HPV: 'HPV'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":18,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"import_records_page","time":{"start":1759216599243,"stop":1759216599243,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"add_batch_page","time":{"start":1759216604231,"stop":1759216604231,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"verbal_consent_page","time":{"start":1759216604231,"stop":1759216604231,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"vaccines_page","time":{"start":1759216604231,"stop":1759216604231,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"add_vaccine_batch","time":{"start":1759216604231,"stop":1759216604231,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"children_page","time":{"start":1759216604231,"stop":1759216604231,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\nTest: Export session data to Excel and send clinic invitations,\n   then verify vaccination record.\nSteps:\n1. Schedule session, import class list, and send clinic invitations.\n2. Record verbal consent and register child as attending.\n3. Record vaccination for the child at the clinic.\n4. Verify vaccination outcome and Excel export.\nVerification:\n- Vaccination outcome is recorded and session Excel export is available.\n","status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Locator.check: Timeout 30000ms exceeded.\nCall log:\n  - waiting for get_by_role(\"radio\", name=\"Yes, it’s safe to vaccinate\", exact=True)","statusTrace":"setup_fixed_child = None\nadd_vaccine_batch = <function add_vaccine_batch.<locals>.wrapper at 0x7f177ec249a0>\nschools = {'HPV': [School(name='Kettlebrook Short Stay School', urn='133583', site=None), School(name='Highlands School', urn='1...hool(name='Tavistock College', urn='145336', site=None), School(name='Gilbert Ward Academy', urn='149842', site=None)]}\nclinics = [Clinic(name='Bell, Spencer and Bailey')]\nchildren_page = <mavis.test.pages.children.ChildrenPage object at 0x7f178421a060>\nsessions_page = <mavis.test.pages.sessions.SessionsPage object at 0x7f177fef9d10>\ndashboard_page = <mavis.test.pages.dashboard.DashboardPage object at 0x7f177fd88d60>\nverbal_consent_page = <mavis.test.pages.verbal_consent.VerbalConsentPage object at 0x7f177ff90c30>\nchildren = {'HPV': [Child(first_name='Bethany', last_name='DIXON', nhs_number='9022310965', address=('Flat 27Y', 'Fiona squares',...e.com'), Parent(full_name='Lorraine Chambers-Hussain', relationship='Mum', email_address='crichardson@example.org')))]}\n\n    @pytest.mark.rav\n    @pytest.mark.bug\n    def test_verify_excel_export_and_clinic_invitation(\n        setup_fixed_child,\n        add_vaccine_batch,\n        schools,\n        clinics,\n        children_page,\n        sessions_page,\n        dashboard_page,\n        verbal_consent_page,\n        children,\n    ):\n        \"\"\"\n        Test: Export session data to Excel and send clinic invitations,\n           then verify vaccination record.\n        Steps:\n        1. Schedule session, import class list, and send clinic invitations.\n        2. Record verbal consent and register child as attending.\n        3. Record vaccination for the child at the clinic.\n        4. Verify vaccination outcome and Excel export.\n        Verification:\n        - Vaccination outcome is recorded and session Excel export is available.\n        \"\"\"\n        child = children[Programme.HPV][0]\n        school = schools[Programme.HPV][0]\n        batch_name = add_vaccine_batch(Vaccine.GARDASIL_9)\n    \n        dashboard_page.click_mavis()\n        dashboard_page.click_sessions()\n        sessions_page.ensure_session_scheduled_for_today(\n            \"Community clinic\",\n            Programme.HPV,\n        )\n    \n        dashboard_page.click_mavis()\n        dashboard_page.click_children()\n        children_page.search_for_a_child_name(str(child))\n        children_page.click_record_for_child(child)\n        children_page.click_invite_to_community_clinic()\n        children_page.click_session_for_programme(\n            \"Community clinic\",\n            Programme.HPV,\n            check_date=True,\n        )\n        sessions_page.click_record_a_new_consent_response()\n>       verbal_consent_page.parent_verbal_positive(\n            parent=child.parents[0],\n        )\n\ntests/test_sessions.py:322: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmavis/test/pages/verbal_consent.py:217: in parent_verbal_positive\n    self._process_consent_confirmation(\nmavis/test/pages/verbal_consent.py:344: in _process_consent_confirmation\n    self.click_safe_to_vaccinate(\nmavis/test/annotations.py:35: in wrapper\n    return_value = func(self, *args, **kwargs)\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^\nmavis/test/pages/verbal_consent.py:165: in click_safe_to_vaccinate\n    self.yes_safe_to_vaccinate_radio.check()\n.venv/lib/python3.13/site-packages/playwright/sync_api/_generated.py:15451: in check\n    self._sync(\n.venv/lib/python3.13/site-packages/playwright/_impl/_locator.py:145: in check\n    return await self._frame.check(self._selector, strict=True, **params)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n.venv/lib/python3.13/site-packages/playwright/_impl/_frame.py:829: in check\n    await self._channel.send(\"check\", self._timeout, locals_to_params(locals()))\n.venv/lib/python3.13/site-packages/playwright/_impl/_connection.py:69: in send\n    return await self._connection.wrap_api_call(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <playwright._impl._connection.Connection object at 0x7f1786d36f90>\ncb = <function Channel.send.<locals>.<lambda> at 0x7f177f1e3ba0>\nis_internal = False, title = None\n\n    async def wrap_api_call(\n        self, cb: Callable[[], Any], is_internal: bool = False, title: str = None\n    ) -> Any:\n        if self._api_zone.get():\n            return await cb()\n        task = asyncio.current_task(self._loop)\n        st: List[inspect.FrameInfo] = getattr(\n            task, \"__pw_stack__\", None\n        ) or inspect.stack(0)\n    \n        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal, title)\n        self._api_zone.set(parsed_st)\n        try:\n            return await cb()\n        except Exception as error:\n>           raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nE           playwright._impl._errors.TimeoutError: Locator.check: Timeout 30000ms exceeded.\nE           Call log:\nE             - waiting for get_by_role(\"radio\", name=\"Yes, it’s safe to vaccinate\", exact=True)\n\n.venv/lib/python3.13/site-packages/playwright/_impl/_connection.py:558: TimeoutError","steps":[{"name":"Go to vaccines page","time":{"start":1759216604232,"stop":1759216604456,"duration":224},"status":"passed","steps":[{"name":"Go to vaccines page","time":{"start":1759216604232,"stop":1759216604455,"duration":223},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Add batch for 'Gardasil 9'","time":{"start":1759216604456,"stop":1759216604698,"duration":242},"status":"passed","steps":[{"name":"Add batch for {1}","time":{"start":1759216604456,"stop":1759216604698,"duration":242},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Vaccine.GARDASIL_9: 'Gardasil 9'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fill in name with 'ABC123'","time":{"start":1759216604698,"stop":1759216604728,"duration":30},"status":"passed","steps":[{"name":"Fill in name with {1}","time":{"start":1759216604699,"stop":1759216604728,"duration":29},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('ABC123',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fill in expiry date with datetime.date(2025, 10, 1)","time":{"start":1759216604728,"stop":1759216604755,"duration":27},"status":"passed","steps":[{"name":"Fill in expiry date with {1}","time":{"start":1759216604728,"stop":1759216604755,"duration":27},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(datetime.date(2025, 10, 1),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Confirm add batch","time":{"start":1759216604755,"stop":1759216604993,"duration":238},"status":"passed","steps":[{"name":"Confirm add batch","time":{"start":1759216604755,"stop":1759216604993,"duration":238},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1759216604993,"stop":1759216605262,"duration":269},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1759216604993,"stop":1759216605262,"duration":269},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1759216605262,"stop":1759216605536,"duration":274},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1759216605262,"stop":1759216605536,"duration":274},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'HPV' session at 'Community clinic'","time":{"start":1759216605536,"stop":1759216606216,"duration":680},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1759216605536,"stop":1759216606216,"duration":680},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('Community clinic', <Programme.HPV: 'HPV'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1759216606223,"stop":1759216606466,"duration":243},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1759216606223,"stop":1759216606466,"duration":243},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Children","time":{"start":1759216606466,"stop":1759216607252,"duration":786},"status":"passed","steps":[{"name":"Click on Children","time":{"start":1759216606466,"stop":1759216607252,"duration":786},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Search for child 'DIXON, Bethany'","time":{"start":1759216607252,"stop":1759216613910,"duration":6658},"status":"passed","steps":[{"name":"Search for child {1}","time":{"start":1759216607252,"stop":1759216613910,"duration":6658},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('DIXON, Bethany',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on record for child Child(first_name='Bethany', last_name='DIXON', nhs_number='9022310965', address=('Flat 27Y', 'Fiona squares', 'Hussainshire', 'IP19 3ZP'), date_of_birth=datetime.date(2011, 5, 16), year_group=10, parents=(Parent(full_name='Ross Wilson', relationship='Dad', email_address='gouldsian@example.com'), Parent(full_name='Melissa Birch', relationship='Mum', email_address='neilmorley@example.org')))","time":{"start":1759216613910,"stop":1759216614267,"duration":357},"status":"passed","steps":[{"name":"Click on record for child {1}","time":{"start":1759216613910,"stop":1759216614267,"duration":357},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(Child(first_name='Bethany', last_name='DIXON', nhs_number='9022310965', address=('Flat 27Y', 'Fiona squares', 'Hussainshire', 'IP19 3ZP'), date_of_birth=datetime.date(2011, 5, 16), year_group=10, parents=(Parent(full_name='Ross Wilson', relationship='Dad', email_address='gouldsian@example.com'), Parent(full_name='Melissa Birch', relationship='Mum', email_address='neilmorley@example.org'))),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Invite to community clinic","time":{"start":1759216614267,"stop":1759216614787,"duration":520},"status":"passed","steps":[{"name":"Click Invite to community clinic","time":{"start":1759216614267,"stop":1759216614787,"duration":520},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'HPV' session for programme","time":{"start":1759216614787,"stop":1759216615129,"duration":342},"status":"passed","steps":[{"name":"Click on {2} session for programme","time":{"start":1759216614787,"stop":1759216615128,"duration":341},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('Community clinic', <Programme.HPV: 'HPV'>)"},{"name":"check_date","value":"True"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Record a new consent response","time":{"start":1759216615129,"stop":1759216618718,"duration":3589},"status":"passed","steps":[{"name":"Click on Record a new consent response","time":{"start":1759216615129,"stop":1759216618718,"duration":3589},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'Ross Wilson (Dad)' radio button","time":{"start":1759216618719,"stop":1759216618772,"duration":53},"status":"passed","steps":[{"name":"Click on {1} radio button","time":{"start":1759216618719,"stop":1759216618772,"duration":53},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('Ross Wilson (Dad)',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1759216618772,"stop":1759216619203,"duration":431},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1759216618772,"stop":1759216619203,"duration":431},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1759216619203,"stop":1759216619634,"duration":431},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1759216619203,"stop":1759216619634,"duration":431},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select consent method","time":{"start":1759216619634,"stop":1759216619689,"duration":55},"status":"passed","steps":[{"name":"Select consent method","time":{"start":1759216619634,"stop":1759216619689,"duration":55},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<ConsentMethod.IN_PERSON: 'In person'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1759216619689,"stop":1759216620123,"duration":434},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1759216619689,"stop":1759216620123,"duration":434},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Yes, they agree","time":{"start":1759216620123,"stop":1759216620172,"duration":49},"status":"passed","steps":[{"name":"Click on Yes, they agree","time":{"start":1759216620123,"stop":1759216620172,"duration":49},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1759216620172,"stop":1759216620604,"duration":432},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1759216620172,"stop":1759216620604,"duration":432},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select No for health question 'Does your child have any severe allergies?'","time":{"start":1759216620604,"stop":1759216620655,"duration":51},"status":"passed","steps":[{"name":"Select No for health question {1}","time":{"start":1759216620604,"stop":1759216620655,"duration":51},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.SEVERE_ALLERGIES: 'Does your child have any severe allergies?'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select No for health question 'Does your child have any medical conditions for which they receive treatment?'","time":{"start":1759216620655,"stop":1759216620688,"duration":33},"status":"passed","steps":[{"name":"Select No for health question {1}","time":{"start":1759216620655,"stop":1759216620688,"duration":33},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.MEDICAL_CONDITIONS: 'Does your child have any medical conditions for which they receive treatment?'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select No for health question 'Has your child ever had a severe reaction to any medicines, including vaccines?'","time":{"start":1759216620688,"stop":1759216620722,"duration":34},"status":"passed","steps":[{"name":"Select No for health question {1}","time":{"start":1759216620688,"stop":1759216620722,"duration":34},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.REACTION: 'Has your child ever had a severe reaction to any medicines, including vaccines?'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select No for health question 'Does your child need extra support during vaccination sessions?'","time":{"start":1759216620722,"stop":1759216620755,"duration":33},"status":"passed","steps":[{"name":"Select No for health question {1}","time":{"start":1759216620722,"stop":1759216620755,"duration":33},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.EXTRA_SUPPORT: 'Does your child need extra support during vaccination sessions?'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1759216620755,"stop":1759216621239,"duration":484},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1759216620755,"stop":1759216621239,"duration":484},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Yes, it’s safe to vaccinate","time":{"start":1759216621239,"stop":1759216651665,"duration":30426},"status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Locator.check: Timeout 30000ms exceeded.\nCall log:\n  - waiting for get_by_role(\"radio\", name=\"Yes, it’s safe to vaccinate\", exact=True)\n\n","statusTrace":"  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/allure_commons/_allure.py\", line 202, in impl\n    return func(*a, **kw)\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/mavis/test/annotations.py\", line 35, in wrapper\n    return_value = func(self, *args, **kwargs)\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/mavis/test/pages/verbal_consent.py\", line 165, in click_safe_to_vaccinate\n    self.yes_safe_to_vaccinate_radio.check()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/sync_api/_generated.py\", line 15451, in check\n    self._sync(\n    ~~~~~~~~~~^\n        self._impl_obj.check(\n        ^^^^^^^^^^^^^^^^^^^^^\n    ...<5 lines>...\n        )\n        ^\n    )\n    ^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ~~~~~~~~~~~^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/_impl/_locator.py\", line 145, in check\n    return await self._frame.check(self._selector, strict=True, **params)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/_impl/_frame.py\", line 829, in check\n    await self._channel.send(\"check\", self._timeout, locals_to_params(locals()))\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/_impl/_connection.py\", line 69, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/_impl/_connection.py\", line 558, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\n","steps":[{"name":"Click on Yes, it’s safe to vaccinate","time":{"start":1759216621239,"stop":1759216651664,"duration":30425},"status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Locator.check: Timeout 30000ms exceeded.\nCall log:\n  - waiting for get_by_role(\"radio\", name=\"Yes, it’s safe to vaccinate\", exact=True)\n\n","statusTrace":"  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/mavis/test/annotations.py\", line 35, in wrapper\n    return_value = func(self, *args, **kwargs)\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/mavis/test/pages/verbal_consent.py\", line 165, in click_safe_to_vaccinate\n    self.yes_safe_to_vaccinate_radio.check()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/sync_api/_generated.py\", line 15451, in check\n    self._sync(\n    ~~~~~~~~~~^\n        self._impl_obj.check(\n        ^^^^^^^^^^^^^^^^^^^^^\n    ...<5 lines>...\n        )\n        ^\n    )\n    ^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ~~~~~~~~~~~^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/_impl/_locator.py\", line 145, in check\n    return await self._frame.check(self._selector, strict=True, **params)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/_impl/_frame.py\", line 829, in check\n    await self._channel.send(\"check\", self._timeout, locals_to_params(locals()))\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/_impl/_connection.py\", line 69, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/_impl/_connection.py\", line 558, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\n","steps":[],"attachments":[{"uid":"ea55d36df8e05a10","name":"Screenshot on failure","source":"ea55d36df8e05a10.png","type":"image/png","size":52097}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"programme","value":"'HPV'"},{"name":"consent_option","value":"'Injection'"},{"name":"psd_option","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":56,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"setup_fixed_child::0","time":{"start":1759216651811,"stop":1759216653293,"duration":1482},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1759216651811,"stop":1759216652095,"duration":284},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1759216651811,"stop":1759216652095,"duration":284},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1759216652096,"stop":1759216652407,"duration":311},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1759216652096,"stop":1759216652407,"duration":311},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1759216652407,"stop":1759216652768,"duration":361},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1759216652407,"stop":1759216652768,"duration":361},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"log_in_as_nurse::0","time":{"start":1759216653295,"stop":1759216653821,"duration":526},"status":"passed","steps":[{"name":"Log out","time":{"start":1759216653295,"stop":1759216653821,"duration":526},"status":"passed","steps":[{"name":"Log out","time":{"start":1759216653295,"stop":1759216653821,"duration":526},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"set_feature_flags::0","time":{"start":1759216653822,"stop":1759216653822,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context::0","time":{"start":1759216653823,"stop":1759216653831,"duration":8},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1759216653832,"stop":1759216653832,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1759216728229,"stop":1759216728255,"duration":26},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1759216728229,"stop":1759216728229,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1759216728257,"stop":1759216728268,"duration":11},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests::0","time":{"start":1759216728271,"stop":1759216732930,"duration":4659},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"bug"},{"name":"tag","value":"rav"},{"name":"tag","value":"sessions"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_sessions"},{"name":"host","value":"runnervm3ublj"},{"name":"thread","value":"2183-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_sessions"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["sessions","bug","rav"]},"source":"66bcdb9048447fd0.json","parameterValues":[]}