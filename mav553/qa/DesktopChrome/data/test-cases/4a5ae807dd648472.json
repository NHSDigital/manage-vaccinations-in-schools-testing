{"uid":"4a5ae807dd648472","name":"test_verify_report_does_not_crash_on_alphanumeric_date","fullName":"tests.test_programmes#test_verify_report_does_not_crash_on_alphanumeric_date","historyId":"952ab435b1a533a337e82608b64f7088","time":{"start":1759216142932,"stop":1759216149259,"duration":6327},"description":"\nTest: Generate and verify SystmOne report for MenACWY programme.\nSteps:\n1. Navigate to reports page.\n2. Generate SystmOne report for MenACWY with invalid from and to dates.\nVerification:\n- Report is generated in SystmOne format for MenACWY.\n","descriptionHtml":"<p>Test: Generate and verify SystmOne report for MenACWY programme.<br />\nSteps:</p>\n<ol>\n<li>Navigate to reports page.</li>\n<li>Generate SystmOne report for MenACWY with invalid from and to dates.<br />\nVerification:</li>\n</ol>\n<ul>\n<li>Report is generated in SystmOne format for MenACWY.</li>\n</ul>\n","status":"failed","statusMessage":"AssertionError: Locator expected not to be visible\nActual value: visible \nCall log:\n  - Expect \"to_be_visible\" with timeout 5000ms\n  - waiting for get_by_role(\"heading\", name=\"Sorry, there’s a problem with\")\n    9 × locator resolved to <h1 class=\"nhsuk-heading-l\">Sorry, there’s a problem with the service</h1>\n      - unexpected value \"visible\"","statusTrace":"setup_reports = None\nprogrammes_page = <mavis.test.pages.programmes.ProgrammesPage object at 0x7f178421a520>\n\n    @issue(\"MAV-553\")\n    @pytest.mark.reports\n    def test_verify_report_does_not_crash_on_alphanumeric_date(\n        setup_reports, programmes_page\n    ):\n        \"\"\"\n        Test: Generate and verify SystmOne report for MenACWY programme.\n        Steps:\n        1. Navigate to reports page.\n        2. Generate SystmOne report for MenACWY with invalid from and to dates.\n        Verification:\n        - Report is generated in SystmOne format for MenACWY.\n        \"\"\"\n>       programmes_page.verify_report_does_not_crash_on_invalid_date(\n            programme=Programme.MENACWY,\n            from_date=\"yyyy-mm-dd\",\n            to_date=\"2024-01-01\",\n        )\n\ntests/test_programmes.py:333: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmavis/test/annotations.py:35: in wrapper\n    return_value = func(self, *args, **kwargs)\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mavis.test.pages.programmes.ProgrammesPage object at 0x7f178421a520>\nprogramme = <Programme.MENACWY: 'MenACWY'>, from_date = 'yyyy-mm-dd'\nto_date = '2024-01-01'\n\n    @step(\"Verify report does not crash on invalid date\")\n    def verify_report_does_not_crash_on_invalid_date(\n        self,\n        programme: Programme,\n        from_date: str,\n        to_date: str,\n    ) -> None:\n        self.click_programme_for_current_year(programme)\n        self.click_download_report()\n        self.enter_date_range(from_date, to_date)\n        self.click_continue()\n        self.page.wait_for_load_state()\n        expect(\n            self.page.get_by_role(\"heading\", name=\"Sorry, there’s a problem with\")\n>       ).not_to_be_visible()\n          ^^^^^^^^^^^^^^^^^^^\nE       AssertionError: Locator expected not to be visible\nE       Actual value: visible \nE       Call log:\nE         - Expect \"to_be_visible\" with timeout 5000ms\nE         - waiting for get_by_role(\"heading\", name=\"Sorry, there’s a problem with\")\nE           9 × locator resolved to <h1 class=\"nhsuk-heading-l\">Sorry, there’s a problem with the service</h1>\nE             - unexpected value \"visible\"\n\nmavis/test/pages/programmes.py:202: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":2,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1759215909241,"stop":1759215909242,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1759215909241,"stop":1759215909241,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1759215909241,"stop":1759215909241,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"year_groups","time":{"start":1759215909242,"stop":1759215909242,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1759215909242,"stop":1759215909242,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1759215909242,"stop":1759215909242,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"programmes_enabled","time":{"start":1759215909243,"stop":1759215909243,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"onboarding","time":{"start":1759215909243,"stop":1759215918021,"duration":8778},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"organisation","time":{"start":1759215918021,"stop":1759215918021,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"nurse","time":{"start":1759215918021,"stop":1759215918021,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"team","time":{"start":1759215918021,"stop":1759215918021,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"schools","time":{"start":1759215918021,"stop":1759215918021,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clinics","time":{"start":1759215918021,"stop":1759215918021,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests","time":{"start":1759215918021,"stop":1759215918021,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1759215918022,"stop":1759215918341,"duration":319},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1759215918022,"stop":1759215918022,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1759215918341,"stop":1759215918341,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1759215918342,"stop":1759215918342,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1759215918342,"stop":1759215919793,"duration":1451},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1759215918342,"stop":1759215918342,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1759215918342,"stop":1759215918342,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1759215919794,"stop":1759215919798,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1759215919798,"stop":1759215919799,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_credentials","time":{"start":1759215919799,"stop":1759215919799,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"reset_before_each_module","time":{"start":1759215919800,"stop":1759215922976,"duration":3176},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1759215919800,"stop":1759215919800,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_token","time":{"start":1759215919800,"stop":1759215919800,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1759216140288,"stop":1759216140288,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1759216140288,"stop":1759216140288,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1759216140288,"stop":1759216140293,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1759216140288,"stop":1759216140288,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1759216140293,"stop":1759216140319,"duration":26},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_feature_flags","time":{"start":1759216140319,"stop":1759216140319,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"flipper_page","time":{"start":1759216140319,"stop":1759216140319,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_page","time":{"start":1759216140320,"stop":1759216140320,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_as_nurse","time":{"start":1759216140320,"stop":1759216142681,"duration":2361},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1759216140320,"stop":1759216141798,"duration":1478},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1759216140320,"stop":1759216141798,"duration":1478},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Log in as User(username='greenrosie@example.org', password='greenrosie@example.org', role='nurse') and choose team Team(name='Greenwood PLC est. 1675', workgroup='M404J', careplus_venue_code='M404J', email='kingelliott@example.org', phone='+44(0)7700 900799')","time":{"start":1759216141798,"stop":1759216142681,"duration":883},"status":"passed","steps":[{"name":"Log in as {1} and choose team {2}","time":{"start":1759216141798,"stop":1759216142681,"duration":883},"status":"passed","steps":[{"name":"Log in as User(username='greenrosie@example.org', password='greenrosie@example.org', role='nurse')","time":{"start":1759216141798,"stop":1759216142656,"duration":858},"status":"passed","steps":[{"name":"Log in as {1}","time":{"start":1759216141798,"stop":1759216142656,"duration":858},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='greenrosie@example.org', password='greenrosie@example.org', role='nurse'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='greenrosie@example.org', password='greenrosie@example.org', role='nurse'), Team(name='Greenwood PLC est. 1675', workgroup='M404J', careplus_venue_code='M404J', email='kingelliott@example.org', phone='+44(0)7700 900799'))"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"dashboard_page","time":{"start":1759216142682,"stop":1759216142682,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_reports","time":{"start":1759216142682,"stop":1759216142928,"duration":246},"status":"passed","steps":[{"name":"Click on Programmes","time":{"start":1759216142682,"stop":1759216142928,"duration":246},"status":"passed","steps":[{"name":"Click on Programmes","time":{"start":1759216142682,"stop":1759216142928,"duration":246},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"children","time":{"start":1759216142928,"stop":1759216142931,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_data","time":{"start":1759216142931,"stop":1759216142932,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"programmes_page","time":{"start":1759216142932,"stop":1759216142932,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\nTest: Generate and verify SystmOne report for MenACWY programme.\nSteps:\n1. Navigate to reports page.\n2. Generate SystmOne report for MenACWY with invalid from and to dates.\nVerification:\n- Report is generated in SystmOne format for MenACWY.\n","status":"failed","statusMessage":"AssertionError: Locator expected not to be visible\nActual value: visible \nCall log:\n  - Expect \"to_be_visible\" with timeout 5000ms\n  - waiting for get_by_role(\"heading\", name=\"Sorry, there’s a problem with\")\n    9 × locator resolved to <h1 class=\"nhsuk-heading-l\">Sorry, there’s a problem with the service</h1>\n      - unexpected value \"visible\"","statusTrace":"setup_reports = None\nprogrammes_page = <mavis.test.pages.programmes.ProgrammesPage object at 0x7f178421a520>\n\n    @issue(\"MAV-553\")\n    @pytest.mark.reports\n    def test_verify_report_does_not_crash_on_alphanumeric_date(\n        setup_reports, programmes_page\n    ):\n        \"\"\"\n        Test: Generate and verify SystmOne report for MenACWY programme.\n        Steps:\n        1. Navigate to reports page.\n        2. Generate SystmOne report for MenACWY with invalid from and to dates.\n        Verification:\n        - Report is generated in SystmOne format for MenACWY.\n        \"\"\"\n>       programmes_page.verify_report_does_not_crash_on_invalid_date(\n            programme=Programme.MENACWY,\n            from_date=\"yyyy-mm-dd\",\n            to_date=\"2024-01-01\",\n        )\n\ntests/test_programmes.py:333: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmavis/test/annotations.py:35: in wrapper\n    return_value = func(self, *args, **kwargs)\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mavis.test.pages.programmes.ProgrammesPage object at 0x7f178421a520>\nprogramme = <Programme.MENACWY: 'MenACWY'>, from_date = 'yyyy-mm-dd'\nto_date = '2024-01-01'\n\n    @step(\"Verify report does not crash on invalid date\")\n    def verify_report_does_not_crash_on_invalid_date(\n        self,\n        programme: Programme,\n        from_date: str,\n        to_date: str,\n    ) -> None:\n        self.click_programme_for_current_year(programme)\n        self.click_download_report()\n        self.enter_date_range(from_date, to_date)\n        self.click_continue()\n        self.page.wait_for_load_state()\n        expect(\n            self.page.get_by_role(\"heading\", name=\"Sorry, there’s a problem with\")\n>       ).not_to_be_visible()\n          ^^^^^^^^^^^^^^^^^^^\nE       AssertionError: Locator expected not to be visible\nE       Actual value: visible \nE       Call log:\nE         - Expect \"to_be_visible\" with timeout 5000ms\nE         - waiting for get_by_role(\"heading\", name=\"Sorry, there’s a problem with\")\nE           9 × locator resolved to <h1 class=\"nhsuk-heading-l\">Sorry, there’s a problem with the service</h1>\nE             - unexpected value \"visible\"\n\nmavis/test/pages/programmes.py:202: AssertionError","steps":[{"name":"Verify report does not crash on invalid date","time":{"start":1759216142933,"stop":1759216149258,"duration":6325},"status":"failed","statusMessage":"AssertionError: Locator expected not to be visible\nActual value: visible \nCall log:\n  - Expect \"to_be_visible\" with timeout 5000ms\n  - waiting for get_by_role(\"heading\", name=\"Sorry, there’s a problem with\")\n    9 × locator resolved to <h1 class=\"nhsuk-heading-l\">Sorry, there’s a problem with the service</h1>\n      - unexpected value \"visible\"\n\n","statusTrace":"  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/allure_commons/_allure.py\", line 202, in impl\n    return func(*a, **kw)\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/mavis/test/annotations.py\", line 35, in wrapper\n    return_value = func(self, *args, **kwargs)\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/mavis/test/pages/programmes.py\", line 202, in verify_report_does_not_crash_on_invalid_date\n    ).not_to_be_visible()\n      ~~~~~~~~~~~~~~~~~^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/sync_api/_generated.py\", line 20446, in not_to_be_visible\n    self._sync(\n    ~~~~~~~~~~^\n        self._impl_obj.not_to_be_visible(visible=visible, timeout=timeout)\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ~~~~~~~~~~~^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/_impl/_assertions.py\", line 777, in not_to_be_visible\n    await self._not.to_be_visible(visible, timeout)\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/_impl/_assertions.py\", line 763, in to_be_visible\n    await self._expect_impl(\n    ...<5 lines>...\n    )\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/_impl/_assertions.py\", line 83, in _expect_impl\n    raise AssertionError(\n        f\"{out_message}\\nActual value: {actual} {format_call_log(result.get('log'))}\"\n    )\n","steps":[{"name":"Verify report does not crash on invalid date","time":{"start":1759216142933,"stop":1759216149257,"duration":6324},"status":"failed","statusMessage":"AssertionError: Locator expected not to be visible\nActual value: visible \nCall log:\n  - Expect \"to_be_visible\" with timeout 5000ms\n  - waiting for get_by_role(\"heading\", name=\"Sorry, there’s a problem with\")\n    9 × locator resolved to <h1 class=\"nhsuk-heading-l\">Sorry, there’s a problem with the service</h1>\n      - unexpected value \"visible\"\n\n","statusTrace":"  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/mavis/test/annotations.py\", line 35, in wrapper\n    return_value = func(self, *args, **kwargs)\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/mavis/test/pages/programmes.py\", line 202, in verify_report_does_not_crash_on_invalid_date\n    ).not_to_be_visible()\n      ~~~~~~~~~~~~~~~~~^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/sync_api/_generated.py\", line 20446, in not_to_be_visible\n    self._sync(\n    ~~~~~~~~~~^\n        self._impl_obj.not_to_be_visible(visible=visible, timeout=timeout)\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ~~~~~~~~~~~^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/_impl/_assertions.py\", line 777, in not_to_be_visible\n    await self._not.to_be_visible(visible, timeout)\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/_impl/_assertions.py\", line 763, in to_be_visible\n    await self._expect_impl(\n    ...<5 lines>...\n    )\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/_impl/_assertions.py\", line 83, in _expect_impl\n    raise AssertionError(\n        f\"{out_message}\\nActual value: {actual} {format_call_log(result.get('log'))}\"\n    )\n","steps":[{"name":"Click on 'MenACWY'","time":{"start":1759216142933,"stop":1759216143207,"duration":274},"status":"passed","steps":[{"name":"Click on {1}","time":{"start":1759216142933,"stop":1759216143207,"duration":274},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Programme.MENACWY: 'MenACWY'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Download vaccination report","time":{"start":1759216143207,"stop":1759216143810,"duration":603},"status":"passed","steps":[{"name":"Click on Download vaccination report","time":{"start":1759216143207,"stop":1759216143810,"duration":603},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Enter date range from 'yyyy-mm-dd' to '2024-01-01'","time":{"start":1759216143810,"stop":1759216143865,"duration":55},"status":"passed","steps":[{"name":"Enter date range from {1} to {2}","time":{"start":1759216143810,"stop":1759216143865,"duration":55},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('yyyy-mm-dd', '2024-01-01')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Continue","time":{"start":1759216143866,"stop":1759216144118,"duration":252},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1759216143866,"stop":1759216144118,"duration":252},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"5e7c08c0aa2afef1","name":"Screenshot on failure","source":"5e7c08c0aa2afef1.png","type":"image/png","size":15243}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":8,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"programme","value":"'MenACWY'"},{"name":"from_date","value":"'yyyy-mm-dd'"},{"name":"to_date","value":"'2024-01-01'"}],"shouldDisplayMessage":false,"stepsCount":9,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":10,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"log_in_as_nurse::0","time":{"start":1759216149267,"stop":1759216179410,"duration":30143},"status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Locator.click: Timeout 30000ms exceeded.\nCall log:\n  - waiting for get_by_role(\"button\", name=\"Log out\")\n\n","statusTrace":"  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/allure_commons/_allure.py\", line 231, in __call__\n    return self._fixture_function(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/_pytest/fixtures.py\", line 938, in _teardown_yield_fixture\n    next(it)\n    ~~~~^^^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/mavis/test/fixtures/helpers.py\", line 85, in log_in_as_nurse\n    log_in_page.log_out()\n    ~~~~~~~~~~~~~~~~~~~^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/allure_commons/_allure.py\", line 202, in impl\n    return func(*a, **kw)\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/mavis/test/annotations.py\", line 35, in wrapper\n    return_value = func(self, *args, **kwargs)\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/mavis/test/pages/log_in.py\", line 34, in log_out\n    self.log_out_button.click()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/sync_api/_generated.py\", line 15543, in click\n    self._sync(\n    ~~~~~~~~~~^\n        self._impl_obj.click(\n        ^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n        )\n        ^\n    )\n    ^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ~~~~~~~~~~~^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/_impl/_locator.py\", line 160, in click\n    return await self._frame.click(self._selector, strict=True, **params)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/_impl/_frame.py\", line 549, in click\n    await self._channel.send(\"click\", self._timeout, locals_to_params(locals()))\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/_impl/_connection.py\", line 69, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/_impl/_connection.py\", line 558, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\n","steps":[{"name":"Log out","time":{"start":1759216149267,"stop":1759216179409,"duration":30142},"status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Locator.click: Timeout 30000ms exceeded.\nCall log:\n  - waiting for get_by_role(\"button\", name=\"Log out\")\n\n","statusTrace":"  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/allure_commons/_allure.py\", line 202, in impl\n    return func(*a, **kw)\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/mavis/test/annotations.py\", line 35, in wrapper\n    return_value = func(self, *args, **kwargs)\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/mavis/test/pages/log_in.py\", line 34, in log_out\n    self.log_out_button.click()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/sync_api/_generated.py\", line 15543, in click\n    self._sync(\n    ~~~~~~~~~~^\n        self._impl_obj.click(\n        ^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n        )\n        ^\n    )\n    ^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ~~~~~~~~~~~^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/_impl/_locator.py\", line 160, in click\n    return await self._frame.click(self._selector, strict=True, **params)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/_impl/_frame.py\", line 549, in click\n    await self._channel.send(\"click\", self._timeout, locals_to_params(locals()))\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/_impl/_connection.py\", line 69, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/_impl/_connection.py\", line 558, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\n","steps":[{"name":"Log out","time":{"start":1759216149267,"stop":1759216179408,"duration":30141},"status":"broken","statusMessage":"playwright._impl._errors.TimeoutError: Locator.click: Timeout 30000ms exceeded.\nCall log:\n  - waiting for get_by_role(\"button\", name=\"Log out\")\n\n","statusTrace":"  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/mavis/test/annotations.py\", line 35, in wrapper\n    return_value = func(self, *args, **kwargs)\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/mavis/test/pages/log_in.py\", line 34, in log_out\n    self.log_out_button.click()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/sync_api/_generated.py\", line 15543, in click\n    self._sync(\n    ~~~~~~~~~~^\n        self._impl_obj.click(\n        ^^^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n        )\n        ^\n    )\n    ^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ~~~~~~~~~~~^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/_impl/_locator.py\", line 160, in click\n    return await self._frame.click(self._selector, strict=True, **params)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/_impl/_frame.py\", line 549, in click\n    await self._channel.send(\"click\", self._timeout, locals_to_params(locals()))\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/_impl/_connection.py\", line 69, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/home/runner/work/manage-vaccinations-in-schools-testing/manage-vaccinations-in-schools-testing/.venv/lib/python3.13/site-packages/playwright/_impl/_connection.py\", line 558, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\n","steps":[],"attachments":[{"uid":"e6d32e6496fd8e4f","name":"Screenshot on failure","source":"e6d32e6496fd8e4f.png","type":"image/png","size":15243}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"set_feature_flags::0","time":{"start":1759216179411,"stop":1759216179411,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context::0","time":{"start":1759216179412,"stop":1759216179420,"duration":8},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1759216179420,"stop":1759216179420,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1759216728229,"stop":1759216728255,"duration":26},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1759216728229,"stop":1759216728229,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1759216728257,"stop":1759216728268,"duration":11},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests::0","time":{"start":1759216728271,"stop":1759216732930,"duration":4659},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"reports"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_programmes"},{"name":"host","value":"runnervm3ublj"},{"name":"thread","value":"2183-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_programmes"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[{"name":"MAV-553","url":"https://nhsd-jira.digital.nhs.uk/browse/MAV-553","type":"issue"}],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"13c11e8b31d4fa9c","status":"failed","statusDetails":"AssertionError: Locator expected not to be visible\nActual value: visible \nCall log:\n  - Expect \"to_be_visible\" with timeout 5000ms\n  - waiting for get_by_role(\"heading\", name=\"Sorry, there’s a problem with\")\n    9 × locator resolved to <h1 class=\"nhsuk-heading-l\">Sorry, there’s a problem with the service</h1>\n      - unexpected value \"visible\"","time":{"start":1759216103725,"stop":1759216110013,"duration":6288}},{"uid":"9726f8ba6abeac7b","status":"failed","statusDetails":"AssertionError: Locator expected not to be visible\nActual value: visible \nCall log:\n  - Expect \"to_be_visible\" with timeout 5000ms\n  - waiting for get_by_role(\"heading\", name=\"Sorry, there’s a problem with\")\n    9 × locator resolved to <h1 class=\"nhsuk-heading-l\">Sorry, there’s a problem with the service</h1>\n      - unexpected value \"visible\"","time":{"start":1759216064474,"stop":1759216070864,"duration":6390}}],"categories":[{"name":"Product defects","matchedStatuses":[]}],"tags":["reports"]},"source":"4a5ae807dd648472.json","parameterValues":[]}