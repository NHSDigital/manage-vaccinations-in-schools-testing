{"uid":"4d983a09eb8890be","name":"test_create_edit_delete_hpv_vaccination_and_verify_imms_api","fullName":"tests.test_imms_api_hpv#test_create_edit_delete_hpv_vaccination_and_verify_imms_api","historyId":"8410e47d9512bbb10cbe8598048e4e1a","time":{"start":1760707842428,"stop":1760707878034,"duration":35606},"description":"\nTest: Create, edit, and delete an HPV vaccination record and verify changes in\n   the IMMS API and Mavis status.\nSteps:\n1. Setup: Schedule HPV session, import class list, add vaccine batch, and\n   register child with verbal consent.\n2. Create: Record HPV vaccination for the child (LEFT_ARM_UPPER).\n3. Verify: Check the vaccination record exists in the IMMS API.\n   Check Mavis shows \"Synced\".\n4. Edit: Change the delivery site to RIGHT_ARM_LOWER and save.\n5. Verify: Check the updated vaccination record in the IMMS API.\n   Check Mavis still shows \"Synced\".\n6. Edit: Change the outcome to \"They refused it\" and save.\n7. Verify: Check the vaccination record is removed from the IMMS API.\n   Check Mavis shows \"Not synced\".\n","descriptionHtml":"<p>Test: Create, edit, and delete an HPV vaccination record and verify changes in<br />\nthe IMMS API and Mavis status.<br />\nSteps:</p>\n<ol>\n<li>Setup: Schedule HPV session, import class list, add vaccine batch, and<br />\nregister child with verbal consent.</li>\n<li>Create: Record HPV vaccination for the child (LEFT_ARM_UPPER).</li>\n<li>Verify: Check the vaccination record exists in the IMMS API.<br />\nCheck Mavis shows &quot;Synced&quot;.</li>\n<li>Edit: Change the delivery site to RIGHT_ARM_LOWER and save.</li>\n<li>Verify: Check the updated vaccination record in the IMMS API.<br />\nCheck Mavis still shows &quot;Synced&quot;.</li>\n<li>Edit: Change the outcome to &quot;They refused it&quot; and save.</li>\n<li>Verify: Check the vaccination record is removed from the IMMS API.<br />\nCheck Mavis shows &quot;Not synced&quot;.</li>\n</ol>\n","status":"failed","statusMessage":"AssertionError: Vaccination site: expected 'Right arm (upper position)', got 'Left arm (upper position)'","statusTrace":"record_hpv = (Child(first_name='Gareth', last_name='SIMPSON', nhs_number='9015586357', address=('Flat 84', 'Rita bridge', 'New Toby...el@example.com'))), datetime.datetime(2025, 10, 17, 14, 30, 42, 426134, tzinfo=zoneinfo.ZoneInfo(key='Europe/London')))\nschools = {'HPV': [School(name='Willingdon Community School', urn='114592', site=None), School(name='Mechinoh School', urn='1059...chool(name='Pewithall School', urn='111141', site=None), School(name='Wavendon Gate School', urn='131397', site=None)]}\nimms_api_helper = <mavis.test.imms_api.ImmsApiHelper object at 0x7f481e3e9d30>\nsessions_page = <mavis.test.pages.sessions.SessionsPage object at 0x7f481e3ea7b0>\nprogrammes_page = <mavis.test.pages.programmes.ProgrammesPage object at 0x7f481cfb4190>\nchildren_page = <mavis.test.pages.children.ChildrenPage object at 0x7f481d154050>\n\n    def test_create_edit_delete_hpv_vaccination_and_verify_imms_api(\n        record_hpv,\n        schools,\n        imms_api_helper,\n        sessions_page,\n        programmes_page,\n        children_page,\n    ):\n        \"\"\"\n        Test: Create, edit, and delete an HPV vaccination record and verify changes in\n           the IMMS API and Mavis status.\n        Steps:\n        1. Setup: Schedule HPV session, import class list, add vaccine batch, and\n           register child with verbal consent.\n        2. Create: Record HPV vaccination for the child (LEFT_ARM_UPPER).\n        3. Verify: Check the vaccination record exists in the IMMS API.\n           Check Mavis shows \"Synced\".\n        4. Edit: Change the delivery site to RIGHT_ARM_LOWER and save.\n        5. Verify: Check the updated vaccination record in the IMMS API.\n           Check Mavis still shows \"Synced\".\n        6. Edit: Change the outcome to \"They refused it\" and save.\n        7. Verify: Check the vaccination record is removed from the IMMS API.\n           Check Mavis shows \"Not synced\".\n        \"\"\"\n        child, vaccination_time = record_hpv\n        school = schools[Programme.HPV][0]\n    \n        # Step 3: Verify creation in IMMS API\n        imms_api_helper.check_record_in_imms_api(\n            Vaccine.GARDASIL_9,\n            child,\n            school,\n            DeliverySite.LEFT_ARM_UPPER,\n            vaccination_time,\n        )\n    \n        # Step 4: Edit delivery site to RIGHT_ARM_LOWER\n        sessions_page.click_vaccination_details(school)\n        children_page.expect_vaccination_details(\"Synced with NHS England?\", \"Synced\")\n    \n        programmes_page.click_edit_vaccination_record()\n        programmes_page.click_change_site()\n        programmes_page.click_delivery_site(DeliverySite.RIGHT_ARM_LOWER)\n        programmes_page.click_continue()\n        programmes_page.click_save_changes()\n    \n        # Step 5: Verify update in IMMS API\n>       imms_api_helper.check_record_in_imms_api(\n            Vaccine.GARDASIL_9,\n            child,\n            school,\n            DeliverySite.RIGHT_ARM_UPPER,\n            vaccination_time,\n        )\n\ntests/test_imms_api_hpv.py:123: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmavis/test/imms_api.py:95: in check_record_in_imms_api\n    self.check_expected_and_actual_records_match(\nmavis/test/imms_api.py:128: in check_expected_and_actual_records_match\n    self._raise_error_if_not_equal(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mavis.test.imms_api.ImmsApiHelper object at 0x7f481e3e9d30>\nactual = <DeliverySite.LEFT_ARM_UPPER: 'Left arm (upper position)'>\nexpected = <DeliverySite.RIGHT_ARM_UPPER: 'Right arm (upper position)'>\nmessage = 'Vaccination site'\n\n    def _raise_error_if_not_equal(\n        self, actual: object, expected: object, message: str\n    ) -> None:\n        if actual != expected:\n            msg = f\"{message}: expected '{expected}', got '{actual}'\"\n>           raise AssertionError(msg)\nE           AssertionError: Vaccination site: expected 'Right arm (upper position)', got 'Left arm (upper position)'\n\nmavis/test/imms_api.py:151: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"base_url","time":{"start":1760707024190,"stop":1760707024190,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1760707024190,"stop":1760707024190,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_session_faker","time":{"start":1760707024190,"stop":1760707024192,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1760707024192,"stop":1760707024192,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1760707024192,"stop":1760707024192,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"year_groups","time":{"start":1760707024192,"stop":1760707024192,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"programmes_enabled","time":{"start":1760707024193,"stop":1760707024193,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"onboarding","time":{"start":1760707024193,"stop":1760707031197,"duration":7004},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"nurse","time":{"start":1760707031197,"stop":1760707031197,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"team","time":{"start":1760707031197,"stop":1760707031197,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests","time":{"start":1760707031197,"stop":1760707031197,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1760707031198,"stop":1760707031198,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1760707031198,"stop":1760707031714,"duration":516},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1760707031714,"stop":1760707031715,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1760707031715,"stop":1760707031716,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1760707031715,"stop":1760707031715,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1760707031716,"stop":1760707031716,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1760707031716,"stop":1760707032762,"duration":1046},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1760707032762,"stop":1760707032763,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1760707032763,"stop":1760707032764,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_token","time":{"start":1760707032764,"stop":1760707032764,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_credentials","time":{"start":1760707032764,"stop":1760707032764,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1760707032764,"stop":1760707032764,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"schools","time":{"start":1760707211188,"stop":1760707211188,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"organisation","time":{"start":1760707211189,"stop":1760707211189,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clinics","time":{"start":1760707211189,"stop":1760707211189,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"authenticate_api","time":{"start":1760707802712,"stop":1760707803973,"duration":1261},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"reset_before_each_module","time":{"start":1760707803973,"stop":1760707804653,"duration":680},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"imms_api_helper","time":{"start":1760707803973,"stop":1760707803973,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1760707804653,"stop":1760707804653,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1760707804654,"stop":1760707804654,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1760707804654,"stop":1760707804654,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1760707804654,"stop":1760707804660,"duration":6},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1760707804660,"stop":1760707804916,"duration":256},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"flipper_page","time":{"start":1760707804916,"stop":1760707804917,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_as_nurse","time":{"start":1760707804917,"stop":1760707807611,"duration":2694},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1760707804917,"stop":1760707806289,"duration":1372},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1760707804918,"stop":1760707806289,"duration":1371},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Log in as User(username='gmann@example.org', password='gmann@example.org', role='nurse') and choose team Team(name='Nicholls Group est. 1813', workgroup='V474Z', careplus_venue_code='V474Z', email='turnerjulia@example.org', phone='07700 900 968')","time":{"start":1760707806289,"stop":1760707807611,"duration":1322},"status":"passed","steps":[{"name":"Log in as {1} and choose team {2}","time":{"start":1760707806289,"stop":1760707807611,"duration":1322},"status":"passed","steps":[{"name":"Log in as User(username='gmann@example.org', password='gmann@example.org', role='nurse')","time":{"start":1760707806289,"stop":1760707807555,"duration":1266},"status":"passed","steps":[{"name":"Log in as {1}","time":{"start":1760707806289,"stop":1760707807555,"duration":1266},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='gmann@example.org', password='gmann@example.org', role='nurse'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='gmann@example.org', password='gmann@example.org', role='nurse'), Team(name='Nicholls Group est. 1813', workgroup='V474Z', careplus_venue_code='V474Z', email='turnerjulia@example.org', phone='07700 900 968'))"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"log_in_page","time":{"start":1760707804917,"stop":1760707804917,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_feature_flags","time":{"start":1760707804917,"stop":1760707804917,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"vaccines_page","time":{"start":1760707807611,"stop":1760707807611,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"add_vaccine_batch","time":{"start":1760707807611,"stop":1760707807611,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"add_batch_page","time":{"start":1760707807611,"stop":1760707807611,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"dashboard_page","time":{"start":1760707807612,"stop":1760707807612,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"children","time":{"start":1760707807612,"stop":1760707807617,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_data","time":{"start":1760707807617,"stop":1760707807619,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"sessions_page","time":{"start":1760707807619,"stop":1760707807620,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"import_records_page","time":{"start":1760707807619,"stop":1760707807619,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_recording_hpv","time":{"start":1760707807620,"stop":1760707825723,"duration":18103},"status":"passed","steps":[{"name":"Go to vaccines page","time":{"start":1760707807620,"stop":1760707807967,"duration":347},"status":"passed","steps":[{"name":"Go to vaccines page","time":{"start":1760707807620,"stop":1760707807967,"duration":347},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Add batch for 'Gardasil 9'","time":{"start":1760707807967,"stop":1760707808270,"duration":303},"status":"passed","steps":[{"name":"Add batch for {1}","time":{"start":1760707807967,"stop":1760707808270,"duration":303},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Vaccine.GARDASIL_9: 'Gardasil 9'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fill in name with 'ABC123'","time":{"start":1760707808270,"stop":1760707808370,"duration":100},"status":"passed","steps":[{"name":"Fill in name with {1}","time":{"start":1760707808270,"stop":1760707808370,"duration":100},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('ABC123',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fill in expiry date with datetime.date(2025, 10, 18)","time":{"start":1760707808370,"stop":1760707808438,"duration":68},"status":"passed","steps":[{"name":"Fill in expiry date with {1}","time":{"start":1760707808370,"stop":1760707808438,"duration":68},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(datetime.date(2025, 10, 18),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Confirm add batch","time":{"start":1760707808438,"stop":1760707809196,"duration":758},"status":"passed","steps":[{"name":"Confirm add batch","time":{"start":1760707808438,"stop":1760707809196,"duration":758},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1760707809196,"stop":1760707809500,"duration":304},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1760707809196,"stop":1760707809500,"duration":304},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1760707809500,"stop":1760707809913,"duration":413},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1760707809500,"stop":1760707809913,"duration":413},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'HPV' session at School(name='Willingdon Community School', urn='114592', site=None)","time":{"start":1760707809913,"stop":1760707811101,"duration":1188},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1760707809913,"stop":1760707811101,"duration":1188},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='Willingdon Community School', urn='114592', site=None), <Programme.HPV: 'HPV'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fill date fields with '20251017'","time":{"start":1760707812022,"stop":1760707812077,"duration":55},"status":"passed","steps":[{"name":"Fill date fields with {1}","time":{"start":1760707812022,"stop":1760707812077,"duration":55},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('20251017',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Continue","time":{"start":1760707812077,"stop":1760707812850,"duration":773},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1760707812077,"stop":1760707812850,"duration":773},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Save changes","time":{"start":1760707812921,"stop":1760707814165,"duration":1244},"status":"passed","steps":[{"name":"Click Save changes","time":{"start":1760707812921,"stop":1760707814165,"duration":1244},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Import class lists","time":{"start":1760707814165,"stop":1760707814765,"duration":600},"status":"passed","steps":[{"name":"Click on Import class lists","time":{"start":1760707814165,"stop":1760707814765,"duration":600},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1760707814975,"stop":1760707815935,"duration":960},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1760707814975,"stop":1760707815935,"duration":960},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Set input file to PosixPath('working/ClassFileMapping.FIXED_CHILD20251017143015.csv')","time":{"start":1760707815953,"stop":1760707816057,"duration":104},"status":"passed","steps":[{"name":"Set input file to {1}","time":{"start":1760707815953,"stop":1760707816057,"duration":104},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(PosixPath('working/ClassFileMapping.FIXED_CHILD20251017143015.csv'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1760707816057,"stop":1760707816926,"duration":869},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1760707816057,"stop":1760707816926,"duration":869},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"_coverage","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click link with uploaded datetime","time":{"start":1760707817145,"stop":1760707817424,"duration":279},"status":"passed","steps":[{"name":"Click link with uploaded datetime","time":{"start":1760707817145,"stop":1760707817424,"duration":279},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1760707823866,"stop":1760707824102,"duration":236},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1760707823866,"stop":1760707824102,"duration":236},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1760707824102,"stop":1760707824407,"duration":305},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1760707824102,"stop":1760707824407,"duration":305},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'HPV' session at School(name='Willingdon Community School', urn='114592', site=None)","time":{"start":1760707824407,"stop":1760707825299,"duration":892},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1760707824407,"stop":1760707825299,"duration":892},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='Willingdon Community School', urn='114592', site=None), <Programme.HPV: 'HPV'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Consent tab","time":{"start":1760707825299,"stop":1760707825723,"duration":424},"status":"passed","steps":[{"name":"Click on Consent tab","time":{"start":1760707825299,"stop":1760707825723,"duration":424},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":40,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"children_page","time":{"start":1760707825723,"stop":1760707825723,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"record_hpv","time":{"start":1760707825724,"stop":1760707842426,"duration":16702},"status":"passed","steps":[{"name":"Click on child Child(first_name='Gareth', last_name='SIMPSON', nhs_number='9015586357', address=('Flat 84', 'Rita bridge', 'New Toby', 'M7 3PG'), date_of_birth=datetime.date(2012, 4, 24), year_group=9, parents=(Parent(full_name='Dr Frederick Burton', relationship='Dad', email_address='hgriffiths@example.org'), Parent(full_name='Ms Hollie Williams', relationship='Mum', email_address='morganmichael@example.com')))","time":{"start":1760707826176,"stop":1760707826623,"duration":447},"status":"passed","steps":[{"name":"Click on child {1}","time":{"start":1760707826176,"stop":1760707826623,"duration":447},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(Child(first_name='Gareth', last_name='SIMPSON', nhs_number='9015586357', address=('Flat 84', 'Rita bridge', 'New Toby', 'M7 3PG'), date_of_birth=datetime.date(2012, 4, 24), year_group=9, parents=(Parent(full_name='Dr Frederick Burton', relationship='Dad', email_address='hgriffiths@example.org'), Parent(full_name='Ms Hollie Williams', relationship='Mum', email_address='morganmichael@example.com'))),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'HPV' tab","time":{"start":1760707826623,"stop":1760707827023,"duration":400},"status":"passed","steps":[{"name":"Click on {1} tab","time":{"start":1760707826623,"stop":1760707827023,"duration":400},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Programme.HPV: 'HPV'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Record a new consent response","time":{"start":1760707827023,"stop":1760707829201,"duration":2178},"status":"passed","steps":[{"name":"Click on Record a new consent response","time":{"start":1760707827023,"stop":1760707829201,"duration":2178},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'Dr Frederick Burton (Dad)' radio button","time":{"start":1760707829201,"stop":1760707829281,"duration":80},"status":"passed","steps":[{"name":"Click on {1} radio button","time":{"start":1760707829201,"stop":1760707829281,"duration":80},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('Dr Frederick Burton (Dad)',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1760707829281,"stop":1760707830140,"duration":859},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1760707829281,"stop":1760707830140,"duration":859},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1760707830140,"stop":1760707830896,"duration":756},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1760707830140,"stop":1760707830896,"duration":756},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select consent method","time":{"start":1760707830897,"stop":1760707831042,"duration":145},"status":"passed","steps":[{"name":"Select consent method","time":{"start":1760707830897,"stop":1760707831042,"duration":145},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<ConsentMethod.IN_PERSON: 'In person'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1760707831042,"stop":1760707831783,"duration":741},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1760707831042,"stop":1760707831783,"duration":741},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Yes, they agree","time":{"start":1760707831783,"stop":1760707831905,"duration":122},"status":"passed","steps":[{"name":"Click on Yes, they agree","time":{"start":1760707831783,"stop":1760707831905,"duration":122},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1760707831905,"stop":1760707832624,"duration":719},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1760707831905,"stop":1760707832624,"duration":719},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Does your child have any severe allergies?'","time":{"start":1760707832624,"stop":1760707832714,"duration":90},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1760707832624,"stop":1760707832714,"duration":90},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.SEVERE_ALLERGIES: 'Does your child have any severe allergies?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Does your child have any medical conditions for which they receive treatment?'","time":{"start":1760707832714,"stop":1760707832758,"duration":44},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1760707832714,"stop":1760707832757,"duration":43},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.MEDICAL_CONDITIONS: 'Does your child have any medical conditions for which they receive treatment?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Has your child ever had a severe reaction to any medicines, including vaccines?'","time":{"start":1760707832758,"stop":1760707832795,"duration":37},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1760707832758,"stop":1760707832795,"duration":37},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.REACTION: 'Has your child ever had a severe reaction to any medicines, including vaccines?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Does your child need extra support during vaccination sessions?'","time":{"start":1760707832795,"stop":1760707832844,"duration":49},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1760707832795,"stop":1760707832844,"duration":49},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.EXTRA_SUPPORT: 'Does your child need extra support during vaccination sessions?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1760707832845,"stop":1760707833592,"duration":747},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1760707832845,"stop":1760707833592,"duration":747},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Confirm","time":{"start":1760707833592,"stop":1760707835070,"duration":1478},"status":"passed","steps":[{"name":"Click Confirm","time":{"start":1760707833592,"stop":1760707835070,"duration":1478},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Register tab","time":{"start":1760707835070,"stop":1760707835574,"duration":504},"status":"passed","steps":[{"name":"Click on Register tab","time":{"start":1760707835070,"stop":1760707835574,"duration":504},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Search for 'SIMPSON, Gareth'","time":{"start":1760707835575,"stop":1760707835908,"duration":333},"status":"passed","steps":[{"name":"Search for {1}","time":{"start":1760707835575,"stop":1760707835908,"duration":333},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('SIMPSON, Gareth',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Attending","time":{"start":1760707835908,"stop":1760707837064,"duration":1156},"status":"passed","steps":[{"name":"Click on Attending","time":{"start":1760707835908,"stop":1760707837064,"duration":1156},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Record vaccinations","time":{"start":1760707837064,"stop":1760707837683,"duration":619},"status":"passed","steps":[{"name":"Click on Record vaccinations","time":{"start":1760707837064,"stop":1760707837683,"duration":619},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Search for 'SIMPSON, Gareth'","time":{"start":1760707837684,"stop":1760707838054,"duration":370},"status":"passed","steps":[{"name":"Search for {1}","time":{"start":1760707837685,"stop":1760707838054,"duration":369},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('SIMPSON, Gareth',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'HPV' tab","time":{"start":1760707838430,"stop":1760707838943,"duration":513},"status":"passed","steps":[{"name":"Click on {1} tab","time":{"start":1760707838430,"stop":1760707838943,"duration":513},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Programme.HPV: 'HPV'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Confirm pre-screening checks are true","time":{"start":1760707838944,"stop":1760707839058,"duration":114},"status":"passed","steps":[{"name":"Confirm pre-screening checks are true","time":{"start":1760707838944,"stop":1760707839058,"duration":114},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Programme.HPV: 'HPV'>, <ConsentOption.INJECTION: 'Injection'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Yes","time":{"start":1760707839071,"stop":1760707839091,"duration":20},"status":"passed","steps":[{"name":"Click on Yes","time":{"start":1760707839071,"stop":1760707839091,"duration":20},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(Child(first_name='Gareth', last_name='SIMPSON', nhs_number='9015586357', address=('Flat 84', 'Rita bridge', 'New Toby', 'M7 3PG'), date_of_birth=datetime.date(2012, 4, 24), year_group=9, parents=(Parent(full_name='Dr Frederick Burton', relationship='Dad', email_address='hgriffiths@example.org'), Parent(full_name='Ms Hollie Williams', relationship='Mum', email_address='morganmichael@example.com'))),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Yes","time":{"start":1760707839091,"stop":1760707839245,"duration":154},"status":"passed","steps":[{"name":"Click on Yes","time":{"start":1760707839091,"stop":1760707839245,"duration":154},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<ConsentOption.INJECTION: 'Injection'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select vaccination site 'Left arm (upper position)'","time":{"start":1760707839245,"stop":1760707839390,"duration":145},"status":"passed","steps":[{"name":"Select vaccination site {1}","time":{"start":1760707839245,"stop":1760707839390,"duration":145},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<DeliverySite.LEFT_ARM_UPPER: 'Left arm (upper position)'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Continue","time":{"start":1760707839390,"stop":1760707840101,"duration":711},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1760707839390,"stop":1760707840101,"duration":711},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Choose batch 'ABC123'","time":{"start":1760707840101,"stop":1760707840971,"duration":870},"status":"passed","steps":[{"name":"Choose batch {1}","time":{"start":1760707840101,"stop":1760707840971,"duration":870},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1760707840187,"stop":1760707840971,"duration":784},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1760707840187,"stop":1760707840971,"duration":784},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('ABC123',)"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Confirm","time":{"start":1760707841037,"stop":1760707842342,"duration":1305},"status":"passed","steps":[{"name":"Click on Confirm","time":{"start":1760707841037,"stop":1760707842342,"duration":1305},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":60,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"verbal_consent_page","time":{"start":1760707825724,"stop":1760707825724,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"programmes_page","time":{"start":1760707842426,"stop":1760707842427,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\nTest: Create, edit, and delete an HPV vaccination record and verify changes in\n   the IMMS API and Mavis status.\nSteps:\n1. Setup: Schedule HPV session, import class list, add vaccine batch, and\n   register child with verbal consent.\n2. Create: Record HPV vaccination for the child (LEFT_ARM_UPPER).\n3. Verify: Check the vaccination record exists in the IMMS API.\n   Check Mavis shows \"Synced\".\n4. Edit: Change the delivery site to RIGHT_ARM_LOWER and save.\n5. Verify: Check the updated vaccination record in the IMMS API.\n   Check Mavis still shows \"Synced\".\n6. Edit: Change the outcome to \"They refused it\" and save.\n7. Verify: Check the vaccination record is removed from the IMMS API.\n   Check Mavis shows \"Not synced\".\n","status":"failed","statusMessage":"AssertionError: Vaccination site: expected 'Right arm (upper position)', got 'Left arm (upper position)'","statusTrace":"record_hpv = (Child(first_name='Gareth', last_name='SIMPSON', nhs_number='9015586357', address=('Flat 84', 'Rita bridge', 'New Toby...el@example.com'))), datetime.datetime(2025, 10, 17, 14, 30, 42, 426134, tzinfo=zoneinfo.ZoneInfo(key='Europe/London')))\nschools = {'HPV': [School(name='Willingdon Community School', urn='114592', site=None), School(name='Mechinoh School', urn='1059...chool(name='Pewithall School', urn='111141', site=None), School(name='Wavendon Gate School', urn='131397', site=None)]}\nimms_api_helper = <mavis.test.imms_api.ImmsApiHelper object at 0x7f481e3e9d30>\nsessions_page = <mavis.test.pages.sessions.SessionsPage object at 0x7f481e3ea7b0>\nprogrammes_page = <mavis.test.pages.programmes.ProgrammesPage object at 0x7f481cfb4190>\nchildren_page = <mavis.test.pages.children.ChildrenPage object at 0x7f481d154050>\n\n    def test_create_edit_delete_hpv_vaccination_and_verify_imms_api(\n        record_hpv,\n        schools,\n        imms_api_helper,\n        sessions_page,\n        programmes_page,\n        children_page,\n    ):\n        \"\"\"\n        Test: Create, edit, and delete an HPV vaccination record and verify changes in\n           the IMMS API and Mavis status.\n        Steps:\n        1. Setup: Schedule HPV session, import class list, add vaccine batch, and\n           register child with verbal consent.\n        2. Create: Record HPV vaccination for the child (LEFT_ARM_UPPER).\n        3. Verify: Check the vaccination record exists in the IMMS API.\n           Check Mavis shows \"Synced\".\n        4. Edit: Change the delivery site to RIGHT_ARM_LOWER and save.\n        5. Verify: Check the updated vaccination record in the IMMS API.\n           Check Mavis still shows \"Synced\".\n        6. Edit: Change the outcome to \"They refused it\" and save.\n        7. Verify: Check the vaccination record is removed from the IMMS API.\n           Check Mavis shows \"Not synced\".\n        \"\"\"\n        child, vaccination_time = record_hpv\n        school = schools[Programme.HPV][0]\n    \n        # Step 3: Verify creation in IMMS API\n        imms_api_helper.check_record_in_imms_api(\n            Vaccine.GARDASIL_9,\n            child,\n            school,\n            DeliverySite.LEFT_ARM_UPPER,\n            vaccination_time,\n        )\n    \n        # Step 4: Edit delivery site to RIGHT_ARM_LOWER\n        sessions_page.click_vaccination_details(school)\n        children_page.expect_vaccination_details(\"Synced with NHS England?\", \"Synced\")\n    \n        programmes_page.click_edit_vaccination_record()\n        programmes_page.click_change_site()\n        programmes_page.click_delivery_site(DeliverySite.RIGHT_ARM_LOWER)\n        programmes_page.click_continue()\n        programmes_page.click_save_changes()\n    \n        # Step 5: Verify update in IMMS API\n>       imms_api_helper.check_record_in_imms_api(\n            Vaccine.GARDASIL_9,\n            child,\n            school,\n            DeliverySite.RIGHT_ARM_UPPER,\n            vaccination_time,\n        )\n\ntests/test_imms_api_hpv.py:123: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmavis/test/imms_api.py:95: in check_record_in_imms_api\n    self.check_expected_and_actual_records_match(\nmavis/test/imms_api.py:128: in check_expected_and_actual_records_match\n    self._raise_error_if_not_equal(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mavis.test.imms_api.ImmsApiHelper object at 0x7f481e3e9d30>\nactual = <DeliverySite.LEFT_ARM_UPPER: 'Left arm (upper position)'>\nexpected = <DeliverySite.RIGHT_ARM_UPPER: 'Right arm (upper position)'>\nmessage = 'Vaccination site'\n\n    def _raise_error_if_not_equal(\n        self, actual: object, expected: object, message: str\n    ) -> None:\n        if actual != expected:\n            msg = f\"{message}: expected '{expected}', got '{actual}'\"\n>           raise AssertionError(msg)\nE           AssertionError: Vaccination site: expected 'Right arm (upper position)', got 'Left arm (upper position)'\n\nmavis/test/imms_api.py:151: AssertionError","steps":[{"name":"Click on School(name='Willingdon Community School', urn='114592', site=None) vaccination details","time":{"start":1760707858449,"stop":1760707858894,"duration":445},"status":"passed","steps":[{"name":"Click on {1} vaccination details","time":{"start":1760707858449,"stop":1760707858894,"duration":445},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='Willingdon Community School', urn='114592', site=None),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Check Vaccination details heading appears","time":{"start":1760707858894,"stop":1760707858913,"duration":19},"status":"passed","steps":[{"name":"Check Vaccination details heading appears","time":{"start":1760707858894,"stop":1760707858913,"duration":19},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Edit vaccination record","time":{"start":1760707858919,"stop":1760707859664,"duration":745},"status":"passed","steps":[{"name":"Click on Edit vaccination record","time":{"start":1760707858919,"stop":1760707859664,"duration":745},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Change site","time":{"start":1760707859664,"stop":1760707859959,"duration":295},"status":"passed","steps":[{"name":"Click on Change site","time":{"start":1760707859664,"stop":1760707859959,"duration":295},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click delivery site 'Right arm (lower position)'","time":{"start":1760707859959,"stop":1760707860050,"duration":91},"status":"passed","steps":[{"name":"Click delivery site {1}","time":{"start":1760707859959,"stop":1760707860050,"duration":91},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<DeliverySite.RIGHT_ARM_LOWER: 'Right arm (lower position)'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Continue","time":{"start":1760707860050,"stop":1760707860806,"duration":756},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1760707860050,"stop":1760707860806,"duration":756},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Save changes","time":{"start":1760707860806,"stop":1760707862098,"duration":1292},"status":"passed","steps":[{"name":"Click on Save changes","time":{"start":1760707860806,"stop":1760707862098,"duration":1292},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":14,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"setup_recording_hpv::0","time":{"start":1760707878042,"stop":1760707879435,"duration":1393},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1760707878042,"stop":1760707878373,"duration":331},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1760707878042,"stop":1760707878373,"duration":331},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1760707878373,"stop":1760707878595,"duration":222},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1760707878373,"stop":1760707878595,"duration":222},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1760707878595,"stop":1760707878901,"duration":306},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1760707878595,"stop":1760707878901,"duration":306},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"log_in_as_nurse::0","time":{"start":1760707879439,"stop":1760707880357,"duration":918},"status":"passed","steps":[{"name":"Log out","time":{"start":1760707879439,"stop":1760707880357,"duration":918},"status":"passed","steps":[{"name":"Log out","time":{"start":1760707879439,"stop":1760707880357,"duration":918},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"set_feature_flags::0","time":{"start":1760707880357,"stop":1760707880357,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context::0","time":{"start":1760707880358,"stop":1760707880368,"duration":10},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1760707880369,"stop":1760707880369,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1760707880377,"stop":1760707880377,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1760707880388,"stop":1760707880508,"duration":120},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1760707880510,"stop":1760707880523,"duration":13},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests::0","time":{"start":1760707880524,"stop":1760707881430,"duration":906},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_imms_api_hpv"},{"name":"host","value":"runnervmwhb2z"},{"name":"thread","value":"5105-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_imms_api_hpv"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[]}],"tags":[]},"source":"4d983a09eb8890be.json","parameterValues":[]}