{"uid":"115359cbf1e0ad40","name":"test_create_edit_delete_injected_flu_vaccination_and_verify_imms_api","fullName":"tests.test_imms_api_flu#test_create_edit_delete_injected_flu_vaccination_and_verify_imms_api","historyId":"fcb8d2291937c8d402b3973f6e01e069","time":{"start":1760702282683,"stop":1760702312192,"duration":29509},"description":"\nTest: Create, edit, and delete an injected flu vaccination record and verify changes\nin the IMMS API and Mavis status.\nSteps:\n1. Setup: Schedule flu session, import class list, add vaccine batch, and\n   register child with verbal consent.\n2. Create: Record flu vaccination for the child (LEFT_ARM_UPPER).\n3. Verify: Check the vaccination record exists in the IMMS API.\n   Check Mavis shows \"Synced\".\n4. Edit: Change the delivery site to RIGHT_ARM_LOWER and save.\n5. Verify: Check the updated vaccination record in the IMMS API.\n   Check Mavis still shows \"Synced\".\n6. Edit: Change the outcome to \"They refused it\" and save.\n7. Verify: Check the vaccination record is removed from the IMMS API.\n   Check Mavis shows \"Not synced\".\n","descriptionHtml":"<p>Test: Create, edit, and delete an injected flu vaccination record and verify changes<br />\nin the IMMS API and Mavis status.<br />\nSteps:</p>\n<ol>\n<li>Setup: Schedule flu session, import class list, add vaccine batch, and<br />\nregister child with verbal consent.</li>\n<li>Create: Record flu vaccination for the child (LEFT_ARM_UPPER).</li>\n<li>Verify: Check the vaccination record exists in the IMMS API.<br />\nCheck Mavis shows &quot;Synced&quot;.</li>\n<li>Edit: Change the delivery site to RIGHT_ARM_LOWER and save.</li>\n<li>Verify: Check the updated vaccination record in the IMMS API.<br />\nCheck Mavis still shows &quot;Synced&quot;.</li>\n<li>Edit: Change the outcome to &quot;They refused it&quot; and save.</li>\n<li>Verify: Check the vaccination record is removed from the IMMS API.<br />\nCheck Mavis shows &quot;Not synced&quot;.</li>\n</ol>\n","status":"failed","statusMessage":"AssertionError: No immunization record found","statusTrace":"record_flu_with_consent_option = <function record_flu_with_consent_option.<locals>._factory at 0x7f069ee36f00>\nschools = {'HPV': [School(name='Debenham High School', urn='136416', site=None), School(name='Haverstock School', urn='100049', ... Surrey Teaching Centre', urn='134108', site=None), School(name='Saffron Valley Collegiate', urn='149606', site=None)]}\nimms_api_helper = <mavis.test.imms_api.ImmsApiHelper object at 0x7f06942dc830>\nsessions_page = <mavis.test.pages.sessions.SessionsPage object at 0x7f06942dd2b0>\nprogrammes_page = <mavis.test.pages.programmes.ProgrammesPage object at 0x7f068fec3250>\nchildren_page = <mavis.test.pages.children.ChildrenPage object at 0x7f068fac9fd0>\n\n    def test_create_edit_delete_injected_flu_vaccination_and_verify_imms_api(\n        record_flu_with_consent_option,\n        schools,\n        imms_api_helper,\n        sessions_page,\n        programmes_page,\n        children_page,\n    ):\n        \"\"\"\n        Test: Create, edit, and delete an injected flu vaccination record and verify changes\n        in the IMMS API and Mavis status.\n        Steps:\n        1. Setup: Schedule flu session, import class list, add vaccine batch, and\n           register child with verbal consent.\n        2. Create: Record flu vaccination for the child (LEFT_ARM_UPPER).\n        3. Verify: Check the vaccination record exists in the IMMS API.\n           Check Mavis shows \"Synced\".\n        4. Edit: Change the delivery site to RIGHT_ARM_LOWER and save.\n        5. Verify: Check the updated vaccination record in the IMMS API.\n           Check Mavis still shows \"Synced\".\n        6. Edit: Change the outcome to \"They refused it\" and save.\n        7. Verify: Check the vaccination record is removed from the IMMS API.\n           Check Mavis shows \"Not synced\".\n        \"\"\"\n        child, vaccination_time = record_flu_with_consent_option(ConsentOption.INJECTION)\n        school = schools[Programme.FLU][0]\n    \n        # Step 3: Verify creation in IMMS API\n>       imms_api_helper.check_record_in_imms_api(\n            Vaccine.SEQUIRUS,\n            child,\n            school,\n            DeliverySite.LEFT_ARM_UPPER,\n            vaccination_time,\n        )\n\ntests/test_imms_api_flu.py:131: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmavis/test/imms_api.py:95: in check_record_in_imms_api\n    self.check_expected_and_actual_records_match(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mavis.test.imms_api.ImmsApiHelper object at 0x7f06942dc830>\nexpected_record = ImmsApiVaccinationRecord(patient_nhs_number='9549151182', vaccine_code='43207411000001105', delivery_site=<DeliverySit...', vaccination_time=datetime.datetime(2025, 10, 17, 12, 58, 17, 341778, tzinfo=zoneinfo.ZoneInfo(key='Europe/London')))\nactual_record = None\n\n    def check_expected_and_actual_records_match(\n        self,\n        expected_record: ImmsApiVaccinationRecord,\n        actual_record: ImmsApiVaccinationRecord | None,\n    ) -> None:\n        if actual_record is None:\n            msg = \"No immunization record found\"\n>           raise AssertionError(msg)\nE           AssertionError: No immunization record found\n\nmavis/test/imms_api.py:114: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_verify_url","time":{"start":1760701735611,"stop":1760701735611,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1760701735611,"stop":1760701735611,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_session_faker","time":{"start":1760701735611,"stop":1760701735612,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"year_groups","time":{"start":1760701735612,"stop":1760701735613,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1760701735612,"stop":1760701735612,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1760701735612,"stop":1760701735612,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"programmes_enabled","time":{"start":1760701735613,"stop":1760701735613,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"onboarding","time":{"start":1760701735613,"stop":1760701747562,"duration":11949},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"schools","time":{"start":1760701747562,"stop":1760701747562,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"team","time":{"start":1760701747562,"stop":1760701747562,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests","time":{"start":1760701747562,"stop":1760701747562,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"nurse","time":{"start":1760701747562,"stop":1760701747562,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"organisation","time":{"start":1760701747563,"stop":1760701747563,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1760701747563,"stop":1760701747563,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1760701747563,"stop":1760701747909,"duration":346},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clinics","time":{"start":1760701747563,"stop":1760701747563,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1760701747909,"stop":1760701747910,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1760701747910,"stop":1760701747910,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1760701747910,"stop":1760701747910,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1760701747910,"stop":1760701747910,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1760701747910,"stop":1760701748009,"duration":99},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1760701748009,"stop":1760701748010,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1760701748010,"stop":1760701748012,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_credentials","time":{"start":1760701748012,"stop":1760701748012,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1760701748012,"stop":1760701748012,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_token","time":{"start":1760701748012,"stop":1760701748012,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"authenticate_api","time":{"start":1760702257104,"stop":1760702257902,"duration":798},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"imms_api_helper","time":{"start":1760702257903,"stop":1760702257903,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"reset_before_each_module","time":{"start":1760702257903,"stop":1760702258711,"duration":808},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1760702258711,"stop":1760702258712,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1760702258712,"stop":1760702258717,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1760702258712,"stop":1760702258712,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1760702258712,"stop":1760702258712,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1760702258717,"stop":1760702258741,"duration":24},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_page","time":{"start":1760702258741,"stop":1760702258742,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"flipper_page","time":{"start":1760702258741,"stop":1760702258741,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_feature_flags","time":{"start":1760702258741,"stop":1760702258741,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_as_nurse","time":{"start":1760702258742,"stop":1760702260802,"duration":2060},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1760702258742,"stop":1760702259777,"duration":1035},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1760702258742,"stop":1760702259777,"duration":1035},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Log in as User(username='marianrichardson@example.net', password='marianrichardson@example.net', role='nurse') and choose team Team(name='Hartley Group est. 1629', workgroup='L977Y', careplus_venue_code='L977Y', email='clive86@example.org', phone='+44(0)7700 900962')","time":{"start":1760702259778,"stop":1760702260802,"duration":1024},"status":"passed","steps":[{"name":"Log in as {1} and choose team {2}","time":{"start":1760702259778,"stop":1760702260802,"duration":1024},"status":"passed","steps":[{"name":"Log in as User(username='marianrichardson@example.net', password='marianrichardson@example.net', role='nurse')","time":{"start":1760702259778,"stop":1760702260758,"duration":980},"status":"passed","steps":[{"name":"Log in as {1}","time":{"start":1760702259778,"stop":1760702260758,"duration":980},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='marianrichardson@example.net', password='marianrichardson@example.net', role='nurse'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='marianrichardson@example.net', password='marianrichardson@example.net', role='nurse'), Team(name='Hartley Group est. 1629', workgroup='L977Y', careplus_venue_code='L977Y', email='clive86@example.org', phone='+44(0)7700 900962'))"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"add_batch_page","time":{"start":1760702260802,"stop":1760702260802,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"vaccines_page","time":{"start":1760702260802,"stop":1760702260802,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"add_vaccine_batch","time":{"start":1760702260802,"stop":1760702260803,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"children","time":{"start":1760702260803,"stop":1760702260809,"duration":6},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"dashboard_page","time":{"start":1760702260803,"stop":1760702260803,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_data","time":{"start":1760702260810,"stop":1760702260811,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"sessions_page","time":{"start":1760702260811,"stop":1760702260811,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_recording_flu","time":{"start":1760702260811,"stop":1760702282681,"duration":21870},"status":"passed","steps":[{"name":"Go to vaccines page","time":{"start":1760702260812,"stop":1760702260978,"duration":166},"status":"passed","steps":[{"name":"Go to vaccines page","time":{"start":1760702260812,"stop":1760702260978,"duration":166},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Add batch for 'Cell-based Trivalent Influenza Vaccine Seqirus'","time":{"start":1760702260978,"stop":1760702261151,"duration":173},"status":"passed","steps":[{"name":"Add batch for {1}","time":{"start":1760702260978,"stop":1760702261151,"duration":173},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Vaccine.SEQUIRUS: 'Cell-based Trivalent Influenza Vaccine Seqirus'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fill in name with 'ABC123'","time":{"start":1760702261151,"stop":1760702261180,"duration":29},"status":"passed","steps":[{"name":"Fill in name with {1}","time":{"start":1760702261151,"stop":1760702261180,"duration":29},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('ABC123',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fill in expiry date with datetime.date(2025, 10, 18)","time":{"start":1760702261180,"stop":1760702261208,"duration":28},"status":"passed","steps":[{"name":"Fill in expiry date with {1}","time":{"start":1760702261180,"stop":1760702261208,"duration":28},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(datetime.date(2025, 10, 18),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Confirm add batch","time":{"start":1760702261208,"stop":1760702261528,"duration":320},"status":"passed","steps":[{"name":"Confirm add batch","time":{"start":1760702261208,"stop":1760702261528,"duration":320},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Go to vaccines page","time":{"start":1760702261528,"stop":1760702261693,"duration":165},"status":"passed","steps":[{"name":"Go to vaccines page","time":{"start":1760702261528,"stop":1760702261693,"duration":165},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Add batch for 'Fluenz'","time":{"start":1760702261694,"stop":1760702261873,"duration":179},"status":"passed","steps":[{"name":"Add batch for {1}","time":{"start":1760702261694,"stop":1760702261873,"duration":179},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Vaccine.FLUENZ: 'Fluenz'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fill in name with 'ABC123'","time":{"start":1760702261873,"stop":1760702261893,"duration":20},"status":"passed","steps":[{"name":"Fill in name with {1}","time":{"start":1760702261873,"stop":1760702261893,"duration":20},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('ABC123',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fill in expiry date with datetime.date(2025, 10, 18)","time":{"start":1760702261893,"stop":1760702261923,"duration":30},"status":"passed","steps":[{"name":"Fill in expiry date with {1}","time":{"start":1760702261893,"stop":1760702261923,"duration":30},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(datetime.date(2025, 10, 18),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Confirm add batch","time":{"start":1760702261923,"stop":1760702262307,"duration":384},"status":"passed","steps":[{"name":"Confirm add batch","time":{"start":1760702261923,"stop":1760702262307,"duration":384},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1760702262307,"stop":1760702262490,"duration":183},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1760702262308,"stop":1760702262490,"duration":182},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1760702262490,"stop":1760702262722,"duration":232},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1760702262490,"stop":1760702262722,"duration":232},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'flu' session at School(name='The Surrey Teaching Centre', urn='134108', site=None)","time":{"start":1760702262722,"stop":1760702263350,"duration":628},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1760702262722,"stop":1760702263350,"duration":628},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='The Surrey Teaching Centre', urn='134108', site=None), <Programme.FLU: 'flu'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fill date fields with '20251017'","time":{"start":1760702263871,"stop":1760702263897,"duration":26},"status":"passed","steps":[{"name":"Fill date fields with {1}","time":{"start":1760702263871,"stop":1760702263897,"duration":26},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('20251017',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Continue","time":{"start":1760702263898,"stop":1760702264366,"duration":468},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1760702263898,"stop":1760702264366,"duration":468},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Save changes","time":{"start":1760702264391,"stop":1760702265025,"duration":634},"status":"passed","steps":[{"name":"Click Save changes","time":{"start":1760702264391,"stop":1760702265025,"duration":634},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Import class lists","time":{"start":1760702265025,"stop":1760702266507,"duration":1482},"status":"passed","steps":[{"name":"Click on Import class lists","time":{"start":1760702265025,"stop":1760702266507,"duration":1482},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1760702266553,"stop":1760702267161,"duration":608},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1760702266553,"stop":1760702267161,"duration":608},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Set input file to PosixPath('working/ClassFileMapping.FIXED_CHILD20251017125747.csv')","time":{"start":1760702267176,"stop":1760702267195,"duration":19},"status":"passed","steps":[{"name":"Set input file to {1}","time":{"start":1760702267176,"stop":1760702267195,"duration":19},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(PosixPath('working/ClassFileMapping.FIXED_CHILD20251017125747.csv'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1760702267196,"stop":1760702267533,"duration":337},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1760702267196,"stop":1760702267533,"duration":337},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"_coverage","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click link with uploaded datetime","time":{"start":1760702267558,"stop":1760702267748,"duration":190},"status":"passed","steps":[{"name":"Click link with uploaded datetime","time":{"start":1760702267558,"stop":1760702267747,"duration":189},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1760702281564,"stop":1760702281737,"duration":173},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1760702281564,"stop":1760702281737,"duration":173},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1760702281737,"stop":1760702281942,"duration":205},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1760702281738,"stop":1760702281942,"duration":204},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'flu' session at School(name='The Surrey Teaching Centre', urn='134108', site=None)","time":{"start":1760702281942,"stop":1760702282446,"duration":504},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1760702281942,"stop":1760702282446,"duration":504},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='The Surrey Teaching Centre', urn='134108', site=None), <Programme.FLU: 'flu'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Consent tab","time":{"start":1760702282447,"stop":1760702282681,"duration":234},"status":"passed","steps":[{"name":"Click on Consent tab","time":{"start":1760702282447,"stop":1760702282681,"duration":234},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":50,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"import_records_page","time":{"start":1760702260811,"stop":1760702260811,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"children_page","time":{"start":1760702282681,"stop":1760702282681,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"verbal_consent_page","time":{"start":1760702282681,"stop":1760702282682,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"record_flu_with_consent_option","time":{"start":1760702282682,"stop":1760702282682,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"programmes_page","time":{"start":1760702282682,"stop":1760702282682,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\nTest: Create, edit, and delete an injected flu vaccination record and verify changes\nin the IMMS API and Mavis status.\nSteps:\n1. Setup: Schedule flu session, import class list, add vaccine batch, and\n   register child with verbal consent.\n2. Create: Record flu vaccination for the child (LEFT_ARM_UPPER).\n3. Verify: Check the vaccination record exists in the IMMS API.\n   Check Mavis shows \"Synced\".\n4. Edit: Change the delivery site to RIGHT_ARM_LOWER and save.\n5. Verify: Check the updated vaccination record in the IMMS API.\n   Check Mavis still shows \"Synced\".\n6. Edit: Change the outcome to \"They refused it\" and save.\n7. Verify: Check the vaccination record is removed from the IMMS API.\n   Check Mavis shows \"Not synced\".\n","status":"failed","statusMessage":"AssertionError: No immunization record found","statusTrace":"record_flu_with_consent_option = <function record_flu_with_consent_option.<locals>._factory at 0x7f069ee36f00>\nschools = {'HPV': [School(name='Debenham High School', urn='136416', site=None), School(name='Haverstock School', urn='100049', ... Surrey Teaching Centre', urn='134108', site=None), School(name='Saffron Valley Collegiate', urn='149606', site=None)]}\nimms_api_helper = <mavis.test.imms_api.ImmsApiHelper object at 0x7f06942dc830>\nsessions_page = <mavis.test.pages.sessions.SessionsPage object at 0x7f06942dd2b0>\nprogrammes_page = <mavis.test.pages.programmes.ProgrammesPage object at 0x7f068fec3250>\nchildren_page = <mavis.test.pages.children.ChildrenPage object at 0x7f068fac9fd0>\n\n    def test_create_edit_delete_injected_flu_vaccination_and_verify_imms_api(\n        record_flu_with_consent_option,\n        schools,\n        imms_api_helper,\n        sessions_page,\n        programmes_page,\n        children_page,\n    ):\n        \"\"\"\n        Test: Create, edit, and delete an injected flu vaccination record and verify changes\n        in the IMMS API and Mavis status.\n        Steps:\n        1. Setup: Schedule flu session, import class list, add vaccine batch, and\n           register child with verbal consent.\n        2. Create: Record flu vaccination for the child (LEFT_ARM_UPPER).\n        3. Verify: Check the vaccination record exists in the IMMS API.\n           Check Mavis shows \"Synced\".\n        4. Edit: Change the delivery site to RIGHT_ARM_LOWER and save.\n        5. Verify: Check the updated vaccination record in the IMMS API.\n           Check Mavis still shows \"Synced\".\n        6. Edit: Change the outcome to \"They refused it\" and save.\n        7. Verify: Check the vaccination record is removed from the IMMS API.\n           Check Mavis shows \"Not synced\".\n        \"\"\"\n        child, vaccination_time = record_flu_with_consent_option(ConsentOption.INJECTION)\n        school = schools[Programme.FLU][0]\n    \n        # Step 3: Verify creation in IMMS API\n>       imms_api_helper.check_record_in_imms_api(\n            Vaccine.SEQUIRUS,\n            child,\n            school,\n            DeliverySite.LEFT_ARM_UPPER,\n            vaccination_time,\n        )\n\ntests/test_imms_api_flu.py:131: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmavis/test/imms_api.py:95: in check_record_in_imms_api\n    self.check_expected_and_actual_records_match(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mavis.test.imms_api.ImmsApiHelper object at 0x7f06942dc830>\nexpected_record = ImmsApiVaccinationRecord(patient_nhs_number='9549151182', vaccine_code='43207411000001105', delivery_site=<DeliverySit...', vaccination_time=datetime.datetime(2025, 10, 17, 12, 58, 17, 341778, tzinfo=zoneinfo.ZoneInfo(key='Europe/London')))\nactual_record = None\n\n    def check_expected_and_actual_records_match(\n        self,\n        expected_record: ImmsApiVaccinationRecord,\n        actual_record: ImmsApiVaccinationRecord | None,\n    ) -> None:\n        if actual_record is None:\n            msg = \"No immunization record found\"\n>           raise AssertionError(msg)\nE           AssertionError: No immunization record found\n\nmavis/test/imms_api.py:114: AssertionError","steps":[{"name":"Click on child Child(first_name='Frederick', last_name='MOSS', nhs_number='9549151182', address=('Flat 35P', 'Hayley extension', 'Carterfort', 'M9K 9FG'), date_of_birth=datetime.date(2012, 3, 4), year_group=9, parents=(Parent(full_name='Mathew Smith', relationship='Dad', email_address='alicebull@example.com'), Parent(full_name='Dr Kim Smith', relationship='Mum', email_address='ylambert@example.org')))","time":{"start":1760702282945,"stop":1760702283172,"duration":227},"status":"passed","steps":[{"name":"Click on child {1}","time":{"start":1760702282945,"stop":1760702283172,"duration":227},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(Child(first_name='Frederick', last_name='MOSS', nhs_number='9549151182', address=('Flat 35P', 'Hayley extension', 'Carterfort', 'M9K 9FG'), date_of_birth=datetime.date(2012, 3, 4), year_group=9, parents=(Parent(full_name='Mathew Smith', relationship='Dad', email_address='alicebull@example.com'), Parent(full_name='Dr Kim Smith', relationship='Mum', email_address='ylambert@example.org'))),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'flu' tab","time":{"start":1760702283172,"stop":1760702283188,"duration":16},"status":"passed","steps":[{"name":"Click on {1} tab","time":{"start":1760702283172,"stop":1760702283188,"duration":16},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Programme.FLU: 'flu'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Record a new consent response","time":{"start":1760702283188,"stop":1760702284697,"duration":1509},"status":"passed","steps":[{"name":"Click on Record a new consent response","time":{"start":1760702283188,"stop":1760702284697,"duration":1509},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'Mathew Smith (Dad)' radio button","time":{"start":1760702284697,"stop":1760702284752,"duration":55},"status":"passed","steps":[{"name":"Click on {1} radio button","time":{"start":1760702284697,"stop":1760702284752,"duration":55},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('Mathew Smith (Dad)',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1760702284753,"stop":1760702285221,"duration":468},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1760702284753,"stop":1760702285221,"duration":468},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1760702285221,"stop":1760702285586,"duration":365},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1760702285221,"stop":1760702285586,"duration":365},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select consent method","time":{"start":1760702285586,"stop":1760702285653,"duration":67},"status":"passed","steps":[{"name":"Select consent method","time":{"start":1760702285586,"stop":1760702285653,"duration":67},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<ConsentMethod.IN_PERSON: 'In person'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1760702285653,"stop":1760702286112,"duration":459},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1760702285653,"stop":1760702286112,"duration":459},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Yes, for the injected vaccine only","time":{"start":1760702286112,"stop":1760702286171,"duration":59},"status":"passed","steps":[{"name":"Click on Yes, for the injected vaccine only","time":{"start":1760702286112,"stop":1760702286171,"duration":59},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1760702286171,"stop":1760702286920,"duration":749},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1760702286171,"stop":1760702286920,"duration":749},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Does your child have a bleeding disorder or are they taking anticoagulant therapy?'","time":{"start":1760702286920,"stop":1760702286971,"duration":51},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1760702286920,"stop":1760702286971,"duration":51},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.BLEEDING_DISORDER_FLU: 'Does your child have a bleeding disorder or are they taking anticoagulant therapy?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Has your child had a severe allergic reaction (anaphylaxis) to a previous dose of the injected flu vaccine, or any ingredient of the vaccine?'","time":{"start":1760702286971,"stop":1760702287005,"duration":34},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1760702286971,"stop":1760702287005,"duration":34},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.SEVERE_ALLERGIC_REACTION_INJECTED: 'Has your child had a severe allergic reaction (anaphylaxis) to a previous dose of the injected flu vaccine, or any ingredient of the vaccine?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Does your child have any other medical conditions the immunisation team should be aware of?'","time":{"start":1760702287005,"stop":1760702287037,"duration":32},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1760702287005,"stop":1760702287037,"duration":32},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.MEDICAL_CONDITIONS_FLU: 'Does your child have any other medical conditions the immunisation team should be aware of?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Has your child had a flu vaccination in the last 3 months?'","time":{"start":1760702287037,"stop":1760702287069,"duration":32},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1760702287037,"stop":1760702287069,"duration":32},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.FLU_PREVIOUSLY: 'Has your child had a flu vaccination in the last 3 months?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Does your child need extra support during vaccination sessions?'","time":{"start":1760702287069,"stop":1760702287103,"duration":34},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1760702287069,"stop":1760702287103,"duration":34},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.EXTRA_SUPPORT: 'Does your child need extra support during vaccination sessions?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1760702287103,"stop":1760702288232,"duration":1129},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1760702287103,"stop":1760702288232,"duration":1129},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Confirm","time":{"start":1760702288232,"stop":1760702289187,"duration":955},"status":"passed","steps":[{"name":"Click Confirm","time":{"start":1760702288235,"stop":1760702289187,"duration":952},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Register tab","time":{"start":1760702289187,"stop":1760702290048,"duration":861},"status":"passed","steps":[{"name":"Click on Register tab","time":{"start":1760702289187,"stop":1760702290048,"duration":861},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Search for 'MOSS, Frederick'","time":{"start":1760702290048,"stop":1760702290540,"duration":492},"status":"passed","steps":[{"name":"Search for {1}","time":{"start":1760702290048,"stop":1760702290540,"duration":492},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('MOSS, Frederick',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Attending","time":{"start":1760702290540,"stop":1760702291773,"duration":1233},"status":"passed","steps":[{"name":"Click on Attending","time":{"start":1760702290540,"stop":1760702291773,"duration":1233},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Record vaccinations","time":{"start":1760702291773,"stop":1760702292623,"duration":850},"status":"passed","steps":[{"name":"Click on Record vaccinations","time":{"start":1760702291773,"stop":1760702292623,"duration":850},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Search for 'MOSS, Frederick'","time":{"start":1760702292623,"stop":1760702292862,"duration":239},"status":"passed","steps":[{"name":"Search for {1}","time":{"start":1760702292623,"stop":1760702292862,"duration":239},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('MOSS, Frederick',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'flu' tab","time":{"start":1760702293162,"stop":1760702293189,"duration":27},"status":"passed","steps":[{"name":"Click on {1} tab","time":{"start":1760702293162,"stop":1760702293188,"duration":26},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Programme.FLU: 'flu'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Confirm pre-screening checks are true","time":{"start":1760702293189,"stop":1760702293237,"duration":48},"status":"passed","steps":[{"name":"Confirm pre-screening checks are true","time":{"start":1760702293189,"stop":1760702293237,"duration":48},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Programme.FLU: 'flu'>, <ConsentOption.INJECTION: 'Injection'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Yes","time":{"start":1760702293249,"stop":1760702293260,"duration":11},"status":"passed","steps":[{"name":"Click on Yes","time":{"start":1760702293249,"stop":1760702293260,"duration":11},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(Child(first_name='Frederick', last_name='MOSS', nhs_number='9549151182', address=('Flat 35P', 'Hayley extension', 'Carterfort', 'M9K 9FG'), date_of_birth=datetime.date(2012, 3, 4), year_group=9, parents=(Parent(full_name='Mathew Smith', relationship='Dad', email_address='alicebull@example.com'), Parent(full_name='Dr Kim Smith', relationship='Mum', email_address='ylambert@example.org'))),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Yes","time":{"start":1760702293260,"stop":1760702293289,"duration":29},"status":"passed","steps":[{"name":"Click on Yes","time":{"start":1760702293260,"stop":1760702293289,"duration":29},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<ConsentOption.INJECTION: 'Injection'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select vaccination site 'Left arm (upper position)'","time":{"start":1760702293290,"stop":1760702293339,"duration":49},"status":"passed","steps":[{"name":"Select vaccination site {1}","time":{"start":1760702293290,"stop":1760702293339,"duration":49},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<DeliverySite.LEFT_ARM_UPPER: 'Left arm (upper position)'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Continue","time":{"start":1760702293339,"stop":1760702293940,"duration":601},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1760702293339,"stop":1760702293940,"duration":601},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Choose batch 'ABC123'","time":{"start":1760702293940,"stop":1760702294632,"duration":692},"status":"passed","steps":[{"name":"Choose batch {1}","time":{"start":1760702293940,"stop":1760702294632,"duration":692},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1760702293986,"stop":1760702294632,"duration":646},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1760702293986,"stop":1760702294632,"duration":646},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('ABC123',)"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Confirm","time":{"start":1760702294674,"stop":1760702297319,"duration":2645},"status":"passed","steps":[{"name":"Click on Confirm","time":{"start":1760702294674,"stop":1760702297319,"duration":2645},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":62,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"setup_recording_flu::0","time":{"start":1760702312199,"stop":1760702313045,"duration":846},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1760702312199,"stop":1760702312342,"duration":143},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1760702312199,"stop":1760702312342,"duration":143},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1760702312342,"stop":1760702312517,"duration":175},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1760702312342,"stop":1760702312517,"duration":175},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1760702312518,"stop":1760702312717,"duration":199},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1760702312518,"stop":1760702312717,"duration":199},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"log_in_as_nurse::0","time":{"start":1760702313047,"stop":1760702313438,"duration":391},"status":"passed","steps":[{"name":"Log out","time":{"start":1760702313047,"stop":1760702313438,"duration":391},"status":"passed","steps":[{"name":"Log out","time":{"start":1760702313047,"stop":1760702313438,"duration":391},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"set_feature_flags::0","time":{"start":1760702313440,"stop":1760702313440,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context::0","time":{"start":1760702313441,"stop":1760702313453,"duration":12},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1760702313453,"stop":1760702313453,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1760702432696,"stop":1760702432696,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1760702432699,"stop":1760702432724,"duration":25},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1760702432725,"stop":1760702432734,"duration":9},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests::0","time":{"start":1760702432736,"stop":1760702433384,"duration":648},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_imms_api_flu"},{"name":"host","value":"runnervmwhb2z"},{"name":"thread","value":"2182-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_imms_api_flu"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[]}],"tags":[]},"source":"115359cbf1e0ad40.json","parameterValues":[]}