{"uid":"ae709a682d16103a","name":"test_delivering_vaccination_after_psd","fullName":"tests.test_psd#test_delivering_vaccination_after_psd","historyId":"723ed09244e3d30b8d56ef40786d9cf2","time":{"start":1759222522489,"stop":1759222536438,"duration":13949},"description":"\nTest: A PSD can be created for a child and the vaccination can be\n   administered by a healthcare assistant.\nSteps:\n1. Import child records and set up a session with PSD enabled.\n2. Record verbal consent with PSD option for the child.\n3. Verify the PSD is created.\n4. Log in as a healthcare assistant and administer the vaccination.\nVerification:\n- The PSD is correctly created and the vaccination is recorded without errors.\n","descriptionHtml":"<p>Test: A PSD can be created for a child and the vaccination can be<br />\nadministered by a healthcare assistant.<br />\nSteps:</p>\n<ol>\n<li>Import child records and set up a session with PSD enabled.</li>\n<li>Record verbal consent with PSD option for the child.</li>\n<li>Verify the PSD is created.</li>\n<li>Log in as a healthcare assistant and administer the vaccination.<br />\nVerification:</li>\n</ol>\n<ul>\n<li>The PSD is correctly created and the vaccination is recorded without errors.</li>\n</ul>\n","status":"failed","statusMessage":"AssertionError: Locator expected to contain text 'PSD added'\nActual value: \n      \n        SULLIVAN, Owen\n\n\n\n\n        \n\n      Date of birth14 October 2018 (aged 6)Year groupYear 2, 8T5PSD statusPSD not added\n\n\n      \n     \nCall log:\n  - Expect \"to_contain_text\" with timeout 5000ms\n  - waiting for locator(\"div.nhsuk-card.app-card.app-card--compact:has(h4:has-text(\\\"SULLIVAN, Owen\\\"))\")\n    9 × locator resolved to <div class=\"nhsuk-card nhsuk-card--clickable app-card app-card--compact\">…</div>\n      - unexpected value \"\n      \n        SULLIVAN, Owen\n\n\n\n\n        \n\n      Date of birth14 October 2018 (aged 6)Year groupYear 2, 8T5PSD statusPSD not added\n\n\n      \n    \"","statusTrace":"setup_session_with_one_child = 'ABC123'\nsessions_page = <mavis.test.pages.sessions.SessionsPage object at 0x7f4f6f3eee90>\nschools = {'HPV': [School(name='Bromley Trust Alternative Provision Academy', urn='141116', site=None), School(name='Uppingham C...tle Reddings Primary School', urn='137861', site=None), School(name='Gotham Primary School', urn='122644', site=None)]}\nverbal_consent_page = <mavis.test.pages.verbal_consent.VerbalConsentPage object at 0x7f4f57e27360>\nchildren = {'HPV': [Child(first_name='Conor', last_name='KNIGHT', nhs_number='9870695027', address=('Flat 7', 'Jacqueline mount',....org'), Parent(full_name='Elizabeth Griffiths-Nicholson', relationship='Mum', email_address='sarabull@example.com')))]}\nlog_in_page = <mavis.test.pages.log_in.LogInPage object at 0x7f4f57f9d3b0>\nhealthcare_assistant = User(username='pamelagraham@example.com', password='pamelagraham@example.com', role='healthcare_assistant')\nteam = Team(name='Clarke-Cunningham est. 1788', workgroup='O425O', careplus_venue_code='O425O', email='sharon57@example.org', phone='(07700) 900 236')\ndashboard_page = <mavis.test.pages.dashboard.DashboardPage object at 0x7f4f582af3e0>\n\n    def test_delivering_vaccination_after_psd(\n        setup_session_with_one_child,\n        sessions_page,\n        schools,\n        verbal_consent_page,\n        children,\n        log_in_page,\n        healthcare_assistant,\n        team,\n        dashboard_page,\n    ):\n        \"\"\"\n        Test: A PSD can be created for a child and the vaccination can be\n           administered by a healthcare assistant.\n        Steps:\n        1. Import child records and set up a session with PSD enabled.\n        2. Record verbal consent with PSD option for the child.\n        3. Verify the PSD is created.\n        4. Log in as a healthcare assistant and administer the vaccination.\n        Verification:\n        - The PSD is correctly created and the vaccination is recorded without errors.\n        \"\"\"\n        child = children[Programme.FLU][0]\n        school = schools[Programme.FLU][0]\n        fluenz_batch_name = setup_session_with_one_child\n    \n        sessions_page.click_session_for_programme_group(school, Programme.FLU)\n        sessions_page.click_edit_session()\n        sessions_page.click_change_psd()\n        sessions_page.answer_whether_psd_should_be_enabled(\"Yes\")\n        sessions_page.click_continue_button()\n        sessions_page.click_continue_link()\n    \n        sessions_page.click_consent_tab()\n        sessions_page.search_child(child)\n        sessions_page.click_programme_tab(Programme.FLU)\n        sessions_page.click_record_a_new_consent_response()\n        verbal_consent_page.parent_verbal_positive(\n            parent=child.parents[0],\n            change_phone=False,\n            programme=Programme.FLU,\n            consent_option=ConsentOption.BOTH,\n            psd_option=True,\n        )\n        sessions_page.click_psds_tab()\n        sessions_page.search_for(str(child))\n>       sessions_page.check_child_has_psd(child)\n\ntests/test_psd.py:116: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mavis.test.pages.sessions.SessionsPage object at 0x7f4f6f3eee90>\nchild = Child(first_name='Owen', last_name='SULLIVAN', nhs_number='9783950096', address=('Studio 93', 'Ashleigh inlet', 'Parry...becca37@example.net'), Parent(full_name='Dr Rachael Young', relationship='Mum', email_address='stacey47@example.com')))\n\n    def check_child_has_psd(self, child: Child) -> None:\n        patient_card = self.page.locator(\n            f'div.nhsuk-card.app-card.app-card--compact:has(h4:has-text(\"{child!s}\"))'\n        )\n>       expect(patient_card).to_contain_text(\"PSD added\")\nE       AssertionError: Locator expected to contain text 'PSD added'\nE       Actual value: \nE             \nE               SULLIVAN, Owen\nE       \nE       \nE       \nE       \nE               \nE       \nE             Date of birth14 October 2018 (aged 6)Year groupYear 2, 8T5PSD statusPSD not added\nE       \nE       \nE             \nE            \nE       Call log:\nE         - Expect \"to_contain_text\" with timeout 5000ms\nE         - waiting for locator(\"div.nhsuk-card.app-card.app-card--compact:has(h4:has-text(\\\"SULLIVAN, Owen\\\"))\")\nE           9 × locator resolved to <div class=\"nhsuk-card nhsuk-card--clickable app-card app-card--compact\">…</div>\nE             - unexpected value \"\nE             \nE               SULLIVAN, Owen\nE       \nE       \nE       \nE       \nE               \nE       \nE             Date of birth14 October 2018 (aged 6)Year groupYear 2, 8T5PSD statusPSD not added\nE       \nE       \nE             \nE           \"\n\nmavis/test/pages/sessions.py:875: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":2,"retriesStatusChange":false,"beforeStages":[{"name":"_verify_url","time":{"start":1759221965809,"stop":1759221965809,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_session_faker","time":{"start":1759221965809,"stop":1759221965810,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1759221965809,"stop":1759221965809,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1759221965810,"stop":1759221965811,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1759221965810,"stop":1759221965810,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"programmes_enabled","time":{"start":1759221965811,"stop":1759221965811,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"year_groups","time":{"start":1759221965811,"stop":1759221965811,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"onboarding","time":{"start":1759221965812,"stop":1759221978929,"duration":13117},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"team","time":{"start":1759221978929,"stop":1759221978929,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests","time":{"start":1759221978929,"stop":1759221978929,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"schools","time":{"start":1759221978929,"stop":1759221978929,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"nurse","time":{"start":1759221978930,"stop":1759221978930,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1759221978930,"stop":1759221978930,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1759221978930,"stop":1759221979227,"duration":297},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1759221979227,"stop":1759221979228,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1759221979227,"stop":1759221979227,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1759221979228,"stop":1759221979228,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1759221979228,"stop":1759221979228,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1759221979228,"stop":1759221979546,"duration":318},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1759221979547,"stop":1759221979547,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1759221979547,"stop":1759221979548,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_credentials","time":{"start":1759221979548,"stop":1759221979548,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_token","time":{"start":1759221979548,"stop":1759221979548,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"organisation","time":{"start":1759221979548,"stop":1759221979548,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1759221979548,"stop":1759221979548,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clinics","time":{"start":1759221979548,"stop":1759221979548,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"healthcare_assistant","time":{"start":1759222167099,"stop":1759222167099,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"prescriber","time":{"start":1759222167099,"stop":1759222167099,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"reset_before_each_module","time":{"start":1759222458333,"stop":1759222460452,"duration":2119},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1759222512499,"stop":1759222512499,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1759222512499,"stop":1759222512499,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1759222512499,"stop":1759222512499,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1759222512499,"stop":1759222512504,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1759222512504,"stop":1759222512529,"duration":25},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"flipper_page","time":{"start":1759222512530,"stop":1759222512530,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_as_prescriber","time":{"start":1759222512530,"stop":1759222514445,"duration":1915},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1759222512530,"stop":1759222513489,"duration":959},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1759222512530,"stop":1759222513489,"duration":959},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Log in as User(username='gordonmarshall@example.org', password='gordonmarshall@example.org', role='prescriber') and choose team Team(name='Clarke-Cunningham est. 1788', workgroup='O425O', careplus_venue_code='O425O', email='sharon57@example.org', phone='(07700) 900 236')","time":{"start":1759222513489,"stop":1759222514445,"duration":956},"status":"passed","steps":[{"name":"Log in as {1} and choose team {2}","time":{"start":1759222513489,"stop":1759222514445,"duration":956},"status":"passed","steps":[{"name":"Log in as User(username='gordonmarshall@example.org', password='gordonmarshall@example.org', role='prescriber')","time":{"start":1759222513489,"stop":1759222514419,"duration":930},"status":"passed","steps":[{"name":"Log in as {1}","time":{"start":1759222513489,"stop":1759222514419,"duration":930},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='gordonmarshall@example.org', password='gordonmarshall@example.org', role='prescriber'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='gordonmarshall@example.org', password='gordonmarshall@example.org', role='prescriber'), Team(name='Clarke-Cunningham est. 1788', workgroup='O425O', careplus_venue_code='O425O', email='sharon57@example.org', phone='(07700) 900 236'))"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"set_feature_flags","time":{"start":1759222512530,"stop":1759222512530,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_page","time":{"start":1759222512530,"stop":1759222512530,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"children","time":{"start":1759222514445,"stop":1759222514447,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"dashboard_page","time":{"start":1759222514445,"stop":1759222514445,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_data","time":{"start":1759222514448,"stop":1759222514448,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"sessions_page","time":{"start":1759222514448,"stop":1759222514449,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"add_batch_page","time":{"start":1759222514449,"stop":1759222514449,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"import_records_page","time":{"start":1759222514449,"stop":1759222514449,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"vaccines_page","time":{"start":1759222514449,"stop":1759222514449,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_session_with_file_upload","time":{"start":1759222514449,"stop":1759222514449,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_session_with_one_child","time":{"start":1759222514449,"stop":1759222522489,"duration":8040},"status":"passed","steps":[{"name":"Go to vaccines page","time":{"start":1759222514449,"stop":1759222514700,"duration":251},"status":"passed","steps":[{"name":"Go to vaccines page","time":{"start":1759222514449,"stop":1759222514700,"duration":251},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Add batch for 'Fluenz'","time":{"start":1759222514700,"stop":1759222514977,"duration":277},"status":"passed","steps":[{"name":"Add batch for {1}","time":{"start":1759222514700,"stop":1759222514977,"duration":277},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Vaccine.FLUENZ: 'Fluenz'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fill in name with 'ABC123'","time":{"start":1759222514978,"stop":1759222514999,"duration":21},"status":"passed","steps":[{"name":"Fill in name with {1}","time":{"start":1759222514978,"stop":1759222514999,"duration":21},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('ABC123',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Fill in expiry date with datetime.date(2025, 10, 1)","time":{"start":1759222514999,"stop":1759222515020,"duration":21},"status":"passed","steps":[{"name":"Fill in expiry date with {1}","time":{"start":1759222514999,"stop":1759222515020,"duration":21},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(datetime.date(2025, 10, 1),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Confirm add batch","time":{"start":1759222515020,"stop":1759222515310,"duration":290},"status":"passed","steps":[{"name":"Confirm add batch","time":{"start":1759222515020,"stop":1759222515310,"duration":290},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1759222515310,"stop":1759222515582,"duration":272},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1759222515310,"stop":1759222515582,"duration":272},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1759222515582,"stop":1759222515948,"duration":366},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1759222515582,"stop":1759222515948,"duration":366},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'flu' session at School(name='Little Reddings Primary School', urn='137861', site=None)","time":{"start":1759222515948,"stop":1759222516694,"duration":746},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1759222515948,"stop":1759222516694,"duration":746},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='Little Reddings Primary School', urn='137861', site=None), <Programme.FLU: 'flu'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1759222516699,"stop":1759222516962,"duration":263},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1759222516699,"stop":1759222516962,"duration":263},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1759222516962,"stop":1759222517268,"duration":306},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1759222516962,"stop":1759222517268,"duration":306},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'flu' session at School(name='Little Reddings Primary School', urn='137861', site=None)","time":{"start":1759222517268,"stop":1759222517983,"duration":715},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1759222517268,"stop":1759222517983,"duration":715},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='Little Reddings Primary School', urn='137861', site=None), <Programme.FLU: 'flu'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Import class lists","time":{"start":1759222517984,"stop":1759222518360,"duration":376},"status":"passed","steps":[{"name":"Click on Import class lists","time":{"start":1759222517984,"stop":1759222518360,"duration":376},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1759222518406,"stop":1759222518911,"duration":505},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1759222518406,"stop":1759222518911,"duration":505},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Set input file to PosixPath('working/ClassFileMapping.FIXED_CHILD20250930095518.csv')","time":{"start":1759222518924,"stop":1759222518943,"duration":19},"status":"passed","steps":[{"name":"Set input file to {1}","time":{"start":1759222518924,"stop":1759222518943,"duration":19},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(PosixPath('working/ClassFileMapping.FIXED_CHILD20250930095518.csv'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1759222518943,"stop":1759222519376,"duration":433},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1759222518943,"stop":1759222519376,"duration":433},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"_coverage","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click link with uploaded datetime","time":{"start":1759222519408,"stop":1759222519689,"duration":281},"status":"passed","steps":[{"name":"Click link with uploaded datetime","time":{"start":1759222519408,"stop":1759222519689,"duration":281},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1759222520643,"stop":1759222520895,"duration":252},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1759222520643,"stop":1759222520895,"duration":252},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1759222520895,"stop":1759222521204,"duration":309},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1759222520895,"stop":1759222521204,"duration":309},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Go to dashboard","time":{"start":1759222521204,"stop":1759222521437,"duration":233},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1759222521204,"stop":1759222521437,"duration":233},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1759222521438,"stop":1759222521717,"duration":279},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1759222521438,"stop":1759222521717,"duration":279},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1759222521717,"stop":1759222522024,"duration":307},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1759222521717,"stop":1759222522024,"duration":307},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":42,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"add_vaccine_batch","time":{"start":1759222514449,"stop":1759222514449,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"verbal_consent_page","time":{"start":1759222522489,"stop":1759222522489,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\nTest: A PSD can be created for a child and the vaccination can be\n   administered by a healthcare assistant.\nSteps:\n1. Import child records and set up a session with PSD enabled.\n2. Record verbal consent with PSD option for the child.\n3. Verify the PSD is created.\n4. Log in as a healthcare assistant and administer the vaccination.\nVerification:\n- The PSD is correctly created and the vaccination is recorded without errors.\n","status":"failed","statusMessage":"AssertionError: Locator expected to contain text 'PSD added'\nActual value: \n      \n        SULLIVAN, Owen\n\n\n\n\n        \n\n      Date of birth14 October 2018 (aged 6)Year groupYear 2, 8T5PSD statusPSD not added\n\n\n      \n     \nCall log:\n  - Expect \"to_contain_text\" with timeout 5000ms\n  - waiting for locator(\"div.nhsuk-card.app-card.app-card--compact:has(h4:has-text(\\\"SULLIVAN, Owen\\\"))\")\n    9 × locator resolved to <div class=\"nhsuk-card nhsuk-card--clickable app-card app-card--compact\">…</div>\n      - unexpected value \"\n      \n        SULLIVAN, Owen\n\n\n\n\n        \n\n      Date of birth14 October 2018 (aged 6)Year groupYear 2, 8T5PSD statusPSD not added\n\n\n      \n    \"","statusTrace":"setup_session_with_one_child = 'ABC123'\nsessions_page = <mavis.test.pages.sessions.SessionsPage object at 0x7f4f6f3eee90>\nschools = {'HPV': [School(name='Bromley Trust Alternative Provision Academy', urn='141116', site=None), School(name='Uppingham C...tle Reddings Primary School', urn='137861', site=None), School(name='Gotham Primary School', urn='122644', site=None)]}\nverbal_consent_page = <mavis.test.pages.verbal_consent.VerbalConsentPage object at 0x7f4f57e27360>\nchildren = {'HPV': [Child(first_name='Conor', last_name='KNIGHT', nhs_number='9870695027', address=('Flat 7', 'Jacqueline mount',....org'), Parent(full_name='Elizabeth Griffiths-Nicholson', relationship='Mum', email_address='sarabull@example.com')))]}\nlog_in_page = <mavis.test.pages.log_in.LogInPage object at 0x7f4f57f9d3b0>\nhealthcare_assistant = User(username='pamelagraham@example.com', password='pamelagraham@example.com', role='healthcare_assistant')\nteam = Team(name='Clarke-Cunningham est. 1788', workgroup='O425O', careplus_venue_code='O425O', email='sharon57@example.org', phone='(07700) 900 236')\ndashboard_page = <mavis.test.pages.dashboard.DashboardPage object at 0x7f4f582af3e0>\n\n    def test_delivering_vaccination_after_psd(\n        setup_session_with_one_child,\n        sessions_page,\n        schools,\n        verbal_consent_page,\n        children,\n        log_in_page,\n        healthcare_assistant,\n        team,\n        dashboard_page,\n    ):\n        \"\"\"\n        Test: A PSD can be created for a child and the vaccination can be\n           administered by a healthcare assistant.\n        Steps:\n        1. Import child records and set up a session with PSD enabled.\n        2. Record verbal consent with PSD option for the child.\n        3. Verify the PSD is created.\n        4. Log in as a healthcare assistant and administer the vaccination.\n        Verification:\n        - The PSD is correctly created and the vaccination is recorded without errors.\n        \"\"\"\n        child = children[Programme.FLU][0]\n        school = schools[Programme.FLU][0]\n        fluenz_batch_name = setup_session_with_one_child\n    \n        sessions_page.click_session_for_programme_group(school, Programme.FLU)\n        sessions_page.click_edit_session()\n        sessions_page.click_change_psd()\n        sessions_page.answer_whether_psd_should_be_enabled(\"Yes\")\n        sessions_page.click_continue_button()\n        sessions_page.click_continue_link()\n    \n        sessions_page.click_consent_tab()\n        sessions_page.search_child(child)\n        sessions_page.click_programme_tab(Programme.FLU)\n        sessions_page.click_record_a_new_consent_response()\n        verbal_consent_page.parent_verbal_positive(\n            parent=child.parents[0],\n            change_phone=False,\n            programme=Programme.FLU,\n            consent_option=ConsentOption.BOTH,\n            psd_option=True,\n        )\n        sessions_page.click_psds_tab()\n        sessions_page.search_for(str(child))\n>       sessions_page.check_child_has_psd(child)\n\ntests/test_psd.py:116: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mavis.test.pages.sessions.SessionsPage object at 0x7f4f6f3eee90>\nchild = Child(first_name='Owen', last_name='SULLIVAN', nhs_number='9783950096', address=('Studio 93', 'Ashleigh inlet', 'Parry...becca37@example.net'), Parent(full_name='Dr Rachael Young', relationship='Mum', email_address='stacey47@example.com')))\n\n    def check_child_has_psd(self, child: Child) -> None:\n        patient_card = self.page.locator(\n            f'div.nhsuk-card.app-card.app-card--compact:has(h4:has-text(\"{child!s}\"))'\n        )\n>       expect(patient_card).to_contain_text(\"PSD added\")\nE       AssertionError: Locator expected to contain text 'PSD added'\nE       Actual value: \nE             \nE               SULLIVAN, Owen\nE       \nE       \nE       \nE       \nE               \nE       \nE             Date of birth14 October 2018 (aged 6)Year groupYear 2, 8T5PSD statusPSD not added\nE       \nE       \nE             \nE            \nE       Call log:\nE         - Expect \"to_contain_text\" with timeout 5000ms\nE         - waiting for locator(\"div.nhsuk-card.app-card.app-card--compact:has(h4:has-text(\\\"SULLIVAN, Owen\\\"))\")\nE           9 × locator resolved to <div class=\"nhsuk-card nhsuk-card--clickable app-card app-card--compact\">…</div>\nE             - unexpected value \"\nE             \nE               SULLIVAN, Owen\nE       \nE       \nE       \nE       \nE               \nE       \nE             Date of birth14 October 2018 (aged 6)Year groupYear 2, 8T5PSD statusPSD not added\nE       \nE       \nE             \nE           \"\n\nmavis/test/pages/sessions.py:875: AssertionError","steps":[{"name":"Click on 'flu' session at School(name='Little Reddings Primary School', urn='137861', site=None)","time":{"start":1759222522489,"stop":1759222523184,"duration":695},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1759222522489,"stop":1759222523184,"duration":695},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='Little Reddings Primary School', urn='137861', site=None), <Programme.FLU: 'flu'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Edit session","time":{"start":1759222523184,"stop":1759222523471,"duration":287},"status":"passed","steps":[{"name":"Click on Edit session","time":{"start":1759222523184,"stop":1759222523471,"duration":287},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Change patient specific direction","time":{"start":1759222523471,"stop":1759222523754,"duration":283},"status":"passed","steps":[{"name":"Click on Change patient specific direction","time":{"start":1759222523471,"stop":1759222523754,"duration":283},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Answer whether PSD should be enabled with 'Yes'","time":{"start":1759222523754,"stop":1759222523779,"duration":25},"status":"passed","steps":[{"name":"Answer whether PSD should be enabled with {1}","time":{"start":1759222523754,"stop":1759222523779,"duration":25},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('Yes',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Continue","time":{"start":1759222523779,"stop":1759222524160,"duration":381},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1759222523779,"stop":1759222524160,"duration":381},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1759222524160,"stop":1759222524479,"duration":319},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1759222524160,"stop":1759222524479,"duration":319},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Consent tab","time":{"start":1759222524479,"stop":1759222524841,"duration":362},"status":"passed","steps":[{"name":"Click on Consent tab","time":{"start":1759222524479,"stop":1759222524841,"duration":362},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Search for 'SULLIVAN, Owen'","time":{"start":1759222524841,"stop":1759222525157,"duration":316},"status":"passed","steps":[{"name":"Search for {1}","time":{"start":1759222524841,"stop":1759222525157,"duration":316},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('SULLIVAN, Owen',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'flu' tab","time":{"start":1759222525508,"stop":1759222525529,"duration":21},"status":"passed","steps":[{"name":"Click on {1} tab","time":{"start":1759222525508,"stop":1759222525529,"duration":21},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Programme.FLU: 'flu'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Record a new consent response","time":{"start":1759222525529,"stop":1759222527053,"duration":1524},"status":"passed","steps":[{"name":"Click on Record a new consent response","time":{"start":1759222525529,"stop":1759222527053,"duration":1524},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'Dominic Mills (Dad)' radio button","time":{"start":1759222527053,"stop":1759222527107,"duration":54},"status":"passed","steps":[{"name":"Click on {1} radio button","time":{"start":1759222527053,"stop":1759222527107,"duration":54},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('Dominic Mills (Dad)',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1759222527107,"stop":1759222527521,"duration":414},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1759222527107,"stop":1759222527521,"duration":414},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1759222527521,"stop":1759222527985,"duration":464},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1759222527521,"stop":1759222527985,"duration":464},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select consent method","time":{"start":1759222527985,"stop":1759222528057,"duration":72},"status":"passed","steps":[{"name":"Select consent method","time":{"start":1759222527985,"stop":1759222528057,"duration":72},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<ConsentMethod.IN_PERSON: 'In person'>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1759222528057,"stop":1759222528472,"duration":415},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1759222528057,"stop":1759222528472,"duration":415},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Yes, for the nasal spray","time":{"start":1759222528472,"stop":1759222528527,"duration":55},"status":"passed","steps":[{"name":"Click on Yes, for the nasal spray","time":{"start":1759222528472,"stop":1759222528526,"duration":54},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select Yes","time":{"start":1759222528527,"stop":1759222528557,"duration":30},"status":"passed","steps":[{"name":"Select Yes","time":{"start":1759222528527,"stop":1759222528557,"duration":30},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1759222528558,"stop":1759222528987,"duration":429},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1759222528558,"stop":1759222528987,"duration":429},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Does your child take oral steroids for their asthma?'","time":{"start":1759222528987,"stop":1759222529040,"duration":53},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1759222528987,"stop":1759222529040,"duration":53},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.ASTHMA_STEROIDS: 'Does your child take oral steroids for their asthma?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Has your child ever been admitted to intensive care because of their asthma?'","time":{"start":1759222529040,"stop":1759222529073,"duration":33},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1759222529040,"stop":1759222529073,"duration":33},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.ASTHMA_INTENSIVE_CARE: 'Has your child ever been admitted to intensive care because of their asthma?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Does your child have a disease or treatment that severely affects their immune system?'","time":{"start":1759222529073,"stop":1759222529106,"duration":33},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1759222529073,"stop":1759222529106,"duration":33},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.IMMUNE_SYSTEM: 'Does your child have a disease or treatment that severely affects their immune system?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Is your child in regular close contact with anyone currently having treatment that severely affects their immune system?'","time":{"start":1759222529106,"stop":1759222529139,"duration":33},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1759222529106,"stop":1759222529139,"duration":33},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.HOUSEHOLD_IMMUNE_SYSTEM: 'Is your child in regular close contact with anyone currently having treatment that severely affects their immune system?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Does your child have a bleeding disorder or are they taking anticoagulant therapy?'","time":{"start":1759222529139,"stop":1759222529173,"duration":34},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1759222529139,"stop":1759222529173,"duration":34},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.BLEEDING_DISORDER_FLU: 'Does your child have a bleeding disorder or are they taking anticoagulant therapy?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Has your child ever been admitted to intensive care due to a severe allergic reaction (anaphylaxis) to egg?'","time":{"start":1759222529173,"stop":1759222529208,"duration":35},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1759222529173,"stop":1759222529208,"duration":35},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.EGG_ALLERGY: 'Has your child ever been admitted to intensive care due to a severe allergic reaction (anaphylaxis) to egg?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Has your child had a severe allergic reaction (anaphylaxis) to a previous dose of the nasal flu vaccine, or any ingredient of the vaccine?'","time":{"start":1759222529208,"stop":1759222529240,"duration":32},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1759222529208,"stop":1759222529240,"duration":32},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.SEVERE_ALLERGIC_REACTION_NASAL: 'Has your child had a severe allergic reaction (anaphylaxis) to a previous dose of the nasal flu vaccine, or any ingredient of the vaccine?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Has your child had a severe allergic reaction (anaphylaxis) to a previous dose of the injected flu vaccine, or any ingredient of the vaccine?'","time":{"start":1759222529240,"stop":1759222529273,"duration":33},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1759222529240,"stop":1759222529273,"duration":33},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.SEVERE_ALLERGIC_REACTION_INJECTED: 'Has your child had a severe allergic reaction (anaphylaxis) to a previous dose of the injected flu vaccine, or any ingredient of the vaccine?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Does your child have any other medical conditions the immunisation team should be aware of?'","time":{"start":1759222529273,"stop":1759222529309,"duration":36},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1759222529273,"stop":1759222529309,"duration":36},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.MEDICAL_CONDITIONS_FLU: 'Does your child have any other medical conditions the immunisation team should be aware of?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Does your child take regular aspirin?'","time":{"start":1759222529309,"stop":1759222529361,"duration":52},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1759222529309,"stop":1759222529361,"duration":52},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.ASPIRIN: 'Does your child take regular aspirin?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Has your child had a flu vaccination in the last 3 months?'","time":{"start":1759222529361,"stop":1759222529409,"duration":48},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1759222529361,"stop":1759222529409,"duration":48},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.FLU_PREVIOUSLY: 'Has your child had a flu vaccination in the last 3 months?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select 'No' for health question 'Does your child need extra support during vaccination sessions?'","time":{"start":1759222529409,"stop":1759222529457,"duration":48},"status":"passed","steps":[{"name":"Select {2} for health question {1}","time":{"start":1759222529409,"stop":1759222529457,"duration":48},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<HealthQuestion.EXTRA_SUPPORT: 'Does your child need extra support during vaccination sessions?'>, 'No')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1759222529457,"stop":1759222529905,"duration":448},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1759222529457,"stop":1759222529905,"duration":448},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Confirm","time":{"start":1759222529905,"stop":1759222530695,"duration":790},"status":"passed","steps":[{"name":"Click Confirm","time":{"start":1759222529905,"stop":1759222530695,"duration":790},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on PSDs tab","time":{"start":1759222530695,"stop":1759222531061,"duration":366},"status":"passed","steps":[{"name":"Click on PSDs tab","time":{"start":1759222530695,"stop":1759222531061,"duration":366},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Search for 'SULLIVAN, Owen'","time":{"start":1759222531061,"stop":1759222531429,"duration":368},"status":"passed","steps":[{"name":"Search for {1}","time":{"start":1759222531061,"stop":1759222531429,"duration":368},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"('SULLIVAN, Owen',)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":68,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"log_in_as_prescriber::0","time":{"start":1759222536454,"stop":1759222536828,"duration":374},"status":"passed","steps":[{"name":"Log out","time":{"start":1759222536454,"stop":1759222536828,"duration":374},"status":"passed","steps":[{"name":"Log out","time":{"start":1759222536454,"stop":1759222536828,"duration":374},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"new_context::0","time":{"start":1759222536829,"stop":1759222536838,"duration":9},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_feature_flags::0","time":{"start":1759222536829,"stop":1759222536829,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1759222536839,"stop":1759222536839,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1759222574333,"stop":1759222574333,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1759222574334,"stop":1759222574362,"duration":28},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1759222574364,"stop":1759222574373,"duration":9},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests::0","time":{"start":1759222574375,"stop":1759222576449,"duration":2074},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_psd"},{"name":"host","value":"runnervm3ublj"},{"name":"thread","value":"3128-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_psd"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"448e358da432fb21","status":"failed","statusDetails":"AssertionError: Locator expected to contain text 'PSD added'\nActual value: \n      \n        BRADLEY, Jane\n\n\n\n\n        \n\n      Date of birth7 December 2018 (aged 6)Year groupYear 2, 8T5PSD statusPSD not added\n\n\n      \n     \nCall log:\n  - Expect \"to_contain_text\" with timeout 5000ms\n  - waiting for locator(\"div.nhsuk-card.app-card.app-card--compact:has(h4:has-text(\\\"BRADLEY, Jane\\\"))\")\n    9 × locator resolved to <div class=\"nhsuk-card nhsuk-card--clickable app-card app-card--compact\">…</div>\n      - unexpected value \"\n      \n        BRADLEY, Jane\n\n\n\n\n        \n\n      Date of birth7 December 2018 (aged 6)Year groupYear 2, 8T5PSD statusPSD not added\n\n\n      \n    \"","time":{"start":1759222496791,"stop":1759222512069,"duration":15278}},{"uid":"44b5496022b5adc3","status":"failed","statusDetails":"AssertionError: Locator expected to contain text 'PSD added'\nActual value: \n      \n        LEWIS, Frederick\n\n\n\n\n        \n\n      Date of birth21 October 2018 (aged 6)Year groupYear 2, 8T5PSD statusPSD not added\n\n\n      \n     \nCall log:\n  - Expect \"to_contain_text\" with timeout 5000ms\n  - waiting for locator(\"div.nhsuk-card.app-card.app-card--compact:has(h4:has-text(\\\"LEWIS, Frederick\\\"))\")\n    9 × locator resolved to <div class=\"nhsuk-card nhsuk-card--clickable app-card app-card--compact\">…</div>\n      - unexpected value \"\n      \n        LEWIS, Frederick\n\n\n\n\n        \n\n      Date of birth21 October 2018 (aged 6)Year groupYear 2, 8T5PSD statusPSD not added\n\n\n      \n    \"","time":{"start":1759222471772,"stop":1759222486142,"duration":14370}}],"categories":[{"name":"Product defects","matchedStatuses":[]}],"tags":[]},"source":"ae709a682d16103a.json","parameterValues":[]}