{"uid":"32efbef2f9521d67","name":"test_vaccination_file_upload_historic_invalid_data","fullName":"tests.test_import_historical_vaccinations#test_vaccination_file_upload_historic_invalid_data","historyId":"9301600c8f0b64efc36dd7d410ce9f1a","time":{"start":1769770299032,"stop":1769770307463,"duration":8431},"description":"\nTest: Upload a historic vaccination records file with invalid data and\n   verify error handling.\nSteps:\n1. Navigate to vaccination records import page.\n2. Upload a historic file with invalid data.\nVerification:\n- Output lists errors as expected for each record\nScenarios covered:\nInvalidODSCode, EmptyOrgCode, EmptySchoolURN, NotKnownSchoolEmpty, LongNHSNumber,\nShortNHSNumber, EmptyForename, EmptyLastname, EmptyDOB, InvalidFormatDOB, FutureDOB,\nNonLeapYearDOB, EmptyGender, InvalidGender, EmptyPostCode, InvalidPostCode,\nEmptyVaccDate, FutureVaccDate, EmptyVaccGiven, EmptyBatchNumber, EmptyExpiryDate,\nEmptyAnatomicalSite, InvalidAnatomicalSite, InvalidAnatomicalSite,\nInvalidAnatomicalSite, EmptyDoseSeq, InvalidDoseSeq, EmptyCareSetting,\nInvalidProfFName, InvalidProfSName, InvalidProfEmail, InvalidClinic, InvalidTime,\nInvalidReason, InvalidVaccinatedFlag, InvalidCareSetting, TimeInFuture,\nLongBatchNumber\n","descriptionHtml":"<p>Test: Upload a historic vaccination records file with invalid data and<br />\nverify error handling.<br />\nSteps:</p>\n<ol>\n<li>Navigate to vaccination records import page.</li>\n<li>Upload a historic file with invalid data.<br />\nVerification:</li>\n</ol>\n<ul>\n<li>Output lists errors as expected for each record<br />\nScenarios covered:<br />\nInvalidODSCode, EmptyOrgCode, EmptySchoolURN, NotKnownSchoolEmpty, LongNHSNumber,<br />\nShortNHSNumber, EmptyForename, EmptyLastname, EmptyDOB, InvalidFormatDOB, FutureDOB,<br />\nNonLeapYearDOB, EmptyGender, InvalidGender, EmptyPostCode, InvalidPostCode,<br />\nEmptyVaccDate, FutureVaccDate, EmptyVaccGiven, EmptyBatchNumber, EmptyExpiryDate,<br />\nEmptyAnatomicalSite, InvalidAnatomicalSite, InvalidAnatomicalSite,<br />\nInvalidAnatomicalSite, EmptyDoseSeq, InvalidDoseSeq, EmptyCareSetting,<br />\nInvalidProfFName, InvalidProfSName, InvalidProfEmail, InvalidClinic, InvalidTime,<br />\nInvalidReason, InvalidVaccinatedFlag, InvalidCareSetting, TimeInFuture,<br />\nLongBatchNumber</li>\n</ul>\n","status":"failed","statusMessage":"AssertionError: Locator expected to contain text 'Row 34 TIME_OF_VACCINATION: Enter a time in the correct format.'\nActual value: \n        \n\n          \n    \n      \n\n      \n  Upload (30 January 2026 at 10:51am)\n\n    \n\n      \n          Details\n\n\n\n\n        \n\n  Uploaded byNURSE, NurseFileVaccsFileMapping.HIST_NEGATIVE20260130105139.csvTypeVaccination recordsStatusInvalid\n\n      \n    \n\n\n          \n\n      \n                  Records could not be imported\n\n\n\n\n\n        \n\n      \n    \n      The records cannot be uploaded due to errors in the CSV file.\n\n    \n\n    How to format your Mavis CSV file for vaccination records\n  Make sure the CSV you upload uses the following columns:\n\n  Column nameNotesORGANISATION_CODEOptional, must be a valid ODS code.SCHOOL_URNOptional, must be 6 digits and numeric. Use 888888 for school unknown and 999999 for homeschooled.SCHOOL_NAMERequired if SCHOOL_URN is 888888.NHS_NUMBEROptional, must be a valid NHS number.PERSON_FORENAMERequiredPERSON_SURNAMERequiredPERSON_DOBRequired, must use either YYYYMMDD or DD/MM/YYYY format.PERSON_GENDER_CODERequired, must be one of: female, male, not known or not specified.PERSON_POSTCODERequired, must be formatted as a valid postcode, for example SW1A 1AA.DATE_OF_VACCINATIONRequired, must use either YYYYMMDD or DD/MM/YYYY format.TIME_OF_VACCINATIONOptional, must use HH:MM:SS format.VACCINATEDRequired, must be Y or N. Can be omitted if VACCINE_GIVEN is provided.VACCINE_GIVENOptional, must be one of: Sequirus Cell-based Trivalent, AstraZeneca Fluenz, Sanofi Vaxigrip, Viatris, Cervarix, Gardasil, Gardasil9, MenQuadfi, Menveo, Nimenrix, Priorix, VaxPro, ProQuad, Priorix-Tetra or Revaxis.BATCH_NUMBERRequired if BATCH_EXPIRY_DATE is provided.BATCH_EXPIRY_DATERequired if BATCH_NUMBER is provided, must use either YYYYMMDD or DD/MM/YYYY format.PROGRAMMERequired, must be Flu, HPV, ACWYX4, MenACWY, MMR, MMRV, 3-in-1 or Td/IPV.ANATOMICAL_SITEOptional, if provided must be appropriate for the vaccine delivery method and be one of: left arm (lower position), left arm (upper position), left buttock, left deltoid, left thigh, left upper arm, nasal, right arm (lower position), right arm (upper position), right buttock, right deltoid, right thigh or right upper arm.REASON_NOT_VACCINATEDRequired if VACCINATED is N, must be already had elsewhere, refused, unwell or vaccination contraindicated.NOTESOptionalDOSE_SEQUENCEOptional, must be a number or 1B, 1P, 1st Scheduled Booster, 2B, 2P, 2nd Scheduled Booster or 3P.CARE_SETTINGOptional, must be 1 (school) or 2 (clinic).CLINIC_NAMERequired if CARE_SETTING is 2, must be the name of a community clinic location.PERFORMING_PROFESSIONAL_EMAILRequired if uploading offline vaccination records.PERFORMING_PROFESSIONAL_FORENAMEOptionalPERFORMING_PROFESSIONAL_SURNAMEOptional\n\n\n\n        \n            \n                Row 2\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 3\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 5\n            \n\n            \n                  SCHOOL_NAME or School is required\n            \n            \n                Row 6\n            \n\n            \n                  NHS_NUMBER: should be a valid NHS number with 10 characters\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 7\n            \n\n            \n                  NHS_NUMBER: should be a valid NHS number with 10 characters\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 8\n            \n\n            \n                  PERSON_FORENAME or First name is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 9\n            \n\n            \n                  PERSON_SURNAME or Surname is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 10\n            \n\n            \n                  PERSON_DOB or Date of birth is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 11\n            \n\n            \n                  PERSON_DOB: Enter a date of birth in the correct format.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 12\n            \n\n            \n                  DATE_OF_VACCINATION: The vaccination date is before the date of birth.\n                  PERSON_DOB: Enter a date of birth in the past.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 13\n            \n\n            \n                  PERSON_DOB: Enter a date of birth in the correct format.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 14\n            \n\n            \n                  PERSON_GENDER_CODE, PERSON_GENDER or Sex is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 15\n            \n\n            \n                  PERSON_GENDER_CODE: Enter a valid gender or gender code.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 16\n            \n\n            \n                  PERSON_POSTCODE or Postcode is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 17\n            \n\n            \n                  PERSON_POSTCODE: Enter a valid postcode, such as SW1A 1AA.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 18\n            \n\n            \n                  DATE_OF_VACCINATION or Event date is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 19\n            \n\n            \n                  DATE_OF_VACCINATION: The vaccination date is in the future.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 20\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 21\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 22\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 23\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 24\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 25\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 26\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 27\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 28\n            \n\n            \n                  DOSE_SEQUENCE: must be less than or equal to 3\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 29\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 30\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 31\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 32\n            \n\n            \n                  PERFORMING_PROFESSIONAL_EMAIL: Enter a valid email address\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 33\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 34\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n                  TIME_OF_VACCINATION: Enter a time in the correct format.\n            \n            \n                Row 35\n            \n\n            \n                  REASON_NOT_VACCINATED: must be blank\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 36\n            \n\n            \n                  VACCINATED: You need to record whether the child was vaccinated or not. Enter ‘Y’ or ‘N’ in the ‘VACCINATED’ column.\n                  BATCH_EXPIRY_DATE: must be blank\n                  BATCH_NUMBER: must be blank\n                  ANATOMICAL_SITE: must be blank\n                  REASON_NOT_VACCINATED: Enter a valid reason\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 37\n            \n\n            \n                  CARE_SETTING: Enter a valid care setting.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 38\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 39\n            \n\n            \n                  BATCH_NUMBER: must be at most 100 characters long\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n        \n\n      \n    \n\n\n\n\n    \n  \n\n       \nCall log:\n  - Expect \"to_contain_text\" with timeout 5000ms\n  - waiting for get_by_role(\"main\")\n    9 × locator resolved to <main role=\"main\" id=\"main-content\" class=\"nhsuk-main-wrapper\">…</main>\n      - unexpected value \"\n        \n\n          \n    \n      \n\n      \n  Upload (30 January 2026 at 10:51am)\n\n    \n\n      \n          Details\n\n\n\n\n        \n\n  Uploaded byNURSE, NurseFileVaccsFileMapping.HIST_NEGATIVE20260130105139.csvTypeVaccination recordsStatusInvalid\n\n      \n    \n\n\n          \n\n      \n                  Records could not be imported\n\n\n\n\n\n        \n\n      \n    \n      The records cannot be uploaded due to errors in the CSV file.\n\n    \n\n    How to format your Mavis CSV file for vaccination records\n  Make sure the CSV you upload uses the following columns:\n\n  Column nameNotesORGANISATION_CODEOptional, must be a valid ODS code.SCHOOL_URNOptional, must be 6 digits and numeric. Use 888888 for school unknown and 999999 for homeschooled.SCHOOL_NAMERequired if SCHOOL_URN is 888888.NHS_NUMBEROptional, must be a valid NHS number.PERSON_FORENAMERequiredPERSON_SURNAMERequiredPERSON_DOBRequired, must use either YYYYMMDD or DD/MM/YYYY format.PERSON_GENDER_CODERequired, must be one of: female, male, not known or not specified.PERSON_POSTCODERequired, must be formatted as a valid postcode, for example SW1A 1AA.DATE_OF_VACCINATIONRequired, must use either YYYYMMDD or DD/MM/YYYY format.TIME_OF_VACCINATIONOptional, must use HH:MM:SS format.VACCINATEDRequired, must be Y or N. Can be omitted if VACCINE_GIVEN is provided.VACCINE_GIVENOptional, must be one of: Sequirus Cell-based Trivalent, AstraZeneca Fluenz, Sanofi Vaxigrip, Viatris, Cervarix, Gardasil, Gardasil9, MenQuadfi, Menveo, Nimenrix, Priorix, VaxPro, ProQuad, Priorix-Tetra or Revaxis.BATCH_NUMBERRequired if BATCH_EXPIRY_DATE is provided.BATCH_EXPIRY_DATERequired if BATCH_NUMBER is provided, must use either YYYYMMDD or DD/MM/YYYY format.PROGRAMMERequired, must be Flu, HPV, ACWYX4, MenACWY, MMR, MMRV, 3-in-1 or Td/IPV.ANATOMICAL_SITEOptional, if provided must be appropriate for the vaccine delivery method and be one of: left arm (lower position), left arm (upper position), left buttock, left deltoid, left thigh, left upper arm, nasal, right arm (lower position), right arm (upper position), right buttock, right deltoid, right thigh or right upper arm.REASON_NOT_VACCINATEDRequired if VACCINATED is N, must be already had elsewhere, refused, unwell or vaccination contraindicated.NOTESOptionalDOSE_SEQUENCEOptional, must be a number or 1B, 1P, 1st Scheduled Booster, 2B, 2P, 2nd Scheduled Booster or 3P.CARE_SETTINGOptional, must be 1 (school) or 2 (clinic).CLINIC_NAMERequired if CARE_SETTING is 2, must be the name of a community clinic location.PERFORMING_PROFESSIONAL_EMAILRequired if uploading offline vaccination records.PERFORMING_PROFESSIONAL_FORENAMEOptionalPERFORMING_PROFESSIONAL_SURNAMEOptional\n\n\n\n        \n            \n                Row 2\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 3\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 5\n            \n\n            \n                  SCHOOL_NAME or School is required\n            \n            \n                Row 6\n            \n\n            \n                  NHS_NUMBER: should be a valid NHS number with 10 characters\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 7\n            \n\n            \n                  NHS_NUMBER: should be a valid NHS number with 10 characters\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 8\n            \n\n            \n                  PERSON_FORENAME or First name is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 9\n            \n\n            \n                  PERSON_SURNAME or Surname is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 10\n            \n\n            \n                  PERSON_DOB or Date of birth is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 11\n            \n\n            \n                  PERSON_DOB: Enter a date of birth in the correct format.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 12\n            \n\n            \n                  DATE_OF_VACCINATION: The vaccination date is before the date of birth.\n                  PERSON_DOB: Enter a date of birth in the past.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 13\n            \n\n            \n                  PERSON_DOB: Enter a date of birth in the correct format.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 14\n            \n\n            \n                  PERSON_GENDER_CODE, PERSON_GENDER or Sex is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 15\n            \n\n            \n                  PERSON_GENDER_CODE: Enter a valid gender or gender code.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 16\n            \n\n            \n                  PERSON_POSTCODE or Postcode is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 17\n            \n\n            \n                  PERSON_POSTCODE: Enter a valid postcode, such as SW1A 1AA.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 18\n            \n\n            \n                  DATE_OF_VACCINATION or Event date is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 19\n            \n\n            \n                  DATE_OF_VACCINATION: The vaccination date is in the future.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 20\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 21\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 22\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 23\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 24\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 25\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 26\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 27\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 28\n            \n\n            \n                  DOSE_SEQUENCE: must be less than or equal to 3\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 29\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 30\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 31\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 32\n            \n\n            \n                  PERFORMING_PROFESSIONAL_EMAIL: Enter a valid email address\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 33\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 34\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n                  TIME_OF_VACCINATION: Enter a time in the correct format.\n            \n            \n                Row 35\n            \n\n            \n                  REASON_NOT_VACCINATED: must be blank\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 36\n            \n\n            \n                  VACCINATED: You need to record whether the child was vaccinated or not. Enter ‘Y’ or ‘N’ in the ‘VACCINATED’ column.\n                  BATCH_EXPIRY_DATE: must be blank\n                  BATCH_NUMBER: must be blank\n                  ANATOMICAL_SITE: must be blank\n                  REASON_NOT_VACCINATED: Enter a valid reason\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 37\n            \n\n            \n                  CARE_SETTING: Enter a valid care setting.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 38\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 39\n            \n\n            \n                  BATCH_NUMBER: must be at most 100 characters long\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n        \n\n      \n    \n\n\n\n\n    \n  \n\n      \"","statusTrace":"setup_hist_vaccs = None\npage = <Page url='http://3.8.164.95:4000/immunisation-imports/52'>\nfile_generator = <mavis.test.data.file_generator.FileGenerator object at 0x7fd86ab1d1c0>\n\n    @pytest.mark.vaccinations\n    def test_vaccination_file_upload_historic_invalid_data(\n        setup_hist_vaccs,\n        page,\n        file_generator,\n    ):\n        \"\"\"\n        Test: Upload a historic vaccination records file with invalid data and\n           verify error handling.\n        Steps:\n        1. Navigate to vaccination records import page.\n        2. Upload a historic file with invalid data.\n        Verification:\n        - Output lists errors as expected for each record\n        Scenarios covered:\n        InvalidODSCode, EmptyOrgCode, EmptySchoolURN, NotKnownSchoolEmpty, LongNHSNumber,\n        ShortNHSNumber, EmptyForename, EmptyLastname, EmptyDOB, InvalidFormatDOB, FutureDOB,\n        NonLeapYearDOB, EmptyGender, InvalidGender, EmptyPostCode, InvalidPostCode,\n        EmptyVaccDate, FutureVaccDate, EmptyVaccGiven, EmptyBatchNumber, EmptyExpiryDate,\n        EmptyAnatomicalSite, InvalidAnatomicalSite, InvalidAnatomicalSite,\n        InvalidAnatomicalSite, EmptyDoseSeq, InvalidDoseSeq, EmptyCareSetting,\n        InvalidProfFName, InvalidProfSName, InvalidProfEmail, InvalidClinic, InvalidTime,\n        InvalidReason, InvalidVaccinatedFlag, InvalidCareSetting, TimeInFuture,\n        LongBatchNumber\n        \"\"\"\n>       ImportRecordsWizardPage(page, file_generator).upload_and_verify_output(\n            VaccsFileMapping.HIST_NEGATIVE\n        )\n\ntests/test_import_historical_vaccinations.py:84: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmavis/test/pages/imports/import_records_wizard_page.py:179: in upload_and_verify_output\n    self.upload_and_verify_output_for_input_output_files(\nmavis/test/pages/imports/import_records_wizard_page.py:191: in upload_and_verify_output_for_input_output_files\n    self.verify_upload_output(file_path=output_file_path)\nmavis/test/annotations.py:50: in wrapper\n    return_value = func(*args, **kwargs)\n                   ^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mavis.test.pages.imports.import_records_wizard_page.ImportRecordsWizardPage object at 0x7fd86b12a970>\nfile_path = PosixPath('vaccs/o_hist_negative.txt')\n\n    @step(\"Verify upload output for {file_path}\")\n    def verify_upload_output(self, file_path: Path) -> None:\n        _expected_errors = self.file_generator.get_expected_errors(file_path)\n        if _expected_errors is not None:\n            for _msg in _expected_errors:\n                if _msg.startswith(\"!\"):\n                    expect(self.page.get_by_role(\"main\")).not_to_contain_text(_msg[1:])\n                else:\n>                   expect(self.page.get_by_role(\"main\")).to_contain_text(_msg)\nE                   AssertionError: Locator expected to contain text 'Row 34 TIME_OF_VACCINATION: Enter a time in the correct format.'\nE                   Actual value: \nE                           \nE                   \nE                             \nE                       \nE                         \nE                   \nE                         \nE                     Upload (30 January 2026 at 10:51am)\nE                   \nE                       \nE                   \nE                         \nE                             Details\nE                   \nE                   \nE                   \nE                   \nE                           \nE                   \nE                     Uploaded byNURSE, NurseFileVaccsFileMapping.HIST_NEGATIVE20260130105139.csvTypeVaccination recordsStatusInvalid\nE                   \nE                         \nE                       \nE                   \nE                   \nE                             \nE                   \nE                         \nE                                     Records could not be imported\nE                   \nE                   \nE                   \nE                   \nE                   \nE                           \nE                   \nE                         \nE                       \nE                         The records cannot be uploaded due to errors in the CSV file.\nE                   \nE                       \nE                   \nE                       How to format your Mavis CSV file for vaccination records\nE                     Make sure the CSV you upload uses the following columns:\nE                   \nE                     Column nameNotesORGANISATION_CODEOptional, must be a valid ODS code.SCHOOL_URNOptional, must be 6 digits and numeric. Use 888888 for school unknown and 999999 for homeschooled.SCHOOL_NAMERequired if SCHOOL_URN is 888888.NHS_NUMBEROptional, must be a valid NHS number.PERSON_FORENAMERequiredPERSON_SURNAMERequiredPERSON_DOBRequired, must use either YYYYMMDD or DD/MM/YYYY format.PERSON_GENDER_CODERequired, must be one of: female, male, not known or not specified.PERSON_POSTCODERequired, must be formatted as a valid postcode, for example SW1A 1AA.DATE_OF_VACCINATIONRequired, must use either YYYYMMDD or DD/MM/YYYY format.TIME_OF_VACCINATIONOptional, must use HH:MM:SS format.VACCINATEDRequired, must be Y or N. Can be omitted if VACCINE_GIVEN is provided.VACCINE_GIVENOptional, must be one of: Sequirus Cell-based Trivalent, AstraZeneca Fluenz, Sanofi Vaxigrip, Viatris, Cervarix, Gardasil, Gardasil9, MenQuadfi, Menveo, Nimenrix, Priorix, VaxPro, ProQuad, Priorix-Tetra or Revaxis.BATCH_NUMBERRequired if BATCH_EXPIRY_DATE is provided.BATCH_EXPIRY_DATERequired if BATCH_NUMBER is provided, must use either YYYYMMDD or DD/MM/YYYY format.PROGRAMMERequired, must be Flu, HPV, ACWYX4, MenACWY, MMR, MMRV, 3-in-1 or Td/IPV.ANATOMICAL_SITEOptional, if provided must be appropriate for the vaccine delivery method and be one of: left arm (lower position), left arm (upper position), left buttock, left deltoid, left thigh, left upper arm, nasal, right arm (lower position), right arm (upper position), right buttock, right deltoid, right thigh or right upper arm.REASON_NOT_VACCINATEDRequired if VACCINATED is N, must be already had elsewhere, refused, unwell or vaccination contraindicated.NOTESOptionalDOSE_SEQUENCEOptional, must be a number or 1B, 1P, 1st Scheduled Booster, 2B, 2P, 2nd Scheduled Booster or 3P.CARE_SETTINGOptional, must be 1 (school) or 2 (clinic).CLINIC_NAMERequired if CARE_SETTING is 2, must be the name of a community clinic location.PERFORMING_PROFESSIONAL_EMAILRequired if uploading offline vaccination records.PERFORMING_PROFESSIONAL_FORENAMEOptionalPERFORMING_PROFESSIONAL_SURNAMEOptional\nE                   \nE                   \nE                   \nE                           \nE                               \nE                                   Row 2\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 3\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 5\nE                               \nE                   \nE                               \nE                                     SCHOOL_NAME or School is required\nE                               \nE                               \nE                                   Row 6\nE                               \nE                   \nE                               \nE                                     NHS_NUMBER: should be a valid NHS number with 10 characters\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 7\nE                               \nE                   \nE                               \nE                                     NHS_NUMBER: should be a valid NHS number with 10 characters\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 8\nE                               \nE                   \nE                               \nE                                     PERSON_FORENAME or First name is required\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 9\nE                               \nE                   \nE                               \nE                                     PERSON_SURNAME or Surname is required\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 10\nE                               \nE                   \nE                               \nE                                     PERSON_DOB or Date of birth is required\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 11\nE                               \nE                   \nE                               \nE                                     PERSON_DOB: Enter a date of birth in the correct format.\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 12\nE                               \nE                   \nE                               \nE                                     DATE_OF_VACCINATION: The vaccination date is before the date of birth.\nE                                     PERSON_DOB: Enter a date of birth in the past.\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 13\nE                               \nE                   \nE                               \nE                                     PERSON_DOB: Enter a date of birth in the correct format.\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 14\nE                               \nE                   \nE                               \nE                                     PERSON_GENDER_CODE, PERSON_GENDER or Sex is required\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 15\nE                               \nE                   \nE                               \nE                                     PERSON_GENDER_CODE: Enter a valid gender or gender code.\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 16\nE                               \nE                   \nE                               \nE                                     PERSON_POSTCODE or Postcode is required\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 17\nE                               \nE                   \nE                               \nE                                     PERSON_POSTCODE: Enter a valid postcode, such as SW1A 1AA.\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 18\nE                               \nE                   \nE                               \nE                                     DATE_OF_VACCINATION or Event date is required\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 19\nE                               \nE                   \nE                               \nE                                     DATE_OF_VACCINATION: The vaccination date is in the future.\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 20\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 21\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 22\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 23\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 24\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 25\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 26\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 27\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 28\nE                               \nE                   \nE                               \nE                                     DOSE_SEQUENCE: must be less than or equal to 3\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 29\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 30\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 31\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 32\nE                               \nE                   \nE                               \nE                                     PERFORMING_PROFESSIONAL_EMAIL: Enter a valid email address\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 33\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 34\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                                     TIME_OF_VACCINATION: Enter a time in the correct format.\nE                               \nE                               \nE                                   Row 35\nE                               \nE                   \nE                               \nE                                     REASON_NOT_VACCINATED: must be blank\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 36\nE                               \nE                   \nE                               \nE                                     VACCINATED: You need to record whether the child was vaccinated or not. Enter ‘Y’ or ‘N’ in the ‘VACCINATED’ column.\nE                                     BATCH_EXPIRY_DATE: must be blank\nE                                     BATCH_NUMBER: must be blank\nE                                     ANATOMICAL_SITE: must be blank\nE                                     REASON_NOT_VACCINATED: Enter a valid reason\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 37\nE                               \nE                   \nE                               \nE                                     CARE_SETTING: Enter a valid care setting.\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 38\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 39\nE                               \nE                   \nE                               \nE                                     BATCH_NUMBER: must be at most 100 characters long\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                           \nE                   \nE                         \nE                       \nE                   \nE                   \nE                   \nE                   \nE                       \nE                     \nE                   \nE                          \nE                   Call log:\nE                     - Expect \"to_contain_text\" with timeout 5000ms\nE                     - waiting for get_by_role(\"main\")\nE                       9 × locator resolved to <main role=\"main\" id=\"main-content\" class=\"nhsuk-main-wrapper\">…</main>\nE                         - unexpected value \"\nE                           \nE                   \nE                             \nE                       \nE                         \nE                   \nE                         \nE                     Upload (30 January 2026 at 10:51am)\nE                   \nE                       \nE                   \nE                         \nE                             Details\nE                   \nE                   \nE                   \nE                   \nE                           \nE                   \nE                     Uploaded byNURSE, NurseFileVaccsFileMapping.HIST_NEGATIVE20260130105139.csvTypeVaccination recordsStatusInvalid\nE                   \nE                         \nE                       \nE                   \nE                   \nE                             \nE                   \nE                         \nE                                     Records could not be imported\nE                   \nE                   \nE                   \nE                   \nE                   \nE                           \nE                   \nE                         \nE                       \nE                         The records cannot be uploaded due to errors in the CSV file.\nE                   \nE                       \nE                   \nE                       How to format your Mavis CSV file for vaccination records\nE                     Make sure the CSV you upload uses the following columns:\nE                   \nE                     Column nameNotesORGANISATION_CODEOptional, must be a valid ODS code.SCHOOL_URNOptional, must be 6 digits and numeric. Use 888888 for school unknown and 999999 for homeschooled.SCHOOL_NAMERequired if SCHOOL_URN is 888888.NHS_NUMBEROptional, must be a valid NHS number.PERSON_FORENAMERequiredPERSON_SURNAMERequiredPERSON_DOBRequired, must use either YYYYMMDD or DD/MM/YYYY format.PERSON_GENDER_CODERequired, must be one of: female, male, not known or not specified.PERSON_POSTCODERequired, must be formatted as a valid postcode, for example SW1A 1AA.DATE_OF_VACCINATIONRequired, must use either YYYYMMDD or DD/MM/YYYY format.TIME_OF_VACCINATIONOptional, must use HH:MM:SS format.VACCINATEDRequired, must be Y or N. Can be omitted if VACCINE_GIVEN is provided.VACCINE_GIVENOptional, must be one of: Sequirus Cell-based Trivalent, AstraZeneca Fluenz, Sanofi Vaxigrip, Viatris, Cervarix, Gardasil, Gardasil9, MenQuadfi, Menveo, Nimenrix, Priorix, VaxPro, ProQuad, Priorix-Tetra or Revaxis.BATCH_NUMBERRequired if BATCH_EXPIRY_DATE is provided.BATCH_EXPIRY_DATERequired if BATCH_NUMBER is provided, must use either YYYYMMDD or DD/MM/YYYY format.PROGRAMMERequired, must be Flu, HPV, ACWYX4, MenACWY, MMR, MMRV, 3-in-1 or Td/IPV.ANATOMICAL_SITEOptional, if provided must be appropriate for the vaccine delivery method and be one of: left arm (lower position), left arm (upper position), left buttock, left deltoid, left thigh, left upper arm, nasal, right arm (lower position), right arm (upper position), right buttock, right deltoid, right thigh or right upper arm.REASON_NOT_VACCINATEDRequired if VACCINATED is N, must be already had elsewhere, refused, unwell or vaccination contraindicated.NOTESOptionalDOSE_SEQUENCEOptional, must be a number or 1B, 1P, 1st Scheduled Booster, 2B, 2P, 2nd Scheduled Booster or 3P.CARE_SETTINGOptional, must be 1 (school) or 2 (clinic).CLINIC_NAMERequired if CARE_SETTING is 2, must be the name of a community clinic location.PERFORMING_PROFESSIONAL_EMAILRequired if uploading offline vaccination records.PERFORMING_PROFESSIONAL_FORENAMEOptionalPERFORMING_PROFESSIONAL_SURNAMEOptional\nE                   \nE                   \nE                   \nE                           \nE                               \nE                                   Row 2\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 3\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 5\nE                               \nE                   \nE                               \nE                                     SCHOOL_NAME or School is required\nE                               \nE                               \nE                                   Row 6\nE                               \nE                   \nE                               \nE                                     NHS_NUMBER: should be a valid NHS number with 10 characters\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 7\nE                               \nE                   \nE                               \nE                                     NHS_NUMBER: should be a valid NHS number with 10 characters\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 8\nE                               \nE                   \nE                               \nE                                     PERSON_FORENAME or First name is required\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 9\nE                               \nE                   \nE                               \nE                                     PERSON_SURNAME or Surname is required\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 10\nE                               \nE                   \nE                               \nE                                     PERSON_DOB or Date of birth is required\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 11\nE                               \nE                   \nE                               \nE                                     PERSON_DOB: Enter a date of birth in the correct format.\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 12\nE                               \nE                   \nE                               \nE                                     DATE_OF_VACCINATION: The vaccination date is before the date of birth.\nE                                     PERSON_DOB: Enter a date of birth in the past.\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 13\nE                               \nE                   \nE                               \nE                                     PERSON_DOB: Enter a date of birth in the correct format.\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 14\nE                               \nE                   \nE                               \nE                                     PERSON_GENDER_CODE, PERSON_GENDER or Sex is required\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 15\nE                               \nE                   \nE                               \nE                                     PERSON_GENDER_CODE: Enter a valid gender or gender code.\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 16\nE                               \nE                   \nE                               \nE                                     PERSON_POSTCODE or Postcode is required\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 17\nE                               \nE                   \nE                               \nE                                     PERSON_POSTCODE: Enter a valid postcode, such as SW1A 1AA.\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 18\nE                               \nE                   \nE                               \nE                                     DATE_OF_VACCINATION or Event date is required\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 19\nE                               \nE                   \nE                               \nE                                     DATE_OF_VACCINATION: The vaccination date is in the future.\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 20\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 21\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 22\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 23\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 24\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 25\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 26\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 27\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 28\nE                               \nE                   \nE                               \nE                                     DOSE_SEQUENCE: must be less than or equal to 3\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 29\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 30\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 31\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 32\nE                               \nE                   \nE                               \nE                                     PERFORMING_PROFESSIONAL_EMAIL: Enter a valid email address\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 33\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 34\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                                     TIME_OF_VACCINATION: Enter a time in the correct format.\nE                               \nE                               \nE                                   Row 35\nE                               \nE                   \nE                               \nE                                     REASON_NOT_VACCINATED: must be blank\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 36\nE                               \nE                   \nE                               \nE                                     VACCINATED: You need to record whether the child was vaccinated or not. Enter ‘Y’ or ‘N’ in the ‘VACCINATED’ column.\nE                                     BATCH_EXPIRY_DATE: must be blank\nE                                     BATCH_NUMBER: must be blank\nE                                     ANATOMICAL_SITE: must be blank\nE                                     REASON_NOT_VACCINATED: Enter a valid reason\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 37\nE                               \nE                   \nE                               \nE                                     CARE_SETTING: Enter a valid care setting.\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 38\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 39\nE                               \nE                   \nE                               \nE                                     BATCH_NUMBER: must be at most 100 characters long\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                           \nE                   \nE                         \nE                       \nE                   \nE                   \nE                   \nE                   \nE                       \nE                     \nE                   \nE                         \"\n\nmavis/test/pages/imports/import_records_wizard_page.py:240: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"base_url","time":{"start":1769769795624,"stop":1769769795624,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1769769795624,"stop":1769769795624,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_session_faker","time":{"start":1769769795625,"stop":1769769795626,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1769769795626,"stop":1769769795630,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"onboarding","time":{"start":1769769795630,"stop":1769769819526,"duration":23896},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"programmes_enabled","time":{"start":1769769795630,"stop":1769769795630,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"year_groups","time":{"start":1769769795630,"stop":1769769795630,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1769769795630,"stop":1769769795630,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"team","time":{"start":1769769819526,"stop":1769769819526,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1769769819526,"stop":1769769819526,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1769769819526,"stop":1769769819986,"duration":460},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests","time":{"start":1769769819526,"stop":1769769819526,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1769769819987,"stop":1769769819987,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1769769819987,"stop":1769769819988,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1769769819988,"stop":1769769819988,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1769769819988,"stop":1769769820177,"duration":189},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1769769819988,"stop":1769769819988,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1769769820179,"stop":1769769820188,"duration":9},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1769769820188,"stop":1769769820189,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1769769820189,"stop":1769769820189,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_token","time":{"start":1769769820189,"stop":1769769820189,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_credentials","time":{"start":1769769820189,"stop":1769769820189,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"nurse","time":{"start":1769769830130,"stop":1769769830130,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"organisation","time":{"start":1769769851175,"stop":1769769851175,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"schools","time":{"start":1769769851175,"stop":1769769851175,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clinics","time":{"start":1769769851175,"stop":1769769851175,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"reset_before_each_module","time":{"start":1769770259676,"stop":1769770260039,"duration":363},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1769770295187,"stop":1769770295187,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1769770295187,"stop":1769770295187,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1769770295187,"stop":1769770295193,"duration":6},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1769770295187,"stop":1769770295187,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1769770295193,"stop":1769770295219,"duration":26},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_feature_flags","time":{"start":1769770295219,"stop":1769770295219,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_as_nurse","time":{"start":1769770295220,"stop":1769770297438,"duration":2218},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1769770295220,"stop":1769770296543,"duration":1323},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1769770295220,"stop":1769770296543,"duration":1323},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.log_in_page.LogInPage object at 0x7fd8708e7e30>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Log in as User(username='lewiskate@example.net', password='lewiskate@example.net', role='nurse') and choose team Team(name='Marshall LLC est. 1983', workgroup='A207G', careplus_venue_code='A207GA', careplus_staff_code='A207GB', careplus_staff_type='A207GC', email='psmith@example.org', phone='(07700) 900207')","time":{"start":1769770296543,"stop":1769770297438,"duration":895},"status":"passed","steps":[{"name":"Log in as {1} and choose team {2}","time":{"start":1769770296543,"stop":1769770297438,"duration":895},"status":"passed","steps":[{"name":"Log in as User(username='lewiskate@example.net', password='lewiskate@example.net', role='nurse')","time":{"start":1769770296543,"stop":1769770297405,"duration":862},"status":"passed","steps":[{"name":"Log in as {1}","time":{"start":1769770296543,"stop":1769770297405,"duration":862},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.log_in_page.LogInPage object at 0x7fd8708e52e0>, User(username='lewiskate@example.net', password='lewiskate@example.net', role='nurse'))"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.log_in_page.LogInPage object at 0x7fd8708e52e0>, User(username='lewiskate@example.net', password='lewiskate@example.net', role='nurse'), Team(name='Marshall LLC est. 1983', workgroup='A207G', careplus_venue_code='A207GA', careplus_staff_code='A207GB', careplus_staff_type='A207GC', email='psmith@example.org', phone='(07700) 900207'))"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"children","time":{"start":1769770297438,"stop":1769770297441,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_hist_vaccs","time":{"start":1769770297442,"stop":1769770299031,"duration":1589},"status":"passed","steps":[{"name":"Click on Imports","time":{"start":1769770297443,"stop":1769770297660,"duration":217},"status":"passed","steps":[{"name":"Click on Imports","time":{"start":1769770297443,"stop":1769770297660,"duration":217},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.dashboard_page.DashboardPage object at 0x7fd8708a1f40>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Upload records","time":{"start":1769770297660,"stop":1769770298319,"duration":659},"status":"passed","steps":[{"name":"Click on Upload records","time":{"start":1769770297660,"stop":1769770298319,"duration":659},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.imports.imports_page.ImportsPage object at 0x7fd86a606570>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select Vaccination Records","time":{"start":1769770298319,"stop":1769770298384,"duration":65},"status":"passed","steps":[{"name":"Select Vaccination Records","time":{"start":1769770298319,"stop":1769770298384,"duration":65},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.imports.import_records_wizard_page.ImportRecordsWizardPage object at 0x7fd86b1298d0>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1769770298384,"stop":1769770299031,"duration":647},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1769770298384,"stop":1769770299031,"duration":647},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.imports.import_records_wizard_page.ImportRecordsWizardPage object at 0x7fd86b1298d0>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":8,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"file_generator","time":{"start":1769770297442,"stop":1769770297442,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\nTest: Upload a historic vaccination records file with invalid data and\n   verify error handling.\nSteps:\n1. Navigate to vaccination records import page.\n2. Upload a historic file with invalid data.\nVerification:\n- Output lists errors as expected for each record\nScenarios covered:\nInvalidODSCode, EmptyOrgCode, EmptySchoolURN, NotKnownSchoolEmpty, LongNHSNumber,\nShortNHSNumber, EmptyForename, EmptyLastname, EmptyDOB, InvalidFormatDOB, FutureDOB,\nNonLeapYearDOB, EmptyGender, InvalidGender, EmptyPostCode, InvalidPostCode,\nEmptyVaccDate, FutureVaccDate, EmptyVaccGiven, EmptyBatchNumber, EmptyExpiryDate,\nEmptyAnatomicalSite, InvalidAnatomicalSite, InvalidAnatomicalSite,\nInvalidAnatomicalSite, EmptyDoseSeq, InvalidDoseSeq, EmptyCareSetting,\nInvalidProfFName, InvalidProfSName, InvalidProfEmail, InvalidClinic, InvalidTime,\nInvalidReason, InvalidVaccinatedFlag, InvalidCareSetting, TimeInFuture,\nLongBatchNumber\n","status":"failed","statusMessage":"AssertionError: Locator expected to contain text 'Row 34 TIME_OF_VACCINATION: Enter a time in the correct format.'\nActual value: \n        \n\n          \n    \n      \n\n      \n  Upload (30 January 2026 at 10:51am)\n\n    \n\n      \n          Details\n\n\n\n\n        \n\n  Uploaded byNURSE, NurseFileVaccsFileMapping.HIST_NEGATIVE20260130105139.csvTypeVaccination recordsStatusInvalid\n\n      \n    \n\n\n          \n\n      \n                  Records could not be imported\n\n\n\n\n\n        \n\n      \n    \n      The records cannot be uploaded due to errors in the CSV file.\n\n    \n\n    How to format your Mavis CSV file for vaccination records\n  Make sure the CSV you upload uses the following columns:\n\n  Column nameNotesORGANISATION_CODEOptional, must be a valid ODS code.SCHOOL_URNOptional, must be 6 digits and numeric. Use 888888 for school unknown and 999999 for homeschooled.SCHOOL_NAMERequired if SCHOOL_URN is 888888.NHS_NUMBEROptional, must be a valid NHS number.PERSON_FORENAMERequiredPERSON_SURNAMERequiredPERSON_DOBRequired, must use either YYYYMMDD or DD/MM/YYYY format.PERSON_GENDER_CODERequired, must be one of: female, male, not known or not specified.PERSON_POSTCODERequired, must be formatted as a valid postcode, for example SW1A 1AA.DATE_OF_VACCINATIONRequired, must use either YYYYMMDD or DD/MM/YYYY format.TIME_OF_VACCINATIONOptional, must use HH:MM:SS format.VACCINATEDRequired, must be Y or N. Can be omitted if VACCINE_GIVEN is provided.VACCINE_GIVENOptional, must be one of: Sequirus Cell-based Trivalent, AstraZeneca Fluenz, Sanofi Vaxigrip, Viatris, Cervarix, Gardasil, Gardasil9, MenQuadfi, Menveo, Nimenrix, Priorix, VaxPro, ProQuad, Priorix-Tetra or Revaxis.BATCH_NUMBERRequired if BATCH_EXPIRY_DATE is provided.BATCH_EXPIRY_DATERequired if BATCH_NUMBER is provided, must use either YYYYMMDD or DD/MM/YYYY format.PROGRAMMERequired, must be Flu, HPV, ACWYX4, MenACWY, MMR, MMRV, 3-in-1 or Td/IPV.ANATOMICAL_SITEOptional, if provided must be appropriate for the vaccine delivery method and be one of: left arm (lower position), left arm (upper position), left buttock, left deltoid, left thigh, left upper arm, nasal, right arm (lower position), right arm (upper position), right buttock, right deltoid, right thigh or right upper arm.REASON_NOT_VACCINATEDRequired if VACCINATED is N, must be already had elsewhere, refused, unwell or vaccination contraindicated.NOTESOptionalDOSE_SEQUENCEOptional, must be a number or 1B, 1P, 1st Scheduled Booster, 2B, 2P, 2nd Scheduled Booster or 3P.CARE_SETTINGOptional, must be 1 (school) or 2 (clinic).CLINIC_NAMERequired if CARE_SETTING is 2, must be the name of a community clinic location.PERFORMING_PROFESSIONAL_EMAILRequired if uploading offline vaccination records.PERFORMING_PROFESSIONAL_FORENAMEOptionalPERFORMING_PROFESSIONAL_SURNAMEOptional\n\n\n\n        \n            \n                Row 2\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 3\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 5\n            \n\n            \n                  SCHOOL_NAME or School is required\n            \n            \n                Row 6\n            \n\n            \n                  NHS_NUMBER: should be a valid NHS number with 10 characters\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 7\n            \n\n            \n                  NHS_NUMBER: should be a valid NHS number with 10 characters\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 8\n            \n\n            \n                  PERSON_FORENAME or First name is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 9\n            \n\n            \n                  PERSON_SURNAME or Surname is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 10\n            \n\n            \n                  PERSON_DOB or Date of birth is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 11\n            \n\n            \n                  PERSON_DOB: Enter a date of birth in the correct format.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 12\n            \n\n            \n                  DATE_OF_VACCINATION: The vaccination date is before the date of birth.\n                  PERSON_DOB: Enter a date of birth in the past.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 13\n            \n\n            \n                  PERSON_DOB: Enter a date of birth in the correct format.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 14\n            \n\n            \n                  PERSON_GENDER_CODE, PERSON_GENDER or Sex is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 15\n            \n\n            \n                  PERSON_GENDER_CODE: Enter a valid gender or gender code.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 16\n            \n\n            \n                  PERSON_POSTCODE or Postcode is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 17\n            \n\n            \n                  PERSON_POSTCODE: Enter a valid postcode, such as SW1A 1AA.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 18\n            \n\n            \n                  DATE_OF_VACCINATION or Event date is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 19\n            \n\n            \n                  DATE_OF_VACCINATION: The vaccination date is in the future.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 20\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 21\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 22\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 23\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 24\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 25\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 26\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 27\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 28\n            \n\n            \n                  DOSE_SEQUENCE: must be less than or equal to 3\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 29\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 30\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 31\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 32\n            \n\n            \n                  PERFORMING_PROFESSIONAL_EMAIL: Enter a valid email address\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 33\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 34\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n                  TIME_OF_VACCINATION: Enter a time in the correct format.\n            \n            \n                Row 35\n            \n\n            \n                  REASON_NOT_VACCINATED: must be blank\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 36\n            \n\n            \n                  VACCINATED: You need to record whether the child was vaccinated or not. Enter ‘Y’ or ‘N’ in the ‘VACCINATED’ column.\n                  BATCH_EXPIRY_DATE: must be blank\n                  BATCH_NUMBER: must be blank\n                  ANATOMICAL_SITE: must be blank\n                  REASON_NOT_VACCINATED: Enter a valid reason\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 37\n            \n\n            \n                  CARE_SETTING: Enter a valid care setting.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 38\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 39\n            \n\n            \n                  BATCH_NUMBER: must be at most 100 characters long\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n        \n\n      \n    \n\n\n\n\n    \n  \n\n       \nCall log:\n  - Expect \"to_contain_text\" with timeout 5000ms\n  - waiting for get_by_role(\"main\")\n    9 × locator resolved to <main role=\"main\" id=\"main-content\" class=\"nhsuk-main-wrapper\">…</main>\n      - unexpected value \"\n        \n\n          \n    \n      \n\n      \n  Upload (30 January 2026 at 10:51am)\n\n    \n\n      \n          Details\n\n\n\n\n        \n\n  Uploaded byNURSE, NurseFileVaccsFileMapping.HIST_NEGATIVE20260130105139.csvTypeVaccination recordsStatusInvalid\n\n      \n    \n\n\n          \n\n      \n                  Records could not be imported\n\n\n\n\n\n        \n\n      \n    \n      The records cannot be uploaded due to errors in the CSV file.\n\n    \n\n    How to format your Mavis CSV file for vaccination records\n  Make sure the CSV you upload uses the following columns:\n\n  Column nameNotesORGANISATION_CODEOptional, must be a valid ODS code.SCHOOL_URNOptional, must be 6 digits and numeric. Use 888888 for school unknown and 999999 for homeschooled.SCHOOL_NAMERequired if SCHOOL_URN is 888888.NHS_NUMBEROptional, must be a valid NHS number.PERSON_FORENAMERequiredPERSON_SURNAMERequiredPERSON_DOBRequired, must use either YYYYMMDD or DD/MM/YYYY format.PERSON_GENDER_CODERequired, must be one of: female, male, not known or not specified.PERSON_POSTCODERequired, must be formatted as a valid postcode, for example SW1A 1AA.DATE_OF_VACCINATIONRequired, must use either YYYYMMDD or DD/MM/YYYY format.TIME_OF_VACCINATIONOptional, must use HH:MM:SS format.VACCINATEDRequired, must be Y or N. Can be omitted if VACCINE_GIVEN is provided.VACCINE_GIVENOptional, must be one of: Sequirus Cell-based Trivalent, AstraZeneca Fluenz, Sanofi Vaxigrip, Viatris, Cervarix, Gardasil, Gardasil9, MenQuadfi, Menveo, Nimenrix, Priorix, VaxPro, ProQuad, Priorix-Tetra or Revaxis.BATCH_NUMBERRequired if BATCH_EXPIRY_DATE is provided.BATCH_EXPIRY_DATERequired if BATCH_NUMBER is provided, must use either YYYYMMDD or DD/MM/YYYY format.PROGRAMMERequired, must be Flu, HPV, ACWYX4, MenACWY, MMR, MMRV, 3-in-1 or Td/IPV.ANATOMICAL_SITEOptional, if provided must be appropriate for the vaccine delivery method and be one of: left arm (lower position), left arm (upper position), left buttock, left deltoid, left thigh, left upper arm, nasal, right arm (lower position), right arm (upper position), right buttock, right deltoid, right thigh or right upper arm.REASON_NOT_VACCINATEDRequired if VACCINATED is N, must be already had elsewhere, refused, unwell or vaccination contraindicated.NOTESOptionalDOSE_SEQUENCEOptional, must be a number or 1B, 1P, 1st Scheduled Booster, 2B, 2P, 2nd Scheduled Booster or 3P.CARE_SETTINGOptional, must be 1 (school) or 2 (clinic).CLINIC_NAMERequired if CARE_SETTING is 2, must be the name of a community clinic location.PERFORMING_PROFESSIONAL_EMAILRequired if uploading offline vaccination records.PERFORMING_PROFESSIONAL_FORENAMEOptionalPERFORMING_PROFESSIONAL_SURNAMEOptional\n\n\n\n        \n            \n                Row 2\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 3\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 5\n            \n\n            \n                  SCHOOL_NAME or School is required\n            \n            \n                Row 6\n            \n\n            \n                  NHS_NUMBER: should be a valid NHS number with 10 characters\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 7\n            \n\n            \n                  NHS_NUMBER: should be a valid NHS number with 10 characters\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 8\n            \n\n            \n                  PERSON_FORENAME or First name is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 9\n            \n\n            \n                  PERSON_SURNAME or Surname is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 10\n            \n\n            \n                  PERSON_DOB or Date of birth is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 11\n            \n\n            \n                  PERSON_DOB: Enter a date of birth in the correct format.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 12\n            \n\n            \n                  DATE_OF_VACCINATION: The vaccination date is before the date of birth.\n                  PERSON_DOB: Enter a date of birth in the past.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 13\n            \n\n            \n                  PERSON_DOB: Enter a date of birth in the correct format.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 14\n            \n\n            \n                  PERSON_GENDER_CODE, PERSON_GENDER or Sex is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 15\n            \n\n            \n                  PERSON_GENDER_CODE: Enter a valid gender or gender code.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 16\n            \n\n            \n                  PERSON_POSTCODE or Postcode is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 17\n            \n\n            \n                  PERSON_POSTCODE: Enter a valid postcode, such as SW1A 1AA.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 18\n            \n\n            \n                  DATE_OF_VACCINATION or Event date is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 19\n            \n\n            \n                  DATE_OF_VACCINATION: The vaccination date is in the future.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 20\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 21\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 22\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 23\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 24\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 25\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 26\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 27\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 28\n            \n\n            \n                  DOSE_SEQUENCE: must be less than or equal to 3\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 29\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 30\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 31\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 32\n            \n\n            \n                  PERFORMING_PROFESSIONAL_EMAIL: Enter a valid email address\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 33\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 34\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n                  TIME_OF_VACCINATION: Enter a time in the correct format.\n            \n            \n                Row 35\n            \n\n            \n                  REASON_NOT_VACCINATED: must be blank\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 36\n            \n\n            \n                  VACCINATED: You need to record whether the child was vaccinated or not. Enter ‘Y’ or ‘N’ in the ‘VACCINATED’ column.\n                  BATCH_EXPIRY_DATE: must be blank\n                  BATCH_NUMBER: must be blank\n                  ANATOMICAL_SITE: must be blank\n                  REASON_NOT_VACCINATED: Enter a valid reason\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 37\n            \n\n            \n                  CARE_SETTING: Enter a valid care setting.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 38\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 39\n            \n\n            \n                  BATCH_NUMBER: must be at most 100 characters long\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n        \n\n      \n    \n\n\n\n\n    \n  \n\n      \"","statusTrace":"setup_hist_vaccs = None\npage = <Page url='http://3.8.164.95:4000/immunisation-imports/52'>\nfile_generator = <mavis.test.data.file_generator.FileGenerator object at 0x7fd86ab1d1c0>\n\n    @pytest.mark.vaccinations\n    def test_vaccination_file_upload_historic_invalid_data(\n        setup_hist_vaccs,\n        page,\n        file_generator,\n    ):\n        \"\"\"\n        Test: Upload a historic vaccination records file with invalid data and\n           verify error handling.\n        Steps:\n        1. Navigate to vaccination records import page.\n        2. Upload a historic file with invalid data.\n        Verification:\n        - Output lists errors as expected for each record\n        Scenarios covered:\n        InvalidODSCode, EmptyOrgCode, EmptySchoolURN, NotKnownSchoolEmpty, LongNHSNumber,\n        ShortNHSNumber, EmptyForename, EmptyLastname, EmptyDOB, InvalidFormatDOB, FutureDOB,\n        NonLeapYearDOB, EmptyGender, InvalidGender, EmptyPostCode, InvalidPostCode,\n        EmptyVaccDate, FutureVaccDate, EmptyVaccGiven, EmptyBatchNumber, EmptyExpiryDate,\n        EmptyAnatomicalSite, InvalidAnatomicalSite, InvalidAnatomicalSite,\n        InvalidAnatomicalSite, EmptyDoseSeq, InvalidDoseSeq, EmptyCareSetting,\n        InvalidProfFName, InvalidProfSName, InvalidProfEmail, InvalidClinic, InvalidTime,\n        InvalidReason, InvalidVaccinatedFlag, InvalidCareSetting, TimeInFuture,\n        LongBatchNumber\n        \"\"\"\n>       ImportRecordsWizardPage(page, file_generator).upload_and_verify_output(\n            VaccsFileMapping.HIST_NEGATIVE\n        )\n\ntests/test_import_historical_vaccinations.py:84: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmavis/test/pages/imports/import_records_wizard_page.py:179: in upload_and_verify_output\n    self.upload_and_verify_output_for_input_output_files(\nmavis/test/pages/imports/import_records_wizard_page.py:191: in upload_and_verify_output_for_input_output_files\n    self.verify_upload_output(file_path=output_file_path)\nmavis/test/annotations.py:50: in wrapper\n    return_value = func(*args, **kwargs)\n                   ^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mavis.test.pages.imports.import_records_wizard_page.ImportRecordsWizardPage object at 0x7fd86b12a970>\nfile_path = PosixPath('vaccs/o_hist_negative.txt')\n\n    @step(\"Verify upload output for {file_path}\")\n    def verify_upload_output(self, file_path: Path) -> None:\n        _expected_errors = self.file_generator.get_expected_errors(file_path)\n        if _expected_errors is not None:\n            for _msg in _expected_errors:\n                if _msg.startswith(\"!\"):\n                    expect(self.page.get_by_role(\"main\")).not_to_contain_text(_msg[1:])\n                else:\n>                   expect(self.page.get_by_role(\"main\")).to_contain_text(_msg)\nE                   AssertionError: Locator expected to contain text 'Row 34 TIME_OF_VACCINATION: Enter a time in the correct format.'\nE                   Actual value: \nE                           \nE                   \nE                             \nE                       \nE                         \nE                   \nE                         \nE                     Upload (30 January 2026 at 10:51am)\nE                   \nE                       \nE                   \nE                         \nE                             Details\nE                   \nE                   \nE                   \nE                   \nE                           \nE                   \nE                     Uploaded byNURSE, NurseFileVaccsFileMapping.HIST_NEGATIVE20260130105139.csvTypeVaccination recordsStatusInvalid\nE                   \nE                         \nE                       \nE                   \nE                   \nE                             \nE                   \nE                         \nE                                     Records could not be imported\nE                   \nE                   \nE                   \nE                   \nE                   \nE                           \nE                   \nE                         \nE                       \nE                         The records cannot be uploaded due to errors in the CSV file.\nE                   \nE                       \nE                   \nE                       How to format your Mavis CSV file for vaccination records\nE                     Make sure the CSV you upload uses the following columns:\nE                   \nE                     Column nameNotesORGANISATION_CODEOptional, must be a valid ODS code.SCHOOL_URNOptional, must be 6 digits and numeric. Use 888888 for school unknown and 999999 for homeschooled.SCHOOL_NAMERequired if SCHOOL_URN is 888888.NHS_NUMBEROptional, must be a valid NHS number.PERSON_FORENAMERequiredPERSON_SURNAMERequiredPERSON_DOBRequired, must use either YYYYMMDD or DD/MM/YYYY format.PERSON_GENDER_CODERequired, must be one of: female, male, not known or not specified.PERSON_POSTCODERequired, must be formatted as a valid postcode, for example SW1A 1AA.DATE_OF_VACCINATIONRequired, must use either YYYYMMDD or DD/MM/YYYY format.TIME_OF_VACCINATIONOptional, must use HH:MM:SS format.VACCINATEDRequired, must be Y or N. Can be omitted if VACCINE_GIVEN is provided.VACCINE_GIVENOptional, must be one of: Sequirus Cell-based Trivalent, AstraZeneca Fluenz, Sanofi Vaxigrip, Viatris, Cervarix, Gardasil, Gardasil9, MenQuadfi, Menveo, Nimenrix, Priorix, VaxPro, ProQuad, Priorix-Tetra or Revaxis.BATCH_NUMBERRequired if BATCH_EXPIRY_DATE is provided.BATCH_EXPIRY_DATERequired if BATCH_NUMBER is provided, must use either YYYYMMDD or DD/MM/YYYY format.PROGRAMMERequired, must be Flu, HPV, ACWYX4, MenACWY, MMR, MMRV, 3-in-1 or Td/IPV.ANATOMICAL_SITEOptional, if provided must be appropriate for the vaccine delivery method and be one of: left arm (lower position), left arm (upper position), left buttock, left deltoid, left thigh, left upper arm, nasal, right arm (lower position), right arm (upper position), right buttock, right deltoid, right thigh or right upper arm.REASON_NOT_VACCINATEDRequired if VACCINATED is N, must be already had elsewhere, refused, unwell or vaccination contraindicated.NOTESOptionalDOSE_SEQUENCEOptional, must be a number or 1B, 1P, 1st Scheduled Booster, 2B, 2P, 2nd Scheduled Booster or 3P.CARE_SETTINGOptional, must be 1 (school) or 2 (clinic).CLINIC_NAMERequired if CARE_SETTING is 2, must be the name of a community clinic location.PERFORMING_PROFESSIONAL_EMAILRequired if uploading offline vaccination records.PERFORMING_PROFESSIONAL_FORENAMEOptionalPERFORMING_PROFESSIONAL_SURNAMEOptional\nE                   \nE                   \nE                   \nE                           \nE                               \nE                                   Row 2\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 3\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 5\nE                               \nE                   \nE                               \nE                                     SCHOOL_NAME or School is required\nE                               \nE                               \nE                                   Row 6\nE                               \nE                   \nE                               \nE                                     NHS_NUMBER: should be a valid NHS number with 10 characters\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 7\nE                               \nE                   \nE                               \nE                                     NHS_NUMBER: should be a valid NHS number with 10 characters\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 8\nE                               \nE                   \nE                               \nE                                     PERSON_FORENAME or First name is required\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 9\nE                               \nE                   \nE                               \nE                                     PERSON_SURNAME or Surname is required\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 10\nE                               \nE                   \nE                               \nE                                     PERSON_DOB or Date of birth is required\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 11\nE                               \nE                   \nE                               \nE                                     PERSON_DOB: Enter a date of birth in the correct format.\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 12\nE                               \nE                   \nE                               \nE                                     DATE_OF_VACCINATION: The vaccination date is before the date of birth.\nE                                     PERSON_DOB: Enter a date of birth in the past.\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 13\nE                               \nE                   \nE                               \nE                                     PERSON_DOB: Enter a date of birth in the correct format.\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 14\nE                               \nE                   \nE                               \nE                                     PERSON_GENDER_CODE, PERSON_GENDER or Sex is required\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 15\nE                               \nE                   \nE                               \nE                                     PERSON_GENDER_CODE: Enter a valid gender or gender code.\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 16\nE                               \nE                   \nE                               \nE                                     PERSON_POSTCODE or Postcode is required\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 17\nE                               \nE                   \nE                               \nE                                     PERSON_POSTCODE: Enter a valid postcode, such as SW1A 1AA.\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 18\nE                               \nE                   \nE                               \nE                                     DATE_OF_VACCINATION or Event date is required\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 19\nE                               \nE                   \nE                               \nE                                     DATE_OF_VACCINATION: The vaccination date is in the future.\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 20\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 21\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 22\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 23\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 24\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 25\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 26\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 27\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 28\nE                               \nE                   \nE                               \nE                                     DOSE_SEQUENCE: must be less than or equal to 3\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 29\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 30\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 31\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 32\nE                               \nE                   \nE                               \nE                                     PERFORMING_PROFESSIONAL_EMAIL: Enter a valid email address\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 33\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 34\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                                     TIME_OF_VACCINATION: Enter a time in the correct format.\nE                               \nE                               \nE                                   Row 35\nE                               \nE                   \nE                               \nE                                     REASON_NOT_VACCINATED: must be blank\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 36\nE                               \nE                   \nE                               \nE                                     VACCINATED: You need to record whether the child was vaccinated or not. Enter ‘Y’ or ‘N’ in the ‘VACCINATED’ column.\nE                                     BATCH_EXPIRY_DATE: must be blank\nE                                     BATCH_NUMBER: must be blank\nE                                     ANATOMICAL_SITE: must be blank\nE                                     REASON_NOT_VACCINATED: Enter a valid reason\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 37\nE                               \nE                   \nE                               \nE                                     CARE_SETTING: Enter a valid care setting.\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 38\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 39\nE                               \nE                   \nE                               \nE                                     BATCH_NUMBER: must be at most 100 characters long\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                           \nE                   \nE                         \nE                       \nE                   \nE                   \nE                   \nE                   \nE                       \nE                     \nE                   \nE                          \nE                   Call log:\nE                     - Expect \"to_contain_text\" with timeout 5000ms\nE                     - waiting for get_by_role(\"main\")\nE                       9 × locator resolved to <main role=\"main\" id=\"main-content\" class=\"nhsuk-main-wrapper\">…</main>\nE                         - unexpected value \"\nE                           \nE                   \nE                             \nE                       \nE                         \nE                   \nE                         \nE                     Upload (30 January 2026 at 10:51am)\nE                   \nE                       \nE                   \nE                         \nE                             Details\nE                   \nE                   \nE                   \nE                   \nE                           \nE                   \nE                     Uploaded byNURSE, NurseFileVaccsFileMapping.HIST_NEGATIVE20260130105139.csvTypeVaccination recordsStatusInvalid\nE                   \nE                         \nE                       \nE                   \nE                   \nE                             \nE                   \nE                         \nE                                     Records could not be imported\nE                   \nE                   \nE                   \nE                   \nE                   \nE                           \nE                   \nE                         \nE                       \nE                         The records cannot be uploaded due to errors in the CSV file.\nE                   \nE                       \nE                   \nE                       How to format your Mavis CSV file for vaccination records\nE                     Make sure the CSV you upload uses the following columns:\nE                   \nE                     Column nameNotesORGANISATION_CODEOptional, must be a valid ODS code.SCHOOL_URNOptional, must be 6 digits and numeric. Use 888888 for school unknown and 999999 for homeschooled.SCHOOL_NAMERequired if SCHOOL_URN is 888888.NHS_NUMBEROptional, must be a valid NHS number.PERSON_FORENAMERequiredPERSON_SURNAMERequiredPERSON_DOBRequired, must use either YYYYMMDD or DD/MM/YYYY format.PERSON_GENDER_CODERequired, must be one of: female, male, not known or not specified.PERSON_POSTCODERequired, must be formatted as a valid postcode, for example SW1A 1AA.DATE_OF_VACCINATIONRequired, must use either YYYYMMDD or DD/MM/YYYY format.TIME_OF_VACCINATIONOptional, must use HH:MM:SS format.VACCINATEDRequired, must be Y or N. Can be omitted if VACCINE_GIVEN is provided.VACCINE_GIVENOptional, must be one of: Sequirus Cell-based Trivalent, AstraZeneca Fluenz, Sanofi Vaxigrip, Viatris, Cervarix, Gardasil, Gardasil9, MenQuadfi, Menveo, Nimenrix, Priorix, VaxPro, ProQuad, Priorix-Tetra or Revaxis.BATCH_NUMBERRequired if BATCH_EXPIRY_DATE is provided.BATCH_EXPIRY_DATERequired if BATCH_NUMBER is provided, must use either YYYYMMDD or DD/MM/YYYY format.PROGRAMMERequired, must be Flu, HPV, ACWYX4, MenACWY, MMR, MMRV, 3-in-1 or Td/IPV.ANATOMICAL_SITEOptional, if provided must be appropriate for the vaccine delivery method and be one of: left arm (lower position), left arm (upper position), left buttock, left deltoid, left thigh, left upper arm, nasal, right arm (lower position), right arm (upper position), right buttock, right deltoid, right thigh or right upper arm.REASON_NOT_VACCINATEDRequired if VACCINATED is N, must be already had elsewhere, refused, unwell or vaccination contraindicated.NOTESOptionalDOSE_SEQUENCEOptional, must be a number or 1B, 1P, 1st Scheduled Booster, 2B, 2P, 2nd Scheduled Booster or 3P.CARE_SETTINGOptional, must be 1 (school) or 2 (clinic).CLINIC_NAMERequired if CARE_SETTING is 2, must be the name of a community clinic location.PERFORMING_PROFESSIONAL_EMAILRequired if uploading offline vaccination records.PERFORMING_PROFESSIONAL_FORENAMEOptionalPERFORMING_PROFESSIONAL_SURNAMEOptional\nE                   \nE                   \nE                   \nE                           \nE                               \nE                                   Row 2\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 3\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 5\nE                               \nE                   \nE                               \nE                                     SCHOOL_NAME or School is required\nE                               \nE                               \nE                                   Row 6\nE                               \nE                   \nE                               \nE                                     NHS_NUMBER: should be a valid NHS number with 10 characters\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 7\nE                               \nE                   \nE                               \nE                                     NHS_NUMBER: should be a valid NHS number with 10 characters\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 8\nE                               \nE                   \nE                               \nE                                     PERSON_FORENAME or First name is required\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 9\nE                               \nE                   \nE                               \nE                                     PERSON_SURNAME or Surname is required\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 10\nE                               \nE                   \nE                               \nE                                     PERSON_DOB or Date of birth is required\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 11\nE                               \nE                   \nE                               \nE                                     PERSON_DOB: Enter a date of birth in the correct format.\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 12\nE                               \nE                   \nE                               \nE                                     DATE_OF_VACCINATION: The vaccination date is before the date of birth.\nE                                     PERSON_DOB: Enter a date of birth in the past.\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 13\nE                               \nE                   \nE                               \nE                                     PERSON_DOB: Enter a date of birth in the correct format.\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 14\nE                               \nE                   \nE                               \nE                                     PERSON_GENDER_CODE, PERSON_GENDER or Sex is required\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 15\nE                               \nE                   \nE                               \nE                                     PERSON_GENDER_CODE: Enter a valid gender or gender code.\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 16\nE                               \nE                   \nE                               \nE                                     PERSON_POSTCODE or Postcode is required\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 17\nE                               \nE                   \nE                               \nE                                     PERSON_POSTCODE: Enter a valid postcode, such as SW1A 1AA.\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 18\nE                               \nE                   \nE                               \nE                                     DATE_OF_VACCINATION or Event date is required\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 19\nE                               \nE                   \nE                               \nE                                     DATE_OF_VACCINATION: The vaccination date is in the future.\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 20\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 21\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 22\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 23\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 24\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 25\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 26\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 27\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 28\nE                               \nE                   \nE                               \nE                                     DOSE_SEQUENCE: must be less than or equal to 3\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 29\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 30\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 31\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 32\nE                               \nE                   \nE                               \nE                                     PERFORMING_PROFESSIONAL_EMAIL: Enter a valid email address\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 33\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 34\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                                     TIME_OF_VACCINATION: Enter a time in the correct format.\nE                               \nE                               \nE                                   Row 35\nE                               \nE                   \nE                               \nE                                     REASON_NOT_VACCINATED: must be blank\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 36\nE                               \nE                   \nE                               \nE                                     VACCINATED: You need to record whether the child was vaccinated or not. Enter ‘Y’ or ‘N’ in the ‘VACCINATED’ column.\nE                                     BATCH_EXPIRY_DATE: must be blank\nE                                     BATCH_NUMBER: must be blank\nE                                     ANATOMICAL_SITE: must be blank\nE                                     REASON_NOT_VACCINATED: Enter a valid reason\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 37\nE                               \nE                   \nE                               \nE                                     CARE_SETTING: Enter a valid care setting.\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 38\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 39\nE                               \nE                   \nE                               \nE                                     BATCH_NUMBER: must be at most 100 characters long\nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                           \nE                   \nE                         \nE                       \nE                   \nE                   \nE                   \nE                   \nE                       \nE                     \nE                   \nE                         \"\n\nmavis/test/pages/imports/import_records_wizard_page.py:240: AssertionError","steps":[{"name":"Set input file to PosixPath('working/working_gw3/VaccsFileMapping.HIST_NEGATIVE20260130105139.csv')","time":{"start":1769770299053,"stop":1769770299077,"duration":24},"status":"passed","steps":[{"name":"Set input file to {1}","time":{"start":1769770299053,"stop":1769770299077,"duration":24},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.imports.import_records_wizard_page.ImportRecordsWizardPage object at 0x7fd86b12a970>, PosixPath('working/working_gw3/VaccsFileMapping.HIST_NEGATIVE20260130105139.csv'))"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1769770299077,"stop":1769770299643,"duration":566},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1769770299077,"stop":1769770299643,"duration":566},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.imports.import_records_wizard_page.ImportRecordsWizardPage object at 0x7fd86b12a970>,)"},{"name":"_coverage","value":"'InvalidODSCode, EmptyOrgCode, EmptySchoolURN, NotKnownSchoolEmpty, LongNHSNumber, ShortNHSNumber, EmptyForename, EmptyLastname, EmptyDOB, InvalidFormatDOB, FutureDOB, NonLeapYearDOB, EmptyGender, InvalidGender, EmptyPostCode, InvalidPostCode, EmptyVaccDate, FutureVaccDate, EmptyVaccGiven, EmptyBatchNumber, EmptyExpiryDate, EmptyAnatomicalSite, InvalidAnatomicalSite, InvalidAnatomicalSite, InvalidAnatomicalSite, EmptyDoseSeq, InvalidDoseSeq, EmptyCareSetting, InvalidProfFName, InvalidProfSName, InvalidProfEmail, InvalidClinic, InvalidTime, InvalidReason, InvalidVaccinatedFlag, InvalidCareSetting, TimeInFuture, LongBatchNumber'"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click import link for PosixPath('working/working_gw3/VaccsFileMapping.HIST_NEGATIVE20260130105139.csv')","time":{"start":1769770299679,"stop":1769770300142,"duration":463},"status":"passed","steps":[{"name":"Click import link for {1}","time":{"start":1769770299679,"stop":1769770300142,"duration":463},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.imports.import_records_wizard_page.ImportRecordsWizardPage object at 0x7fd86b12a970>, PosixPath('working/working_gw3/VaccsFileMapping.HIST_NEGATIVE20260130105139.csv'))"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Reload until completed status appears","time":{"start":1769770300142,"stop":1769770300954,"duration":812},"status":"passed","steps":[{"name":"Reload until completed status appears","time":{"start":1769770300142,"stop":1769770300954,"duration":812},"status":"passed","steps":[{"name":"Reload page until <Locator frame=<Frame name= url='http://3.8.164.95:4000/immunisation-imports/52'> selector='internal:role=strong >> internal:text=\"Review and approve\"i >> internal:or=\"internal:role=strong >> internal:text=\\\\\"Completed\\\\\"i\" >> internal:or=\"internal:role=strong >> internal:text=\\\\\"Invalid\\\\\"i\" >> internal:or=\"internal:text=\\\\\"There is a problem\\\\\"i\" >> nth=0'> is visible","time":{"start":1769770300142,"stop":1769770300954,"duration":812},"status":"passed","steps":[{"name":"Reload page until {1} is visible","time":{"start":1769770300142,"stop":1769770300954,"duration":812},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Page url='http://3.8.164.95:4000/immunisation-imports/52'>, <Locator frame=<Frame name= url='http://3.8.164.95:4000/immunisation-imports/52'> selector='internal:role=strong >> internal:text=\"Review and approve\"i >> internal:or=\"internal:role=strong >> internal:text=\\\\\"Completed\\\\\"i\" >> internal:or=\"internal:role=strong >> internal:text=\\\\\"Invalid\\\\\"i\" >> internal:or=\"internal:text=\\\\\"There is a problem\\\\\"i\" >> nth=0'>)"},{"name":"seconds","value":"60"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.imports.import_records_wizard_page.ImportRecordsWizardPage object at 0x7fd86b12a970>,)"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Verify upload output for PosixPath('vaccs/o_hist_negative.txt')","time":{"start":1769770300976,"stop":1769770307462,"duration":6486},"status":"failed","statusMessage":"AssertionError: Locator expected to contain text 'Row 34 TIME_OF_VACCINATION: Enter a time in the correct format.'\nActual value: \n        \n\n          \n    \n      \n\n      \n  Upload (30 January 2026 at 10:51am)\n\n    \n\n      \n          Details\n\n\n\n\n        \n\n  Uploaded byNURSE, NurseFileVaccsFileMapping.HIST_NEGATIVE20260130105139.csvTypeVaccination recordsStatusInvalid\n\n      \n    \n\n\n          \n\n      \n                  Records could not be imported\n\n\n\n\n\n        \n\n      \n    \n      The records cannot be uploaded due to errors in the CSV file.\n\n    \n\n    How to format your Mavis CSV file for vaccination records\n  Make sure the CSV you upload uses the following columns:\n\n  Column nameNotesORGANISATION_CODEOptional, must be a valid ODS code.SCHOOL_URNOptional, must be 6 digits and numeric. Use 888888 for school unknown and 999999 for homeschooled.SCHOOL_NAMERequired if SCHOOL_URN is 888888.NHS_NUMBEROptional, must be a valid NHS number.PERSON_FORENAMERequiredPERSON_SURNAMERequiredPERSON_DOBRequired, must use either YYYYMMDD or DD/MM/YYYY format.PERSON_GENDER_CODERequired, must be one of: female, male, not known or not specified.PERSON_POSTCODERequired, must be formatted as a valid postcode, for example SW1A 1AA.DATE_OF_VACCINATIONRequired, must use either YYYYMMDD or DD/MM/YYYY format.TIME_OF_VACCINATIONOptional, must use HH:MM:SS format.VACCINATEDRequired, must be Y or N. Can be omitted if VACCINE_GIVEN is provided.VACCINE_GIVENOptional, must be one of: Sequirus Cell-based Trivalent, AstraZeneca Fluenz, Sanofi Vaxigrip, Viatris, Cervarix, Gardasil, Gardasil9, MenQuadfi, Menveo, Nimenrix, Priorix, VaxPro, ProQuad, Priorix-Tetra or Revaxis.BATCH_NUMBERRequired if BATCH_EXPIRY_DATE is provided.BATCH_EXPIRY_DATERequired if BATCH_NUMBER is provided, must use either YYYYMMDD or DD/MM/YYYY format.PROGRAMMERequired, must be Flu, HPV, ACWYX4, MenACWY, MMR, MMRV, 3-in-1 or Td/IPV.ANATOMICAL_SITEOptional, if provided must be appropriate for the vaccine delivery method and be one of: left arm (lower position), left arm (upper position), left buttock, left deltoid, left thigh, left upper arm, nasal, right arm (lower position), right arm (upper position), right buttock, right deltoid, right thigh or right upper arm.REASON_NOT_VACCINATEDRequired if VACCINATED is N, must be already had elsewhere, refused, unwell or vaccination contraindicated.NOTESOptionalDOSE_SEQUENCEOptional, must be a number or 1B, 1P, 1st Scheduled Booster, 2B, 2P, 2nd Scheduled Booster or 3P.CARE_SETTINGOptional, must be 1 (school) or 2 (clinic).CLINIC_NAMERequired if CARE_SETTING is 2, must be the name of a community clinic location.PERFORMING_PROFESSIONAL_EMAILRequired if uploading offline vaccination records.PERFORMING_PROFESSIONAL_FORENAMEOptionalPERFORMING_PROFESSIONAL_SURNAMEOptional\n\n\n\n        \n            \n                Row 2\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 3\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 5\n            \n\n            \n                  SCHOOL_NAME or School is required\n            \n            \n                Row 6\n            \n\n            \n                  NHS_NUMBER: should be a valid NHS number with 10 characters\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 7\n            \n\n            \n                  NHS_NUMBER: should be a valid NHS number with 10 characters\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 8\n            \n\n            \n                  PERSON_FORENAME or First name is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 9\n            \n\n            \n                  PERSON_SURNAME or Surname is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 10\n            \n\n            \n                  PERSON_DOB or Date of birth is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 11\n            \n\n            \n                  PERSON_DOB: Enter a date of birth in the correct format.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 12\n            \n\n            \n                  DATE_OF_VACCINATION: The vaccination date is before the date of birth.\n                  PERSON_DOB: Enter a date of birth in the past.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 13\n            \n\n            \n                  PERSON_DOB: Enter a date of birth in the correct format.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 14\n            \n\n            \n                  PERSON_GENDER_CODE, PERSON_GENDER or Sex is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 15\n            \n\n            \n                  PERSON_GENDER_CODE: Enter a valid gender or gender code.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 16\n            \n\n            \n                  PERSON_POSTCODE or Postcode is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 17\n            \n\n            \n                  PERSON_POSTCODE: Enter a valid postcode, such as SW1A 1AA.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 18\n            \n\n            \n                  DATE_OF_VACCINATION or Event date is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 19\n            \n\n            \n                  DATE_OF_VACCINATION: The vaccination date is in the future.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 20\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 21\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 22\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 23\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 24\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 25\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 26\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 27\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 28\n            \n\n            \n                  DOSE_SEQUENCE: must be less than or equal to 3\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 29\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 30\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 31\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 32\n            \n\n            \n                  PERFORMING_PROFESSIONAL_EMAIL: Enter a valid email address\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 33\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 34\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n                  TIME_OF_VACCINATION: Enter a time in the correct format.\n            \n            \n                Row 35\n            \n\n            \n                  REASON_NOT_VACCINATED: must be blank\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 36\n            \n\n            \n                  VACCINATED: You need to record whether the child was vaccinated or not. Enter ‘Y’ or ‘N’ in the ‘VACCINATED’ column.\n                  BATCH_EXPIRY_DATE: must be blank\n                  BATCH_NUMBER: must be blank\n                  ANATOMICAL_SITE: must be blank\n                  REASON_NOT_VACCINATED: Enter a valid reason\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 37\n            \n\n            \n                  CARE_SETTING: Enter a valid care setting.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 38\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 39\n            \n\n            \n                  BATCH_NUMBER: must be at most 100 characters long\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n        \n\n      \n    \n\n\n\n\n    \n  \n\n       \nCall log:\n  - Expect \"to_contain_text\" with timeout 5000ms\n  - waiting for get_by_role(\"main\")\n    9 × locator resolved to <main role=\"main\" id=\"main-content\" class=\"nhsuk-main-wrapper\">…</main>\n      - unexpected value \"\n        \n\n          \n    \n      \n\n      \n  Upload (30 January 2026 at 10:51am)\n\n    \n\n      \n          Details\n\n\n\n\n        \n\n  Uploaded byNURSE, NurseFileVaccsFileMapping.HIST_NEGATIVE20260130105139.csvTypeVaccination recordsStatusInvalid\n\n      \n    \n\n\n          \n\n      \n                  Records could not be imported\n\n\n\n\n\n        \n\n      \n    \n      The records cannot be uploaded due to errors in the CSV file.\n\n    \n\n    How to format your Mavis CSV file for vaccination records\n  Make sure the CSV you upload uses the following columns:\n\n  Column nameNotesORGANISATION_CODEOptional, must be a valid ODS code.SCHOOL_URNOptional, must be 6 digits and numeric. Use 888888 for school unknown and 999999 for homeschooled.SCHOOL_NAMERequired if SCHOOL_URN is 888888.NHS_NUMBEROptional, must be a valid NHS number.PERSON_FORENAMERequiredPERSON_SURNAMERequiredPERSON_DOBRequired, must use either YYYYMMDD or DD/MM/YYYY format.PERSON_GENDER_CODERequired, must be one of: female, male, not known or not specified.PERSON_POSTCODERequired, must be formatted as a valid postcode, for example SW1A 1AA.DATE_OF_VACCINATIONRequired, must use either YYYYMMDD or DD/MM/YYYY format.TIME_OF_VACCINATIONOptional, must use HH:MM:SS format.VACCINATEDRequired, must be Y or N. Can be omitted if VACCINE_GIVEN is provided.VACCINE_GIVENOptional, must be one of: Sequirus Cell-based Trivalent, AstraZeneca Fluenz, Sanofi Vaxigrip, Viatris, Cervarix, Gardasil, Gardasil9, MenQuadfi, Menveo, Nimenrix, Priorix, VaxPro, ProQuad, Priorix-Tetra or Revaxis.BATCH_NUMBERRequired if BATCH_EXPIRY_DATE is provided.BATCH_EXPIRY_DATERequired if BATCH_NUMBER is provided, must use either YYYYMMDD or DD/MM/YYYY format.PROGRAMMERequired, must be Flu, HPV, ACWYX4, MenACWY, MMR, MMRV, 3-in-1 or Td/IPV.ANATOMICAL_SITEOptional, if provided must be appropriate for the vaccine delivery method and be one of: left arm (lower position), left arm (upper position), left buttock, left deltoid, left thigh, left upper arm, nasal, right arm (lower position), right arm (upper position), right buttock, right deltoid, right thigh or right upper arm.REASON_NOT_VACCINATEDRequired if VACCINATED is N, must be already had elsewhere, refused, unwell or vaccination contraindicated.NOTESOptionalDOSE_SEQUENCEOptional, must be a number or 1B, 1P, 1st Scheduled Booster, 2B, 2P, 2nd Scheduled Booster or 3P.CARE_SETTINGOptional, must be 1 (school) or 2 (clinic).CLINIC_NAMERequired if CARE_SETTING is 2, must be the name of a community clinic location.PERFORMING_PROFESSIONAL_EMAILRequired if uploading offline vaccination records.PERFORMING_PROFESSIONAL_FORENAMEOptionalPERFORMING_PROFESSIONAL_SURNAMEOptional\n\n\n\n        \n            \n                Row 2\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 3\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 5\n            \n\n            \n                  SCHOOL_NAME or School is required\n            \n            \n                Row 6\n            \n\n            \n                  NHS_NUMBER: should be a valid NHS number with 10 characters\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 7\n            \n\n            \n                  NHS_NUMBER: should be a valid NHS number with 10 characters\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 8\n            \n\n            \n                  PERSON_FORENAME or First name is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 9\n            \n\n            \n                  PERSON_SURNAME or Surname is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 10\n            \n\n            \n                  PERSON_DOB or Date of birth is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 11\n            \n\n            \n                  PERSON_DOB: Enter a date of birth in the correct format.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 12\n            \n\n            \n                  DATE_OF_VACCINATION: The vaccination date is before the date of birth.\n                  PERSON_DOB: Enter a date of birth in the past.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 13\n            \n\n            \n                  PERSON_DOB: Enter a date of birth in the correct format.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 14\n            \n\n            \n                  PERSON_GENDER_CODE, PERSON_GENDER or Sex is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 15\n            \n\n            \n                  PERSON_GENDER_CODE: Enter a valid gender or gender code.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 16\n            \n\n            \n                  PERSON_POSTCODE or Postcode is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 17\n            \n\n            \n                  PERSON_POSTCODE: Enter a valid postcode, such as SW1A 1AA.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 18\n            \n\n            \n                  DATE_OF_VACCINATION or Event date is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 19\n            \n\n            \n                  DATE_OF_VACCINATION: The vaccination date is in the future.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 20\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 21\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 22\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 23\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 24\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 25\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 26\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 27\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 28\n            \n\n            \n                  DOSE_SEQUENCE: must be less than or equal to 3\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 29\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 30\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 31\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 32\n            \n\n            \n                  PERFORMING_PROFESSIONAL_EMAIL: Enter a valid email address\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 33\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 34\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n                  TIME_OF_VACCINATION: Enter a time in the correct format.\n            \n            \n                Row 35\n            \n\n            \n                  REASON_NOT_VACCINATED: must be blank\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 36\n            \n\n            \n                  VACCINATED: You need to record whether the child was vaccinated or not. Enter ‘Y’ or ‘N’ in the ‘VACCINATED’ column.\n                  BATCH_EXPIRY_DATE: must be blank\n                  BATCH_NUMBER: must be blank\n                  ANATOMICAL_SITE: must be blank\n                  REASON_NOT_VACCINATED: Enter a valid reason\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 37\n            \n\n            \n                  CARE_SETTING: Enter a valid care setting.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 38\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 39\n            \n\n            \n                  BATCH_NUMBER: must be at most 100 characters long\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n        \n\n      \n    \n\n\n\n\n    \n  \n\n      \"\n\n","statusTrace":"  File \"/home/runner/work/manage-vaccinations-in-schools/manage-vaccinations-in-schools/.venv/lib/python3.14/site-packages/allure_commons/_allure.py\", line 202, in impl\n    return func(*a, **kw)\n  File \"/home/runner/work/manage-vaccinations-in-schools/manage-vaccinations-in-schools/mavis/test/annotations.py\", line 50, in wrapper\n    return_value = func(*args, **kwargs)\n  File \"/home/runner/work/manage-vaccinations-in-schools/manage-vaccinations-in-schools/mavis/test/pages/imports/import_records_wizard_page.py\", line 240, in verify_upload_output\n    expect(self.page.get_by_role(\"main\")).to_contain_text(_msg)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/home/runner/work/manage-vaccinations-in-schools/manage-vaccinations-in-schools/.venv/lib/python3.14/site-packages/playwright/sync_api/_generated.py\", line 19319, in to_contain_text\n    self._sync(\n    ~~~~~~~~~~^\n        self._impl_obj.to_contain_text(\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n        )\n        ^\n    )\n    ^\n  File \"/home/runner/work/manage-vaccinations-in-schools/manage-vaccinations-in-schools/.venv/lib/python3.14/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ~~~~~~~~~~~^^\n  File \"/home/runner/work/manage-vaccinations-in-schools/manage-vaccinations-in-schools/.venv/lib/python3.14/site-packages/playwright/_impl/_assertions.py\", line 229, in to_contain_text\n    await self._expect_impl(\n    ...<9 lines>...\n    )\n  File \"/home/runner/work/manage-vaccinations-in-schools/manage-vaccinations-in-schools/.venv/lib/python3.14/site-packages/playwright/_impl/_assertions.py\", line 85, in _expect_impl\n    raise AssertionError(\n        f\"{out_message}\\nActual value: {actual}{error_message} {format_call_log(result.get('log'))}\"\n    )\n","steps":[{"name":"Verify upload output for {file_path}","time":{"start":1769770300976,"stop":1769770307461,"duration":6485},"status":"failed","statusMessage":"AssertionError: Locator expected to contain text 'Row 34 TIME_OF_VACCINATION: Enter a time in the correct format.'\nActual value: \n        \n\n          \n    \n      \n\n      \n  Upload (30 January 2026 at 10:51am)\n\n    \n\n      \n          Details\n\n\n\n\n        \n\n  Uploaded byNURSE, NurseFileVaccsFileMapping.HIST_NEGATIVE20260130105139.csvTypeVaccination recordsStatusInvalid\n\n      \n    \n\n\n          \n\n      \n                  Records could not be imported\n\n\n\n\n\n        \n\n      \n    \n      The records cannot be uploaded due to errors in the CSV file.\n\n    \n\n    How to format your Mavis CSV file for vaccination records\n  Make sure the CSV you upload uses the following columns:\n\n  Column nameNotesORGANISATION_CODEOptional, must be a valid ODS code.SCHOOL_URNOptional, must be 6 digits and numeric. Use 888888 for school unknown and 999999 for homeschooled.SCHOOL_NAMERequired if SCHOOL_URN is 888888.NHS_NUMBEROptional, must be a valid NHS number.PERSON_FORENAMERequiredPERSON_SURNAMERequiredPERSON_DOBRequired, must use either YYYYMMDD or DD/MM/YYYY format.PERSON_GENDER_CODERequired, must be one of: female, male, not known or not specified.PERSON_POSTCODERequired, must be formatted as a valid postcode, for example SW1A 1AA.DATE_OF_VACCINATIONRequired, must use either YYYYMMDD or DD/MM/YYYY format.TIME_OF_VACCINATIONOptional, must use HH:MM:SS format.VACCINATEDRequired, must be Y or N. Can be omitted if VACCINE_GIVEN is provided.VACCINE_GIVENOptional, must be one of: Sequirus Cell-based Trivalent, AstraZeneca Fluenz, Sanofi Vaxigrip, Viatris, Cervarix, Gardasil, Gardasil9, MenQuadfi, Menveo, Nimenrix, Priorix, VaxPro, ProQuad, Priorix-Tetra or Revaxis.BATCH_NUMBERRequired if BATCH_EXPIRY_DATE is provided.BATCH_EXPIRY_DATERequired if BATCH_NUMBER is provided, must use either YYYYMMDD or DD/MM/YYYY format.PROGRAMMERequired, must be Flu, HPV, ACWYX4, MenACWY, MMR, MMRV, 3-in-1 or Td/IPV.ANATOMICAL_SITEOptional, if provided must be appropriate for the vaccine delivery method and be one of: left arm (lower position), left arm (upper position), left buttock, left deltoid, left thigh, left upper arm, nasal, right arm (lower position), right arm (upper position), right buttock, right deltoid, right thigh or right upper arm.REASON_NOT_VACCINATEDRequired if VACCINATED is N, must be already had elsewhere, refused, unwell or vaccination contraindicated.NOTESOptionalDOSE_SEQUENCEOptional, must be a number or 1B, 1P, 1st Scheduled Booster, 2B, 2P, 2nd Scheduled Booster or 3P.CARE_SETTINGOptional, must be 1 (school) or 2 (clinic).CLINIC_NAMERequired if CARE_SETTING is 2, must be the name of a community clinic location.PERFORMING_PROFESSIONAL_EMAILRequired if uploading offline vaccination records.PERFORMING_PROFESSIONAL_FORENAMEOptionalPERFORMING_PROFESSIONAL_SURNAMEOptional\n\n\n\n        \n            \n                Row 2\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 3\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 5\n            \n\n            \n                  SCHOOL_NAME or School is required\n            \n            \n                Row 6\n            \n\n            \n                  NHS_NUMBER: should be a valid NHS number with 10 characters\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 7\n            \n\n            \n                  NHS_NUMBER: should be a valid NHS number with 10 characters\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 8\n            \n\n            \n                  PERSON_FORENAME or First name is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 9\n            \n\n            \n                  PERSON_SURNAME or Surname is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 10\n            \n\n            \n                  PERSON_DOB or Date of birth is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 11\n            \n\n            \n                  PERSON_DOB: Enter a date of birth in the correct format.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 12\n            \n\n            \n                  DATE_OF_VACCINATION: The vaccination date is before the date of birth.\n                  PERSON_DOB: Enter a date of birth in the past.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 13\n            \n\n            \n                  PERSON_DOB: Enter a date of birth in the correct format.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 14\n            \n\n            \n                  PERSON_GENDER_CODE, PERSON_GENDER or Sex is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 15\n            \n\n            \n                  PERSON_GENDER_CODE: Enter a valid gender or gender code.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 16\n            \n\n            \n                  PERSON_POSTCODE or Postcode is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 17\n            \n\n            \n                  PERSON_POSTCODE: Enter a valid postcode, such as SW1A 1AA.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 18\n            \n\n            \n                  DATE_OF_VACCINATION or Event date is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 19\n            \n\n            \n                  DATE_OF_VACCINATION: The vaccination date is in the future.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 20\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 21\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 22\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 23\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 24\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 25\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 26\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 27\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 28\n            \n\n            \n                  DOSE_SEQUENCE: must be less than or equal to 3\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 29\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 30\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 31\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 32\n            \n\n            \n                  PERFORMING_PROFESSIONAL_EMAIL: Enter a valid email address\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 33\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 34\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n                  TIME_OF_VACCINATION: Enter a time in the correct format.\n            \n            \n                Row 35\n            \n\n            \n                  REASON_NOT_VACCINATED: must be blank\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 36\n            \n\n            \n                  VACCINATED: You need to record whether the child was vaccinated or not. Enter ‘Y’ or ‘N’ in the ‘VACCINATED’ column.\n                  BATCH_EXPIRY_DATE: must be blank\n                  BATCH_NUMBER: must be blank\n                  ANATOMICAL_SITE: must be blank\n                  REASON_NOT_VACCINATED: Enter a valid reason\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 37\n            \n\n            \n                  CARE_SETTING: Enter a valid care setting.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 38\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 39\n            \n\n            \n                  BATCH_NUMBER: must be at most 100 characters long\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n        \n\n      \n    \n\n\n\n\n    \n  \n\n       \nCall log:\n  - Expect \"to_contain_text\" with timeout 5000ms\n  - waiting for get_by_role(\"main\")\n    9 × locator resolved to <main role=\"main\" id=\"main-content\" class=\"nhsuk-main-wrapper\">…</main>\n      - unexpected value \"\n        \n\n          \n    \n      \n\n      \n  Upload (30 January 2026 at 10:51am)\n\n    \n\n      \n          Details\n\n\n\n\n        \n\n  Uploaded byNURSE, NurseFileVaccsFileMapping.HIST_NEGATIVE20260130105139.csvTypeVaccination recordsStatusInvalid\n\n      \n    \n\n\n          \n\n      \n                  Records could not be imported\n\n\n\n\n\n        \n\n      \n    \n      The records cannot be uploaded due to errors in the CSV file.\n\n    \n\n    How to format your Mavis CSV file for vaccination records\n  Make sure the CSV you upload uses the following columns:\n\n  Column nameNotesORGANISATION_CODEOptional, must be a valid ODS code.SCHOOL_URNOptional, must be 6 digits and numeric. Use 888888 for school unknown and 999999 for homeschooled.SCHOOL_NAMERequired if SCHOOL_URN is 888888.NHS_NUMBEROptional, must be a valid NHS number.PERSON_FORENAMERequiredPERSON_SURNAMERequiredPERSON_DOBRequired, must use either YYYYMMDD or DD/MM/YYYY format.PERSON_GENDER_CODERequired, must be one of: female, male, not known or not specified.PERSON_POSTCODERequired, must be formatted as a valid postcode, for example SW1A 1AA.DATE_OF_VACCINATIONRequired, must use either YYYYMMDD or DD/MM/YYYY format.TIME_OF_VACCINATIONOptional, must use HH:MM:SS format.VACCINATEDRequired, must be Y or N. Can be omitted if VACCINE_GIVEN is provided.VACCINE_GIVENOptional, must be one of: Sequirus Cell-based Trivalent, AstraZeneca Fluenz, Sanofi Vaxigrip, Viatris, Cervarix, Gardasil, Gardasil9, MenQuadfi, Menveo, Nimenrix, Priorix, VaxPro, ProQuad, Priorix-Tetra or Revaxis.BATCH_NUMBERRequired if BATCH_EXPIRY_DATE is provided.BATCH_EXPIRY_DATERequired if BATCH_NUMBER is provided, must use either YYYYMMDD or DD/MM/YYYY format.PROGRAMMERequired, must be Flu, HPV, ACWYX4, MenACWY, MMR, MMRV, 3-in-1 or Td/IPV.ANATOMICAL_SITEOptional, if provided must be appropriate for the vaccine delivery method and be one of: left arm (lower position), left arm (upper position), left buttock, left deltoid, left thigh, left upper arm, nasal, right arm (lower position), right arm (upper position), right buttock, right deltoid, right thigh or right upper arm.REASON_NOT_VACCINATEDRequired if VACCINATED is N, must be already had elsewhere, refused, unwell or vaccination contraindicated.NOTESOptionalDOSE_SEQUENCEOptional, must be a number or 1B, 1P, 1st Scheduled Booster, 2B, 2P, 2nd Scheduled Booster or 3P.CARE_SETTINGOptional, must be 1 (school) or 2 (clinic).CLINIC_NAMERequired if CARE_SETTING is 2, must be the name of a community clinic location.PERFORMING_PROFESSIONAL_EMAILRequired if uploading offline vaccination records.PERFORMING_PROFESSIONAL_FORENAMEOptionalPERFORMING_PROFESSIONAL_SURNAMEOptional\n\n\n\n        \n            \n                Row 2\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 3\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 5\n            \n\n            \n                  SCHOOL_NAME or School is required\n            \n            \n                Row 6\n            \n\n            \n                  NHS_NUMBER: should be a valid NHS number with 10 characters\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 7\n            \n\n            \n                  NHS_NUMBER: should be a valid NHS number with 10 characters\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 8\n            \n\n            \n                  PERSON_FORENAME or First name is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 9\n            \n\n            \n                  PERSON_SURNAME or Surname is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 10\n            \n\n            \n                  PERSON_DOB or Date of birth is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 11\n            \n\n            \n                  PERSON_DOB: Enter a date of birth in the correct format.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 12\n            \n\n            \n                  DATE_OF_VACCINATION: The vaccination date is before the date of birth.\n                  PERSON_DOB: Enter a date of birth in the past.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 13\n            \n\n            \n                  PERSON_DOB: Enter a date of birth in the correct format.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 14\n            \n\n            \n                  PERSON_GENDER_CODE, PERSON_GENDER or Sex is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 15\n            \n\n            \n                  PERSON_GENDER_CODE: Enter a valid gender or gender code.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 16\n            \n\n            \n                  PERSON_POSTCODE or Postcode is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 17\n            \n\n            \n                  PERSON_POSTCODE: Enter a valid postcode, such as SW1A 1AA.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 18\n            \n\n            \n                  DATE_OF_VACCINATION or Event date is required\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 19\n            \n\n            \n                  DATE_OF_VACCINATION: The vaccination date is in the future.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 20\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 21\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 22\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 23\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 24\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 25\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 26\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 27\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 28\n            \n\n            \n                  DOSE_SEQUENCE: must be less than or equal to 3\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 29\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 30\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 31\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 32\n            \n\n            \n                  PERFORMING_PROFESSIONAL_EMAIL: Enter a valid email address\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 33\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 34\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n                  TIME_OF_VACCINATION: Enter a time in the correct format.\n            \n            \n                Row 35\n            \n\n            \n                  REASON_NOT_VACCINATED: must be blank\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 36\n            \n\n            \n                  VACCINATED: You need to record whether the child was vaccinated or not. Enter ‘Y’ or ‘N’ in the ‘VACCINATED’ column.\n                  BATCH_EXPIRY_DATE: must be blank\n                  BATCH_NUMBER: must be blank\n                  ANATOMICAL_SITE: must be blank\n                  REASON_NOT_VACCINATED: Enter a valid reason\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 37\n            \n\n            \n                  CARE_SETTING: Enter a valid care setting.\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 38\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 39\n            \n\n            \n                  BATCH_NUMBER: must be at most 100 characters long\n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n        \n\n      \n    \n\n\n\n\n    \n  \n\n      \"\n\n","statusTrace":"  File \"/home/runner/work/manage-vaccinations-in-schools/manage-vaccinations-in-schools/mavis/test/annotations.py\", line 50, in wrapper\n    return_value = func(*args, **kwargs)\n  File \"/home/runner/work/manage-vaccinations-in-schools/manage-vaccinations-in-schools/mavis/test/pages/imports/import_records_wizard_page.py\", line 240, in verify_upload_output\n    expect(self.page.get_by_role(\"main\")).to_contain_text(_msg)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/home/runner/work/manage-vaccinations-in-schools/manage-vaccinations-in-schools/.venv/lib/python3.14/site-packages/playwright/sync_api/_generated.py\", line 19319, in to_contain_text\n    self._sync(\n    ~~~~~~~~~~^\n        self._impl_obj.to_contain_text(\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n        )\n        ^\n    )\n    ^\n  File \"/home/runner/work/manage-vaccinations-in-schools/manage-vaccinations-in-schools/.venv/lib/python3.14/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ~~~~~~~~~~~^^\n  File \"/home/runner/work/manage-vaccinations-in-schools/manage-vaccinations-in-schools/.venv/lib/python3.14/site-packages/playwright/_impl/_assertions.py\", line 229, in to_contain_text\n    await self._expect_impl(\n    ...<9 lines>...\n    )\n  File \"/home/runner/work/manage-vaccinations-in-schools/manage-vaccinations-in-schools/.venv/lib/python3.14/site-packages/playwright/_impl/_assertions.py\", line 85, in _expect_impl\n    raise AssertionError(\n        f\"{out_message}\\nActual value: {actual}{error_message} {format_call_log(result.get('log'))}\"\n    )\n","steps":[],"attachments":[{"uid":"3189b8ef0631cb99","name":"Screenshot on failure","source":"3189b8ef0631cb99.png","type":"image/png","size":223003}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.imports.import_records_wizard_page.ImportRecordsWizardPage object at 0x7fd86b12a970>,)"},{"name":"file_path","value":"PosixPath('vaccs/o_hist_negative.txt')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":12,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"set_feature_flags::0","time":{"start":1769770307481,"stop":1769770307481,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context::0","time":{"start":1769770307482,"stop":1769770307491,"duration":9},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1769770307491,"stop":1769770307492,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1769770375747,"stop":1769770375747,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1769770375748,"stop":1769770375771,"duration":23},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1769770375772,"stop":1769770375785,"duration":13},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests::0","time":{"start":1769770375786,"stop":1769770376191,"duration":405},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"vaccinations"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_import_historical_vaccinations"},{"name":"host","value":"runnervmkj6or"},{"name":"thread","value":"3143-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_import_historical_vaccinations"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["vaccinations"]},"source":"32efbef2f9521d67.json","parameterValues":[]}