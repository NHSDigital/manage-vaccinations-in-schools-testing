{"uid":"f927b6442ee07ab3","name":"test_merge_child_records_does_not_crash","fullName":"tests.test_children#test_merge_child_records_does_not_crash","historyId":"fab02489a170d457e72673fcdb05db02","time":{"start":1769770172463,"stop":1769770174222,"duration":1759},"description":"\nTest: Merging two child records does not cause a crash (MAV-1839).\nSteps:\n1. Setup: Import a class list with two fixed children and navigate to the\n   children page.\n2. Search for the first child by name.\n3. Open the first child's record and start the archive (merge) process.\n4. Select the second child as the duplicate.\n5. Complete the archive/merge.\nVerification:\n- An alert appears with the message \"This record has been archived\"\n","descriptionHtml":"<p>Test: Merging two child records does not cause a crash (MAV-1839).<br />\nSteps:</p>\n<ol>\n<li>Setup: Import a class list with two fixed children and navigate to the<br />\nchildren page.</li>\n<li>Search for the first child by name.</li>\n<li>Open the first child's record and start the archive (merge) process.</li>\n<li>Select the second child as the duplicate.</li>\n<li>Complete the archive/merge.<br />\nVerification:</li>\n</ol>\n<ul>\n<li>An alert appears with the message &quot;This record has been archived&quot;</li>\n</ul>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_verify_url","time":{"start":1769769795624,"stop":1769769795624,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_session_faker","time":{"start":1769769795624,"stop":1769769795625,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1769769795624,"stop":1769769795624,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1769769795626,"stop":1769769795626,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"year_groups","time":{"start":1769769795626,"stop":1769769795626,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1769769795626,"stop":1769769795626,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"programmes_enabled","time":{"start":1769769795626,"stop":1769769795626,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"onboarding","time":{"start":1769769795626,"stop":1769769819577,"duration":23951},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"team","time":{"start":1769769819577,"stop":1769769819577,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests","time":{"start":1769769819577,"stop":1769769819577,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1769769819578,"stop":1769769820092,"duration":514},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"schools","time":{"start":1769769819578,"stop":1769769819578,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1769769819578,"stop":1769769819578,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1769769820092,"stop":1769769820093,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1769769820092,"stop":1769769820092,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1769769820093,"stop":1769769820093,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1769769820093,"stop":1769769820249,"duration":156},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1769769820093,"stop":1769769820093,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1769769820249,"stop":1769769820250,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1769769820249,"stop":1769769820249,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_credentials","time":{"start":1769769820250,"stop":1769769820250,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1769769820251,"stop":1769769820251,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"nurse","time":{"start":1769769820251,"stop":1769769820251,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_token","time":{"start":1769769820251,"stop":1769769820251,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"organisation","time":{"start":1769769843840,"stop":1769769843841,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clinics","time":{"start":1769769843841,"stop":1769769843841,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"reset_before_each_module","time":{"start":1769770130764,"stop":1769770131141,"duration":377},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1769770163981,"stop":1769770163981,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1769770163981,"stop":1769770163985,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1769770163981,"stop":1769770163981,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1769770163981,"stop":1769770163981,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1769770163985,"stop":1769770164009,"duration":24},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_as_nurse","time":{"start":1769770164009,"stop":1769770166204,"duration":2195},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1769770164009,"stop":1769770165329,"duration":1320},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1769770164009,"stop":1769770165329,"duration":1320},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.log_in_page.LogInPage object at 0x7f979cf50730>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Log in as User(username='bakerjosephine@example.org', password='bakerjosephine@example.org', role='nurse') and choose team Team(name='Martin, Ball and Hussain est. 2021', workgroup='D622J', careplus_venue_code='D622JA', careplus_staff_code='D622JB', careplus_staff_type='D622JC', email='jeffreyparker@example.org', phone='(07700) 900712')","time":{"start":1769770165329,"stop":1769770166204,"duration":875},"status":"passed","steps":[{"name":"Log in as {1} and choose team {2}","time":{"start":1769770165329,"stop":1769770166203,"duration":874},"status":"passed","steps":[{"name":"Log in as User(username='bakerjosephine@example.org', password='bakerjosephine@example.org', role='nurse')","time":{"start":1769770165330,"stop":1769770166170,"duration":840},"status":"passed","steps":[{"name":"Log in as {1}","time":{"start":1769770165330,"stop":1769770166170,"duration":840},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.log_in_page.LogInPage object at 0x7f979cf519c0>, User(username='bakerjosephine@example.org', password='bakerjosephine@example.org', role='nurse'))"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.log_in_page.LogInPage object at 0x7f979cf519c0>, User(username='bakerjosephine@example.org', password='bakerjosephine@example.org', role='nurse'), Team(name='Martin, Ball and Hussain est. 2021', workgroup='D622J', careplus_venue_code='D622JA', careplus_staff_code='D622JB', careplus_staff_type='D622JC', email='jeffreyparker@example.org', phone='(07700) 900712'))"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"set_feature_flags","time":{"start":1769770164009,"stop":1769770164009,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"children","time":{"start":1769770166204,"stop":1769770166207,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"file_generator","time":{"start":1769770166207,"stop":1769770166208,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_children_session","time":{"start":1769770166208,"stop":1769770166208,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_child_merge","time":{"start":1769770166208,"stop":1769770172463,"duration":6255},"status":"passed","steps":[{"name":"Click on Schools","time":{"start":1769770166208,"stop":1769770166443,"duration":235},"status":"passed","steps":[{"name":"Click on Schools","time":{"start":1769770166208,"stop":1769770166443,"duration":235},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.dashboard_page.DashboardPage object at 0x7f979cf53070>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on School(name=\"Children's International School\", urn='149704', site=None, address_line_1='Plot 8', address_line_2='Amore Street, Lekki Phase 1', address_town='Lagos', address_postcode='')","time":{"start":1769770166443,"stop":1769770167174,"duration":731},"status":"passed","steps":[{"name":"Click on {1}","time":{"start":1769770166443,"stop":1769770167174,"duration":731},"status":"passed","steps":[{"name":"Search for 'Children's International School'","time":{"start":1769770166443,"stop":1769770166778,"duration":335},"status":"passed","steps":[{"name":"Search for {1}","time":{"start":1769770166443,"stop":1769770166778,"duration":335},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.search_components.base_search_component.BaseSearchComponent object at 0x7f979cf6ac80>, \"Children's International School\")"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.schools.schools_search_page.SchoolsSearchPage object at 0x7f979cf5d2b0>, School(name=\"Children's International School\", urn='149704', site=None, address_line_1='Plot 8', address_line_2='Amore Street, Lekki Phase 1', address_town='Lagos', address_postcode=''))"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Import class lists","time":{"start":1769770167175,"stop":1769770167646,"duration":471},"status":"passed","steps":[{"name":"Click Import class lists","time":{"start":1769770167175,"stop":1769770167646,"duration":471},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.schools.schools_children_page.SchoolsChildrenPage object at 0x7f979cf5e190>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select year groups 11","time":{"start":1769770167646,"stop":1769770168406,"duration":760},"status":"passed","steps":[{"name":"Select year groups {1}","time":{"start":1769770167646,"stop":1769770168406,"duration":760},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1769770167705,"stop":1769770168406,"duration":701},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1769770167705,"stop":1769770168406,"duration":701},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.imports.import_records_wizard_page.ImportRecordsWizardPage object at 0x7f979cf5e510>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.imports.import_records_wizard_page.ImportRecordsWizardPage object at 0x7f979cf5e510>, 11)"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Set input file to PosixPath('working/working_gw2/ClassFileMapping.TWO_FIXED_CHILDREN20260130104928.csv')","time":{"start":1769770168424,"stop":1769770168449,"duration":25},"status":"passed","steps":[{"name":"Set input file to {1}","time":{"start":1769770168424,"stop":1769770168449,"duration":25},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.imports.import_records_wizard_page.ImportRecordsWizardPage object at 0x7f979cf5e510>, PosixPath('working/working_gw2/ClassFileMapping.TWO_FIXED_CHILDREN20260130104928.csv'))"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1769770168449,"stop":1769770168966,"duration":517},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1769770168449,"stop":1769770168966,"duration":517},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.imports.import_records_wizard_page.ImportRecordsWizardPage object at 0x7f979cf5e510>,)"},{"name":"_coverage","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click import link for PosixPath('working/working_gw2/ClassFileMapping.TWO_FIXED_CHILDREN20260130104928.csv')","time":{"start":1769770168999,"stop":1769770169275,"duration":276},"status":"passed","steps":[{"name":"Click import link for {1}","time":{"start":1769770168999,"stop":1769770169275,"duration":276},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.imports.import_records_wizard_page.ImportRecordsWizardPage object at 0x7f979cf5e510>, PosixPath('working/working_gw2/ClassFileMapping.TWO_FIXED_CHILDREN20260130104928.csv'))"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Reload until completed status appears","time":{"start":1769770169275,"stop":1769770169292,"duration":17},"status":"passed","steps":[{"name":"Reload until completed status appears","time":{"start":1769770169275,"stop":1769770169292,"duration":17},"status":"passed","steps":[{"name":"Reload page until <Locator frame=<Frame name= url='http://3.8.164.95:4000/class-imports/77'> selector='internal:role=strong >> internal:text=\"Review and approve\"i >> internal:or=\"internal:role=strong >> internal:text=\\\\\"Completed\\\\\"i\" >> internal:or=\"internal:role=strong >> internal:text=\\\\\"Invalid\\\\\"i\" >> internal:or=\"internal:text=\\\\\"There is a problem\\\\\"i\" >> nth=0'> is visible","time":{"start":1769770169275,"stop":1769770169292,"duration":17},"status":"passed","steps":[{"name":"Reload page until {1} is visible","time":{"start":1769770169275,"stop":1769770169292,"duration":17},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Page url='http://3.8.164.95:4000/class-imports/77'>, <Locator frame=<Frame name= url='http://3.8.164.95:4000/class-imports/77'> selector='internal:role=strong >> internal:text=\"Review and approve\"i >> internal:or=\"internal:role=strong >> internal:text=\\\\\"Completed\\\\\"i\" >> internal:or=\"internal:role=strong >> internal:text=\\\\\"Invalid\\\\\"i\" >> internal:or=\"internal:text=\\\\\"There is a problem\\\\\"i\" >> nth=0'>)"},{"name":"seconds","value":"60"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.imports.import_records_wizard_page.ImportRecordsWizardPage object at 0x7f979cf5e510>,)"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click import link for PosixPath('working/working_gw2/ClassFileMapping.TWO_FIXED_CHILDREN20260130104928.csv')","time":{"start":1769770169990,"stop":1769770170592,"duration":602},"status":"passed","steps":[{"name":"Click import link for {1}","time":{"start":1769770169990,"stop":1769770170592,"duration":602},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.imports.import_records_wizard_page.ImportRecordsWizardPage object at 0x7f979cf5e510>, PosixPath('working/working_gw2/ClassFileMapping.TWO_FIXED_CHILDREN20260130104928.csv'))"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Reload page until <Locator frame=<Frame name= url='http://3.8.164.95:4000/class-imports/77'> selector='internal:role=strong >> internal:text=\"Completed\"i >> internal:or=\"internal:role=strong >> internal:text=\\\\\"Invalid\\\\\"i\" >> internal:or=\"internal:role=strong >> internal:text=\\\\\"Review and approve\\\\\"i\" >> nth=0'> is visible","time":{"start":1769770170595,"stop":1769770170614,"duration":19},"status":"passed","steps":[{"name":"Reload page until {1} is visible","time":{"start":1769770170595,"stop":1769770170614,"duration":19},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Page url='http://3.8.164.95:4000/class-imports/77'>, <Locator frame=<Frame name= url='http://3.8.164.95:4000/class-imports/77'> selector='internal:role=strong >> internal:text=\"Completed\"i >> internal:or=\"internal:role=strong >> internal:text=\\\\\"Invalid\\\\\"i\" >> internal:or=\"internal:role=strong >> internal:text=\\\\\"Review and approve\\\\\"i\" >> nth=0'>)"},{"name":"seconds","value":"60"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Verify upload output for PosixPath('class_list/o_two_fixed_children.txt')","time":{"start":1769770170614,"stop":1769770170622,"duration":8},"status":"passed","steps":[{"name":"Verify upload output for {file_path}","time":{"start":1769770170614,"stop":1769770170622,"duration":8},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.imports.import_records_wizard_page.ImportRecordsWizardPage object at 0x7f979cf5e510>,)"},{"name":"file_path","value":"PosixPath('class_list/o_two_fixed_children.txt')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1769770170622,"stop":1769770170867,"duration":245},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1769770170622,"stop":1769770170867,"duration":245},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.header_component.HeaderComponent object at 0x7f979cdc4100>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1769770170868,"stop":1769770171160,"duration":292},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1769770170868,"stop":1769770171160,"duration":292},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.dashboard_page.DashboardPage object at 0x7f979cdc4470>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Check if session exists","time":{"start":1769770171160,"stop":1769770171950,"duration":790},"status":"passed","steps":[{"name":"Check if session exists","time":{"start":1769770171160,"stop":1769770171950,"duration":790},"status":"passed","steps":[{"name":"Search for 'Children's International School'","time":{"start":1769770171161,"stop":1769770171470,"duration":309},"status":"passed","steps":[{"name":"Search for {1}","time":{"start":1769770171161,"stop":1769770171470,"duration":309},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.search_components.base_search_component.BaseSearchComponent object at 0x7f979cddcad0>, \"Children's International School\")"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.sessions.sessions_search_page.SessionsSearchPage object at 0x7f979cddca60>, School(name=\"Children's International School\", urn='149704', site=None, address_line_1='Plot 8', address_line_2='Amore Street, Lekki Phase 1', address_town='Lagos', address_postcode=''), [<Programme.HPV: 'HPV'>], [11], 0)"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1769770171950,"stop":1769770172209,"duration":259},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1769770171950,"stop":1769770172209,"duration":259},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.header_component.HeaderComponent object at 0x7f979cdc7c20>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Children","time":{"start":1769770172209,"stop":1769770172463,"duration":254},"status":"passed","steps":[{"name":"Click on Children","time":{"start":1769770172209,"stop":1769770172463,"duration":254},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.dashboard_page.DashboardPage object at 0x7f979cdc7b70>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":40,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"testStage":{"description":"\nTest: Merging two child records does not cause a crash (MAV-1839).\nSteps:\n1. Setup: Import a class list with two fixed children and navigate to the\n   children page.\n2. Search for the first child by name.\n3. Open the first child's record and start the archive (merge) process.\n4. Select the second child as the duplicate.\n5. Complete the archive/merge.\nVerification:\n- An alert appears with the message \"This record has been archived\"\n","status":"passed","steps":[{"name":"Click on child Child(first_name='Joel', last_name='SMITH', nhs_number='9148356670', address=('Flat 4', 'Watkins Place', 'North Catherine', 'S50 8TA'), date_of_birth=datetime.date(2010, 3, 27), year_group=11, parents=(Parent(full_name='Roy Baker', relationship=<Relationship.DAD: 'Dad'>, email_address='njarvis@example.com'), Parent(full_name='Wendy Field', relationship=<Relationship.MUM: 'Mum'>, email_address='katherineanderson@example.org')))","time":{"start":1769770172881,"stop":1769770173212,"duration":331},"status":"passed","steps":[{"name":"Click on child {1}","time":{"start":1769770172881,"stop":1769770173212,"duration":331},"status":"passed","steps":[{"name":"Reload page until <Locator frame=<Frame name= url='http://3.8.164.95:4000/patients?q=SMITH%2C+Joel&%5Bprogramme_types%5D%5B%5D=&programme_status_group=&%5Bprogramme_statuses%5D%5B%5D=&%5Bvaccine_criteria%5D%5B%5D=&%5Bvaccine_criteria%5D%5B%5D=&%5Bprogramme_statuses%5D%5B%5D=&%5Bprogramme_statuses%5D%5B%5D=&%5Byear_groups%5D%5B%5D=&date_of_birth_day=&date_of_birth_month=&date_of_birth_year=&archived=0&missing_nhs_number=0&aged_out_of_programmes=0'> selector='div.nhsuk-card.app-card.app-card--compact:has(h4:has-text(\"SMITH, Joel\")) >> internal:role=link[name=\"SMITH, Joel\"i]'> is visible","time":{"start":1769770172881,"stop":1769770172891,"duration":10},"status":"passed","steps":[{"name":"Reload page until {1} is visible","time":{"start":1769770172881,"stop":1769770172891,"duration":10},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Page url='http://3.8.164.95:4000/patients?q=SMITH%2C+Joel&%5Bprogramme_types%5D%5B%5D=&programme_status_group=&%5Bprogramme_statuses%5D%5B%5D=&%5Bvaccine_criteria%5D%5B%5D=&%5Bvaccine_criteria%5D%5B%5D=&%5Bprogramme_statuses%5D%5B%5D=&%5Bprogramme_statuses%5D%5B%5D=&%5Byear_groups%5D%5B%5D=&date_of_birth_day=&date_of_birth_month=&date_of_birth_year=&archived=0&missing_nhs_number=0&aged_out_of_programmes=0'>, <Locator frame=<Frame name= url='http://3.8.164.95:4000/patients?q=SMITH%2C+Joel&%5Bprogramme_types%5D%5B%5D=&programme_status_group=&%5Bprogramme_statuses%5D%5B%5D=&%5Bvaccine_criteria%5D%5B%5D=&%5Bvaccine_criteria%5D%5B%5D=&%5Bprogramme_statuses%5D%5B%5D=&%5Bprogramme_statuses%5D%5B%5D=&%5Byear_groups%5D%5B%5D=&date_of_birth_day=&date_of_birth_month=&date_of_birth_year=&archived=0&missing_nhs_number=0&aged_out_of_programmes=0'> selector='div.nhsuk-card.app-card.app-card--compact:has(h4:has-text(\"SMITH, Joel\")) >> internal:role=link[name=\"SMITH, Joel\"i]'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.search_components.patient_status_search_component.PatientStatusSearchComponent object at 0x7f97a42c5b50>, Child(first_name='Joel', last_name='SMITH', nhs_number='9148356670', address=('Flat 4', 'Watkins Place', 'North Catherine', 'S50 8TA'), date_of_birth=datetime.date(2010, 3, 27), year_group=11, parents=(Parent(full_name='Roy Baker', relationship=<Relationship.DAD: 'Dad'>, email_address='njarvis@example.com'), Parent(full_name='Wendy Field', relationship=<Relationship.MUM: 'Mum'>, email_address='katherineanderson@example.org'))))"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Archive child record","time":{"start":1769770173212,"stop":1769770173471,"duration":259},"status":"passed","steps":[{"name":"Click on Archive child record","time":{"start":1769770173212,"stop":1769770173471,"duration":259},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.children.child_record_page.ChildRecordPage object at 0x7f979cc168a0>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select It's a duplicate","time":{"start":1769770173471,"stop":1769770173529,"duration":58},"status":"passed","steps":[{"name":"Select It's a duplicate","time":{"start":1769770173471,"stop":1769770173529,"duration":58},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.children.child_archive_page.ChildArchivePage object at 0x7f979e743380>, '9008393719')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Archive record","time":{"start":1769770173529,"stop":1769770174195,"duration":666},"status":"passed","steps":[{"name":"Click on Archive record","time":{"start":1769770173529,"stop":1769770174195,"duration":666},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.children.child_archive_page.ChildArchivePage object at 0x7f979cfc7110>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":10,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"setup_child_merge::0","time":{"start":1769770174222,"stop":1769770174222,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_feature_flags::0","time":{"start":1769770174224,"stop":1769770174224,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context::0","time":{"start":1769770174225,"stop":1769770174233,"duration":8},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1769770174234,"stop":1769770174234,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1769770423495,"stop":1769770423526,"duration":31},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1769770423495,"stop":1769770423495,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1769770423528,"stop":1769770423553,"duration":25},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests::0","time":{"start":1769770423554,"stop":1769770423931,"duration":377},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"children"},{"name":"tag","value":"children"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_children"},{"name":"host","value":"runnervmkj6or"},{"name":"thread","value":"3140-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_children"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[{"name":"MAV-1839","url":"https://nhsd-jira.digital.nhs.uk/browse/MAV-1839","type":"issue"}],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"tags":["children"]},"source":"f927b6442ee07ab3.json","parameterValues":[]}