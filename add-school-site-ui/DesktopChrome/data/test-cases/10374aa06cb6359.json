{"uid":"10374aa06cb6359","name":"test_vaccination_file_upload_historic_valid_data","fullName":"tests.test_import_historical_vaccinations#test_vaccination_file_upload_historic_valid_data","historyId":"fdc4b26e73eaa679f8fd6caab81cc399","time":{"start":1769770263977,"stop":1769770271269,"duration":7292},"description":"\nTest: Upload a historic vaccination records file with valid data and verify import.\nSteps:\n1. Navigate to vaccination records import page.\n2. Upload a historic file with valid data.\nVerification:\n- Output indicates successful import of historic records.\nScenarios covered:\nHPV:\nHPV_Gardasil9, HPV_Gardasil, HPV_Cervarix, HPV_NFA, HPV_Add_Not_Known,\nHPV_AllowPastExpiryDate, HPV_SiteRAU, HPV_SiteRAL, HPV_NotVaccinated,\nHPV_AddressNFA, HPV_AddressNotKnown, HPV_AddressNotSpecified\nDoubles:\nTDIPV_Revaxis, TDIPV_NFA, TDIPV_Add_Not_Known, TDIPV_AllowPastExpiryDate,\nTDIPV_SiteRAU, TDIPV_SiteRAL, TDIPV_NotVaccinated, MenACWY_MenQuadfi, MenACWY_NFA,\nMenACWY_Add_Not_Known, MenACWY_AllowPastExpiryDate, MenACWY_SiteRAU,MenACWY_SiteRAL,\nMenACWY_NotVaccinated, MAV_855, MenACWY_BatchName100Chars,\nMMR:\nMMR, MMR_NFA, MMR_Add_Not_Known, MMR_AllowPastExpiryDate, MMR_SiteRAU, MMR_SiteRAL,\nMMR_NotVaccinated, MMR_DoseSeq1, MMR_DoseSeq2\n","descriptionHtml":"<p>Test: Upload a historic vaccination records file with valid data and verify import.<br />\nSteps:</p>\n<ol>\n<li>Navigate to vaccination records import page.</li>\n<li>Upload a historic file with valid data.<br />\nVerification:</li>\n</ol>\n<ul>\n<li>Output indicates successful import of historic records.<br />\nScenarios covered:<br />\nHPV:<br />\nHPV_Gardasil9, HPV_Gardasil, HPV_Cervarix, HPV_NFA, HPV_Add_Not_Known,<br />\nHPV_AllowPastExpiryDate, HPV_SiteRAU, HPV_SiteRAL, HPV_NotVaccinated,<br />\nHPV_AddressNFA, HPV_AddressNotKnown, HPV_AddressNotSpecified<br />\nDoubles:<br />\nTDIPV_Revaxis, TDIPV_NFA, TDIPV_Add_Not_Known, TDIPV_AllowPastExpiryDate,<br />\nTDIPV_SiteRAU, TDIPV_SiteRAL, TDIPV_NotVaccinated, MenACWY_MenQuadfi, MenACWY_NFA,<br />\nMenACWY_Add_Not_Known, MenACWY_AllowPastExpiryDate, MenACWY_SiteRAU,MenACWY_SiteRAL,<br />\nMenACWY_NotVaccinated, MAV_855, MenACWY_BatchName100Chars,<br />\nMMR:<br />\nMMR, MMR_NFA, MMR_Add_Not_Known, MMR_AllowPastExpiryDate, MMR_SiteRAU, MMR_SiteRAL,<br />\nMMR_NotVaccinated, MMR_DoseSeq1, MMR_DoseSeq2</li>\n</ul>\n","status":"failed","statusMessage":"AssertionError: Locator expected to contain text '37 imported records'\nActual value: \n        \n\n          \n    \n      \n\n      \n  Upload (30 January 2026 at 10:51am)\n\n    \n\n      \n          Details\n\n\n\n\n        \n\n  Uploaded byNURSE, NurseFileVaccsFileMapping.HIST_POSITIVE20260130105103.csvTypeVaccination recordsStatusInvalid\n\n      \n    \n\n\n          \n\n      \n                  Records could not be imported\n\n\n\n\n\n        \n\n      \n    \n      The records cannot be uploaded due to errors in the CSV file.\n\n    \n\n    How to format your Mavis CSV file for vaccination records\n  Make sure the CSV you upload uses the following columns:\n\n  Column nameNotesORGANISATION_CODEOptional, must be a valid ODS code.SCHOOL_URNOptional, must be 6 digits and numeric. Use 888888 for school unknown and 999999 for homeschooled.SCHOOL_NAMERequired if SCHOOL_URN is 888888.NHS_NUMBEROptional, must be a valid NHS number.PERSON_FORENAMERequiredPERSON_SURNAMERequiredPERSON_DOBRequired, must use either YYYYMMDD or DD/MM/YYYY format.PERSON_GENDER_CODERequired, must be one of: female, male, not known or not specified.PERSON_POSTCODERequired, must be formatted as a valid postcode, for example SW1A 1AA.DATE_OF_VACCINATIONRequired, must use either YYYYMMDD or DD/MM/YYYY format.TIME_OF_VACCINATIONOptional, must use HH:MM:SS format.VACCINATEDRequired, must be Y or N. Can be omitted if VACCINE_GIVEN is provided.VACCINE_GIVENOptional, must be one of: Sequirus Cell-based Trivalent, AstraZeneca Fluenz, Sanofi Vaxigrip, Viatris, Cervarix, Gardasil, Gardasil9, MenQuadfi, Menveo, Nimenrix, Priorix, VaxPro, ProQuad, Priorix-Tetra or Revaxis.BATCH_NUMBERRequired if BATCH_EXPIRY_DATE is provided.BATCH_EXPIRY_DATERequired if BATCH_NUMBER is provided, must use either YYYYMMDD or DD/MM/YYYY format.PROGRAMMERequired, must be Flu, HPV, ACWYX4, MenACWY, MMR, MMRV, 3-in-1 or Td/IPV.ANATOMICAL_SITEOptional, if provided must be appropriate for the vaccine delivery method and be one of: left arm (lower position), left arm (upper position), left buttock, left deltoid, left thigh, left upper arm, nasal, right arm (lower position), right arm (upper position), right buttock, right deltoid, right thigh or right upper arm.REASON_NOT_VACCINATEDRequired if VACCINATED is N, must be already had elsewhere, refused, unwell or vaccination contraindicated.NOTESOptionalDOSE_SEQUENCEOptional, must be a number or 1B, 1P, 1st Scheduled Booster, 2B, 2P, 2nd Scheduled Booster or 3P.CARE_SETTINGOptional, must be 1 (school) or 2 (clinic).CLINIC_NAMERequired if CARE_SETTING is 2, must be the name of a community clinic location.PERFORMING_PROFESSIONAL_EMAILRequired if uploading offline vaccination records.PERFORMING_PROFESSIONAL_FORENAMEOptionalPERFORMING_PROFESSIONAL_SURNAMEOptional\n\n\n\n        \n            \n                Row 2\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 3\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 4\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 5\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 6\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 7\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 8\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 9\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 10\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 11\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 12\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 13\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 14\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 15\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 16\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 17\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 18\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 19\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 20\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 21\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 22\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 23\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 24\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 26\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 27\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 28\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 29\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 30\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 31\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 32\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 33\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 34\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 35\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 36\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 37\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 38\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n        \n\n      \n    \n\n\n\n\n    \n  \n\n       \nCall log:\n  - Expect \"to_contain_text\" with timeout 5000ms\n  - waiting for get_by_role(\"main\")\n    9 × locator resolved to <main role=\"main\" id=\"main-content\" class=\"nhsuk-main-wrapper\">…</main>\n      - unexpected value \"\n        \n\n          \n    \n      \n\n      \n  Upload (30 January 2026 at 10:51am)\n\n    \n\n      \n          Details\n\n\n\n\n        \n\n  Uploaded byNURSE, NurseFileVaccsFileMapping.HIST_POSITIVE20260130105103.csvTypeVaccination recordsStatusInvalid\n\n      \n    \n\n\n          \n\n      \n                  Records could not be imported\n\n\n\n\n\n        \n\n      \n    \n      The records cannot be uploaded due to errors in the CSV file.\n\n    \n\n    How to format your Mavis CSV file for vaccination records\n  Make sure the CSV you upload uses the following columns:\n\n  Column nameNotesORGANISATION_CODEOptional, must be a valid ODS code.SCHOOL_URNOptional, must be 6 digits and numeric. Use 888888 for school unknown and 999999 for homeschooled.SCHOOL_NAMERequired if SCHOOL_URN is 888888.NHS_NUMBEROptional, must be a valid NHS number.PERSON_FORENAMERequiredPERSON_SURNAMERequiredPERSON_DOBRequired, must use either YYYYMMDD or DD/MM/YYYY format.PERSON_GENDER_CODERequired, must be one of: female, male, not known or not specified.PERSON_POSTCODERequired, must be formatted as a valid postcode, for example SW1A 1AA.DATE_OF_VACCINATIONRequired, must use either YYYYMMDD or DD/MM/YYYY format.TIME_OF_VACCINATIONOptional, must use HH:MM:SS format.VACCINATEDRequired, must be Y or N. Can be omitted if VACCINE_GIVEN is provided.VACCINE_GIVENOptional, must be one of: Sequirus Cell-based Trivalent, AstraZeneca Fluenz, Sanofi Vaxigrip, Viatris, Cervarix, Gardasil, Gardasil9, MenQuadfi, Menveo, Nimenrix, Priorix, VaxPro, ProQuad, Priorix-Tetra or Revaxis.BATCH_NUMBERRequired if BATCH_EXPIRY_DATE is provided.BATCH_EXPIRY_DATERequired if BATCH_NUMBER is provided, must use either YYYYMMDD or DD/MM/YYYY format.PROGRAMMERequired, must be Flu, HPV, ACWYX4, MenACWY, MMR, MMRV, 3-in-1 or Td/IPV.ANATOMICAL_SITEOptional, if provided must be appropriate for the vaccine delivery method and be one of: left arm (lower position), left arm (upper position), left buttock, left deltoid, left thigh, left upper arm, nasal, right arm (lower position), right arm (upper position), right buttock, right deltoid, right thigh or right upper arm.REASON_NOT_VACCINATEDRequired if VACCINATED is N, must be already had elsewhere, refused, unwell or vaccination contraindicated.NOTESOptionalDOSE_SEQUENCEOptional, must be a number or 1B, 1P, 1st Scheduled Booster, 2B, 2P, 2nd Scheduled Booster or 3P.CARE_SETTINGOptional, must be 1 (school) or 2 (clinic).CLINIC_NAMERequired if CARE_SETTING is 2, must be the name of a community clinic location.PERFORMING_PROFESSIONAL_EMAILRequired if uploading offline vaccination records.PERFORMING_PROFESSIONAL_FORENAMEOptionalPERFORMING_PROFESSIONAL_SURNAMEOptional\n\n\n\n        \n            \n                Row 2\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 3\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 4\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 5\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 6\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 7\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 8\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 9\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 10\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 11\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 12\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 13\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 14\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 15\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 16\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 17\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 18\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 19\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 20\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 21\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 22\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 23\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 24\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 26\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 27\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 28\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 29\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 30\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 31\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 32\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 33\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 34\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 35\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 36\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 37\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 38\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n        \n\n      \n    \n\n\n\n\n    \n  \n\n      \"","statusTrace":"setup_hist_vaccs = None\npage = <Page url='http://3.8.164.95:4000/immunisation-imports/48'>\nfile_generator = <mavis.test.data.file_generator.FileGenerator object at 0x7fd87ad98950>\n\n    @pytest.mark.vaccinations\n    def test_vaccination_file_upload_historic_valid_data(\n        setup_hist_vaccs,\n        page,\n        file_generator,\n    ):\n        \"\"\"\n        Test: Upload a historic vaccination records file with valid data and verify import.\n        Steps:\n        1. Navigate to vaccination records import page.\n        2. Upload a historic file with valid data.\n        Verification:\n        - Output indicates successful import of historic records.\n        Scenarios covered:\n        HPV:\n        HPV_Gardasil9, HPV_Gardasil, HPV_Cervarix, HPV_NFA, HPV_Add_Not_Known,\n        HPV_AllowPastExpiryDate, HPV_SiteRAU, HPV_SiteRAL, HPV_NotVaccinated,\n        HPV_AddressNFA, HPV_AddressNotKnown, HPV_AddressNotSpecified\n        Doubles:\n        TDIPV_Revaxis, TDIPV_NFA, TDIPV_Add_Not_Known, TDIPV_AllowPastExpiryDate,\n        TDIPV_SiteRAU, TDIPV_SiteRAL, TDIPV_NotVaccinated, MenACWY_MenQuadfi, MenACWY_NFA,\n        MenACWY_Add_Not_Known, MenACWY_AllowPastExpiryDate, MenACWY_SiteRAU,MenACWY_SiteRAL,\n        MenACWY_NotVaccinated, MAV_855, MenACWY_BatchName100Chars,\n        MMR:\n        MMR, MMR_NFA, MMR_Add_Not_Known, MMR_AllowPastExpiryDate, MMR_SiteRAU, MMR_SiteRAL,\n        MMR_NotVaccinated, MMR_DoseSeq1, MMR_DoseSeq2\n        \"\"\"\n>       ImportRecordsWizardPage(page, file_generator).upload_and_verify_output(\n            VaccsFileMapping.HIST_POSITIVE\n        )\n\ntests/test_import_historical_vaccinations.py:54: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmavis/test/pages/imports/import_records_wizard_page.py:179: in upload_and_verify_output\n    self.upload_and_verify_output_for_input_output_files(\nmavis/test/pages/imports/import_records_wizard_page.py:191: in upload_and_verify_output_for_input_output_files\n    self.verify_upload_output(file_path=output_file_path)\nmavis/test/annotations.py:50: in wrapper\n    return_value = func(*args, **kwargs)\n                   ^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mavis.test.pages.imports.import_records_wizard_page.ImportRecordsWizardPage object at 0x7fd87a369fd0>\nfile_path = PosixPath('vaccs/o_hist_positive.txt')\n\n    @step(\"Verify upload output for {file_path}\")\n    def verify_upload_output(self, file_path: Path) -> None:\n        _expected_errors = self.file_generator.get_expected_errors(file_path)\n        if _expected_errors is not None:\n            for _msg in _expected_errors:\n                if _msg.startswith(\"!\"):\n                    expect(self.page.get_by_role(\"main\")).not_to_contain_text(_msg[1:])\n                else:\n>                   expect(self.page.get_by_role(\"main\")).to_contain_text(_msg)\nE                   AssertionError: Locator expected to contain text '37 imported records'\nE                   Actual value: \nE                           \nE                   \nE                             \nE                       \nE                         \nE                   \nE                         \nE                     Upload (30 January 2026 at 10:51am)\nE                   \nE                       \nE                   \nE                         \nE                             Details\nE                   \nE                   \nE                   \nE                   \nE                           \nE                   \nE                     Uploaded byNURSE, NurseFileVaccsFileMapping.HIST_POSITIVE20260130105103.csvTypeVaccination recordsStatusInvalid\nE                   \nE                         \nE                       \nE                   \nE                   \nE                             \nE                   \nE                         \nE                                     Records could not be imported\nE                   \nE                   \nE                   \nE                   \nE                   \nE                           \nE                   \nE                         \nE                       \nE                         The records cannot be uploaded due to errors in the CSV file.\nE                   \nE                       \nE                   \nE                       How to format your Mavis CSV file for vaccination records\nE                     Make sure the CSV you upload uses the following columns:\nE                   \nE                     Column nameNotesORGANISATION_CODEOptional, must be a valid ODS code.SCHOOL_URNOptional, must be 6 digits and numeric. Use 888888 for school unknown and 999999 for homeschooled.SCHOOL_NAMERequired if SCHOOL_URN is 888888.NHS_NUMBEROptional, must be a valid NHS number.PERSON_FORENAMERequiredPERSON_SURNAMERequiredPERSON_DOBRequired, must use either YYYYMMDD or DD/MM/YYYY format.PERSON_GENDER_CODERequired, must be one of: female, male, not known or not specified.PERSON_POSTCODERequired, must be formatted as a valid postcode, for example SW1A 1AA.DATE_OF_VACCINATIONRequired, must use either YYYYMMDD or DD/MM/YYYY format.TIME_OF_VACCINATIONOptional, must use HH:MM:SS format.VACCINATEDRequired, must be Y or N. Can be omitted if VACCINE_GIVEN is provided.VACCINE_GIVENOptional, must be one of: Sequirus Cell-based Trivalent, AstraZeneca Fluenz, Sanofi Vaxigrip, Viatris, Cervarix, Gardasil, Gardasil9, MenQuadfi, Menveo, Nimenrix, Priorix, VaxPro, ProQuad, Priorix-Tetra or Revaxis.BATCH_NUMBERRequired if BATCH_EXPIRY_DATE is provided.BATCH_EXPIRY_DATERequired if BATCH_NUMBER is provided, must use either YYYYMMDD or DD/MM/YYYY format.PROGRAMMERequired, must be Flu, HPV, ACWYX4, MenACWY, MMR, MMRV, 3-in-1 or Td/IPV.ANATOMICAL_SITEOptional, if provided must be appropriate for the vaccine delivery method and be one of: left arm (lower position), left arm (upper position), left buttock, left deltoid, left thigh, left upper arm, nasal, right arm (lower position), right arm (upper position), right buttock, right deltoid, right thigh or right upper arm.REASON_NOT_VACCINATEDRequired if VACCINATED is N, must be already had elsewhere, refused, unwell or vaccination contraindicated.NOTESOptionalDOSE_SEQUENCEOptional, must be a number or 1B, 1P, 1st Scheduled Booster, 2B, 2P, 2nd Scheduled Booster or 3P.CARE_SETTINGOptional, must be 1 (school) or 2 (clinic).CLINIC_NAMERequired if CARE_SETTING is 2, must be the name of a community clinic location.PERFORMING_PROFESSIONAL_EMAILRequired if uploading offline vaccination records.PERFORMING_PROFESSIONAL_FORENAMEOptionalPERFORMING_PROFESSIONAL_SURNAMEOptional\nE                   \nE                   \nE                   \nE                           \nE                               \nE                                   Row 2\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 3\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 4\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 5\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 6\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 7\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 8\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 9\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 10\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 11\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 12\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 13\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 14\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 15\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 16\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 17\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 18\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 19\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 20\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 21\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 22\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 23\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 24\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 26\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 27\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 28\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 29\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 30\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 31\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 32\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 33\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 34\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 35\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 36\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 37\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 38\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                           \nE                   \nE                         \nE                       \nE                   \nE                   \nE                   \nE                   \nE                       \nE                     \nE                   \nE                          \nE                   Call log:\nE                     - Expect \"to_contain_text\" with timeout 5000ms\nE                     - waiting for get_by_role(\"main\")\nE                       9 × locator resolved to <main role=\"main\" id=\"main-content\" class=\"nhsuk-main-wrapper\">…</main>\nE                         - unexpected value \"\nE                           \nE                   \nE                             \nE                       \nE                         \nE                   \nE                         \nE                     Upload (30 January 2026 at 10:51am)\nE                   \nE                       \nE                   \nE                         \nE                             Details\nE                   \nE                   \nE                   \nE                   \nE                           \nE                   \nE                     Uploaded byNURSE, NurseFileVaccsFileMapping.HIST_POSITIVE20260130105103.csvTypeVaccination recordsStatusInvalid\nE                   \nE                         \nE                       \nE                   \nE                   \nE                             \nE                   \nE                         \nE                                     Records could not be imported\nE                   \nE                   \nE                   \nE                   \nE                   \nE                           \nE                   \nE                         \nE                       \nE                         The records cannot be uploaded due to errors in the CSV file.\nE                   \nE                       \nE                   \nE                       How to format your Mavis CSV file for vaccination records\nE                     Make sure the CSV you upload uses the following columns:\nE                   \nE                     Column nameNotesORGANISATION_CODEOptional, must be a valid ODS code.SCHOOL_URNOptional, must be 6 digits and numeric. Use 888888 for school unknown and 999999 for homeschooled.SCHOOL_NAMERequired if SCHOOL_URN is 888888.NHS_NUMBEROptional, must be a valid NHS number.PERSON_FORENAMERequiredPERSON_SURNAMERequiredPERSON_DOBRequired, must use either YYYYMMDD or DD/MM/YYYY format.PERSON_GENDER_CODERequired, must be one of: female, male, not known or not specified.PERSON_POSTCODERequired, must be formatted as a valid postcode, for example SW1A 1AA.DATE_OF_VACCINATIONRequired, must use either YYYYMMDD or DD/MM/YYYY format.TIME_OF_VACCINATIONOptional, must use HH:MM:SS format.VACCINATEDRequired, must be Y or N. Can be omitted if VACCINE_GIVEN is provided.VACCINE_GIVENOptional, must be one of: Sequirus Cell-based Trivalent, AstraZeneca Fluenz, Sanofi Vaxigrip, Viatris, Cervarix, Gardasil, Gardasil9, MenQuadfi, Menveo, Nimenrix, Priorix, VaxPro, ProQuad, Priorix-Tetra or Revaxis.BATCH_NUMBERRequired if BATCH_EXPIRY_DATE is provided.BATCH_EXPIRY_DATERequired if BATCH_NUMBER is provided, must use either YYYYMMDD or DD/MM/YYYY format.PROGRAMMERequired, must be Flu, HPV, ACWYX4, MenACWY, MMR, MMRV, 3-in-1 or Td/IPV.ANATOMICAL_SITEOptional, if provided must be appropriate for the vaccine delivery method and be one of: left arm (lower position), left arm (upper position), left buttock, left deltoid, left thigh, left upper arm, nasal, right arm (lower position), right arm (upper position), right buttock, right deltoid, right thigh or right upper arm.REASON_NOT_VACCINATEDRequired if VACCINATED is N, must be already had elsewhere, refused, unwell or vaccination contraindicated.NOTESOptionalDOSE_SEQUENCEOptional, must be a number or 1B, 1P, 1st Scheduled Booster, 2B, 2P, 2nd Scheduled Booster or 3P.CARE_SETTINGOptional, must be 1 (school) or 2 (clinic).CLINIC_NAMERequired if CARE_SETTING is 2, must be the name of a community clinic location.PERFORMING_PROFESSIONAL_EMAILRequired if uploading offline vaccination records.PERFORMING_PROFESSIONAL_FORENAMEOptionalPERFORMING_PROFESSIONAL_SURNAMEOptional\nE                   \nE                   \nE                   \nE                           \nE                               \nE                                   Row 2\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 3\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 4\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 5\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 6\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 7\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 8\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 9\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 10\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 11\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 12\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 13\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 14\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 15\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 16\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 17\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 18\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 19\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 20\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 21\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 22\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 23\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 24\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 26\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 27\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 28\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 29\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 30\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 31\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 32\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 33\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 34\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 35\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 36\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 37\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 38\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                           \nE                   \nE                         \nE                       \nE                   \nE                   \nE                   \nE                   \nE                       \nE                     \nE                   \nE                         \"\n\nmavis/test/pages/imports/import_records_wizard_page.py:240: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"base_url","time":{"start":1769769795624,"stop":1769769795624,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1769769795624,"stop":1769769795624,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_session_faker","time":{"start":1769769795625,"stop":1769769795626,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1769769795626,"stop":1769769795630,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"onboarding","time":{"start":1769769795630,"stop":1769769819526,"duration":23896},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"programmes_enabled","time":{"start":1769769795630,"stop":1769769795630,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"year_groups","time":{"start":1769769795630,"stop":1769769795630,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1769769795630,"stop":1769769795630,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"team","time":{"start":1769769819526,"stop":1769769819526,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1769769819526,"stop":1769769819526,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1769769819526,"stop":1769769819986,"duration":460},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests","time":{"start":1769769819526,"stop":1769769819526,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1769769819987,"stop":1769769819987,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1769769819987,"stop":1769769819988,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1769769819988,"stop":1769769819988,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1769769819988,"stop":1769769820177,"duration":189},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1769769819988,"stop":1769769819988,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1769769820179,"stop":1769769820188,"duration":9},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1769769820188,"stop":1769769820189,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1769769820189,"stop":1769769820189,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_token","time":{"start":1769769820189,"stop":1769769820189,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_credentials","time":{"start":1769769820189,"stop":1769769820189,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"nurse","time":{"start":1769769830130,"stop":1769769830130,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"organisation","time":{"start":1769769851175,"stop":1769769851175,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"schools","time":{"start":1769769851175,"stop":1769769851175,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clinics","time":{"start":1769769851175,"stop":1769769851175,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"reset_before_each_module","time":{"start":1769770259676,"stop":1769770260039,"duration":363},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1769770260040,"stop":1769770260040,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1769770260040,"stop":1769770260040,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1769770260040,"stop":1769770260040,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1769770260040,"stop":1769770260045,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1769770260045,"stop":1769770260072,"duration":27},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_feature_flags","time":{"start":1769770260072,"stop":1769770260072,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_as_nurse","time":{"start":1769770260072,"stop":1769770262487,"duration":2415},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1769770260072,"stop":1769770261553,"duration":1481},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1769770260072,"stop":1769770261553,"duration":1481},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.log_in_page.LogInPage object at 0x7fd86bf645d0>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Log in as User(username='lewiskate@example.net', password='lewiskate@example.net', role='nurse') and choose team Team(name='Marshall LLC est. 1983', workgroup='A207G', careplus_venue_code='A207GA', careplus_staff_code='A207GB', careplus_staff_type='A207GC', email='psmith@example.org', phone='(07700) 900207')","time":{"start":1769770261553,"stop":1769770262487,"duration":934},"status":"passed","steps":[{"name":"Log in as {1} and choose team {2}","time":{"start":1769770261554,"stop":1769770262487,"duration":933},"status":"passed","steps":[{"name":"Log in as User(username='lewiskate@example.net', password='lewiskate@example.net', role='nurse')","time":{"start":1769770261554,"stop":1769770262454,"duration":900},"status":"passed","steps":[{"name":"Log in as {1}","time":{"start":1769770261554,"stop":1769770262454,"duration":900},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.log_in_page.LogInPage object at 0x7fd86bf65650>, User(username='lewiskate@example.net', password='lewiskate@example.net', role='nurse'))"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.log_in_page.LogInPage object at 0x7fd86bf65650>, User(username='lewiskate@example.net', password='lewiskate@example.net', role='nurse'), Team(name='Marshall LLC est. 1983', workgroup='A207G', careplus_venue_code='A207GA', careplus_staff_code='A207GB', careplus_staff_type='A207GC', email='psmith@example.org', phone='(07700) 900207'))"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"children","time":{"start":1769770262487,"stop":1769770262490,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"file_generator","time":{"start":1769770262490,"stop":1769770262491,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_hist_vaccs","time":{"start":1769770262491,"stop":1769770263976,"duration":1485},"status":"passed","steps":[{"name":"Click on Imports","time":{"start":1769770262491,"stop":1769770262703,"duration":212},"status":"passed","steps":[{"name":"Click on Imports","time":{"start":1769770262491,"stop":1769770262703,"duration":212},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.dashboard_page.DashboardPage object at 0x7fd86bf1e4c0>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Upload records","time":{"start":1769770262703,"stop":1769770263316,"duration":613},"status":"passed","steps":[{"name":"Click on Upload records","time":{"start":1769770262703,"stop":1769770263316,"duration":613},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.imports.imports_page.ImportsPage object at 0x7fd86a358a70>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Select Vaccination Records","time":{"start":1769770263317,"stop":1769770263367,"duration":50},"status":"passed","steps":[{"name":"Select Vaccination Records","time":{"start":1769770263317,"stop":1769770263367,"duration":50},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.imports.import_records_wizard_page.ImportRecordsWizardPage object at 0x7fd87b04a190>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1769770263367,"stop":1769770263976,"duration":609},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1769770263367,"stop":1769770263976,"duration":609},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.imports.import_records_wizard_page.ImportRecordsWizardPage object at 0x7fd87b04a190>,)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":8,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"testStage":{"description":"\nTest: Upload a historic vaccination records file with valid data and verify import.\nSteps:\n1. Navigate to vaccination records import page.\n2. Upload a historic file with valid data.\nVerification:\n- Output indicates successful import of historic records.\nScenarios covered:\nHPV:\nHPV_Gardasil9, HPV_Gardasil, HPV_Cervarix, HPV_NFA, HPV_Add_Not_Known,\nHPV_AllowPastExpiryDate, HPV_SiteRAU, HPV_SiteRAL, HPV_NotVaccinated,\nHPV_AddressNFA, HPV_AddressNotKnown, HPV_AddressNotSpecified\nDoubles:\nTDIPV_Revaxis, TDIPV_NFA, TDIPV_Add_Not_Known, TDIPV_AllowPastExpiryDate,\nTDIPV_SiteRAU, TDIPV_SiteRAL, TDIPV_NotVaccinated, MenACWY_MenQuadfi, MenACWY_NFA,\nMenACWY_Add_Not_Known, MenACWY_AllowPastExpiryDate, MenACWY_SiteRAU,MenACWY_SiteRAL,\nMenACWY_NotVaccinated, MAV_855, MenACWY_BatchName100Chars,\nMMR:\nMMR, MMR_NFA, MMR_Add_Not_Known, MMR_AllowPastExpiryDate, MMR_SiteRAU, MMR_SiteRAL,\nMMR_NotVaccinated, MMR_DoseSeq1, MMR_DoseSeq2\n","status":"failed","statusMessage":"AssertionError: Locator expected to contain text '37 imported records'\nActual value: \n        \n\n          \n    \n      \n\n      \n  Upload (30 January 2026 at 10:51am)\n\n    \n\n      \n          Details\n\n\n\n\n        \n\n  Uploaded byNURSE, NurseFileVaccsFileMapping.HIST_POSITIVE20260130105103.csvTypeVaccination recordsStatusInvalid\n\n      \n    \n\n\n          \n\n      \n                  Records could not be imported\n\n\n\n\n\n        \n\n      \n    \n      The records cannot be uploaded due to errors in the CSV file.\n\n    \n\n    How to format your Mavis CSV file for vaccination records\n  Make sure the CSV you upload uses the following columns:\n\n  Column nameNotesORGANISATION_CODEOptional, must be a valid ODS code.SCHOOL_URNOptional, must be 6 digits and numeric. Use 888888 for school unknown and 999999 for homeschooled.SCHOOL_NAMERequired if SCHOOL_URN is 888888.NHS_NUMBEROptional, must be a valid NHS number.PERSON_FORENAMERequiredPERSON_SURNAMERequiredPERSON_DOBRequired, must use either YYYYMMDD or DD/MM/YYYY format.PERSON_GENDER_CODERequired, must be one of: female, male, not known or not specified.PERSON_POSTCODERequired, must be formatted as a valid postcode, for example SW1A 1AA.DATE_OF_VACCINATIONRequired, must use either YYYYMMDD or DD/MM/YYYY format.TIME_OF_VACCINATIONOptional, must use HH:MM:SS format.VACCINATEDRequired, must be Y or N. Can be omitted if VACCINE_GIVEN is provided.VACCINE_GIVENOptional, must be one of: Sequirus Cell-based Trivalent, AstraZeneca Fluenz, Sanofi Vaxigrip, Viatris, Cervarix, Gardasil, Gardasil9, MenQuadfi, Menveo, Nimenrix, Priorix, VaxPro, ProQuad, Priorix-Tetra or Revaxis.BATCH_NUMBERRequired if BATCH_EXPIRY_DATE is provided.BATCH_EXPIRY_DATERequired if BATCH_NUMBER is provided, must use either YYYYMMDD or DD/MM/YYYY format.PROGRAMMERequired, must be Flu, HPV, ACWYX4, MenACWY, MMR, MMRV, 3-in-1 or Td/IPV.ANATOMICAL_SITEOptional, if provided must be appropriate for the vaccine delivery method and be one of: left arm (lower position), left arm (upper position), left buttock, left deltoid, left thigh, left upper arm, nasal, right arm (lower position), right arm (upper position), right buttock, right deltoid, right thigh or right upper arm.REASON_NOT_VACCINATEDRequired if VACCINATED is N, must be already had elsewhere, refused, unwell or vaccination contraindicated.NOTESOptionalDOSE_SEQUENCEOptional, must be a number or 1B, 1P, 1st Scheduled Booster, 2B, 2P, 2nd Scheduled Booster or 3P.CARE_SETTINGOptional, must be 1 (school) or 2 (clinic).CLINIC_NAMERequired if CARE_SETTING is 2, must be the name of a community clinic location.PERFORMING_PROFESSIONAL_EMAILRequired if uploading offline vaccination records.PERFORMING_PROFESSIONAL_FORENAMEOptionalPERFORMING_PROFESSIONAL_SURNAMEOptional\n\n\n\n        \n            \n                Row 2\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 3\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 4\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 5\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 6\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 7\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 8\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 9\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 10\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 11\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 12\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 13\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 14\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 15\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 16\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 17\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 18\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 19\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 20\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 21\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 22\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 23\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 24\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 26\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 27\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 28\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 29\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 30\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 31\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 32\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 33\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 34\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 35\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 36\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 37\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 38\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n        \n\n      \n    \n\n\n\n\n    \n  \n\n       \nCall log:\n  - Expect \"to_contain_text\" with timeout 5000ms\n  - waiting for get_by_role(\"main\")\n    9 × locator resolved to <main role=\"main\" id=\"main-content\" class=\"nhsuk-main-wrapper\">…</main>\n      - unexpected value \"\n        \n\n          \n    \n      \n\n      \n  Upload (30 January 2026 at 10:51am)\n\n    \n\n      \n          Details\n\n\n\n\n        \n\n  Uploaded byNURSE, NurseFileVaccsFileMapping.HIST_POSITIVE20260130105103.csvTypeVaccination recordsStatusInvalid\n\n      \n    \n\n\n          \n\n      \n                  Records could not be imported\n\n\n\n\n\n        \n\n      \n    \n      The records cannot be uploaded due to errors in the CSV file.\n\n    \n\n    How to format your Mavis CSV file for vaccination records\n  Make sure the CSV you upload uses the following columns:\n\n  Column nameNotesORGANISATION_CODEOptional, must be a valid ODS code.SCHOOL_URNOptional, must be 6 digits and numeric. Use 888888 for school unknown and 999999 for homeschooled.SCHOOL_NAMERequired if SCHOOL_URN is 888888.NHS_NUMBEROptional, must be a valid NHS number.PERSON_FORENAMERequiredPERSON_SURNAMERequiredPERSON_DOBRequired, must use either YYYYMMDD or DD/MM/YYYY format.PERSON_GENDER_CODERequired, must be one of: female, male, not known or not specified.PERSON_POSTCODERequired, must be formatted as a valid postcode, for example SW1A 1AA.DATE_OF_VACCINATIONRequired, must use either YYYYMMDD or DD/MM/YYYY format.TIME_OF_VACCINATIONOptional, must use HH:MM:SS format.VACCINATEDRequired, must be Y or N. Can be omitted if VACCINE_GIVEN is provided.VACCINE_GIVENOptional, must be one of: Sequirus Cell-based Trivalent, AstraZeneca Fluenz, Sanofi Vaxigrip, Viatris, Cervarix, Gardasil, Gardasil9, MenQuadfi, Menveo, Nimenrix, Priorix, VaxPro, ProQuad, Priorix-Tetra or Revaxis.BATCH_NUMBERRequired if BATCH_EXPIRY_DATE is provided.BATCH_EXPIRY_DATERequired if BATCH_NUMBER is provided, must use either YYYYMMDD or DD/MM/YYYY format.PROGRAMMERequired, must be Flu, HPV, ACWYX4, MenACWY, MMR, MMRV, 3-in-1 or Td/IPV.ANATOMICAL_SITEOptional, if provided must be appropriate for the vaccine delivery method and be one of: left arm (lower position), left arm (upper position), left buttock, left deltoid, left thigh, left upper arm, nasal, right arm (lower position), right arm (upper position), right buttock, right deltoid, right thigh or right upper arm.REASON_NOT_VACCINATEDRequired if VACCINATED is N, must be already had elsewhere, refused, unwell or vaccination contraindicated.NOTESOptionalDOSE_SEQUENCEOptional, must be a number or 1B, 1P, 1st Scheduled Booster, 2B, 2P, 2nd Scheduled Booster or 3P.CARE_SETTINGOptional, must be 1 (school) or 2 (clinic).CLINIC_NAMERequired if CARE_SETTING is 2, must be the name of a community clinic location.PERFORMING_PROFESSIONAL_EMAILRequired if uploading offline vaccination records.PERFORMING_PROFESSIONAL_FORENAMEOptionalPERFORMING_PROFESSIONAL_SURNAMEOptional\n\n\n\n        \n            \n                Row 2\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 3\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 4\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 5\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 6\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 7\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 8\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 9\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 10\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 11\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 12\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 13\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 14\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 15\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 16\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 17\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 18\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 19\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 20\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 21\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 22\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 23\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 24\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 26\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 27\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 28\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 29\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 30\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 31\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 32\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 33\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 34\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 35\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 36\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 37\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 38\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n        \n\n      \n    \n\n\n\n\n    \n  \n\n      \"","statusTrace":"setup_hist_vaccs = None\npage = <Page url='http://3.8.164.95:4000/immunisation-imports/48'>\nfile_generator = <mavis.test.data.file_generator.FileGenerator object at 0x7fd87ad98950>\n\n    @pytest.mark.vaccinations\n    def test_vaccination_file_upload_historic_valid_data(\n        setup_hist_vaccs,\n        page,\n        file_generator,\n    ):\n        \"\"\"\n        Test: Upload a historic vaccination records file with valid data and verify import.\n        Steps:\n        1. Navigate to vaccination records import page.\n        2. Upload a historic file with valid data.\n        Verification:\n        - Output indicates successful import of historic records.\n        Scenarios covered:\n        HPV:\n        HPV_Gardasil9, HPV_Gardasil, HPV_Cervarix, HPV_NFA, HPV_Add_Not_Known,\n        HPV_AllowPastExpiryDate, HPV_SiteRAU, HPV_SiteRAL, HPV_NotVaccinated,\n        HPV_AddressNFA, HPV_AddressNotKnown, HPV_AddressNotSpecified\n        Doubles:\n        TDIPV_Revaxis, TDIPV_NFA, TDIPV_Add_Not_Known, TDIPV_AllowPastExpiryDate,\n        TDIPV_SiteRAU, TDIPV_SiteRAL, TDIPV_NotVaccinated, MenACWY_MenQuadfi, MenACWY_NFA,\n        MenACWY_Add_Not_Known, MenACWY_AllowPastExpiryDate, MenACWY_SiteRAU,MenACWY_SiteRAL,\n        MenACWY_NotVaccinated, MAV_855, MenACWY_BatchName100Chars,\n        MMR:\n        MMR, MMR_NFA, MMR_Add_Not_Known, MMR_AllowPastExpiryDate, MMR_SiteRAU, MMR_SiteRAL,\n        MMR_NotVaccinated, MMR_DoseSeq1, MMR_DoseSeq2\n        \"\"\"\n>       ImportRecordsWizardPage(page, file_generator).upload_and_verify_output(\n            VaccsFileMapping.HIST_POSITIVE\n        )\n\ntests/test_import_historical_vaccinations.py:54: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nmavis/test/pages/imports/import_records_wizard_page.py:179: in upload_and_verify_output\n    self.upload_and_verify_output_for_input_output_files(\nmavis/test/pages/imports/import_records_wizard_page.py:191: in upload_and_verify_output_for_input_output_files\n    self.verify_upload_output(file_path=output_file_path)\nmavis/test/annotations.py:50: in wrapper\n    return_value = func(*args, **kwargs)\n                   ^^^^^^^^^^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mavis.test.pages.imports.import_records_wizard_page.ImportRecordsWizardPage object at 0x7fd87a369fd0>\nfile_path = PosixPath('vaccs/o_hist_positive.txt')\n\n    @step(\"Verify upload output for {file_path}\")\n    def verify_upload_output(self, file_path: Path) -> None:\n        _expected_errors = self.file_generator.get_expected_errors(file_path)\n        if _expected_errors is not None:\n            for _msg in _expected_errors:\n                if _msg.startswith(\"!\"):\n                    expect(self.page.get_by_role(\"main\")).not_to_contain_text(_msg[1:])\n                else:\n>                   expect(self.page.get_by_role(\"main\")).to_contain_text(_msg)\nE                   AssertionError: Locator expected to contain text '37 imported records'\nE                   Actual value: \nE                           \nE                   \nE                             \nE                       \nE                         \nE                   \nE                         \nE                     Upload (30 January 2026 at 10:51am)\nE                   \nE                       \nE                   \nE                         \nE                             Details\nE                   \nE                   \nE                   \nE                   \nE                           \nE                   \nE                     Uploaded byNURSE, NurseFileVaccsFileMapping.HIST_POSITIVE20260130105103.csvTypeVaccination recordsStatusInvalid\nE                   \nE                         \nE                       \nE                   \nE                   \nE                             \nE                   \nE                         \nE                                     Records could not be imported\nE                   \nE                   \nE                   \nE                   \nE                   \nE                           \nE                   \nE                         \nE                       \nE                         The records cannot be uploaded due to errors in the CSV file.\nE                   \nE                       \nE                   \nE                       How to format your Mavis CSV file for vaccination records\nE                     Make sure the CSV you upload uses the following columns:\nE                   \nE                     Column nameNotesORGANISATION_CODEOptional, must be a valid ODS code.SCHOOL_URNOptional, must be 6 digits and numeric. Use 888888 for school unknown and 999999 for homeschooled.SCHOOL_NAMERequired if SCHOOL_URN is 888888.NHS_NUMBEROptional, must be a valid NHS number.PERSON_FORENAMERequiredPERSON_SURNAMERequiredPERSON_DOBRequired, must use either YYYYMMDD or DD/MM/YYYY format.PERSON_GENDER_CODERequired, must be one of: female, male, not known or not specified.PERSON_POSTCODERequired, must be formatted as a valid postcode, for example SW1A 1AA.DATE_OF_VACCINATIONRequired, must use either YYYYMMDD or DD/MM/YYYY format.TIME_OF_VACCINATIONOptional, must use HH:MM:SS format.VACCINATEDRequired, must be Y or N. Can be omitted if VACCINE_GIVEN is provided.VACCINE_GIVENOptional, must be one of: Sequirus Cell-based Trivalent, AstraZeneca Fluenz, Sanofi Vaxigrip, Viatris, Cervarix, Gardasil, Gardasil9, MenQuadfi, Menveo, Nimenrix, Priorix, VaxPro, ProQuad, Priorix-Tetra or Revaxis.BATCH_NUMBERRequired if BATCH_EXPIRY_DATE is provided.BATCH_EXPIRY_DATERequired if BATCH_NUMBER is provided, must use either YYYYMMDD or DD/MM/YYYY format.PROGRAMMERequired, must be Flu, HPV, ACWYX4, MenACWY, MMR, MMRV, 3-in-1 or Td/IPV.ANATOMICAL_SITEOptional, if provided must be appropriate for the vaccine delivery method and be one of: left arm (lower position), left arm (upper position), left buttock, left deltoid, left thigh, left upper arm, nasal, right arm (lower position), right arm (upper position), right buttock, right deltoid, right thigh or right upper arm.REASON_NOT_VACCINATEDRequired if VACCINATED is N, must be already had elsewhere, refused, unwell or vaccination contraindicated.NOTESOptionalDOSE_SEQUENCEOptional, must be a number or 1B, 1P, 1st Scheduled Booster, 2B, 2P, 2nd Scheduled Booster or 3P.CARE_SETTINGOptional, must be 1 (school) or 2 (clinic).CLINIC_NAMERequired if CARE_SETTING is 2, must be the name of a community clinic location.PERFORMING_PROFESSIONAL_EMAILRequired if uploading offline vaccination records.PERFORMING_PROFESSIONAL_FORENAMEOptionalPERFORMING_PROFESSIONAL_SURNAMEOptional\nE                   \nE                   \nE                   \nE                           \nE                               \nE                                   Row 2\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 3\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 4\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 5\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 6\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 7\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 8\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 9\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 10\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 11\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 12\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 13\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 14\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 15\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 16\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 17\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 18\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 19\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 20\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 21\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 22\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 23\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 24\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 26\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 27\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 28\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 29\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 30\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 31\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 32\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 33\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 34\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 35\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 36\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 37\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 38\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                           \nE                   \nE                         \nE                       \nE                   \nE                   \nE                   \nE                   \nE                       \nE                     \nE                   \nE                          \nE                   Call log:\nE                     - Expect \"to_contain_text\" with timeout 5000ms\nE                     - waiting for get_by_role(\"main\")\nE                       9 × locator resolved to <main role=\"main\" id=\"main-content\" class=\"nhsuk-main-wrapper\">…</main>\nE                         - unexpected value \"\nE                           \nE                   \nE                             \nE                       \nE                         \nE                   \nE                         \nE                     Upload (30 January 2026 at 10:51am)\nE                   \nE                       \nE                   \nE                         \nE                             Details\nE                   \nE                   \nE                   \nE                   \nE                           \nE                   \nE                     Uploaded byNURSE, NurseFileVaccsFileMapping.HIST_POSITIVE20260130105103.csvTypeVaccination recordsStatusInvalid\nE                   \nE                         \nE                       \nE                   \nE                   \nE                             \nE                   \nE                         \nE                                     Records could not be imported\nE                   \nE                   \nE                   \nE                   \nE                   \nE                           \nE                   \nE                         \nE                       \nE                         The records cannot be uploaded due to errors in the CSV file.\nE                   \nE                       \nE                   \nE                       How to format your Mavis CSV file for vaccination records\nE                     Make sure the CSV you upload uses the following columns:\nE                   \nE                     Column nameNotesORGANISATION_CODEOptional, must be a valid ODS code.SCHOOL_URNOptional, must be 6 digits and numeric. Use 888888 for school unknown and 999999 for homeschooled.SCHOOL_NAMERequired if SCHOOL_URN is 888888.NHS_NUMBEROptional, must be a valid NHS number.PERSON_FORENAMERequiredPERSON_SURNAMERequiredPERSON_DOBRequired, must use either YYYYMMDD or DD/MM/YYYY format.PERSON_GENDER_CODERequired, must be one of: female, male, not known or not specified.PERSON_POSTCODERequired, must be formatted as a valid postcode, for example SW1A 1AA.DATE_OF_VACCINATIONRequired, must use either YYYYMMDD or DD/MM/YYYY format.TIME_OF_VACCINATIONOptional, must use HH:MM:SS format.VACCINATEDRequired, must be Y or N. Can be omitted if VACCINE_GIVEN is provided.VACCINE_GIVENOptional, must be one of: Sequirus Cell-based Trivalent, AstraZeneca Fluenz, Sanofi Vaxigrip, Viatris, Cervarix, Gardasil, Gardasil9, MenQuadfi, Menveo, Nimenrix, Priorix, VaxPro, ProQuad, Priorix-Tetra or Revaxis.BATCH_NUMBERRequired if BATCH_EXPIRY_DATE is provided.BATCH_EXPIRY_DATERequired if BATCH_NUMBER is provided, must use either YYYYMMDD or DD/MM/YYYY format.PROGRAMMERequired, must be Flu, HPV, ACWYX4, MenACWY, MMR, MMRV, 3-in-1 or Td/IPV.ANATOMICAL_SITEOptional, if provided must be appropriate for the vaccine delivery method and be one of: left arm (lower position), left arm (upper position), left buttock, left deltoid, left thigh, left upper arm, nasal, right arm (lower position), right arm (upper position), right buttock, right deltoid, right thigh or right upper arm.REASON_NOT_VACCINATEDRequired if VACCINATED is N, must be already had elsewhere, refused, unwell or vaccination contraindicated.NOTESOptionalDOSE_SEQUENCEOptional, must be a number or 1B, 1P, 1st Scheduled Booster, 2B, 2P, 2nd Scheduled Booster or 3P.CARE_SETTINGOptional, must be 1 (school) or 2 (clinic).CLINIC_NAMERequired if CARE_SETTING is 2, must be the name of a community clinic location.PERFORMING_PROFESSIONAL_EMAILRequired if uploading offline vaccination records.PERFORMING_PROFESSIONAL_FORENAMEOptionalPERFORMING_PROFESSIONAL_SURNAMEOptional\nE                   \nE                   \nE                   \nE                           \nE                               \nE                                   Row 2\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 3\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 4\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 5\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 6\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 7\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 8\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 9\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 10\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 11\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 12\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 13\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 14\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 15\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 16\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 17\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 18\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 19\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 20\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 21\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 22\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 23\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 24\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 26\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 27\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 28\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 29\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 30\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 31\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 32\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 33\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 34\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 35\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 36\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 37\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                               \nE                                   Row 38\nE                               \nE                   \nE                               \nE                                     SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\nE                               \nE                           \nE                   \nE                         \nE                       \nE                   \nE                   \nE                   \nE                   \nE                       \nE                     \nE                   \nE                         \"\n\nmavis/test/pages/imports/import_records_wizard_page.py:240: AssertionError","steps":[{"name":"Set input file to PosixPath('working/working_gw3/VaccsFileMapping.HIST_POSITIVE20260130105103.csv')","time":{"start":1769770264003,"stop":1769770264023,"duration":20},"status":"passed","steps":[{"name":"Set input file to {1}","time":{"start":1769770264003,"stop":1769770264023,"duration":20},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.imports.import_records_wizard_page.ImportRecordsWizardPage object at 0x7fd87a369fd0>, PosixPath('working/working_gw3/VaccsFileMapping.HIST_POSITIVE20260130105103.csv'))"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1769770264023,"stop":1769770264693,"duration":670},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1769770264023,"stop":1769770264693,"duration":670},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.imports.import_records_wizard_page.ImportRecordsWizardPage object at 0x7fd87a369fd0>,)"},{"name":"_coverage","value":"'HPV_Gardasil9, HPV_Gardasil, HPV_Cervarix, HPV_NFA, HPV_Add_Not_Known, HPV_AllowPastExpiryDate, HPV_SiteRAU, HPV_SiteRAL, HPV_NotVaccinated, TDIPV_Revaxis, TDIPV_NFA, TDIPV_Add_Not_Known, TDIPV_AllowPastExpiryDate, TDIPV_SiteRAU, TDIPV_SiteRAL, TDIPV_NotVaccinated, MenACWY_MenQuadfi, MenACWY_NFA, MenACWY_Add_Not_Known, MenACWY_AllowPastExpiryDate, MenACWY_SiteRAU, MenACWY_SiteRAL, MenACWY_NotVaccinated, MAV_855, MenACWY_BatchName100Chars, MMR, MMR_NFA, MMR_Add_Not_Known, MMR_AllowPastExpiryDate, MMR_SiteRAU, MMR_SiteRAL, MMR_NotVaccinated, MMR_DoseSeq1, MMR_DoseSeq2, HPV_PostcodeNFA, HPV_PostcodeAddressNotKnown, HPV_PostcodeAddressNotSpecified'"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click import link for PosixPath('working/working_gw3/VaccsFileMapping.HIST_POSITIVE20260130105103.csv')","time":{"start":1769770264733,"stop":1769770265024,"duration":291},"status":"passed","steps":[{"name":"Click import link for {1}","time":{"start":1769770264733,"stop":1769770265024,"duration":291},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.imports.import_records_wizard_page.ImportRecordsWizardPage object at 0x7fd87a369fd0>, PosixPath('working/working_gw3/VaccsFileMapping.HIST_POSITIVE20260130105103.csv'))"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Reload until completed status appears","time":{"start":1769770265025,"stop":1769770265047,"duration":22},"status":"passed","steps":[{"name":"Reload until completed status appears","time":{"start":1769770265025,"stop":1769770265047,"duration":22},"status":"passed","steps":[{"name":"Reload page until <Locator frame=<Frame name= url='http://3.8.164.95:4000/immunisation-imports/48'> selector='internal:role=strong >> internal:text=\"Review and approve\"i >> internal:or=\"internal:role=strong >> internal:text=\\\\\"Completed\\\\\"i\" >> internal:or=\"internal:role=strong >> internal:text=\\\\\"Invalid\\\\\"i\" >> internal:or=\"internal:text=\\\\\"There is a problem\\\\\"i\" >> nth=0'> is visible","time":{"start":1769770265025,"stop":1769770265047,"duration":22},"status":"passed","steps":[{"name":"Reload page until {1} is visible","time":{"start":1769770265025,"stop":1769770265047,"duration":22},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<Page url='http://3.8.164.95:4000/immunisation-imports/48'>, <Locator frame=<Frame name= url='http://3.8.164.95:4000/immunisation-imports/48'> selector='internal:role=strong >> internal:text=\"Review and approve\"i >> internal:or=\"internal:role=strong >> internal:text=\\\\\"Completed\\\\\"i\" >> internal:or=\"internal:role=strong >> internal:text=\\\\\"Invalid\\\\\"i\" >> internal:or=\"internal:text=\\\\\"There is a problem\\\\\"i\" >> nth=0'>)"},{"name":"seconds","value":"60"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.imports.import_records_wizard_page.ImportRecordsWizardPage object at 0x7fd87a369fd0>,)"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Verify upload output for PosixPath('vaccs/o_hist_positive.txt')","time":{"start":1769770265070,"stop":1769770271268,"duration":6198},"status":"failed","statusMessage":"AssertionError: Locator expected to contain text '37 imported records'\nActual value: \n        \n\n          \n    \n      \n\n      \n  Upload (30 January 2026 at 10:51am)\n\n    \n\n      \n          Details\n\n\n\n\n        \n\n  Uploaded byNURSE, NurseFileVaccsFileMapping.HIST_POSITIVE20260130105103.csvTypeVaccination recordsStatusInvalid\n\n      \n    \n\n\n          \n\n      \n                  Records could not be imported\n\n\n\n\n\n        \n\n      \n    \n      The records cannot be uploaded due to errors in the CSV file.\n\n    \n\n    How to format your Mavis CSV file for vaccination records\n  Make sure the CSV you upload uses the following columns:\n\n  Column nameNotesORGANISATION_CODEOptional, must be a valid ODS code.SCHOOL_URNOptional, must be 6 digits and numeric. Use 888888 for school unknown and 999999 for homeschooled.SCHOOL_NAMERequired if SCHOOL_URN is 888888.NHS_NUMBEROptional, must be a valid NHS number.PERSON_FORENAMERequiredPERSON_SURNAMERequiredPERSON_DOBRequired, must use either YYYYMMDD or DD/MM/YYYY format.PERSON_GENDER_CODERequired, must be one of: female, male, not known or not specified.PERSON_POSTCODERequired, must be formatted as a valid postcode, for example SW1A 1AA.DATE_OF_VACCINATIONRequired, must use either YYYYMMDD or DD/MM/YYYY format.TIME_OF_VACCINATIONOptional, must use HH:MM:SS format.VACCINATEDRequired, must be Y or N. Can be omitted if VACCINE_GIVEN is provided.VACCINE_GIVENOptional, must be one of: Sequirus Cell-based Trivalent, AstraZeneca Fluenz, Sanofi Vaxigrip, Viatris, Cervarix, Gardasil, Gardasil9, MenQuadfi, Menveo, Nimenrix, Priorix, VaxPro, ProQuad, Priorix-Tetra or Revaxis.BATCH_NUMBERRequired if BATCH_EXPIRY_DATE is provided.BATCH_EXPIRY_DATERequired if BATCH_NUMBER is provided, must use either YYYYMMDD or DD/MM/YYYY format.PROGRAMMERequired, must be Flu, HPV, ACWYX4, MenACWY, MMR, MMRV, 3-in-1 or Td/IPV.ANATOMICAL_SITEOptional, if provided must be appropriate for the vaccine delivery method and be one of: left arm (lower position), left arm (upper position), left buttock, left deltoid, left thigh, left upper arm, nasal, right arm (lower position), right arm (upper position), right buttock, right deltoid, right thigh or right upper arm.REASON_NOT_VACCINATEDRequired if VACCINATED is N, must be already had elsewhere, refused, unwell or vaccination contraindicated.NOTESOptionalDOSE_SEQUENCEOptional, must be a number or 1B, 1P, 1st Scheduled Booster, 2B, 2P, 2nd Scheduled Booster or 3P.CARE_SETTINGOptional, must be 1 (school) or 2 (clinic).CLINIC_NAMERequired if CARE_SETTING is 2, must be the name of a community clinic location.PERFORMING_PROFESSIONAL_EMAILRequired if uploading offline vaccination records.PERFORMING_PROFESSIONAL_FORENAMEOptionalPERFORMING_PROFESSIONAL_SURNAMEOptional\n\n\n\n        \n            \n                Row 2\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 3\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 4\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 5\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 6\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 7\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 8\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 9\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 10\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 11\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 12\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 13\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 14\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 15\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 16\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 17\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 18\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 19\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 20\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 21\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 22\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 23\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 24\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 26\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 27\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 28\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 29\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 30\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 31\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 32\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 33\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 34\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 35\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 36\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 37\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 38\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n        \n\n      \n    \n\n\n\n\n    \n  \n\n       \nCall log:\n  - Expect \"to_contain_text\" with timeout 5000ms\n  - waiting for get_by_role(\"main\")\n    9 × locator resolved to <main role=\"main\" id=\"main-content\" class=\"nhsuk-main-wrapper\">…</main>\n      - unexpected value \"\n        \n\n          \n    \n      \n\n      \n  Upload (30 January 2026 at 10:51am)\n\n    \n\n      \n          Details\n\n\n\n\n        \n\n  Uploaded byNURSE, NurseFileVaccsFileMapping.HIST_POSITIVE20260130105103.csvTypeVaccination recordsStatusInvalid\n\n      \n    \n\n\n          \n\n      \n                  Records could not be imported\n\n\n\n\n\n        \n\n      \n    \n      The records cannot be uploaded due to errors in the CSV file.\n\n    \n\n    How to format your Mavis CSV file for vaccination records\n  Make sure the CSV you upload uses the following columns:\n\n  Column nameNotesORGANISATION_CODEOptional, must be a valid ODS code.SCHOOL_URNOptional, must be 6 digits and numeric. Use 888888 for school unknown and 999999 for homeschooled.SCHOOL_NAMERequired if SCHOOL_URN is 888888.NHS_NUMBEROptional, must be a valid NHS number.PERSON_FORENAMERequiredPERSON_SURNAMERequiredPERSON_DOBRequired, must use either YYYYMMDD or DD/MM/YYYY format.PERSON_GENDER_CODERequired, must be one of: female, male, not known or not specified.PERSON_POSTCODERequired, must be formatted as a valid postcode, for example SW1A 1AA.DATE_OF_VACCINATIONRequired, must use either YYYYMMDD or DD/MM/YYYY format.TIME_OF_VACCINATIONOptional, must use HH:MM:SS format.VACCINATEDRequired, must be Y or N. Can be omitted if VACCINE_GIVEN is provided.VACCINE_GIVENOptional, must be one of: Sequirus Cell-based Trivalent, AstraZeneca Fluenz, Sanofi Vaxigrip, Viatris, Cervarix, Gardasil, Gardasil9, MenQuadfi, Menveo, Nimenrix, Priorix, VaxPro, ProQuad, Priorix-Tetra or Revaxis.BATCH_NUMBERRequired if BATCH_EXPIRY_DATE is provided.BATCH_EXPIRY_DATERequired if BATCH_NUMBER is provided, must use either YYYYMMDD or DD/MM/YYYY format.PROGRAMMERequired, must be Flu, HPV, ACWYX4, MenACWY, MMR, MMRV, 3-in-1 or Td/IPV.ANATOMICAL_SITEOptional, if provided must be appropriate for the vaccine delivery method and be one of: left arm (lower position), left arm (upper position), left buttock, left deltoid, left thigh, left upper arm, nasal, right arm (lower position), right arm (upper position), right buttock, right deltoid, right thigh or right upper arm.REASON_NOT_VACCINATEDRequired if VACCINATED is N, must be already had elsewhere, refused, unwell or vaccination contraindicated.NOTESOptionalDOSE_SEQUENCEOptional, must be a number or 1B, 1P, 1st Scheduled Booster, 2B, 2P, 2nd Scheduled Booster or 3P.CARE_SETTINGOptional, must be 1 (school) or 2 (clinic).CLINIC_NAMERequired if CARE_SETTING is 2, must be the name of a community clinic location.PERFORMING_PROFESSIONAL_EMAILRequired if uploading offline vaccination records.PERFORMING_PROFESSIONAL_FORENAMEOptionalPERFORMING_PROFESSIONAL_SURNAMEOptional\n\n\n\n        \n            \n                Row 2\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 3\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 4\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 5\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 6\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 7\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 8\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 9\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 10\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 11\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 12\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 13\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 14\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 15\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 16\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 17\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 18\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 19\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 20\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 21\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 22\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 23\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 24\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 26\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 27\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 28\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 29\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 30\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 31\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 32\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 33\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 34\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 35\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 36\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 37\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 38\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n        \n\n      \n    \n\n\n\n\n    \n  \n\n      \"\n\n","statusTrace":"  File \"/home/runner/work/manage-vaccinations-in-schools/manage-vaccinations-in-schools/.venv/lib/python3.14/site-packages/allure_commons/_allure.py\", line 202, in impl\n    return func(*a, **kw)\n  File \"/home/runner/work/manage-vaccinations-in-schools/manage-vaccinations-in-schools/mavis/test/annotations.py\", line 50, in wrapper\n    return_value = func(*args, **kwargs)\n  File \"/home/runner/work/manage-vaccinations-in-schools/manage-vaccinations-in-schools/mavis/test/pages/imports/import_records_wizard_page.py\", line 240, in verify_upload_output\n    expect(self.page.get_by_role(\"main\")).to_contain_text(_msg)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/home/runner/work/manage-vaccinations-in-schools/manage-vaccinations-in-schools/.venv/lib/python3.14/site-packages/playwright/sync_api/_generated.py\", line 19319, in to_contain_text\n    self._sync(\n    ~~~~~~~~~~^\n        self._impl_obj.to_contain_text(\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n        )\n        ^\n    )\n    ^\n  File \"/home/runner/work/manage-vaccinations-in-schools/manage-vaccinations-in-schools/.venv/lib/python3.14/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ~~~~~~~~~~~^^\n  File \"/home/runner/work/manage-vaccinations-in-schools/manage-vaccinations-in-schools/.venv/lib/python3.14/site-packages/playwright/_impl/_assertions.py\", line 229, in to_contain_text\n    await self._expect_impl(\n    ...<9 lines>...\n    )\n  File \"/home/runner/work/manage-vaccinations-in-schools/manage-vaccinations-in-schools/.venv/lib/python3.14/site-packages/playwright/_impl/_assertions.py\", line 85, in _expect_impl\n    raise AssertionError(\n        f\"{out_message}\\nActual value: {actual}{error_message} {format_call_log(result.get('log'))}\"\n    )\n","steps":[{"name":"Verify upload output for {file_path}","time":{"start":1769770265070,"stop":1769770271267,"duration":6197},"status":"failed","statusMessage":"AssertionError: Locator expected to contain text '37 imported records'\nActual value: \n        \n\n          \n    \n      \n\n      \n  Upload (30 January 2026 at 10:51am)\n\n    \n\n      \n          Details\n\n\n\n\n        \n\n  Uploaded byNURSE, NurseFileVaccsFileMapping.HIST_POSITIVE20260130105103.csvTypeVaccination recordsStatusInvalid\n\n      \n    \n\n\n          \n\n      \n                  Records could not be imported\n\n\n\n\n\n        \n\n      \n    \n      The records cannot be uploaded due to errors in the CSV file.\n\n    \n\n    How to format your Mavis CSV file for vaccination records\n  Make sure the CSV you upload uses the following columns:\n\n  Column nameNotesORGANISATION_CODEOptional, must be a valid ODS code.SCHOOL_URNOptional, must be 6 digits and numeric. Use 888888 for school unknown and 999999 for homeschooled.SCHOOL_NAMERequired if SCHOOL_URN is 888888.NHS_NUMBEROptional, must be a valid NHS number.PERSON_FORENAMERequiredPERSON_SURNAMERequiredPERSON_DOBRequired, must use either YYYYMMDD or DD/MM/YYYY format.PERSON_GENDER_CODERequired, must be one of: female, male, not known or not specified.PERSON_POSTCODERequired, must be formatted as a valid postcode, for example SW1A 1AA.DATE_OF_VACCINATIONRequired, must use either YYYYMMDD or DD/MM/YYYY format.TIME_OF_VACCINATIONOptional, must use HH:MM:SS format.VACCINATEDRequired, must be Y or N. Can be omitted if VACCINE_GIVEN is provided.VACCINE_GIVENOptional, must be one of: Sequirus Cell-based Trivalent, AstraZeneca Fluenz, Sanofi Vaxigrip, Viatris, Cervarix, Gardasil, Gardasil9, MenQuadfi, Menveo, Nimenrix, Priorix, VaxPro, ProQuad, Priorix-Tetra or Revaxis.BATCH_NUMBERRequired if BATCH_EXPIRY_DATE is provided.BATCH_EXPIRY_DATERequired if BATCH_NUMBER is provided, must use either YYYYMMDD or DD/MM/YYYY format.PROGRAMMERequired, must be Flu, HPV, ACWYX4, MenACWY, MMR, MMRV, 3-in-1 or Td/IPV.ANATOMICAL_SITEOptional, if provided must be appropriate for the vaccine delivery method and be one of: left arm (lower position), left arm (upper position), left buttock, left deltoid, left thigh, left upper arm, nasal, right arm (lower position), right arm (upper position), right buttock, right deltoid, right thigh or right upper arm.REASON_NOT_VACCINATEDRequired if VACCINATED is N, must be already had elsewhere, refused, unwell or vaccination contraindicated.NOTESOptionalDOSE_SEQUENCEOptional, must be a number or 1B, 1P, 1st Scheduled Booster, 2B, 2P, 2nd Scheduled Booster or 3P.CARE_SETTINGOptional, must be 1 (school) or 2 (clinic).CLINIC_NAMERequired if CARE_SETTING is 2, must be the name of a community clinic location.PERFORMING_PROFESSIONAL_EMAILRequired if uploading offline vaccination records.PERFORMING_PROFESSIONAL_FORENAMEOptionalPERFORMING_PROFESSIONAL_SURNAMEOptional\n\n\n\n        \n            \n                Row 2\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 3\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 4\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 5\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 6\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 7\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 8\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 9\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 10\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 11\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 12\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 13\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 14\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 15\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 16\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 17\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 18\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 19\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 20\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 21\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 22\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 23\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 24\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 26\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 27\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 28\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 29\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 30\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 31\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 32\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 33\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 34\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 35\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 36\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 37\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 38\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n        \n\n      \n    \n\n\n\n\n    \n  \n\n       \nCall log:\n  - Expect \"to_contain_text\" with timeout 5000ms\n  - waiting for get_by_role(\"main\")\n    9 × locator resolved to <main role=\"main\" id=\"main-content\" class=\"nhsuk-main-wrapper\">…</main>\n      - unexpected value \"\n        \n\n          \n    \n      \n\n      \n  Upload (30 January 2026 at 10:51am)\n\n    \n\n      \n          Details\n\n\n\n\n        \n\n  Uploaded byNURSE, NurseFileVaccsFileMapping.HIST_POSITIVE20260130105103.csvTypeVaccination recordsStatusInvalid\n\n      \n    \n\n\n          \n\n      \n                  Records could not be imported\n\n\n\n\n\n        \n\n      \n    \n      The records cannot be uploaded due to errors in the CSV file.\n\n    \n\n    How to format your Mavis CSV file for vaccination records\n  Make sure the CSV you upload uses the following columns:\n\n  Column nameNotesORGANISATION_CODEOptional, must be a valid ODS code.SCHOOL_URNOptional, must be 6 digits and numeric. Use 888888 for school unknown and 999999 for homeschooled.SCHOOL_NAMERequired if SCHOOL_URN is 888888.NHS_NUMBEROptional, must be a valid NHS number.PERSON_FORENAMERequiredPERSON_SURNAMERequiredPERSON_DOBRequired, must use either YYYYMMDD or DD/MM/YYYY format.PERSON_GENDER_CODERequired, must be one of: female, male, not known or not specified.PERSON_POSTCODERequired, must be formatted as a valid postcode, for example SW1A 1AA.DATE_OF_VACCINATIONRequired, must use either YYYYMMDD or DD/MM/YYYY format.TIME_OF_VACCINATIONOptional, must use HH:MM:SS format.VACCINATEDRequired, must be Y or N. Can be omitted if VACCINE_GIVEN is provided.VACCINE_GIVENOptional, must be one of: Sequirus Cell-based Trivalent, AstraZeneca Fluenz, Sanofi Vaxigrip, Viatris, Cervarix, Gardasil, Gardasil9, MenQuadfi, Menveo, Nimenrix, Priorix, VaxPro, ProQuad, Priorix-Tetra or Revaxis.BATCH_NUMBERRequired if BATCH_EXPIRY_DATE is provided.BATCH_EXPIRY_DATERequired if BATCH_NUMBER is provided, must use either YYYYMMDD or DD/MM/YYYY format.PROGRAMMERequired, must be Flu, HPV, ACWYX4, MenACWY, MMR, MMRV, 3-in-1 or Td/IPV.ANATOMICAL_SITEOptional, if provided must be appropriate for the vaccine delivery method and be one of: left arm (lower position), left arm (upper position), left buttock, left deltoid, left thigh, left upper arm, nasal, right arm (lower position), right arm (upper position), right buttock, right deltoid, right thigh or right upper arm.REASON_NOT_VACCINATEDRequired if VACCINATED is N, must be already had elsewhere, refused, unwell or vaccination contraindicated.NOTESOptionalDOSE_SEQUENCEOptional, must be a number or 1B, 1P, 1st Scheduled Booster, 2B, 2P, 2nd Scheduled Booster or 3P.CARE_SETTINGOptional, must be 1 (school) or 2 (clinic).CLINIC_NAMERequired if CARE_SETTING is 2, must be the name of a community clinic location.PERFORMING_PROFESSIONAL_EMAILRequired if uploading offline vaccination records.PERFORMING_PROFESSIONAL_FORENAMEOptionalPERFORMING_PROFESSIONAL_SURNAMEOptional\n\n\n\n        \n            \n                Row 2\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 3\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 4\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 5\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 6\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 7\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 8\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 9\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 10\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 11\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 12\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 13\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 14\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 15\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 16\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 17\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 18\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 19\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 20\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 21\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 22\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 23\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 24\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 26\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 27\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 28\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 29\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 30\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 31\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 32\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 33\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 34\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 35\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 36\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 37\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n            \n                Row 38\n            \n\n            \n                  SCHOOL_URN: The school URN is not recognised. If you’ve checked the URN, and you believe it’s valid, contact our support team.\n            \n        \n\n      \n    \n\n\n\n\n    \n  \n\n      \"\n\n","statusTrace":"  File \"/home/runner/work/manage-vaccinations-in-schools/manage-vaccinations-in-schools/mavis/test/annotations.py\", line 50, in wrapper\n    return_value = func(*args, **kwargs)\n  File \"/home/runner/work/manage-vaccinations-in-schools/manage-vaccinations-in-schools/mavis/test/pages/imports/import_records_wizard_page.py\", line 240, in verify_upload_output\n    expect(self.page.get_by_role(\"main\")).to_contain_text(_msg)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/home/runner/work/manage-vaccinations-in-schools/manage-vaccinations-in-schools/.venv/lib/python3.14/site-packages/playwright/sync_api/_generated.py\", line 19319, in to_contain_text\n    self._sync(\n    ~~~~~~~~~~^\n        self._impl_obj.to_contain_text(\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n        )\n        ^\n    )\n    ^\n  File \"/home/runner/work/manage-vaccinations-in-schools/manage-vaccinations-in-schools/.venv/lib/python3.14/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ~~~~~~~~~~~^^\n  File \"/home/runner/work/manage-vaccinations-in-schools/manage-vaccinations-in-schools/.venv/lib/python3.14/site-packages/playwright/_impl/_assertions.py\", line 229, in to_contain_text\n    await self._expect_impl(\n    ...<9 lines>...\n    )\n  File \"/home/runner/work/manage-vaccinations-in-schools/manage-vaccinations-in-schools/.venv/lib/python3.14/site-packages/playwright/_impl/_assertions.py\", line 85, in _expect_impl\n    raise AssertionError(\n        f\"{out_message}\\nActual value: {actual}{error_message} {format_call_log(result.get('log'))}\"\n    )\n","steps":[],"attachments":[{"uid":"dff0bd5919e3581f","name":"Screenshot on failure","source":"dff0bd5919e3581f.png","type":"image/png","size":173512}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<mavis.test.pages.imports.import_records_wizard_page.ImportRecordsWizardPage object at 0x7fd87a369fd0>,)"},{"name":"file_path","value":"PosixPath('vaccs/o_hist_positive.txt')"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":12,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"set_feature_flags::0","time":{"start":1769770271284,"stop":1769770271284,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context::0","time":{"start":1769770271285,"stop":1769770271293,"duration":8},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1769770271293,"stop":1769770271293,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1769770375747,"stop":1769770375747,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1769770375748,"stop":1769770375771,"duration":23},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1769770375772,"stop":1769770375785,"duration":13},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests::0","time":{"start":1769770375786,"stop":1769770376191,"duration":405},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"vaccinations"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_import_historical_vaccinations"},{"name":"host","value":"runnervmkj6or"},{"name":"thread","value":"3143-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_import_historical_vaccinations"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["vaccinations"]},"source":"10374aa06cb6359.json","parameterValues":[]}