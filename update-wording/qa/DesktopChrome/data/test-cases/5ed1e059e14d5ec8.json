{"uid":"5ed1e059e14d5ec8","name":"test_editing_session_programmes","fullName":"tests.test_sessions#test_editing_session_programmes","historyId":"12685cf04bc7a6371c53a3e8e694486b","time":{"start":1761728458992,"stop":1761728466200,"duration":7208},"description":"\nTest: Edit the programmes of an existing session and verify changes.\nSteps:\n1. Open a session with a fixed child.\n2. Edit the session to change its programmes.\n3. Save changes and verify the updated programmes are reflected.\n4. Verify the Flu tab appears for a child in the session.\nVerification:\n- Session programmes are updated correctly without errors.\n","descriptionHtml":"<p>Test: Edit the programmes of an existing session and verify changes.<br />\nSteps:</p>\n<ol>\n<li>Open a session with a fixed child.</li>\n<li>Edit the session to change its programmes.</li>\n<li>Save changes and verify the updated programmes are reflected.</li>\n<li>Verify the Flu tab appears for a child in the session.<br />\nVerification:</li>\n</ol>\n<ul>\n<li>Session programmes are updated correctly without errors.</li>\n</ul>\n","status":"failed","statusMessage":"AssertionError: Locator expected to be visible\nActual value: <element(s) not found> \nCall log:\n  - Expect \"to_be_visible\" with timeout 5000ms\n  - waiting for get_by_role(\"heading\", name=\"flu\")","statusTrace":"setup_fixed_child = None\nsessions_page = <mavis.test.pages.sessions.SessionsPage object at 0x7f2b7663d7f0>\nchildren = {'HPV': [Child(first_name='Sara', last_name='SHARP', nhs_number='9795090372', address=('Flat 46p', 'Martyn flat', 'Eas...onna86@example.org'), Parent(full_name='Anne Tucker', relationship='Mum', email_address='martinkieran@example.org')))]}\n\n    def test_editing_session_programmes(setup_fixed_child, sessions_page, children):\n        \"\"\"\n        Test: Edit the programmes of an existing session and verify changes.\n        Steps:\n        1. Open a session with a fixed child.\n        2. Edit the session to change its programmes.\n        3. Save changes and verify the updated programmes are reflected.\n        4. Verify the Flu tab appears for a child in the session.\n        Verification:\n        - Session programmes are updated correctly without errors.\n        \"\"\"\n        child = children[Programme.HPV][0]\n    \n        sessions_page.click_edit_session()\n        sessions_page.click_change_programmes()\n        sessions_page.add_programme(Programme.FLU)\n        sessions_page.click_continue_button()\n        sessions_page.expect_details(\"Programmes\", \"Flu HPV\")\n        sessions_page.click_save_changes()\n        sessions_page.page.pause()\n>       sessions_page.expect_session_to_have_programmes([Programme.FLU, Programme.HPV])\n\ntests/test_sessions.py:397: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mavis.test.pages.sessions.SessionsPage object at 0x7f2b7663d7f0>\nprogrammes = [<Programme.FLU: 'flu'>, <Programme.HPV: 'HPV'>]\n\n    def expect_session_to_have_programmes(self, programmes: list[Programme]) -> None:\n        for programme in programmes:\n>           expect(self.page.get_by_role(\"heading\", name=programme)).to_be_visible()\nE           AssertionError: Locator expected to be visible\nE           Actual value: <element(s) not found> \nE           Call log:\nE             - Expect \"to_be_visible\" with timeout 5000ms\nE             - waiting for get_by_role(\"heading\", name=\"flu\")\n\nmavis/test/pages/sessions.py:421: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"base_url","time":{"start":1761727903482,"stop":1761727903482,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_session_faker","time":{"start":1761727903482,"stop":1761727903483,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1761727903482,"stop":1761727903482,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1761727903483,"stop":1761727903483,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"year_groups","time":{"start":1761727903484,"stop":1761727903484,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"onboarding","time":{"start":1761727903484,"stop":1761727925647,"duration":22163},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1761727903484,"stop":1761727903484,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"programmes_enabled","time":{"start":1761727903484,"stop":1761727903484,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"team","time":{"start":1761727925647,"stop":1761727925647,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1761727925647,"stop":1761727925647,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"nurse","time":{"start":1761727925647,"stop":1761727925647,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests","time":{"start":1761727925647,"stop":1761727925647,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1761727925647,"stop":1761727925944,"duration":297},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1761727925944,"stop":1761727925944,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1761727925945,"stop":1761727925945,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1761727925945,"stop":1761727925945,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"connect_options","time":{"start":1761727925945,"stop":1761727925945,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1761727925945,"stop":1761727927184,"duration":1239},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder","time":{"start":1761727927184,"stop":1761727927185,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1761727927185,"stop":1761727927186,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1761727927186,"stop":1761727927186,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_token","time":{"start":1761727927186,"stop":1761727927186,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"basic_auth_credentials","time":{"start":1761727927186,"stop":1761727927186,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"reset_before_each_module","time":{"start":1761728087359,"stop":1761728089465,"duration":2106},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"schools","time":{"start":1761728087359,"stop":1761728087359,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"organisation","time":{"start":1761728087359,"stop":1761728087359,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clinics","time":{"start":1761728087359,"stop":1761728087359,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context","time":{"start":1761728449930,"stop":1761728449930,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1761728449930,"stop":1761728449935,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder","time":{"start":1761728449930,"stop":1761728449930,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"output_path","time":{"start":1761728449930,"stop":1761728449930,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1761728449935,"stop":1761728449961,"duration":26},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"flipper_page","time":{"start":1761728449961,"stop":1761728449961,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_as_nurse","time":{"start":1761728449961,"stop":1761728452413,"duration":2452},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1761728449961,"stop":1761728451482,"duration":1521},"status":"passed","steps":[{"name":"Go to log in page","time":{"start":1761728449961,"stop":1761728451482,"duration":1521},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Log in as User(username='tjohnson@example.net', password='tjohnson@example.net', role='nurse') and choose team Team(name='Jackson, Murphy and Bradley est. 1705', workgroup='S812M', careplus_venue_code='S812M', email='donald64@example.net', phone='(07700) 900153')","time":{"start":1761728451482,"stop":1761728452413,"duration":931},"status":"passed","steps":[{"name":"Log in as {1} and choose team {2}","time":{"start":1761728451482,"stop":1761728452413,"duration":931},"status":"passed","steps":[{"name":"Log in as User(username='tjohnson@example.net', password='tjohnson@example.net', role='nurse')","time":{"start":1761728451482,"stop":1761728452384,"duration":902},"status":"passed","steps":[{"name":"Log in as {1}","time":{"start":1761728451482,"stop":1761728452384,"duration":902},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='tjohnson@example.net', password='tjohnson@example.net', role='nurse'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(User(username='tjohnson@example.net', password='tjohnson@example.net', role='nurse'), Team(name='Jackson, Murphy and Bradley est. 1705', workgroup='S812M', careplus_venue_code='S812M', email='donald64@example.net', phone='(07700) 900153'))"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"set_feature_flags","time":{"start":1761728449961,"stop":1761728449961,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"log_in_page","time":{"start":1761728449961,"stop":1761728449961,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_tests","time":{"start":1761728452413,"stop":1761728452735,"duration":322},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761728452413,"stop":1761728452735,"duration":322},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761728452414,"stop":1761728452735,"duration":321},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"dashboard_page","time":{"start":1761728452413,"stop":1761728452413,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"children","time":{"start":1761728452735,"stop":1761728452739,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"sessions_page","time":{"start":1761728452740,"stop":1761728452741,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_data","time":{"start":1761728452740,"stop":1761728452740,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_fixed_child","time":{"start":1761728452741,"stop":1761728458992,"duration":6251},"status":"passed","steps":[{"name":"Click on 'HPV' session at School(name='Penair School', urn='136567', site=None)","time":{"start":1761728452741,"stop":1761728453438,"duration":697},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1761728452741,"stop":1761728453438,"duration":697},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='Penair School', urn='136567', site=None), <Programme.HPV: 'HPV'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Import class lists","time":{"start":1761728453443,"stop":1761728453905,"duration":462},"status":"passed","steps":[{"name":"Click on Import class lists","time":{"start":1761728453443,"stop":1761728453905,"duration":462},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761728453956,"stop":1761728454617,"duration":661},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761728453956,"stop":1761728454617,"duration":661},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Set input file to PosixPath('working/ClassFileMapping.FIXED_CHILD20251029090054.csv')","time":{"start":1761728454628,"stop":1761728454646,"duration":18},"status":"passed","steps":[{"name":"Set input file to {1}","time":{"start":1761728454628,"stop":1761728454646,"duration":18},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(PosixPath('working/ClassFileMapping.FIXED_CHILD20251029090054.csv'),)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Continue","time":{"start":1761728455646,"stop":1761728456195,"duration":549},"status":"passed","steps":[{"name":"Click Continue","time":{"start":1761728455646,"stop":1761728456195,"duration":549},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"_coverage","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click link with uploaded datetime","time":{"start":1761728456225,"stop":1761728456511,"duration":286},"status":"passed","steps":[{"name":"Click link with uploaded datetime","time":{"start":1761728456225,"stop":1761728456511,"duration":286},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761728457729,"stop":1761728458022,"duration":293},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761728457729,"stop":1761728458022,"duration":293},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761728458022,"stop":1761728458316,"duration":294},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761728458022,"stop":1761728458316,"duration":294},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on 'HPV' session at School(name='Penair School', urn='136567', site=None)","time":{"start":1761728458316,"stop":1761728458992,"duration":676},"status":"passed","steps":[{"name":"Click on {2} session at {1}","time":{"start":1761728458316,"stop":1761728458992,"duration":676},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(School(name='Penair School', urn='136567', site=None), <Programme.HPV: 'HPV'>)"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":18,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"setup_session_with_file_upload","time":{"start":1761728452741,"stop":1761728452741,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"import_records_page","time":{"start":1761728452741,"stop":1761728452741,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"\nTest: Edit the programmes of an existing session and verify changes.\nSteps:\n1. Open a session with a fixed child.\n2. Edit the session to change its programmes.\n3. Save changes and verify the updated programmes are reflected.\n4. Verify the Flu tab appears for a child in the session.\nVerification:\n- Session programmes are updated correctly without errors.\n","status":"failed","statusMessage":"AssertionError: Locator expected to be visible\nActual value: <element(s) not found> \nCall log:\n  - Expect \"to_be_visible\" with timeout 5000ms\n  - waiting for get_by_role(\"heading\", name=\"flu\")","statusTrace":"setup_fixed_child = None\nsessions_page = <mavis.test.pages.sessions.SessionsPage object at 0x7f2b7663d7f0>\nchildren = {'HPV': [Child(first_name='Sara', last_name='SHARP', nhs_number='9795090372', address=('Flat 46p', 'Martyn flat', 'Eas...onna86@example.org'), Parent(full_name='Anne Tucker', relationship='Mum', email_address='martinkieran@example.org')))]}\n\n    def test_editing_session_programmes(setup_fixed_child, sessions_page, children):\n        \"\"\"\n        Test: Edit the programmes of an existing session and verify changes.\n        Steps:\n        1. Open a session with a fixed child.\n        2. Edit the session to change its programmes.\n        3. Save changes and verify the updated programmes are reflected.\n        4. Verify the Flu tab appears for a child in the session.\n        Verification:\n        - Session programmes are updated correctly without errors.\n        \"\"\"\n        child = children[Programme.HPV][0]\n    \n        sessions_page.click_edit_session()\n        sessions_page.click_change_programmes()\n        sessions_page.add_programme(Programme.FLU)\n        sessions_page.click_continue_button()\n        sessions_page.expect_details(\"Programmes\", \"Flu HPV\")\n        sessions_page.click_save_changes()\n        sessions_page.page.pause()\n>       sessions_page.expect_session_to_have_programmes([Programme.FLU, Programme.HPV])\n\ntests/test_sessions.py:397: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <mavis.test.pages.sessions.SessionsPage object at 0x7f2b7663d7f0>\nprogrammes = [<Programme.FLU: 'flu'>, <Programme.HPV: 'HPV'>]\n\n    def expect_session_to_have_programmes(self, programmes: list[Programme]) -> None:\n        for programme in programmes:\n>           expect(self.page.get_by_role(\"heading\", name=programme)).to_be_visible()\nE           AssertionError: Locator expected to be visible\nE           Actual value: <element(s) not found> \nE           Call log:\nE             - Expect \"to_be_visible\" with timeout 5000ms\nE             - waiting for get_by_role(\"heading\", name=\"flu\")\n\nmavis/test/pages/sessions.py:421: AssertionError","steps":[{"name":"Click on Edit session","time":{"start":1761728458992,"stop":1761728459495,"duration":503},"status":"passed","steps":[{"name":"Click on Edit session","time":{"start":1761728458993,"stop":1761728459495,"duration":502},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Change programmes","time":{"start":1761728459495,"stop":1761728459770,"duration":275},"status":"passed","steps":[{"name":"Click on Change programmes","time":{"start":1761728459495,"stop":1761728459770,"duration":275},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Continue","time":{"start":1761728459822,"stop":1761728460381,"duration":559},"status":"passed","steps":[{"name":"Click on Continue","time":{"start":1761728459822,"stop":1761728460381,"duration":559},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click Save changes","time":{"start":1761728460400,"stop":1761728461194,"duration":794},"status":"passed","steps":[{"name":"Click Save changes","time":{"start":1761728460400,"stop":1761728461194,"duration":794},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":8,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"setup_fixed_child::0","time":{"start":1761728466215,"stop":1761728467453,"duration":1238},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1761728466215,"stop":1761728466458,"duration":243},"status":"passed","steps":[{"name":"Go to dashboard","time":{"start":1761728466215,"stop":1761728466458,"duration":243},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Manage vaccinations in schools","time":{"start":1761728466459,"stop":1761728466726,"duration":267},"status":"passed","steps":[{"name":"Click on Manage vaccinations in schools","time":{"start":1761728466459,"stop":1761728466726,"duration":267},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Click on Sessions","time":{"start":1761728466726,"stop":1761728467030,"duration":304},"status":"passed","steps":[{"name":"Click on Sessions","time":{"start":1761728466726,"stop":1761728467030,"duration":304},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"log_in_as_nurse::0","time":{"start":1761728467455,"stop":1761728468131,"duration":676},"status":"passed","steps":[{"name":"Log out","time":{"start":1761728467455,"stop":1761728468131,"duration":676},"status":"passed","steps":[{"name":"Log out","time":{"start":1761728467455,"stop":1761728468131,"duration":676},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"set_feature_flags::0","time":{"start":1761728468132,"stop":1761728468132,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"new_context::0","time":{"start":1761728468133,"stop":1761728468142,"duration":9},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_artifacts_recorder::0","time":{"start":1761728468142,"stop":1761728468142,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_pw_artifacts_folder::0","time":{"start":1761728757865,"stop":1761728757865,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1761728757865,"stop":1761728757889,"duration":24},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1761728757891,"stop":1761728757899,"duration":8},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_team_after_tests::0","time":{"start":1761728757900,"stop":1761728760627,"duration":2727},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"sessions"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_sessions"},{"name":"host","value":"runnervmwhb2z"},{"name":"thread","value":"3106-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_sessions"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["sessions"]},"source":"5ed1e059e14d5ec8.json","parameterValues":[]}